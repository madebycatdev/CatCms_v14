/*
 RequireJS 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var requirejs,require,define;
(function(Y){function w(b){return"[object Function]"===H.call(b)}function C(b){return"[object Array]"===H.call(b)}function r(b,c){if(b){var e;for(e=0;e<b.length&&(!b[e]||!c(b[e],e,b));e+=1);}}function I(b,c){if(b){var e;for(e=b.length-1;-1<e&&(!b[e]||!c(b[e],e,b));e-=1);}}function x(b,c){for(var e in b)if(b.hasOwnProperty(e)&&c(b[e],e))break}function J(b,c,e,g){c&&x(c,function(c,k){if(e||!D.call(b,k))g&&"string"!==typeof c?(b[k]||(b[k]={}),J(b[k],c,e,g)):b[k]=c});return b}function t(b,c){return function(){return c.apply(b,
arguments)}}function Z(b){if(!b)return b;var c=Y;r(b.split("."),function(b){c=c[b]});return c}function $(b,c,e){return function(){var g=fa.call(arguments,0),f;if(e&&w(f=g[g.length-1]))f.__requireJsBuild=!0;g.push(c);return b.apply(null,g)}}function aa(b,c,e){r([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(g){var f=g[1]||g[0];b[g[0]]=c?$(c[f],e):function(){var b=y[L];return b[f].apply(b,arguments)}})}function E(b,c,e,g){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+
b);c.requireType=b;c.requireModules=g;e&&(c.originalError=e);return c}function ga(b){function c(a,d,l){var i,b,n,c,e,f,h,g=d&&d.split("/");i=g;var k=m.map,j=k&&k["*"];if(a&&"."===a.charAt(0))if(d){i=m.pkgs[d]?g=[d]:g.slice(0,g.length-1);d=a=i.concat(a.split("/"));for(i=0;d[i];i+=1)if(b=d[i],"."===b)d.splice(i,1),i-=1;else if(".."===b)if(1===i&&(".."===d[2]||".."===d[0]))break;else 0<i&&(d.splice(i-1,2),i-=2);i=m.pkgs[d=a[0]];a=a.join("/");i&&a===d+"/"+i.main&&(a=d)}else 0===a.indexOf("./")&&(a=a.substring(2));
if(l&&(g||j)&&k){d=a.split("/");for(i=d.length;0<i;i-=1){n=d.slice(0,i).join("/");if(g)for(b=g.length;0<b;b-=1)if(l=k[g.slice(0,b).join("/")])if(l=l[n]){c=l;e=i;break}if(c)break;!f&&(j&&j[n])&&(f=j[n],h=i)}!c&&f&&(c=f,e=h);c&&(d.splice(0,e,c),a=d.join("/"))}return a}function e(a){v&&r(document.getElementsByTagName("script"),function(d){if(d.getAttribute("data-requiremodule")===a&&d.getAttribute("data-requirecontext")===h.contextName)return d.parentNode.removeChild(d),!0})}function g(a){var d=m.paths[a];
if(d&&C(d)&&1<d.length)return e(a),d.shift(),h.undef(a),h.require([a]),!0}function f(a,d,l,i){var b,n,f=a?a.indexOf("!"):-1,e=null,g=d?d.name:null,k=a,m=!0,j="";a||(m=!1,a="_@r"+(I+=1));-1!==f&&(e=a.substring(0,f),a=a.substring(f+1,a.length));e&&(e=c(e,g,i),n=p[e]);a&&(e?j=n&&n.normalize?n.normalize(a,function(a){return c(a,g,i)}):c(a,g,i):(j=c(a,g,i),b=h.nameToUrl(j)));a=e&&!n&&!l?"_unnormalized"+(L+=1):"";return{prefix:e,name:j,parentMap:d,unnormalized:!!a,url:b,originalName:k,isDefine:m,id:(e?
e+"!"+j:j)+a}}function K(a){var d=a.id,l=j[d];l||(l=j[d]=new h.Module(a));return l}function q(a,d,l){var i=a.id,b=j[i];if(D.call(p,i)&&(!b||b.defineEmitComplete))"defined"===d&&l(p[i]);else K(a).on(d,l)}function o(a,d){var l=a.requireModules,b=!1;if(d)d(a);else if(r(l,function(d){if(d=j[d])d.error=a,d.events.error&&(b=!0,d.emit("error",a))}),!b)k.onError(a)}function s(){O.length&&(ha.apply(z,[z.length-1,0].concat(O)),O=[])}function u(a,d,l){a=a&&a.map;d=$(l||h.require,a,d);aa(d,h,a);d.isBrowser=v;
return d}function y(a){delete j[a];r(M,function(d,l){if(d.map.id===a)return M.splice(l,1),d.defined||(h.waitCount-=1),!0})}function A(a,d){var l=a.map.id,b=a.depMaps,c;if(a.inited){if(d[l])return a;d[l]=!0;r(b,function(a){if(a=j[a.id])return!a.inited||!a.enabled?(c=null,delete d[l],!0):c=A(a,J({},d))});return c}}function B(a,d,l){var b=a.map.id,c=a.depMaps;if(a.inited&&a.map.isDefine){if(d[b])return p[b];d[b]=a;r(c,function(n){var n=n.id,c=j[n];!P[n]&&c&&(!c.inited||!c.enabled?l[b]=!0:(c=B(c,d,l),
l[n]||a.defineDepById(n,c)))});a.check(!0);return p[b]}}function G(a){a.check()}function R(){var a,d,b,i,c=(b=1E3*m.waitSeconds)&&h.startTime+b<(new Date).getTime(),n=[],f=!1,k=!0;if(!S){S=!0;x(j,function(b){a=b.map;d=a.id;if(b.enabled&&!b.error)if(!b.inited&&c)g(d)?f=i=!0:(n.push(d),e(d));else if(!b.inited&&(b.fetched&&a.isDefine)&&(f=!0,!a.prefix))return k=!1});if(c&&n.length)return b=E("timeout","Load timeout for modules: "+n,null,n),b.contextName=h.contextName,o(b);k&&(r(M,function(a){if(!a.defined){var a=
A(a,{}),d={};a&&(B(a,d,{}),x(d,G))}}),x(j,G));if((!c||i)&&f)if((v||ba)&&!T)T=setTimeout(function(){T=0;R()},50);S=!1}}function U(a){K(f(a[0],null,!0)).init(a[1],a[2])}function H(a){var a=a.currentTarget||a.srcElement,d=h.onScriptLoad;a.detachEvent&&!V?a.detachEvent("onreadystatechange",d):a.removeEventListener("load",d,!1);d=h.onScriptError;a.detachEvent&&!V||a.removeEventListener("error",d,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}var S,W,h,P,T,m={waitSeconds:7,baseUrl:"./",paths:{},
pkgs:{},shim:{}},j={},X={},z=[],p={},Q={},I=1,L=1,M=[];P={require:function(a){return u(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=p[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return m.config&&m.config[a.map.id]||{}},exports:p[a.map.id]}}};W=function(a){this.events=X[a.id]||{};this.map=a;this.shim=m.shim[a.id];this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};W.prototype={init:function(a,
d,b,i){i=i||{};if(!this.inited){this.factory=d;if(b)this.on("error",b);else this.events.error&&(b=t(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.depMaps.rjsSkipMap=a.rjsSkipMap;this.errback=b;this.inited=!0;this.ignore=i.ignore;i.enabled||this.enabled?this.enable():this.check()}},defineDepById:function(a,d){var b;r(this.depMaps,function(d,c){if(d.id===a)return b=c,!0});return this.defineDep(b,d)},defineDep:function(a,d){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=
1,this.depExports[a]=d)},fetch:function(){if(!this.fetched){this.fetched=!0;h.startTime=(new Date).getTime();var a=this.map;if(this.shim)u(this,!0)(this.shim.deps||[],t(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;Q[a]||(Q[a]=!0,h.load(this.map.id,a))},check:function(a){if(this.enabled&&!this.enabling){var d,b,c=this.map.id;b=this.depExports;var e=this.exports,n=this.factory;if(this.inited)if(this.error)this.emit("error",
this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(w(n)){if(this.events.error)try{e=h.execCb(c,n,b,e)}catch(f){d=f}else e=h.execCb(c,n,b,e);this.map.isDefine&&((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports));if(d)return d.requireMap=this.map,d.requireModules=[this.map.id],d.requireType="define",o(this.error=d)}else e=n;this.exports=e;if(this.map.isDefine&&!this.ignore&&(p[c]=e,k.onResourceLoad))k.onResourceLoad(h,
this.map,this.depMaps);delete j[c];this.defined=!0;h.waitCount-=1;0===h.waitCount&&(M=[])}this.defining=!1;!a&&(this.defined&&!this.defineEmitted)&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,d=a.id,b=f(a.prefix,null,!1,!0);q(b,"defined",t(this,function(b){var l;l=this.map.name;var e=this.map.parentMap?this.map.parentMap.name:null;if(this.map.unnormalized){if(b.normalize&&(l=b.normalize(l,function(a){return c(a,
e,!0)})||""),b=f(a.prefix+"!"+l,this.map.parentMap,!1,!0),q(b,"defined",t(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),b=j[b.id]){if(this.events.error)b.on("error",t(this,function(a){this.emit("error",a)}));b.enable()}}else l=t(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),l.error=t(this,function(a){this.inited=!0;this.error=a;a.requireModules=[d];x(j,function(a){0===a.map.id.indexOf(d+"_unnormalized")&&y(a.map.id)});o(a)}),l.fromText=
function(a,b){var d=N;d&&(N=!1);K(f(a));k.exec(b);d&&(N=!0);h.completeLoad(a)},b.load(a.name,u(a.parentMap,!0,function(a,b,d){a.rjsSkipMap=true;return h.require(a,b,d)}),l,m)}));h.enable(b,this);this.pluginMaps[b.id]=b},enable:function(){this.enabled=!0;this.waitPushed||(M.push(this),h.waitCount+=1,this.waitPushed=!0);this.enabling=!0;r(this.depMaps,t(this,function(a,b){var c,e;if(typeof a==="string"){a=f(a,this.map.isDefine?this.map:this.map.parentMap,false,!this.depMaps.rjsSkipMap);this.depMaps[b]=
a;if(c=P[a.id]){this.depExports[b]=c(this);return}this.depCount=this.depCount+1;q(a,"defined",t(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&q(a,"error",this.errback)}c=a.id;e=j[c];!P[c]&&(e&&!e.enabled)&&h.enable(a,this)}));x(this.pluginMaps,t(this,function(a){var b=j[a.id];b&&!b.enabled&&h.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){r(this.events[a],function(a){a(b)});"error"===
a&&delete this.events[a]}};return h={config:m,contextName:b,registry:j,defined:p,urlFetched:Q,waitCount:0,defQueue:z,Module:W,makeModuleMap:f,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=m.pkgs,c=m.shim,e=m.paths,g=m.map;J(m,a,!0);m.paths=J(e,a.paths,!0);a.map&&(m.map=J(g||{},a.map,!0,!0));a.shim&&(x(a.shim,function(a,b){C(a)&&(a={deps:a});if(a.exports&&!a.exports.__buildReady)a.exports=h.makeShimExports(a.exports);c[b]=a}),m.shim=c);a.packages&&
(r(a.packages,function(a){a=typeof a==="string"?{name:a}:a;b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ia,"").replace(ca,"")}}),m.pkgs=b);x(j,function(a,b){if(!a.inited&&!a.map.unnormalized)a.map=f(b)});if(a.deps||a.callback)h.require(a.deps||[],a.callback)},makeShimExports:function(a){var b;return"string"===typeof a?(b=function(){return Z(a)},b.exports=a,b):function(){return a.apply(Y,arguments)}},requireDefined:function(a,b){var c=f(a,b,!1,!0).id;return D.call(p,
c)},requireSpecified:function(a,b){a=f(a,b,!1,!0).id;return D.call(p,a)||D.call(j,a)},require:function(a,d,c,e){var g;if("string"===typeof a){if(w(d))return o(E("requireargs","Invalid require call"),c);if(k.get)return k.get(h,a,d);a=f(a,d,!1,!0);a=a.id;return!D.call(p,a)?o(E("notloaded",'Module name "'+a+'" has not been loaded yet for context: '+b)):p[a]}c&&!w(c)&&(e=c,c=void 0);d&&!w(d)&&(e=d,d=void 0);for(s();z.length;){g=z.shift();if(null===g[0])return o(E("mismatch","Mismatched anonymous define() module: "+
g[g.length-1]));U(g)}K(f(null,e)).init(a,d,c,{enabled:!0});R();return h.require},undef:function(a){s();var b=f(a,null,!0),c=j[a];delete p[a];delete Q[b.url];delete X[a];c&&(c.events.defined&&(X[a]=c.events),y(a))},enable:function(a){j[a.id]&&K(a).enable()},completeLoad:function(a){var b,c,e=m.shim[a]||{},f=e.exports&&e.exports.exports;for(s();z.length;){c=z.shift();if(null===c[0]){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);U(c)}c=j[a];if(!b&&!p[a]&&c&&!c.inited){if(m.enforceDefine&&(!f||!Z(f)))return g(a)?
void 0:o(E("nodefine","No define call for "+a,null,[a]));U([a,e.deps||[],e.exports])}R()},toUrl:function(a,b){var e=a.lastIndexOf("."),f=null;-1!==e&&(f=a.substring(e,a.length),a=a.substring(0,e));return h.nameToUrl(c(a,b&&b.id,!0),f)},nameToUrl:function(a,b){var c,e,f,g,h,j;if(k.jsExtRegExp.test(a))g=a+(b||"");else{c=m.paths;e=m.pkgs;g=a.split("/");for(h=g.length;0<h;h-=1)if(j=g.slice(0,h).join("/"),f=e[j],j=c[j]){C(j)&&(j=j[0]);g.splice(0,h,j);break}else if(f){c=a===f.name?f.location+"/"+f.main:
f.location;g.splice(0,h,c);break}g=g.join("/");g+=b||(/\?/.test(g)?"":".js");g=("/"===g.charAt(0)||g.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+g}return m.urlArgs?g+((-1===g.indexOf("?")?"?":"&")+m.urlArgs):g},load:function(a,b){k.load(h,a,b)},execCb:function(a,b,c,e){return b.apply(e,c)},onScriptLoad:function(a){if("load"===a.type||ja.test((a.currentTarget||a.srcElement).readyState))F=null,a=H(a),h.completeLoad(a.id)},onScriptError:function(a){var b=H(a);if(!g(b.id))return o(E("scripterror","Script error",
a,[b.id]))}}}function ka(){if(F&&"interactive"===F.readyState)return F;I(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState)return F=b});return F}var k,q,u,A,s,B,F,G,da,ea,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ca=/\.js$/,ia=/^\.\//;q=Object.prototype;var H=q.toString,D=q.hasOwnProperty;q=Array.prototype;var fa=q.slice,ha=q.splice,v=!!("undefined"!==typeof window&&navigator&&document),ba=!v&&"undefined"!==
typeof importScripts,ja=v&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,L="_",V="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),y={},o={},O=[],N=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(w(requirejs))return;o=requirejs;requirejs=void 0}"undefined"!==typeof require&&!w(require)&&(o=require,require=void 0);k=requirejs=function(b,c,e,g){var f,o=L;if(!C(b)&&typeof b!=="string"){f=b;if(C(c)){b=c;c=e;e=g}else b=[]}if(f&&f.context)o=
f.context;(g=y[o])||(g=y[o]=k.s.newContext(o));f&&g.configure(f);return g.require(b,c,e)};k.config=function(b){return k(b)};require||(require=k);k.version="2.0.5";k.jsExtRegExp=/^\/|:|\?|\.js$/;k.isBrowser=v;q=k.s={contexts:y,newContext:ga};k({});aa(k);if(v&&(u=q.head=document.getElementsByTagName("head")[0],A=document.getElementsByTagName("base")[0]))u=q.head=A.parentNode;k.onError=function(b){throw b;};k.load=function(b,c,e){var g=b&&b.config||{},f;if(v){f=g.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml",
"html:script"):document.createElement("script");f.type=g.scriptType||"text/javascript";f.charset="utf-8";f.async=true;f.setAttribute("data-requirecontext",b.contextName);f.setAttribute("data-requiremodule",c);if(f.attachEvent&&!(f.attachEvent.toString&&f.attachEvent.toString().indexOf("[native code")<0)&&!V){N=true;f.attachEvent("onreadystatechange",b.onScriptLoad)}else{f.addEventListener("load",b.onScriptLoad,false);f.addEventListener("error",b.onScriptError,false)}f.src=e;G=f;A?u.insertBefore(f,
A):u.appendChild(f);G=null;return f}if(ba){importScripts(e);b.completeLoad(c)}};v&&I(document.getElementsByTagName("script"),function(b){if(!u)u=b.parentNode;if(s=b.getAttribute("data-main")){if(!o.baseUrl){B=s.split("/");da=B.pop();ea=B.length?B.join("/")+"/":"./";o.baseUrl=ea;s=da}s=s.replace(ca,"");o.deps=o.deps?o.deps.concat(s):[s];return true}});define=function(b,c,e){var g,f;if(typeof b!=="string"){e=c;c=b;b=null}if(!C(c)){e=c;c=[]}if(!c.length&&w(e)&&e.length){e.toString().replace(la,"").replace(ma,
function(b,e){c.push(e)});c=(e.length===1?["require"]:["require","exports","module"]).concat(c)}if(N)if(g=G||ka()){b||(b=g.getAttribute("data-requiremodule"));f=y[g.getAttribute("data-requirecontext")]}(f?f.defQueue:O).push([b,c,e])};define.amd={jQuery:!0};k.exec=function(b){return eval(b)};k(o)}})(this);(function(o){function eb(a){var b=ma[a]={},c,e,a=a.split(/\s+/);c=0;for(e=a.length;c<e;c++)b[a[c]]=!0;return b}function na(a,b,d){if(void 0===d&&1===a.nodeType)if(d="data-"+b.replace(fb,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:c.isNumeric(d)?+d:gb.test(d)?c.parseJSON(d):d}catch(e){}c.data(a,b,d)}else d=void 0;return d}function $(a){for(var b in a)if(!("data"===b&&c.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function oa(a,
b,d){var e=b+"defer",f=b+"queue",g=b+"mark",i=c._data(a,e);i&&(("queue"===d||!c._data(a,f))&&("mark"===d||!c._data(a,g)))&&setTimeout(function(){!c._data(a,f)&&!c._data(a,g)&&(c.removeData(a,e,!0),i.fire())},0)}function G(){return!1}function P(){return!0}function pa(a,b,d){b=b||0;if(c.isFunction(b))return c.grep(a,function(a,c){return!!b.call(a,c,a)===d});if(b.nodeType)return c.grep(a,function(a){return a===b===d});if("string"===typeof b){var e=c.grep(a,function(a){return 1===a.nodeType});if(hb.test(b))return c.filter(b,
e,!d);b=c.filter(b,e)}return c.grep(a,function(a){return 0<=c.inArray(a,b)===d})}function qa(a){var b=ra.split("|"),a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function sa(a,b){if(1===b.nodeType&&c.hasData(a)){var d,e,f;e=c._data(a);var g=c._data(b,e),i=e.events;if(i)for(d in delete g.handle,g.events={},i){e=0;for(f=i[d].length;e<f;e++)c.event.add(b,d,i[d][e])}g.data&&(g.data=c.extend({},g.data))}}function ta(a,b){var d;if(1===b.nodeType){b.clearAttributes&&
b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);d=b.nodeName.toLowerCase();if("object"===d)b.outerHTML=a.outerHTML;else if("input"===d&&("checkbox"===a.type||"radio"===a.type)){if(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value)b.value=a.value}else"option"===d?b.selected=a.defaultSelected:"input"===d||"textarea"===d?b.defaultValue=a.defaultValue:"script"===d&&b.text!==a.text&&(b.text=a.text);b.removeAttribute(c.expando);b.removeAttribute("_submit_attached");b.removeAttribute("_change_attached")}}
function T(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function ua(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function va(a){var b=(a.nodeName||"").toLowerCase();"input"===b?ua(a):"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&c.grep(a.getElementsByTagName("input"),ua)}function wa(a,b,d){var e="width"===b?a.offsetWidth:a.offsetHeight,f="width"===b?1:0;if(0<
e){if("border"!==d)for(;4>f;f+=2)d||(e-=parseFloat(c.css(a,"padding"+H[f]))||0),e="margin"===d?e+(parseFloat(c.css(a,d+H[f]))||0):e-(parseFloat(c.css(a,"border"+H[f]+"Width"))||0);return e+"px"}e=L(a,b);if(0>e||null==e)e=a.style[b];if(aa.test(e))return e;e=parseFloat(e)||0;if(d)for(;4>f;f+=2)e+=parseFloat(c.css(a,"padding"+H[f]))||0,"padding"!==d&&(e+=parseFloat(c.css(a,"border"+H[f]+"Width"))||0),"margin"===d&&(e+=parseFloat(c.css(a,d+H[f]))||0);return e+"px"}function xa(a){return function(b,d){"string"!==
typeof b&&(d=b,b="*");if(c.isFunction(d))for(var e=b.toLowerCase().split(ya),f=0,g=e.length,i,h;f<g;f++)i=e[f],(h=/^\+/.test(i))&&(i=i.substr(1)||"*"),i=a[i]=a[i]||[],i[h?"unshift":"push"](d)}}function U(a,b,c,e,f,g){f=f||b.dataTypes[0];g=g||{};g[f]=!0;for(var f=a[f],i=0,h=f?f.length:0,j=a===ba,m;i<h&&(j||!m);i++)m=f[i](b,c,e),"string"===typeof m&&(!j||g[m]?m=void 0:(b.dataTypes.unshift(m),m=U(a,b,c,e,m,g)));if((j||!m)&&!g["*"])m=U(a,b,c,e,"*",g);return m}function za(a,b){var d,e,f=c.ajaxSettings.flatOptions||
{};for(d in b)void 0!==b[d]&&((f[d]?a:e||(e={}))[d]=b[d]);e&&c.extend(!0,a,e)}function ca(a,b,d,e){if(c.isArray(b))c.each(b,function(b,c){d||ib.test(a)?e(a,c):ca(a+"["+("object"===typeof c?b:"")+"]",c,d,e)});else if(!d&&"object"===c.type(b))for(var f in b)ca(a+"["+f+"]",b[f],d,e);else e(a,b)}function Aa(){try{return new o.XMLHttpRequest}catch(a){}}function Ba(){setTimeout(jb,0);return V=c.now()}function jb(){V=void 0}function I(a,b){var d={};c.each(W.concat.apply([],W.slice(0,b)),function(){d[this]=
a});return d}function Ca(a){if(!da[a]){var b=k.body,d=c("<"+a+">").appendTo(b),e=d.css("display");d.remove();if("none"===e||""===e){w||(w=k.createElement("iframe"),w.frameBorder=w.width=w.height=0);b.appendChild(w);if(!E||!w.createElement)E=(w.contentWindow||w.contentDocument).document,E.write((c.support.boxModel?"<!doctype html>":"")+"<html><body>"),E.close();d=E.createElement(a);E.body.appendChild(d);e=c.css(d,"display");b.removeChild(w)}da[a]=e}return da[a]}function Da(a){return c.isWindow(a)?
a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var k=o.document,kb=o.navigator,lb=o.location,c=function(){function a(){if(!b.isReady){try{k.documentElement.doScroll("left")}catch(c){setTimeout(a,1);return}b.ready()}}var b=function(a,c){return new b.fn.init(a,c,f)},c=o.jQuery,e=o.$,f,g=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,i=/\S/,h=/^\s+/,j=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,mb=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
n=/(?:^|:|,)(?:\s*\[)+/g,Q=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,s=/(msie) ([\w.]+)/,t=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,A=/^-ms-/,q=function(a,b){return(b+"").toUpperCase()},C=kb.userAgent,r,B,nb=Object.prototype.toString,ea=Object.prototype.hasOwnProperty,fa=Array.prototype.push,S=Array.prototype.slice,Ea=String.prototype.trim,Fa=Array.prototype.indexOf,Ga={};b.fn=b.prototype={constructor:b,init:function(a,c,d){var e;if(!a)return this;if(a.nodeType)return this.context=
this[0]=a,this.length=1,this;if("body"===a&&!c&&k.body)return this.context=k,this[0]=k.body,this.selector=a,this.length=1,this;if("string"===typeof a){if((e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:g.exec(a))&&(e[1]||!c)){if(e[1])return d=(c=c instanceof b?c[0]:c)?c.ownerDocument||c:k,(a=m.exec(a))?b.isPlainObject(c)?(a=[k.createElement(a[1])],b.fn.attr.call(a,c,!0)):a=[d.createElement(a[1])]:(a=b.buildFragment([e[1]],[d]),a=(a.cacheable?b.clone(a.fragment):a.fragment).childNodes),
b.merge(this,a);if((c=k.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}this.context=k;this.selector=a;return this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}if(b.isFunction(a))return d.ready(a);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return b.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return S.call(this,0)},get:function(a){return null==
a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,c,d){var e=this.constructor();b.isArray(a)?fa.apply(e,a):b.merge(e,a);e.prevObject=this;e.context=this.context;"find"===c?e.selector=this.selector+(this.selector?" ":"")+d:c&&(e.selector=this.selector+"."+c+"("+d+")");return e},each:function(a,c){return b.each(this,a,c)},ready:function(a){b.bindReady();r.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
slice:function(){return this.pushStack(S.apply(this,arguments),"slice",S.call(arguments).join(","))},map:function(a){return this.pushStack(b.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:fa,sort:[].sort,splice:[].splice};b.fn.init.prototype=b.fn;b.extend=b.fn.extend=function(){var a,c,d,e,f,r=arguments[0]||{},g=1,i=arguments.length,h=!1;"boolean"===typeof r&&(h=r,r=arguments[1]||{},g=2);"object"!==typeof r&&!b.isFunction(r)&&(r=
{});i===g&&(r=this,--g);for(;g<i;g++)if(null!=(a=arguments[g]))for(c in a)d=r[c],e=a[c],r!==e&&(h&&e&&(b.isPlainObject(e)||(f=b.isArray(e)))?(f?(f=!1,d=d&&b.isArray(d)?d:[]):d=d&&b.isPlainObject(d)?d:{},r[c]=b.extend(h,d,e)):void 0!==e&&(r[c]=e));return r};b.extend({noConflict:function(a){o.$===b&&(o.$=e);a&&o.jQuery===b&&(o.jQuery=c);return b},isReady:!1,readyWait:1,holdReady:function(a){a?b.readyWait++:b.ready(!0)},ready:function(a){if(!0===a&&!--b.readyWait||!0!==a&&!b.isReady){if(!k.body)return setTimeout(b.ready,
1);b.isReady=!0;!0!==a&&0<--b.readyWait||(r.fireWith(k,[b]),b.fn.trigger&&b(k).trigger("ready").off("ready"))}},bindReady:function(){if(!r){r=b.Callbacks("once memory");if("complete"===k.readyState)return setTimeout(b.ready,1);if(k.addEventListener)k.addEventListener("DOMContentLoaded",B,!1),o.addEventListener("load",b.ready,!1);else if(k.attachEvent){k.attachEvent("onreadystatechange",B);o.attachEvent("onload",b.ready);var c=!1;try{c=null==o.frameElement}catch(d){}k.documentElement.doScroll&&c&&
a()}}},isFunction:function(a){return"function"===b.type(a)},isArray:Array.isArray||function(a){return"array"===b.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?""+a:Ga[nb.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==b.type(a)||a.nodeType||b.isWindow(a))return!1;try{if(a.constructor&&!ea.call(a,"constructor")&&!ea.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);
return void 0===d||ea.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(a){if("string"!==typeof a||!a)return null;a=b.trim(a);if(o.JSON&&o.JSON.parse)return o.JSON.parse(a);if(p.test(a.replace(l,"@").replace(mb,"]").replace(n,"")))return(new Function("return "+a))();b.error("Invalid JSON: "+a)},parseXML:function(a){if("string"!==typeof a||!a)return null;var c,d;try{o.DOMParser?(d=new DOMParser,c=d.parseFromString(a,"text/xml")):
(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a))}catch(e){c=void 0}(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+a);return c},noop:function(){},globalEval:function(a){a&&i.test(a)&&(o.execScript||function(a){o.eval.call(o,a)})(a)},camelCase:function(a){return a.replace(A,"ms-").replace(v,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,r=a.length,g=void 0===
r||b.isFunction(a);if(d)if(g)for(e in a){if(!1===c.apply(a[e],d))break}else for(;f<r&&!1!==c.apply(a[f++],d););else if(g)for(e in a){if(!1===c.call(a[e],e,a[e]))break}else for(;f<r&&!1!==c.call(a[f],f,a[f++]););return a},trim:Ea?function(a){return null==a?"":Ea.call(a)}:function(a){return null==a?"":a.toString().replace(h,"").replace(j,"")},makeArray:function(a,c){var d=c||[];if(null!=a){var e=b.type(a);null==a.length||"string"===e||"function"===e||"regexp"===e||b.isWindow(a)?fa.call(d,a):b.merge(d,
a)}return d},inArray:function(a,b,c){var d;if(b){if(Fa)return Fa.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=a.length,d=0;if("number"===typeof b.length)for(var e=b.length;d<e;d++)a[c++]=b[d];else for(;void 0!==b[d];)a[c++]=b[d++];a.length=c;return a},grep:function(a,b,c){for(var d=[],e,c=!!c,f=0,r=a.length;f<r;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var e,f,r=[],g=0,i=a.length;if(a instanceof
b||void 0!==i&&"number"===typeof i&&(0<i&&a[0]&&a[i-1]||0===i||b.isArray(a)))for(;g<i;g++)e=c(a[g],g,d),null!=e&&(r[r.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(r[r.length]=e);return r.concat.apply([],r)},guid:1,proxy:function(a,c){if("string"===typeof c)var d=a[c],c=a,a=d;if(b.isFunction(a)){var e=S.call(arguments,2),d=function(){return a.apply(c,e.concat(S.call(arguments)))};d.guid=a.guid=a.guid||d.guid||b.guid++;return d}},access:function(a,c,d,e,f,r,g){var i,h=null==d,B=0,j=a.length;if(d&&
"object"===typeof d){for(B in d)b.access(a,c,B,d[B],1,r,e);f=1}else if(void 0!==e){i=void 0===g&&b.isFunction(e);h&&(i?(i=c,c=function(a,c,d){return i.call(b(a),d)}):(c.call(a,e),c=null));if(c)for(;B<j;B++)c(a[B],d,i?e.call(a[B],B,c(a[B],d)):e,g);f=1}return f?a:h?c.call(a):j?c(a[0],d):r},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();a=Q.exec(a)||y.exec(a)||s.exec(a)||0>a.indexOf("compatible")&&t.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,
c){return new a.fn.init(b,c)}b.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,e){e&&(e instanceof b&&!(e instanceof a))&&(e=a(e));return b.fn.init.call(this,d,e,c)};a.fn.init.prototype=a.fn;var c=a(k);return a},browser:{}});b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){Ga["[object "+b+"]"]=b.toLowerCase()});C=b.uaMatch(C);C.browser&&(b.browser[C.browser]=!0,b.browser.version=C.version);
b.browser.webkit&&(b.browser.safari=!0);i.test(" ")&&(h=/^[\s\xA0]+/,j=/[\s\xA0]+$/);f=b(k);k.addEventListener?B=function(){k.removeEventListener("DOMContentLoaded",B,false);b.ready()}:k.attachEvent&&(B=function(){if(k.readyState==="complete"){k.detachEvent("onreadystatechange",B);b.ready()}});return b}(),ma={};c.Callbacks=function(a){var a=a?ma[a]||eb(a):{},b=[],d=[],e,f,g,i,h,j,m=function(d){var e,f,g,i;e=0;for(f=d.length;e<f;e++)g=d[e],i=c.type(g),"array"===i?m(g):"function"===i&&(!a.unique||!l.has(g))&&
b.push(g)},p=function(c,m){m=m||[];e=!a.memory||[c,m];g=f=!0;j=i||0;i=0;for(h=b.length;b&&j<h;j++)if(!1===b[j].apply(c,m)&&a.stopOnFalse){e=!0;break}g=!1;b&&(a.once?!0===e?l.disable():b=[]:d&&d.length&&(e=d.shift(),l.fireWith(e[0],e[1])))},l={add:function(){if(b){var a=b.length;m(arguments);g?h=b.length:e&&!0!==e&&(i=a,p(e[0],e[1]))}return this},remove:function(){if(b)for(var c=arguments,d=0,e=c.length;d<e;d++)for(var f=0;f<b.length&&!(c[d]===b[f]&&(g&&f<=h&&(h--,f<=j&&j--),b.splice(f--,1),a.unique));f++);
return this},has:function(a){if(b)for(var c=0,d=b.length;c<d;c++)if(a===b[c])return!0;return!1},empty:function(){b=[];return this},disable:function(){b=d=e=void 0;return this},disabled:function(){return!b},lock:function(){d=void 0;(!e||!0===e)&&l.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(g?a.once||d.push([b,c]):(!a.once||!e)&&p(b,c));return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!f}};return l};var ga=[].slice;c.extend({Deferred:function(a){var b=
c.Callbacks("once memory"),d=c.Callbacks("once memory"),e=c.Callbacks("memory"),f="pending",g={resolve:b,reject:d,notify:e},i={done:b.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:b.fired,isRejected:d.fired,then:function(a,b,c){h.done(a).fail(b).progress(c);return this},always:function(){h.done.apply(h,arguments).fail.apply(h,arguments);return this},pipe:function(a,b,d){return c.Deferred(function(e){c.each({done:[a,"resolve"],fail:[b,"reject"],progress:[d,"notify"]},function(a,
b){var d=b[0],f=b[1],g;if(c.isFunction(d))h[a](function(){if((g=d.apply(this,arguments))&&c.isFunction(g.promise))g.promise().then(e.resolve,e.reject,e.notify);else e[f+"With"](this===h?e:this,[g])});else h[a](e[f])})}).promise()},promise:function(a){if(null==a)a=i;else for(var b in i)a[b]=i[b];return a}},h=i.promise({}),j;for(j in g)h[j]=g[j].fire,h[j+"With"]=g[j].fireWith;h.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},b.disable,e.lock);a&&a.call(h,h);return h},when:function(a){function b(a){return function(b){e[a]=
1<arguments.length?ga.call(arguments,0):b;--h||j.resolveWith(j,e)}}function d(a){return function(b){i[a]=1<arguments.length?ga.call(arguments,0):b;j.notifyWith(m,i)}}var e=ga.call(arguments,0),f=0,g=e.length,i=Array(g),h=g,j=1>=g&&a&&c.isFunction(a.promise)?a:c.Deferred(),m=j.promise();if(1<g){for(;f<g;f++)e[f]&&e[f].promise&&c.isFunction(e[f].promise)?e[f].promise().then(b(f),j.reject,d(f)):--h;h||j.resolveWith(j,e)}else j!==a&&j.resolveWith(j,g?[a]:[]);return m}});c.support=function(){var a,b,d,
e,f,g,i,h,j=k.createElement("div");j.setAttribute("className","t");j.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=j.getElementsByTagName("*");d=j.getElementsByTagName("a")[0];if(!b||!b.length||!d)return{};e=k.createElement("select");f=e.appendChild(k.createElement("option"));b=j.getElementsByTagName("input")[0];a={leadingWhitespace:3===j.firstChild.nodeType,tbody:!j.getElementsByTagName("tbody").length,htmlSerialize:!!j.getElementsByTagName("link").length,
style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===b.value,optSelected:f.selected,getSetAttribute:"t"!==j.className,enctype:!!k.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==k.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,
pixelMargin:!0};c.boxModel=a.boxModel="CSS1Compat"===k.compatMode;b.checked=!0;a.noCloneChecked=b.cloneNode(!0).checked;e.disabled=!0;a.optDisabled=!f.disabled;try{delete j.test}catch(m){a.deleteExpando=!1}!j.addEventListener&&(j.attachEvent&&j.fireEvent)&&(j.attachEvent("onclick",function(){a.noCloneEvent=!1}),j.cloneNode(!0).fireEvent("onclick"),j.clearAttributes&&j.clearAttributes());b=k.createElement("input");b.value="t";b.setAttribute("type","radio");a.radioValue="t"===b.value;b.setAttribute("checked",
"checked");b.setAttribute("name","t");j.appendChild(b);d=k.createDocumentFragment();d.appendChild(j.lastChild);a.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=b.checked;d.removeChild(b);d.appendChild(j);if(j.attachEvent)for(i in{submit:1,change:1,focusin:1})b="on"+i,h=b in j,h||(j.setAttribute(b,"return;"),h="function"===typeof j[b]),a[i+"Bubbles"]=h;d.removeChild(j);d=e=f=j=b=null;c(function(){var b,d,e,f,i=k.getElementsByTagName("body")[0];if(i){b=k.createElement("div");
b.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px";i.insertBefore(b,i.firstChild);j=k.createElement("div");b.appendChild(j);j.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>";g=j.getElementsByTagName("td");h=g[0].offsetHeight===0;g[0].style.display="";g[1].style.display="none";a.reliableHiddenOffsets=h&&g[0].offsetHeight===0;if(o.getComputedStyle){j.innerHTML="";d=k.createElement("div");
d.style.width="0";d.style.marginRight="0";j.style.width="2px";j.appendChild(d);a.reliableMarginRight=(parseInt((o.getComputedStyle(d,null)||{marginRight:0}).marginRight,10)||0)===0}if(typeof j.style.zoom!=="undefined"){j.innerHTML="";j.style.width=j.style.padding="1px";j.style.border=0;j.style.overflow="hidden";j.style.display="inline";j.style.zoom=1;a.inlineBlockNeedsLayout=j.offsetWidth===3;j.style.display="block";j.style.overflow="visible";j.innerHTML="<div style='width:5px;'></div>";a.shrinkWrapBlocks=
j.offsetWidth!==3}j.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;";j.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
d=j.firstChild;e=d.firstChild;f=d.nextSibling.firstChild.firstChild;f={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:f.offsetTop===5};e.style.position="fixed";e.style.top="20px";f.fixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";d.style.overflow="hidden";d.style.position="relative";f.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;f.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1;if(o.getComputedStyle){j.style.marginTop="1%";a.pixelMargin=(o.getComputedStyle(j,
null)||{marginTop:0}).marginTop!=="1%"}if(typeof b.style.zoom!=="undefined")b.style.zoom=1;i.removeChild(b);j=null;c.extend(a,f)}});return a}();var gb=/^(?:\{.*\}|\[.*\])$/,fb=/([A-Z])/g;c.extend({cache:{},uuid:0,expando:"jQuery"+(c.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?c.cache[a[c.expando]]:a[c.expando];return!!a&&!$(a)},data:function(a,b,d,e){if(c.acceptData(a)){var f;f=c.expando;
var g="string"===typeof b,i=a.nodeType,h=i?c.cache:a,j=i?a[f]:a[f]&&f,m="events"===b;if(j&&h[j]&&(m||e||h[j].data)||!(g&&void 0===d)){j||(i?a[f]=j=++c.uuid:j=f);h[j]||(h[j]={},i||(h[j].toJSON=c.noop));if("object"===typeof b||"function"===typeof b)e?h[j]=c.extend(h[j],b):h[j].data=c.extend(h[j].data,b);f=a=h[j];e||(a.data||(a.data={}),a=a.data);void 0!==d&&(a[c.camelCase(b)]=d);if(m&&!a[b])return f.events;g?(d=a[b],null==d&&(d=a[c.camelCase(b)])):d=a;return d}}},removeData:function(a,b,d){if(c.acceptData(a)){var e,
f,g,i=c.expando,h=a.nodeType,j=h?c.cache:a,m=h?a[i]:i;if(j[m]){if(b&&(e=d?j[m]:j[m].data)){c.isArray(b)||(b in e?b=[b]:(b=c.camelCase(b),b=b in e?[b]:b.split(" ")));f=0;for(g=b.length;f<g;f++)delete e[b[f]];if(!(d?$:c.isEmptyObject)(e))return}if(!d&&(delete j[m].data,!$(j[m])))return;c.support.deleteExpando||!j.setInterval?delete j[m]:j[m]=null;h&&(c.support.deleteExpando?delete a[i]:a.removeAttribute?a.removeAttribute(i):a[i]=null)}}},_data:function(a,b,d){return c.data(a,b,d,!0)},acceptData:function(a){if(a.nodeName){var b=
c.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}});c.fn.extend({data:function(a,b){var d,e,f,g,i,h=this[0],j=0,m=null;if(void 0===a){if(this.length&&(m=c.data(h),1===h.nodeType&&!c._data(h,"parsedAttrs"))){f=h.attributes;for(i=f.length;j<i;j++)g=f[j].name,0===g.indexOf("data-")&&(g=c.camelCase(g.substring(5)),na(h,g,m[g]));c._data(h,"parsedAttrs",!0)}return m}if("object"===typeof a)return this.each(function(){c.data(this,a)});d=a.split(".",2);d[1]=d[1]?
"."+d[1]:"";e=d[1]+"!";return c.access(this,function(b){if(void 0===b)return m=this.triggerHandler("getData"+e,[d[0]]),void 0===m&&h&&(m=c.data(h,a),m=na(h,a,m)),void 0===m&&d[1]?this.data(d[0]):m;d[1]=b;this.each(function(){var f=c(this);f.triggerHandler("setData"+e,d);c.data(this,a,b);f.triggerHandler("changeData"+e,d)})},null,b,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",c._data(a,
b,(c._data(a,b)||0)+1))},_unmark:function(a,b,d){!0!==a&&(d=b,b=a,a=!1);if(b){var d=d||"fx",e=d+"mark";(a=a?0:(c._data(b,e)||1)-1)?c._data(b,e,a):(c.removeData(b,e,!0),oa(b,d,"mark"))}},queue:function(a,b,d){var e;if(a)return b=(b||"fx")+"queue",e=c._data(a,b),d&&(!e||c.isArray(d)?e=c._data(a,b,c.makeArray(d)):e.push(d)),e||[]},dequeue:function(a,b){var b=b||"fx",d=c.queue(a,b),e=d.shift(),f={};"inprogress"===e&&(e=d.shift());e&&("fx"===b&&d.unshift("inprogress"),c._data(a,b+".run",f),e.call(a,function(){c.dequeue(a,
b)},f));d.length||(c.removeData(a,b+"queue "+b+".run",!0),oa(a,b,"queue"))}});c.fn.extend({queue:function(a,b){var d=2;"string"!==typeof a&&(b=a,a="fx",d--);return arguments.length<d?c.queue(this[0],a):void 0===b?this:this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var f=setTimeout(b,a);c.stop=function(){clearTimeout(f)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){function d(){--i||e.resolveWith(f,[f])}"string"!==typeof a&&(b=a,a=void 0);for(var a=a||"fx",e=c.Deferred(),f=this,g=f.length,i=1,h=a+"defer",j=a+"queue",m=a+"mark",p;g--;)if(p=c.data(f[g],h,void 0,!0)||(c.data(f[g],j,void 0,!0)||c.data(f[g],m,void 0,!0))&&c.data(f[g],h,c.Callbacks("once memory"),!0))i++,p.add(d);d();return e.promise(b)}});var Ha=/[\n\t\r]/g,X=/\s+/,ob=/\r/g,pb=/^(?:button|input)$/i,qb=/^(?:button|input|object|select|textarea)$/i,
rb=/^a(?:rea)?$/i,Ia=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ja=c.support.getSetAttribute,z,Ka,La;c.fn.extend({attr:function(a,b){return c.access(this,c.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,a)})},prop:function(a,b){return c.access(this,c.prop,a,b,1<arguments.length)},removeProp:function(a){a=c.propFix[a]||a;return this.each(function(){try{this[a]=void 0,
delete this[a]}catch(b){}})},addClass:function(a){var b,d,e,f,g,i,h;if(c.isFunction(a))return this.each(function(b){c(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a){b=a.split(X);d=0;for(e=this.length;d<e;d++)if(f=this[d],1===f.nodeType)if(!f.className&&1===b.length)f.className=a;else{g=" "+f.className+" ";i=0;for(h=b.length;i<h;i++)~g.indexOf(" "+b[i]+" ")||(g+=b[i]+" ");f.className=c.trim(g)}}return this},removeClass:function(a){var b,d,e,f,g,i,h;if(c.isFunction(a))return this.each(function(b){c(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||void 0===a){b=(a||"").split(X);d=0;for(e=this.length;d<e;d++)if(f=this[d],1===f.nodeType&&f.className)if(a){g=(" "+f.className+" ").replace(Ha," ");i=0;for(h=b.length;i<h;i++)g=g.replace(" "+b[i]+" "," ");f.className=c.trim(g)}else f.className=""}return this},toggleClass:function(a,b){var d=typeof a,e="boolean"===typeof b;return c.isFunction(a)?this.each(function(d){c(this).toggleClass(a.call(this,d,this.className,b),b)}):this.each(function(){if("string"===
d)for(var f,g=0,i=c(this),h=b,j=a.split(X);f=j[g++];)h=e?h:!i.hasClass(f),i[h?"addClass":"removeClass"](f);else if("undefined"===d||"boolean"===d)this.className&&c._data(this,"__className__",this.className),this.className=this.className||!1===a?"":c._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(Ha," ").indexOf(a))return!0;return!1},val:function(a){var b,d,e,f=this[0];if(arguments.length)return e=
c.isFunction(a),this.each(function(d){var f=c(this);if(1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":c.isArray(d)&&(d=c.map(d,function(a){return a==null?"":a+""})),b=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()],!b||!("set"in b)||void 0===b.set(this,d,"value")))this.value=d});if(f){if((b=c.valHooks[f.type]||c.valHooks[f.nodeName.toLowerCase()])&&"get"in b&&void 0!==(d=b.get(f,"value")))return d;d=f.value;return"string"===typeof d?d.replace(ob,
""):null==d?"":d}}});c.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,d,e=a.selectedIndex,f=[],g=a.options,i="select-one"===a.type;if(0>e)return null;a=i?e:0;for(d=i?e+1:g.length;a<d;a++)if(b=g[a],b.selected&&(c.support.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!c.nodeName(b.parentNode,"optgroup"))){b=c(b).val();if(i)return b;f.push(b)}return i&&!f.length&&g.length?c(g[e]).val():
f},set:function(a,b){var d=c.makeArray(b);c(a).find("option").each(function(){this.selected=0<=c.inArray(c(this).val(),d)});d.length||(a.selectedIndex=-1);return d}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,b,d,e){var f,g,i=a.nodeType;if(a&&!(3===i||8===i||2===i)){if(e&&b in c.attrFn)return c(a)[b](d);if("undefined"===typeof a.getAttribute)return c.prop(a,b,d);if(e=1!==i||!c.isXMLDoc(a))b=b.toLowerCase(),g=c.attrHooks[b]||(Ia.test(b)?Ka:z);if(void 0!==
d)if(null===d)c.removeAttr(a,b);else{if(g&&"set"in g&&e&&void 0!==(f=g.set(a,d,b)))return f;a.setAttribute(b,""+d);return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,b)))return f;f=a.getAttribute(b);return null===f?void 0:f}}},removeAttr:function(a,b){var d,e,f,g,i,h=0;if(b&&1===a.nodeType){e=b.toLowerCase().split(X);for(g=e.length;h<g;h++)if(f=e[h])d=c.propFix[f]||f,(i=Ia.test(f))||c.attr(a,f,""),a.removeAttribute(Ja?f:d),i&&d in a&&(a[d]=!1)}},attrHooks:{type:{set:function(a,b){if(pb.test(a.nodeName)&&
a.parentNode)c.error("type property can't be changed");else if(!c.support.radioValue&&"radio"===b&&c.nodeName(a,"input")){var d=a.value;a.setAttribute("type",b);d&&(a.value=d);return b}}},value:{get:function(a,b){return z&&c.nodeName(a,"button")?z.get(a,b):b in a?a.value:null},set:function(a,b,d){if(z&&c.nodeName(a,"button"))return z.set(a,b,d);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",
rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,b,d){var e,f,g;g=a.nodeType;if(a&&!(3===g||8===g||2===g)){if(g=1!==g||!c.isXMLDoc(a))b=c.propFix[b]||b,f=c.propHooks[b];return void 0!==d?f&&"set"in f&&void 0!==(e=f.set(a,d,b))?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):qb.test(a.nodeName)||rb.test(a.nodeName)&&
a.href?0:void 0}}}});c.attrHooks.tabindex=c.propHooks.tabIndex;Ka={get:function(a,b){var d,e=c.prop(a,b);return!0===e||"boolean"!==typeof e&&(d=a.getAttributeNode(b))&&!1!==d.nodeValue?b.toLowerCase():void 0},set:function(a,b,d){!1===b?c.removeAttr(a,d):(b=c.propFix[d]||d,b in a&&(a[b]=!0),a.setAttribute(d,d.toLowerCase()));return d}};Ja||(La={name:!0,id:!0,coords:!0},z=c.valHooks.button={get:function(a,b){var c;return(c=a.getAttributeNode(b))&&(La[b]?""!==c.nodeValue:c.specified)?c.nodeValue:void 0},
set:function(a,b,c){var e=a.getAttributeNode(c);e||(e=k.createAttribute(c),a.setAttributeNode(e));return e.nodeValue=b+""}},c.attrHooks.tabindex.set=z.set,c.each(["width","height"],function(a,b){c.attrHooks[b]=c.extend(c.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),c.attrHooks.contenteditable={get:z.get,set:function(a,b,c){""===b&&(b="false");z.set(a,b,c)}});c.support.hrefNormalized||c.each(["href","src","width","height"],function(a,b){c.attrHooks[b]=c.extend(c.attrHooks[b],
{get:function(a){a=a.getAttribute(b,2);return a===null?void 0:a}})});c.support.style||(c.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||void 0},set:function(a,b){return a.style.cssText=""+b}});c.support.optSelected||(c.propHooks.selected=c.extend(c.propHooks.selected,{get:function(a){if(a=a.parentNode){a.selectedIndex;a.parentNode&&a.parentNode.selectedIndex}return null}}));c.support.enctype||(c.propFix.enctype="encoding");c.support.checkOn||c.each(["radio","checkbox"],function(){c.valHooks[this]=
{get:function(a){return a.getAttribute("value")===null?"on":a.value}}});c.each(["radio","checkbox"],function(){c.valHooks[this]=c.extend(c.valHooks[this],{set:function(a,b){if(c.isArray(b))return a.checked=c.inArray(c(a).val(),b)>=0}})});var ha=/^(?:textarea|input|select)$/i,Ma=/^([^\.]*)?(?:\.(.+))?$/,sb=/(?:^|\s)hover(\.\S+)?\b/,tb=/^key/,ub=/^(?:mouse|contextmenu)|click/,Na=/^(?:focusinfocus|focusoutblur)$/,vb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,wb=function(a){if(a=vb.exec(a)){a[1]=(a[1]||
"").toLowerCase();a[3]=a[3]&&RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)")}return a},Oa=function(a){return c.event.special.hover?a:a.replace(sb,"mouseenter$1 mouseleave$1")};c.event={add:function(a,b,d,e,f){var g,i,h,j,m,p,l,k,n;if(!(a.nodeType===3||a.nodeType===8||!b||!d||!(g=c._data(a)))){if(d.handler){l=d;d=l.handler;f=l.selector}if(!d.guid)d.guid=c.guid++;h=g.events;if(!h)g.events=h={};i=g.handle;if(!i){g.handle=i=function(a){return typeof c!=="undefined"&&(!a||c.event.triggered!==a.type)?c.event.dispatch.apply(i.elem,
arguments):void 0};i.elem=a}b=c.trim(Oa(b)).split(" ");for(g=0;g<b.length;g++){j=Ma.exec(b[g])||[];m=j[1];p=(j[2]||"").split(".").sort();n=c.event.special[m]||{};m=(f?n.delegateType:n.bindType)||m;n=c.event.special[m]||{};j=c.extend({type:m,origType:j[1],data:e,handler:d,guid:d.guid,selector:f,quick:f&&wb(f),namespace:p.join(".")},l);k=h[m];if(!k){k=h[m]=[];k.delegateCount=0;if(!n.setup||n.setup.call(a,e,p,i)===false)a.addEventListener?a.addEventListener(m,i,false):a.attachEvent&&a.attachEvent("on"+
m,i)}if(n.add){n.add.call(a,j);if(!j.handler.guid)j.handler.guid=d.guid}f?k.splice(k.delegateCount++,0,j):k.push(j);c.event.global[m]=true}a=null}},global:{},remove:function(a,b,d,e,f){var g=c.hasData(a)&&c._data(a),i,h,j,m,p,l,k,n,o,y;if(g&&(k=g.events)){b=c.trim(Oa(b||"")).split(" ");for(i=0;i<b.length;i++){h=Ma.exec(b[i])||[];j=m=h[1];h=h[2];if(j){n=c.event.special[j]||{};j=(e?n.delegateType:n.bindType)||j;o=k[j]||[];p=o.length;h=h?RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):
null;for(l=0;l<o.length;l++){y=o[l];if((f||m===y.origType)&&(!d||d.guid===y.guid)&&(!h||h.test(y.namespace))&&(!e||e===y.selector||e==="**"&&y.selector)){o.splice(l--,1);y.selector&&o.delegateCount--;n.remove&&n.remove.call(a,y)}}if(o.length===0&&p!==o.length){(!n.teardown||n.teardown.call(a,h)===false)&&c.removeEvent(a,j,g.handle);delete k[j]}}else for(j in k)c.event.remove(a,j+b[i],d,e,true)}if(c.isEmptyObject(k)){if(b=g.handle)b.elem=null;c.removeData(a,["events","handle"],true)}}},customEvent:{getData:!0,
setData:!0,changeData:!0},trigger:function(a,b,d,e){if(!d||!(d.nodeType===3||d.nodeType===8)){var f=a.type||a,g=[],i,h,j,m,p;if(!Na.test(f+c.event.triggered)){if(f.indexOf("!")>=0){f=f.slice(0,-1);i=true}if(f.indexOf(".")>=0){g=f.split(".");f=g.shift();g.sort()}if(d&&!c.event.customEvent[f]||c.event.global[f]){a=typeof a==="object"?a[c.expando]?a:new c.Event(f,a):new c.Event(f);a.type=f;a.isTrigger=true;a.exclusive=i;a.namespace=g.join(".");a.namespace_re=a.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+
"(\\.|$)"):null;i=f.indexOf(":")<0?"on"+f:"";if(d){a.result=void 0;if(!a.target)a.target=d;b=b!=null?c.makeArray(b):[];b.unshift(a);j=c.event.special[f]||{};if(!(j.trigger&&j.trigger.apply(d,b)===false)){p=[[d,j.bindType||f]];if(!e&&!j.noBubble&&!c.isWindow(d)){m=j.delegateType||f;g=Na.test(m+f)?d:d.parentNode;for(h=null;g;g=g.parentNode){p.push([g,m]);h=g}h&&h===d.ownerDocument&&p.push([h.defaultView||h.parentWindow||o,m])}for(h=0;h<p.length&&!a.isPropagationStopped();h++){g=p[h][0];a.type=p[h][1];
(m=(c._data(g,"events")||{})[a.type]&&c._data(g,"handle"))&&m.apply(g,b);(m=i&&g[i])&&(c.acceptData(g)&&m.apply(g,b)===false)&&a.preventDefault()}a.type=f;if(!e&&!a.isDefaultPrevented()&&(!j._default||j._default.apply(d.ownerDocument,b)===false)&&!(f==="click"&&c.nodeName(d,"a"))&&c.acceptData(d))if(i&&d[f]&&(f!=="focus"&&f!=="blur"||a.target.offsetWidth!==0)&&!c.isWindow(d)){(h=d[i])&&(d[i]=null);c.event.triggered=f;d[f]();c.event.triggered=void 0;h&&(d[i]=h)}return a.result}}else{d=c.cache;for(h in d)d[h].events&&
d[h].events[f]&&c.event.trigger(a,b,d[h].handle.elem,true)}}}}},dispatch:function(a){var a=c.event.fix(a||o.event),b=(c._data(this,"events")||{})[a.type]||[],d=b.delegateCount,e=[].slice.call(arguments,0),f=!a.exclusive&&!a.namespace,g=c.event.special[a.type]||{},i=[],h,j,m,p,l,k,n;e[0]=a;a.delegateTarget=this;if(!(g.preDispatch&&g.preDispatch.call(this,a)===false)){if(d&&!(a.button&&a.type==="click")){m=c(this);m.context=this.ownerDocument||this;for(j=a.target;j!=this;j=j.parentNode||this)if(j.disabled!==
true){l={};k=[];m[0]=j;for(h=0;h<d;h++){p=b[h];n=p.selector;if(l[n]===void 0){var Q=l,y=n,s;if(p.quick){s=p.quick;var t=j.attributes||{};s=(!s[1]||j.nodeName.toLowerCase()===s[1])&&(!s[2]||(t.id||{}).value===s[2])&&(!s[3]||s[3].test((t["class"]||{}).value))}else s=m.is(n);Q[y]=s}l[n]&&k.push(p)}k.length&&i.push({elem:j,matches:k})}}b.length>d&&i.push({elem:this,matches:b.slice(d)});for(h=0;h<i.length&&!a.isPropagationStopped();h++){d=i[h];a.currentTarget=d.elem;for(b=0;b<d.matches.length&&!a.isImmediatePropagationStopped();b++){p=
d.matches[b];if(f||!a.namespace&&!p.namespace||a.namespace_re&&a.namespace_re.test(p.namespace)){a.data=p.data;a.handleObj=p;p=((c.event.special[p.origType]||{}).handle||p.handler).apply(d.elem,e);if(p!==void 0){a.result=p;if(p===false){a.preventDefault();a.stopPropagation()}}}}}g.postDispatch&&g.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){if(a.which==null)a.which=b.charCode!=null?b.charCode:b.keyCode;return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f=b.button,g=b.fromElement;if(a.pageX==null&&b.clientX!=null){c=a.target.ownerDocument||k;e=c.documentElement;c=c.body;a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||
c&&c.clientLeft||0);a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)}if(!a.relatedTarget&&g)a.relatedTarget=g===a.target?b.toElement:g;if(!a.which&&f!==void 0)a.which=f&1?1:f&2?3:f&4?2:0;return a}},fix:function(a){if(a[c.expando])return a;var b,d,e=a,f=c.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props,a=c.Event(e);for(b=g.length;b;){d=g[--b];a[d]=e[d]}if(!a.target)a.target=e.srcElement||k;if(a.target.nodeType===3)a.target=a.target.parentNode;
if(a.metaKey===void 0)a.metaKey=a.ctrlKey;return f.filter?f.filter(a,e):a},special:{ready:{setup:c.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,d){if(c.isWindow(this))this.onbeforeunload=d},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}},simulate:function(a,b,d,e){a=c.extend(new c.Event,d,{type:a,isSimulated:true,originalEvent:{}});e?c.event.trigger(a,null,b):c.event.dispatch.call(b,a);a.isDefaultPrevented()&&
d.preventDefault()}};c.event.handle=c.event.dispatch;c.removeEvent=k.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,false)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};c.Event=function(a,b){if(!(this instanceof c.Event))return new c.Event(a,b);if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?P:G}else this.type=a;b&&c.extend(this,b);this.timeStamp=
a&&a.timeStamp||c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=P;var a=this.originalEvent;if(a)a.preventDefault?a.preventDefault():a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=P;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=P;this.stopPropagation()},isDefaultPrevented:G,isPropagationStopped:G,isImmediatePropagationStopped:G};
c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={delegateType:b,bindType:b,handle:function(a){var e=a.relatedTarget,f=a.handleObj,g;if(!e||e!==this&&!c.contains(this,e)){a.type=f.origType;g=f.handler.apply(this,arguments);a.type=b}return g}}});c.support.submitBubbles||(c.event.special.submit={setup:function(){if(c.nodeName(this,"form"))return false;c.event.add(this,"click._submit keypress._submit",function(a){a=a.target;if((a=c.nodeName(a,"input")||c.nodeName(a,
"button")?a.form:void 0)&&!a._submit_attached){c.event.add(a,"submit._submit",function(a){a._submit_bubble=true});a._submit_attached=true}})},postDispatch:function(a){if(a._submit_bubble){delete a._submit_bubble;this.parentNode&&!a.isTrigger&&c.event.simulate("submit",this.parentNode,a,true)}},teardown:function(){if(c.nodeName(this,"form"))return false;c.event.remove(this,"._submit")}});c.support.changeBubbles||(c.event.special.change={setup:function(){if(ha.test(this.nodeName)){if(this.type==="checkbox"||
this.type==="radio"){c.event.add(this,"propertychange._change",function(a){if(a.originalEvent.propertyName==="checked")this._just_changed=true});c.event.add(this,"click._change",function(a){if(this._just_changed&&!a.isTrigger){this._just_changed=false;c.event.simulate("change",this,a,true)}})}return false}c.event.add(this,"beforeactivate._change",function(a){a=a.target;if(ha.test(a.nodeName)&&!a._change_attached){c.event.add(a,"change._change",function(a){this.parentNode&&(!a.isSimulated&&!a.isTrigger)&&
c.event.simulate("change",this.parentNode,a,true)});a._change_attached=true}})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){c.event.remove(this,"._change");return ha.test(this.nodeName)}});c.support.focusinBubbles||c.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){c.event.simulate(b,a.target,c.event.fix(a),true)};c.event.special[b]={setup:function(){d++===
0&&k.addEventListener(a,e,true)},teardown:function(){--d===0&&k.removeEventListener(a,e,true)}}});c.fn.extend({on:function(a,b,d,e,f){var g,i;if(typeof a==="object"){if(typeof b!=="string"){d=d||b;b=void 0}for(i in a)this.on(i,b,d,a[i],f);return this}if(d==null&&e==null){e=b;d=b=void 0}else if(e==null)if(typeof b==="string"){e=d;d=void 0}else{e=d;d=b;b=void 0}if(e===false)e=G;else if(!e)return this;if(f===1){g=e;e=function(a){c().off(a);return g.apply(this,arguments)};e.guid=g.guid||(g.guid=c.guid++)}return this.each(function(){c.event.add(this,
a,e,d,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;c(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a==="object"){for(e in a)this.off(e,b,a[e]);return this}if(b===false||typeof b==="function"){d=b;b=void 0}d===false&&(d=G);return this.each(function(){c.event.remove(this,a,d,b)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,
b){return this.off(a,null,b)},live:function(a,b,d){c(this.context).on(a,this.selector,b,d);return this},die:function(a,b){c(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return c.event.trigger(a,b,this[0],true)},toggle:function(a){var b=
arguments,d=a.guid||c.guid++,e=0,f=function(d){var f=(c._data(this,"lastToggle"+a.guid)||0)%e;c._data(this,"lastToggle"+a.guid,f+1);d.preventDefault();return b[f].apply(this,arguments)||false};for(f.guid=d;e<b.length;)b[e++].guid=d;return this.click(f)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){c.fn[b]=function(a,c){if(c==null){c=a;a=null}return arguments.length>0?this.on(b,null,a,c):this.trigger(b)};c.attrFn&&(c.attrFn[b]=true);if(tb.test(b))c.event.fixHooks[b]=c.event.keyHooks;if(ub.test(b))c.event.fixHooks[b]=c.event.mouseHooks});(function(){function a(a,b,c,d,f,g){for(var f=0,i=d.length;f<i;f++){var h=d[f];if(h){for(var j=false,h=h[a];h;){if(h[e]===c){j=d[h.sizset];break}if(h.nodeType===1&&!g){h[e]=c;h.sizset=f}if(h.nodeName.toLowerCase()===b){j=h;break}h=h[a]}d[f]=j}}}
function b(a,b,c,d,f,g){for(var f=0,i=d.length;f<i;f++){var h=d[f];if(h){for(var j=false,h=h[a];h;){if(h[e]===c){j=d[h.sizset];break}if(h.nodeType===1){if(!g){h[e]=c;h.sizset=f}if(typeof b!=="string"){if(h===b){j=true;break}}else if(l.filter(b,[h]).length>0){j=h;break}}h=h[a]}d[f]=j}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,
i=false,h=true,j=/\\/g,m=/\r\n/g,p=/\W/;[0,0].sort(function(){h=false;return 0});var l=function(a,b,c,e){var c=c||[],f=b=b||k;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!=="string")return c;var i,h,j,m,p,o=true,q=l.isXML(b),u=[],s=a;do{d.exec("");if(i=d.exec(s)){s=i[3];u.push(i[1]);if(i[2]){m=i[3];break}}}while(i);if(u.length>1&&Q.exec(a))if(u.length===2&&n.relative[u[0]])h=C(u[0]+u[1],b,e);else for(h=n.relative[u[0]]?[b]:l(u.shift(),b);u.length;){a=u.shift();n.relative[a]&&(a=a+u.shift());
h=C(a,h,e)}else{if(!e&&u.length>1&&b.nodeType===9&&!q&&n.match.ID.test(u[0])&&!n.match.ID.test(u[u.length-1])){i=l.find(u.shift(),b,q);b=i.expr?l.filter(i.expr,i.set)[0]:i.set[0]}if(b){i=e?{expr:u.pop(),set:t(e)}:l.find(u.pop(),u.length===1&&(u[0]==="~"||u[0]==="+")&&b.parentNode?b.parentNode:b,q);h=i.expr?l.filter(i.expr,i.set):i.set;for(u.length>0?j=t(h):o=false;u.length;){i=p=u.pop();n.relative[p]?i=u.pop():p="";i==null&&(i=b);n.relative[p](j,i,q)}}else j=[]}j||(j=h);j||l.error(p||a);if(g.call(j)===
"[object Array]")if(o)if(b&&b.nodeType===1)for(a=0;j[a]!=null;a++)j[a]&&(j[a]===true||j[a].nodeType===1&&l.contains(b,j[a]))&&c.push(h[a]);else for(a=0;j[a]!=null;a++)j[a]&&j[a].nodeType===1&&c.push(h[a]);else c.push.apply(c,j);else t(j,c);if(m){l(m,f,c,e);l.uniqueSort(c)}return c};l.uniqueSort=function(a){if(A){i=h;a.sort(A);if(i)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a};l.matches=function(a,b){return l(a,null,null,b)};l.matchesSelector=function(a,b){return l(b,null,null,
[a]).length>0};l.find=function(a,b,c){var d,e,f,g,i,h;if(!a)return[];e=0;for(f=n.order.length;e<f;e++){i=n.order[e];if(g=n.leftMatch[i].exec(a)){h=g[1];g.splice(1,1);if(h.substr(h.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,"");d=n.find[i](g,b,c);if(d!=null){a=a.replace(n.match[i],"");break}}}}d||(d=typeof b.getElementsByTagName!=="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};l.filter=function(a,b,c,d){for(var e,f,g,i,h,j,m,p,k=a,o=[],q=b,s=b&&b[0]&&l.isXML(b[0]);a&&b.length;){for(g in n.filter)if((e=
n.leftMatch[g].exec(a))!=null&&e[2]){j=n.filter[g];h=e[1];f=false;e.splice(1,1);if(h.substr(h.length-1)!=="\\"){q===o&&(o=[]);if(n.preFilter[g])if(e=n.preFilter[g](e,q,c,o,d,s)){if(e===true)continue}else f=i=true;if(e)for(m=0;(h=q[m])!=null;m++)if(h){i=j(h,e,m,q);p=d^i;if(c&&i!=null)p?f=true:q[m]=false;else if(p){o.push(h);f=true}}if(i!==void 0){c||(q=o);a=a.replace(n.match[g],"");if(!f)return[];break}}}if(a===k)if(f==null)l.error(a);else break;k=a}return q};l.error=function(a){throw Error("Syntax error, unrecognized expression: "+
a);};var o=l.getText=function(a){var b,c;b=a.nodeType;var d="";if(b)if(b===1||b===9||b===11){if(typeof a.textContent==="string")return a.textContent;if(typeof a.innerText==="string")return a.innerText.replace(m,"");for(a=a.firstChild;a;a=a.nextSibling)d=d+o(a)}else{if(b===3||b===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(d=d+o(c));return d},n=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},
type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b==="string",d=c&&!p.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&f.nodeType!==1;);a[d]=c||f&&f.nodeName.toLowerCase()===b?f||false:f===b}c&&l.filter(b,a,true)},">":function(a,b){var c,d=typeof b==="string",e=0,f=a.length;if(d&&!p.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e]){c=c.parentNode;a[e]=c.nodeName.toLowerCase()===b?c:false}}else{for(;e<
f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&l.filter(b,a,true)}},"":function(c,d,e){var g,i=f++,h=b;if(typeof d==="string"&&!p.test(d)){g=d=d.toLowerCase();h=a}h("parentNode",d,i,c,g,e)},"~":function(c,d,e){var g,i=f++,h=b;if(typeof d==="string"&&!p.test(d)){g=d=d.toLowerCase();h=a}h("previousSibling",d,i,c,g,e)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!==
"undefined"){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var f=0,g;(g=b[f])!=null;f++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[f]=false));return false},ID:function(a){return a[1].replace(j,
"")},TAG:function(a){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||l.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&l.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(j,"");!f&&n.attrMap[b]&&(a[1]=n.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(j,"");a[2]==="~="&&(a[4]=" "+a[4]+
" ");return a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not")if((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=l(a[3],null,null,b);else{a=l.filter(a[3],b,c,1^f);c||e.push.apply(e,a);return false}else if(n.match.POS.test(a[0])||n.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===true},checked:function(a){return a.checked===true},selected:function(a){a.parentNode&&
a.parentNode.selectedIndex;return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!l(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&
"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();
return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,
b,c,d){var e=b[1],f=n.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||o([a])||"").indexOf(b[3])>=0;if(e==="not"){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return false;return true}l.error(e)},CHILD:function(a,b){var c,d,f,g,i,h;c=b[1];h=a;switch(c){case "only":case "first":for(;h=h.previousSibling;)if(h.nodeType===1)return false;if(c==="first")return true;h=a;case "last":for(;h=h.nextSibling;)if(h.nodeType===1)return false;return true;case "nth":c=b[2];d=
b[3];if(c===1&&d===0)return true;f=b[0];if((g=a.parentNode)&&(g[e]!==f||!a.nodeIndex)){i=0;for(h=g.firstChild;h;h=h.nextSibling)if(h.nodeType===1)h.nodeIndex=++i;g[e]=f}h=a.nodeIndex-d;return c===0?h===0:h%c===0&&h/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],
c=l.attr?l.attr(a,c):n.attrHandle[c]?n.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return c==null?e==="!=":!e&&l.attr?c!=null:e==="="?d===f:e==="*="?d.indexOf(f)>=0:e==="~="?(" "+d+" ").indexOf(f)>=0:!f?d&&c!==false:e==="!="?d!==f:e==="^="?d.indexOf(f)===0:e==="$="?d.substr(d.length-f.length)===f:e==="|="?d===f||d.substr(0,f.length+1)===f+"-":false},POS:function(a,b,c,d){var e=n.setFilters[b[2]];if(e)return e(a,c,b,d)}}},Q=n.match.POS,y=function(a,b){return"\\"+(b-0+1)},
s;for(s in n.match){n.match[s]=RegExp(n.match[s].source+/(?![^\[]*\])(?![^\(]*\))/.source);n.leftMatch[s]=RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[s].source.replace(/\\(\d+)/g,y))}n.match.globalPOS=Q;var t=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(k.documentElement.childNodes,0)[0].nodeType}catch(v){t=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length===
"number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var A,q;if(k.documentElement.compareDocumentPosition)A=function(a,b){if(a===b){i=true;return 0}return!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1};else{A=function(a,b){if(a===b){i=true;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return q(a,
b);if(c){if(!d)return 1}else return-1;for(;g;){e.unshift(g);g=g.parentNode}for(g=d;g;){f.unshift(g);g=g.parentNode}c=e.length;d=f.length;for(g=0;g<c&&g<d;g++)if(e[g]!==f[g])return q(e[g],f[g]);return g===c?q(a,f[g],-1):q(e[g],b,1)};q=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}}(function(){var a=k.createElement("div"),b="script"+(new Date).getTime(),c=k.documentElement;a.innerHTML="<a name='"+b+"'/>";c.insertBefore(a,c.firstChild);if(k.getElementById(b)){n.find.ID=
function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||typeof b.getAttributeNode!=="undefined"&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]};n.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}}c.removeChild(a);c=a=null})();(function(){var a=k.createElement("div");a.appendChild(k.createComment(""));if(a.getElementsByTagName("*").length>0)n.find.TAG=
function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var d=[],e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(a){return a.getAttribute("href",2)};a=null})();k.querySelectorAll&&function(){var a=l,b=k.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===
0)){l=function(b,c,d,e){c=c||k;if(!e&&!l.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(c.nodeType===1||c.nodeType===9)){if(f[1])return t(c.getElementsByTagName(b),d);if(f[2]&&n.find.CLASS&&c.getElementsByClassName)return t(c.getElementsByClassName(f[2]),d)}if(c.nodeType===9){if(b==="body"&&c.body)return t([c.body],d);if(f&&f[3]){var g=c.getElementById(f[3]);if(g&&g.parentNode){if(g.id===f[3])return t([g],d)}else return t([],d)}try{return t(c.querySelectorAll(b),d)}catch(h){}}else if(c.nodeType===
1&&c.nodeName.toLowerCase()!=="object"){var f=c,i=(g=c.getAttribute("id"))||"__sizzle__",j=c.parentNode,m=/^\s*[+~]/.test(b);g?i=i.replace(/'/g,"\\$&"):c.setAttribute("id",i);if(m&&j)c=c.parentNode;try{if(!m||j)return t(c.querySelectorAll("[id='"+i+"'] "+b),d)}catch(p){}finally{g||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)l[c]=a[c];b=null}}();(function(){var a=k.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(k.createElement("div"),
"div"),d=false;try{b.call(k.documentElement,"[test!='']:sizzle")}catch(e){d=true}l.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!l.isXML(a))try{if(d||!n.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return l(e,null,null,[a]).length>0}}})();(function(){var a=k.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==
0){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");n.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a[1])};a=null}}})();l.contains=k.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):true)}:k.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return false};l.isXML=function(a){return(a=(a?a.ownerDocument||
a:0).documentElement)?a.nodeName!=="HTML":false};var C=function(a,b,c){for(var d,e=[],f="",b=b.nodeType?[b]:b;d=n.match.PSEUDO.exec(a);){f=f+d[0];a=a.replace(n.match.PSEUDO,"")}a=n.relative[a]?a+"*":a;d=0;for(var g=b.length;d<g;d++)l(a,b[d],e,c);return l.filter(f,e)};l.attr=c.attr;l.selectors.attrMap={};c.find=l;c.expr=l.selectors;c.expr[":"]=c.expr.filters;c.unique=l.uniqueSort;c.text=l.getText;c.isXMLDoc=l.isXML;c.contains=l.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,
hb=/^.[^:#\[\.,]*$/,Ab=Array.prototype.slice,Pa=c.expr.match.globalPOS,Bb={children:!0,contents:!0,next:!0,prev:!0};c.fn.extend({find:function(a){var b=this,d,e;if(typeof a!=="string")return c(a).filter(function(){d=0;for(e=b.length;d<e;d++)if(c.contains(b[d],this))return true});var f=this.pushStack("","find",a),g,i,h;d=0;for(e=this.length;d<e;d++){g=f.length;c.find(a,this[d],f);if(d>0)for(i=g;i<f.length;i++)for(h=0;h<g;h++)if(f[h]===f[i]){f.splice(i--,1);break}}return f},has:function(a){var b=c(a);
return this.filter(function(){for(var a=0,e=b.length;a<e;a++)if(c.contains(this,b[a]))return true})},not:function(a){return this.pushStack(pa(this,a,false),"not",a)},filter:function(a){return this.pushStack(pa(this,a,true),"filter",a)},is:function(a){return!!a&&(typeof a==="string"?Pa.test(a)?c(a,this.context).index(this[0])>=0:c.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var d=[],e,f,g=this[0];if(c.isArray(a)){for(f=1;g&&g.ownerDocument&&g!==b;){for(e=0;e<a.length;e++)c(g).is(a[e])&&
d.push({selector:a[e],elem:g,level:f});g=g.parentNode;f++}return d}var i=Pa.test(a)||typeof a!=="string"?c(a,b||this.context):0;e=0;for(f=this.length;e<f;e++)for(g=this[e];g;)if(i?i.index(g)>-1:c.find.matchesSelector(g,a)){d.push(g);break}else{g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}d=d.length>1?c.unique(d):d;return this.pushStack(d,"closest",a)},index:function(a){return!a?this[0]&&this[0].parentNode?this.prevAll().length:-1:typeof a==="string"?c.inArray(this[0],c(a)):
c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var d=typeof a==="string"?c(a,b):c.makeArray(a&&a.nodeType?[a]:a),e=c.merge(this.get(),d);return this.pushStack(!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,
"parentNode",d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,
"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,e){var f=c.map(this,b,d);xb.test(a)||(e=d);e&&typeof e==="string"&&(f=c.filter(e,f));f=this.length>1&&!Bb[a]?c.unique(f):f;if((this.length>1||zb.test(e))&&yb.test(a))f=f.reverse();return this.pushStack(f,a,Ab.call(arguments).join(","))}});c.extend({filter:function(a,b,d){d&&(a=":not("+a+")");return b.length===1?c.find.matchesSelector(b[0],a)?[b[0]]:[]:c.find.matches(a,b)},dir:function(a,
b,d){for(var e=[],a=a[b];a&&a.nodeType!==9&&(d===void 0||a.nodeType!==1||!c(a).is(d));){a.nodeType===1&&e.push(a);a=a[b]}return e},nth:function(a,b,c){for(var b=b||1,e=0;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var ra="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Cb=/ jQuery\d+="(?:\d+|null)"/g,
ia=/^\s+/,Qa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ra=/<([\w:]+)/,Db=/<tbody/i,Eb=/<|&#?\w+;/,Fb=/<(?:script|style)/i,Gb=/<(?:script|object|embed|option|style)/i,Sa=RegExp("<(?:"+ra+")[\\s/>]","i"),Ta=/checked\s*(?:[^=]|=\s*.checked.)/i,Ua=/\/(java|ecma)script/i,Hb=/^\s*<!(?:\[CDATA\[|\-\-)/,v={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,
"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ja=qa(k);v.optgroup=v.option;v.tbody=v.tfoot=v.colgroup=v.caption=v.thead;v.th=v.td;c.support.htmlSerialize||(v._default=[1,"div<div>","</div>"]);c.fn.extend({text:function(a){return c.access(this,function(a){return a===void 0?c.text(this):this.empty().append((this[0]&&this[0].ownerDocument||k).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,
b))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&a.firstChild.nodeType===1;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return c.isFunction(a)?this.each(function(b){c(this).wrapInner(a.call(this,b))}):this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=c.isFunction(a);return this.each(function(d){c(this).wrapAll(b?
a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,
this)});if(arguments.length){var a=c.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c.clean(arguments));return a}},remove:function(a,b){for(var d=0,e;(e=this[d])!=null;d++)if(!a||c.filter(a,[e]).length){if(!b&&e.nodeType===1){c.cleanData(e.getElementsByTagName("*"));
c.cleanData([e])}e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=a==null?false:a;b=b==null?a:b;return this.map(function(){return c.clone(this,a,b)})},html:function(a){return c.access(this,function(a){var d=this[0]||{},e=0,f=this.length;if(a===void 0)return d.nodeType===1?d.innerHTML.replace(Cb,""):null;
if(typeof a==="string"&&!Fb.test(a)&&(c.support.leadingWhitespace||!ia.test(a))&&!v[(Ra.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Qa,"<$1></$2>");try{for(;e<f;e++){d=this[e]||{};if(d.nodeType===1){c.cleanData(d.getElementsByTagName("*"));d.innerHTML=a}}d=0}catch(g){}}d&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),e=d.html();d.replaceWith(a.call(this,b,e))});typeof a!==
"string"&&(a=c(a).detach());return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}return this.length?this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){var e,f,g,i=a[0],h=[];if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&Ta.test(i))return this.each(function(){c(this).domManip(a,b,d,true)});if(c.isFunction(i))return this.each(function(e){var f=
c(this);a[0]=i.call(this,e,b?f.html():void 0);f.domManip(a,b,d)});if(this[0]){e=i&&i.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:c.buildFragment(a,this,h);g=e.fragment;if(f=g.childNodes.length===1?g=g.firstChild:g.firstChild){b=b&&c.nodeName(f,"tr");f=0;for(var j=this.length,m=j-1;f<j;f++)d.call(b?c.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):this[f]:
this[f],e.cacheable||j>1&&f<m?c.clone(g,true,true):g)}h.length&&c.each(h,function(a,b){b.src?c.ajax({type:"GET",global:false,url:b.src,async:false,dataType:"script"}):c.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Hb,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});c.buildFragment=function(a,b,d){var e,f,g,i,h=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]);i.createDocumentFragment||(i=k);if(a.length===1&&typeof h==="string"&&h.length<512&&i===k&&h.charAt(0)==="<"&&
!Gb.test(h)&&(c.support.checkClone||!Ta.test(h))&&(c.support.html5Clone||!Sa.test(h))){f=true;(g=c.fragments[h])&&g!==1&&(e=g)}if(!e){e=i.createDocumentFragment();c.clean(a,i,e,d)}f&&(c.fragments[h]=g?e:1);return{fragment:e,cacheable:f}};c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var e=[],d=c(d),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&
d.length===1){d[b](this[0]);return this}for(var f=0,g=d.length;f<g;f++){var i=(f>0?this.clone(true):this).get();c(d[f])[b](i);e=e.concat(i)}return this.pushStack(e,a,d.selector)}});c.extend({clone:function(a,b,d){var e,f,g;if(c.support.html5Clone||c.isXMLDoc(a)||!Sa.test("<"+a.nodeName+">"))e=a.cloneNode(true);else{e=k.createElement("div");ja.appendChild(e);e.innerHTML=a.outerHTML;e=e.firstChild}var i=e;if((!c.support.noCloneEvent||!c.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!c.isXMLDoc(a)){ta(a,
i);e=T(a);f=T(i);for(g=0;e[g];++g)f[g]&&ta(e[g],f[g])}if(b){sa(a,i);if(d){e=T(a);f=T(i);for(g=0;e[g];++g)sa(e[g],f[g])}}return i},clean:function(a,b,d,e){var f,g=[],b=b||k;typeof b.createElement==="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||k);for(var i=0,h;(h=a[i])!=null;i++){typeof h==="number"&&(h=h+"");if(h){if(typeof h==="string")if(Eb.test(h)){h=h.replace(Qa,"<$1></$2>");f=(Ra.exec(h)||["",""])[1].toLowerCase();var j=v[f]||v._default,m=j[0],p=b.createElement("div"),l=ja.childNodes;
b===k?ja.appendChild(p):qa(b).appendChild(p);for(p.innerHTML=j[1]+h+j[2];m--;)p=p.lastChild;if(!c.support.tbody){m=Db.test(h);j=f==="table"&&!m?p.firstChild&&p.firstChild.childNodes:j[1]==="<table>"&&!m?p.childNodes:[];for(f=j.length-1;f>=0;--f)c.nodeName(j[f],"tbody")&&!j[f].childNodes.length&&j[f].parentNode.removeChild(j[f])}!c.support.leadingWhitespace&&ia.test(h)&&p.insertBefore(b.createTextNode(ia.exec(h)[0]),p.firstChild);h=p.childNodes;if(p){p.parentNode.removeChild(p);if(l.length>0)(p=l[l.length-
1])&&p.parentNode&&p.parentNode.removeChild(p)}}else h=b.createTextNode(h);var o;if(!c.support.appendChecked)if(h[0]&&typeof(o=h.length)==="number")for(f=0;f<o;f++)va(h[f]);else va(h);h.nodeType?g.push(h):g=c.merge(g,h)}}if(d){a=function(a){return!a.type||Ua.test(a.type)};for(i=0;g[i];i++){b=g[i];if(e&&c.nodeName(b,"script")&&(!b.type||Ua.test(b.type)))e.push(b.parentNode?b.parentNode.removeChild(b):b);else{if(b.nodeType===1){h=c.grep(b.getElementsByTagName("script"),a);g.splice.apply(g,[i+1,0].concat(h))}d.appendChild(b)}}}return g},
cleanData:function(a){for(var b,d,e=c.cache,f=c.event.special,g=c.support.deleteExpando,i=0,h;(h=a[i])!=null;i++)if(!h.nodeName||!c.noData[h.nodeName.toLowerCase()])if(d=h[c.expando]){if((b=e[d])&&b.events){for(var j in b.events)f[j]?c.event.remove(h,j):c.removeEvent(h,j,b.handle);if(b.handle)b.handle.elem=null}g?delete h[c.expando]:h.removeAttribute&&h.removeAttribute(c.expando);delete e[d]}}});var ka=/alpha\([^)]*\)/i,Ib=/opacity=([^)]*)/,Jb=/([A-Z]|^ms)/g,Kb=/^[\-+]?(?:\d*\.)?\d+$/i,aa=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,
Lb=/^([\-+])=([\-+.\de]+)/,Mb=/^margin/,Nb={position:"absolute",visibility:"hidden",display:"block"},H=["Top","Right","Bottom","Left"],L,Va,Wa;c.fn.css=function(a,b){return c.access(this,function(a,b,f){return f!==void 0?c.style(a,b,f):c.css(a,b)},a,b,arguments.length>1)};c.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=L(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":c.support.cssFloat?
"cssFloat":"styleFloat"},style:function(a,b,d,e){if(a&&!(a.nodeType===3||a.nodeType===8||!a.style)){var f,g=c.camelCase(b),i=a.style,h=c.cssHooks[g],b=c.cssProps[g]||g;if(d!==void 0){e=typeof d;if(e==="string"&&(f=Lb.exec(d))){d=+(f[1]+1)*+f[2]+parseFloat(c.css(a,b));e="number"}if(!(d==null||e==="number"&&isNaN(d))){e==="number"&&!c.cssNumber[g]&&(d=d+"px");if(!h||!("set"in h)||(d=h.set(a,d))!==void 0)try{i[b]=d}catch(j){}}}else return h&&"get"in h&&(f=h.get(a,false,e))!==void 0?f:i[b]}},css:function(a,
b,d){var e,f,b=c.camelCase(b);f=c.cssHooks[b];b=c.cssProps[b]||b;b==="cssFloat"&&(b="float");if(f&&"get"in f&&(e=f.get(a,true,d))!==void 0)return e;if(L)return L(a,b)},swap:function(a,b,c){var e={},f;for(f in b){e[f]=a.style[f];a.style[f]=b[f]}c=c.call(a);for(f in b)a.style[f]=e[f];return c}});c.curCSS=c.css;k.defaultView&&k.defaultView.getComputedStyle&&(Va=function(a,b){var d,e,f,g=a.style,b=b.replace(Jb,"-$1").toLowerCase();if((e=a.ownerDocument.defaultView)&&(f=e.getComputedStyle(a,null))){d=
f.getPropertyValue(b);d===""&&!c.contains(a.ownerDocument.documentElement,a)&&(d=c.style(a,b))}if(!c.support.pixelMargin&&f&&Mb.test(b)&&aa.test(d)){e=g.width;g.width=d;d=f.width;g.width=e}return d});k.documentElement.currentStyle&&(Wa=function(a,b){var c,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;if(f==null&&g&&(c=g[b]))f=c;if(aa.test(f)){c=g.left;if(e=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;g.left=b==="fontSize"?"1em":f;f=g.pixelLeft+"px";g.left=c;if(e)a.runtimeStyle.left=
e}return f===""?"auto":f});L=Va||Wa;c.each(["height","width"],function(a,b){c.cssHooks[b]={get:function(a,e,f){if(e)return a.offsetWidth!==0?wa(a,b,f):c.swap(a,Nb,function(){return wa(a,b,f)})},set:function(a,b){return Kb.test(b)?b+"px":b}}});c.support.opacity||(c.cssHooks.opacity={get:function(a,b){return Ib.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var d=a.style,e=a.currentStyle,f=c.isNumeric(b)?"alpha(opacity="+b*
100+")":"",g=e&&e.filter||d.filter||"";d.zoom=1;if(b>=1&&c.trim(g.replace(ka,""))===""){d.removeAttribute("filter");if(e&&!e.filter)return}d.filter=ka.test(g)?g.replace(ka,f):g+" "+f}});c(function(){if(!c.support.reliableMarginRight)c.cssHooks.marginRight={get:function(a,b){return c.swap(a,{display:"inline-block"},function(){return b?L(a,"margin-right"):a.style.marginRight})}}});c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!c.support.reliableHiddenOffsets&&
(a.style&&a.style.display||c.css(a,"display"))==="none"},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});c.each({margin:"",padding:"",border:"Width"},function(a,b){c.cssHooks[a+b]={expand:function(c){for(var e=typeof c==="string"?c.split(" "):[c],f={},c=0;c<4;c++)f[a+H[c]+b]=e[c]||e[c-2]||e[0];return f}}});var Ob=/%20/g,ib=/\[\]$/,Xa=/\r?\n/g,Pb=/#.*$/,Qb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Rb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Sb=/^(?:GET|HEAD)$/,Tb=/^\/\//,Ya=/\?/,Ub=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Vb=/^(?:select|textarea)/i,ya=/\s+/,Wb=/([?&])_=[^&]*/,Za=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,$a=c.fn.load,ba={},ab={},J,F,bb=["*/"]+["*"];try{J=lb.href}catch(bc){J=k.createElement("a"),J.href="",J=J.href}F=Za.exec(J.toLowerCase())||[];c.fn.extend({load:function(a,b,d){if(typeof a!=="string"&&$a)return $a.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0)var f=
a.slice(e,a.length),a=a.slice(0,e);e="GET";if(b)if(c.isFunction(b)){d=b;b=void 0}else if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);e="POST"}var g=this;c.ajax({url:a,type:e,dataType:"html",data:b,complete:function(a,b,e){e=a.responseText;if(a.isResolved()){a.done(function(a){e=a});g.html(f?c("<div>").append(e.replace(Ub,"")).find(f):e)}d&&g.each(d,[e,b,a])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Vb.test(this.nodeName)||Rb.test(this.type))}).map(function(a,b){var d=c(this).val();return d==null?null:c.isArray(d)?c.map(d,function(a){return{name:b.name,value:a.replace(Xa,"\r\n")}}):{name:b.name,value:d.replace(Xa,"\r\n")}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(a){return this.on(b,a)}});c.each(["get","post"],
function(a,b){c[b]=function(a,e,f,g){if(c.isFunction(e)){g=g||f;f=e;e=void 0}return c.ajax({type:b,url:a,data:e,success:f,dataType:g})}});c.extend({getScript:function(a,b){return c.get(a,void 0,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},ajaxSetup:function(a,b){if(b)za(a,c.ajaxSettings);else{b=a;a=c.ajaxSettings}za(a,b);return a},ajaxSettings:{url:J,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(F[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",
processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":o.String,"text html":!0,"text json":c.parseJSON,"text xml":c.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:xa(ba),ajaxTransport:xa(ab),ajax:function(a,b){function d(a,b,d,l){if(t!==2){t=2;y&&clearTimeout(y);o=void 0;k=l||
"";q.readyState=a>0?4:0;var p,n,r,l=b;if(d){var s=e,A=q,C=s.contents,w=s.dataTypes,u=s.responseFields,D,x,z,H;for(x in u)x in d&&(A[u[x]]=d[x]);for(;w[0]==="*";){w.shift();D===void 0&&(D=s.mimeType||A.getResponseHeader("content-type"))}if(D)for(x in C)if(C[x]&&C[x].test(D)){w.unshift(x);break}if(w[0]in d)z=w[0];else{for(x in d){if(!w[0]||s.converters[x+" "+w[0]]){z=x;break}H||(H=x)}z=z||H}if(z){z!==w[0]&&w.unshift(z);d=d[z]}else d=void 0}else d=void 0;if(a>=200&&a<300||a===304){if(e.ifModified){if(D=
q.getResponseHeader("Last-Modified"))c.lastModified[m]=D;if(D=q.getResponseHeader("Etag"))c.etag[m]=D}if(a===304){l="notmodified";p=true}else try{D=e;D.dataFilter&&(d=D.dataFilter(d,D.dataType));var J=D.dataTypes;x={};var F,G,L=J.length,I,M=J[0],E,K,N,O,R;for(F=1;F<L;F++){if(F===1)for(G in D.converters)typeof G==="string"&&(x[G.toLowerCase()]=D.converters[G]);E=M;M=J[F];if(M==="*")M=E;else if(E!=="*"&&E!==M){K=E+" "+M;N=x[K]||x["* "+M];if(!N){R=void 0;for(O in x){I=O.split(" ");if(I[0]===E||I[0]===
"*")if(R=x[I[1]+" "+M]){O=x[O];O===true?N=R:R===true&&(N=O);break}}}!N&&!R&&c.error("No conversion from "+K.replace(" "," to "));N!==true&&(d=N?N(d):R(O(d)))}}n=d;l="success";p=true}catch(P){l="parsererror";r=P}}else{r=l;if(!l||a){l="error";a<0&&(a=0)}}q.status=a;q.statusText=""+(b||l);p?i.resolveWith(f,[n,l,q]):i.rejectWith(f,[q,l,r]);q.statusCode(j);j=void 0;v&&g.trigger("ajax"+(p?"Success":"Error"),[q,e,p?n:r]);h.fireWith(f,[q,l]);if(v){g.trigger("ajaxComplete",[q,e]);--c.active||c.event.trigger("ajaxStop")}}}
if(typeof a==="object"){b=a;a=void 0}var b=b||{},e=c.ajaxSetup({},b),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof c)?c(f):c.event,i=c.Deferred(),h=c.Callbacks("once memory"),j=e.statusCode||{},m,p={},l={},k,n,o,y,s,t=0,v,A,q={readyState:0,setRequestHeader:function(a,b){if(!t){var c=a.toLowerCase(),a=l[c]=l[c]||a;p[a]=b}return this},getAllResponseHeaders:function(){return t===2?k:null},getResponseHeader:function(a){var b;if(t===2){if(!n)for(n={};b=Qb.exec(k);)n[b[1].toLowerCase()]=b[2];b=n[a.toLowerCase()]}return b===
void 0?null:b},overrideMimeType:function(a){if(!t)e.mimeType=a;return this},abort:function(a){a=a||"abort";o&&o.abort(a);d(0,a);return this}};i.promise(q);q.success=q.done;q.error=q.fail;q.complete=h.add;q.statusCode=function(a){if(a){var b;if(t<2)for(b in a)j[b]=[j[b],a[b]];else{b=a[q.status];q.then(b,b)}}return this};e.url=((a||e.url)+"").replace(Pb,"").replace(Tb,F[1]+"//");e.dataTypes=c.trim(e.dataType||"*").toLowerCase().split(ya);if(e.crossDomain==null){s=Za.exec(e.url.toLowerCase());e.crossDomain=
!(!s||!(s[1]!=F[1]||s[2]!=F[2]||(s[3]||(s[1]==="http:"?80:443))!=(F[3]||(F[1]==="http:"?80:443))))}if(e.data&&e.processData&&typeof e.data!=="string")e.data=c.param(e.data,e.traditional);U(ba,e,b,q);if(t===2)return false;v=e.global;e.type=e.type.toUpperCase();e.hasContent=!Sb.test(e.type);v&&c.active++===0&&c.event.trigger("ajaxStart");if(!e.hasContent){if(e.data){e.url=e.url+((Ya.test(e.url)?"&":"?")+e.data);delete e.data}m=e.url;if(e.cache===false){s=c.now();var C=e.url.replace(Wb,"$1_="+s);e.url=
C+(C===e.url?(Ya.test(e.url)?"&":"?")+"_="+s:"")}}(e.data&&e.hasContent&&e.contentType!==false||b.contentType)&&q.setRequestHeader("Content-Type",e.contentType);if(e.ifModified){m=m||e.url;c.lastModified[m]&&q.setRequestHeader("If-Modified-Since",c.lastModified[m]);c.etag[m]&&q.setRequestHeader("If-None-Match",c.etag[m])}q.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", "+bb+"; q=0.01":""):e.accepts["*"]);for(A in e.headers)q.setRequestHeader(A,
e.headers[A]);if(e.beforeSend&&(e.beforeSend.call(f,q,e)===false||t===2)){q.abort();return false}for(A in{success:1,error:1,complete:1})q[A](e[A]);if(o=U(ab,e,b,q)){q.readyState=1;v&&g.trigger("ajaxSend",[q,e]);e.async&&e.timeout>0&&(y=setTimeout(function(){q.abort("timeout")},e.timeout));try{t=1;o.send(p,d)}catch(r){if(t<2)d(-1,r);else throw r;}}else d(-1,"No Transport");return q},param:function(a,b){var d=[],e=function(a,b){b=c.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};
if(b===void 0)b=c.ajaxSettings.traditional;if(c.isArray(a)||a.jquery&&!c.isPlainObject(a))c.each(a,function(){e(this.name,this.value)});else for(var f in a)ca(f,a[f],b,e);return d.join("&").replace(Ob,"+")}});c.extend({active:0,lastModified:{},etag:{}});var Xb=c.now(),Y=/(\=)\?(&|$)|\?\?/i;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return c.expando+"_"+Xb++}});c.ajaxPrefilter("json jsonp",function(a,b,d){b=typeof a.data==="string"&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);
if(a.dataTypes[0]==="jsonp"||a.jsonp!==false&&(Y.test(a.url)||b&&Y.test(a.data))){var e,f=a.jsonpCallback=c.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g=o[f],i=a.url,h=a.data,j="$1"+f+"$2";if(a.jsonp!==false){i=i.replace(Y,j);if(a.url===i){b&&(h=h.replace(Y,j));a.data===h&&(i=i+((/\?/.test(i)?"&":"?")+a.jsonp+"="+f))}}a.url=i;a.data=h;o[f]=function(a){e=[a]};d.always(function(){o[f]=g;if(e&&c.isFunction(g))o[f](e[0])});a.converters["script json"]=function(){e||c.error(f+" was not called");
return e[0]};a.dataTypes[0]="json";return"script"}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){c.globalEval(a);return a}}});c.ajaxPrefilter("script",function(a){if(a.cache===void 0)a.cache=false;if(a.crossDomain){a.type="GET";a.global=false}});c.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=k.head||k.getElementsByTagName("head")[0]||
k.documentElement;return{send:function(e,f){b=k.createElement("script");b.async="async";if(a.scriptCharset)b.charset=a.scriptCharset;b.src=a.url;b.onload=b.onreadystatechange=function(a,e){if(e||!b.readyState||/loaded|complete/.test(b.readyState)){b.onload=b.onreadystatechange=null;c&&b.parentNode&&c.removeChild(b);b=void 0;e||f(200,"success")}};c.insertBefore(b,c.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var la=o.ActiveXObject?function(){for(var a in K)K[a](0,1)}:!1,Yb=0,K;c.ajaxSettings.xhr=
o.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&Aa()))a:{try{a=new o.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:Aa;(function(a){c.extend(c.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(c.ajaxSettings.xhr());c.support.ajax&&c.ajaxTransport(function(a){if(!a.crossDomain||c.support.cors){var b;return{send:function(d,e){var f=a.xhr(),g,i;a.username?f.open(a.type,a.url,a.async,a.username,a.password):f.open(a.type,a.url,a.async);if(a.xhrFields)for(i in a.xhrFields)f[i]=
a.xhrFields[i];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);!a.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");try{for(i in d)f.setRequestHeader(i,d[i])}catch(h){}f.send(a.hasContent&&a.data||null);b=function(d,h){var i,l,k,n,o;try{if(b&&(h||f.readyState===4)){b=void 0;if(g){f.onreadystatechange=c.noop;la&&delete K[g]}if(h)f.readyState!==4&&f.abort();else{i=f.status;k=f.getAllResponseHeaders();n={};if((o=f.responseXML)&&o.documentElement)n.xml=o;try{n.text=
f.responseText}catch(v){}try{l=f.statusText}catch(s){l=""}!i&&a.isLocal&&!a.crossDomain?i=n.text?200:404:i===1223&&(i=204)}}}catch(t){h||e(-1,t)}n&&e(i,l,n,k)};if(!a.async||f.readyState===4)b();else{g=++Yb;if(la){if(!K){K={};c(o).unload(la)}K[g]=b}f.onreadystatechange=b}},abort:function(){b&&b(0,1)}}}});var da={},w,E,Zb=/^(?:toggle|show|hide)$/,$b=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Z,W=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft",
"paddingRight"],["opacity"]],V;c.fn.extend({show:function(a,b,d){if(a||a===0)return this.animate(I("show",3),a,b,d);for(var d=0,e=this.length;d<e;d++){a=this[d];if(a.style){b=a.style.display;if(!c._data(a,"olddisplay")&&b==="none")b=a.style.display="";(b===""&&c.css(a,"display")==="none"||!c.contains(a.ownerDocument.documentElement,a))&&c._data(a,"olddisplay",Ca(a.nodeName))}}for(d=0;d<e;d++){a=this[d];if(a.style){b=a.style.display;if(b===""||b==="none")a.style.display=c._data(a,"olddisplay")||""}}return this},
hide:function(a,b,d){if(a||a===0)return this.animate(I("hide",3),a,b,d);for(var d=0,e=this.length;d<e;d++){a=this[d];if(a.style){b=c.css(a,"display");b!=="none"&&!c._data(a,"olddisplay")&&c._data(a,"olddisplay",b)}}for(d=0;d<e;d++)if(this[d].style)this[d].style.display="none";return this},_toggle:c.fn.toggle,toggle:function(a,b,d){var e=typeof a==="boolean";c.isFunction(a)&&c.isFunction(b)?this._toggle.apply(this,arguments):a==null||e?this.each(function(){var b=e?a:c(this).is(":hidden");c(this)[b?
"show":"hide"]()}):this.animate(I("toggle",3),a,b,d);return this},fadeTo:function(a,b,c,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,b,d,e){function f(){g.queue===false&&c._mark(this);var b=c.extend({},g),d=this.nodeType===1,e=d&&c(this).is(":hidden"),f,k,l,o,n;b.animatedProperties={};for(l in a){f=c.camelCase(l);if(l!==f){a[f]=a[l];delete a[l]}if((k=c.cssHooks[f])&&"expand"in k){o=k.expand(a[f]);delete a[f];for(l in o)l in a||(a[l]=
o[l])}}for(f in a){k=a[f];if(c.isArray(k)){b.animatedProperties[f]=k[1];k=a[f]=k[0]}else b.animatedProperties[f]=b.specialEasing&&b.specialEasing[f]||b.easing||"swing";if(k==="hide"&&e||k==="show"&&!e)return b.complete.call(this);if(d&&(f==="height"||f==="width")){b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(c.css(this,"display")==="inline"&&c.css(this,"float")==="none")!c.support.inlineBlockNeedsLayout||Ca(this.nodeName)==="inline"?this.style.display="inline-block":
this.style.zoom=1}}if(b.overflow!=null)this.style.overflow="hidden";for(l in a){d=new c.fx(this,b,l);k=a[l];if(Zb.test(k))if(f=c._data(this,"toggle"+l)||(k==="toggle"?e?"show":"hide":0)){c._data(this,"toggle"+l,f==="show"?"hide":"show");d[f]()}else d[k]();else{f=$b.exec(k);o=d.cur();if(f){k=parseFloat(f[2]);n=f[3]||(c.cssNumber[l]?"":"px");if(n!=="px"){c.style(this,l,(k||1)+n);o=(k||1)/d.cur()*o;c.style(this,l,o+n)}f[1]&&(k=(f[1]==="-="?-1:1)*k+o);d.custom(o,k,n)}else d.custom(o,k,"")}}return true}
var g=c.speed(b,d,e);if(c.isEmptyObject(a))return this.each(g.complete,[false]);a=c.extend({},a);return g.queue===false?this.each(f):this.queue(g.queue,f)},stop:function(a,b,d){if(typeof a!=="string"){d=b;b=a;a=void 0}b&&a!==false&&this.queue(a||"fx",[]);return this.each(function(){var b,f=false,g=c.timers,i=c._data(this);d||c._unmark(true,this);if(a==null)for(b in i){if(i[b]&&i[b].stop&&b.indexOf(".run")===b.length-4){var h=i[b];c.removeData(this,b,true);h.stop(d)}}else if(i[b=a+".run"]&&i[b].stop){i=
i[b];c.removeData(this,b,true);i.stop(d)}for(b=g.length;b--;)if(g[b].elem===this&&(a==null||g[b].queue===a)){if(d)g[b](true);else g[b].saveState();f=true;g.splice(b,1)}(!d||!f)&&c.dequeue(this,a)})}});c.each({slideDown:I("show",1),slideUp:I("hide",1),slideToggle:I("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){c.fn[a]=function(a,c,f){return this.animate(b,a,c,f)}});c.extend({speed:function(a,b,d){var e=a&&typeof a==="object"?c.extend({},a):
{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};e.duration=c.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;if(e.queue==null||e.queue===true)e.queue="fx";e.old=e.complete;e.complete=function(a){c.isFunction(e.old)&&e.old.call(this);e.queue?c.dequeue(this,e.queue):a!==false&&c._unmark(this)};return e},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}},
timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=c.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,d){function e(a){return f.step(a)}
var f=this,g=c.fx;this.startTime=V||Ba();this.end=b;this.now=this.start=a;this.pos=this.state=0;this.unit=d||this.unit||(c.cssNumber[this.prop]?"":"px");e.queue=this.options.queue;e.elem=this.elem;e.saveState=function(){c._data(f.elem,"fxshow"+f.prop)===void 0&&(f.options.hide?c._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&c._data(f.elem,"fxshow"+f.prop,f.end))};e()&&(c.timers.push(e)&&!Z)&&(Z=setInterval(g.tick,g.interval))},show:function(){var a=c._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=
a||c.style(this.elem,this.prop);this.options.show=true;a!==void 0?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c._data(this.elem,"fxshow"+this.prop)||c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b,d=V||Ba(),e=true,f=this.elem,g=this.options;if(a||d>=g.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();
g.animatedProperties[this.prop]=true;for(b in g.animatedProperties)g.animatedProperties[b]!==true&&(e=false);if(e){g.overflow!=null&&!c.support.shrinkWrapBlocks&&c.each(["","X","Y"],function(a,b){f.style["overflow"+b]=g.overflow[a]});g.hide&&c(f).hide();if(g.hide||g.show)for(b in g.animatedProperties){c.style(f,b,g.orig[b]);c.removeData(f,"fxshow"+b,true);c.removeData(f,"toggle"+b,true)}if(a=g.complete){g.complete=false;a.call(f)}}return false}if(g.duration==Infinity)this.now=d;else{a=d-this.startTime;
this.state=a/g.duration;this.pos=c.easing[g.animatedProperties[this.prop]](this.state,a,0,1,g.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update();return true}};c.extend(c.fx,{tick:function(){for(var a,b=c.timers,d=0;d<b.length;d++){a=b[d];!a()&&b[d]===a&&b.splice(d--,1)}b.length||c.fx.stop()},interval:13,stop:function(){clearInterval(Z);Z=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&
a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});c.each(W.concat.apply([],W),function(a,b){b.indexOf("margin")&&(c.fx.step[b]=function(a){c.style(a.elem,b,Math.max(0,a.now)+a.unit)})});c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length});var cb,ac=/^t(?:able|d|h)$/i,db=/^(?:body|html)$/i;cb="getBoundingClientRect"in k.documentElement?function(a,b,d,e){try{e=a.getBoundingClientRect()}catch(f){}if(!e||
!c.contains(d,a))return e?{top:e.top,left:e.left}:{top:0,left:0};a=b.body;b=Da(b);return{top:e.top+(b.pageYOffset||c.support.boxModel&&d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0),left:e.left+(b.pageXOffset||c.support.boxModel&&d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0)}}:function(a,b,d){var e,f=a.offsetParent,g=b.body;e=(b=b.defaultView)?b.getComputedStyle(a,null):a.currentStyle;for(var i=a.offsetTop,h=a.offsetLeft;(a=a.parentNode)&&a!==g&&a!==d;){if(c.support.fixedPosition&&
e.position==="fixed")break;e=b?b.getComputedStyle(a,null):a.currentStyle;i=i-a.scrollTop;h=h-a.scrollLeft;if(a===f){i=i+a.offsetTop;h=h+a.offsetLeft;if(c.support.doesNotAddBorder&&(!c.support.doesAddBorderForTableAndCells||!ac.test(a.nodeName))){i=i+(parseFloat(e.borderTopWidth)||0);h=h+(parseFloat(e.borderLeftWidth)||0)}f=a.offsetParent}if(c.support.subtractsBorderForOverflowNotVisible&&e.overflow!=="visible"){i=i+(parseFloat(e.borderTopWidth)||0);h=h+(parseFloat(e.borderLeftWidth)||0)}}if(e.position===
"relative"||e.position==="static"){i=i+g.offsetTop;h=h+g.offsetLeft}if(c.support.fixedPosition&&e.position==="fixed"){i=i+Math.max(d.scrollTop,g.scrollTop);h=h+Math.max(d.scrollLeft,g.scrollLeft)}return{top:i,left:h}};c.fn.offset=function(a){if(arguments.length)return a===void 0?this:this.each(function(b){c.offset.setOffset(this,a,b)});var b=this[0],d=b&&b.ownerDocument;return!d?null:b===d.body?c.offset.bodyOffset(b):cb(b,d,d.documentElement)};c.offset={bodyOffset:function(a){var b=a.offsetTop,d=
a.offsetLeft;if(c.support.doesNotIncludeMarginInBodyOffset){b=b+(parseFloat(c.css(a,"marginTop"))||0);d=d+(parseFloat(c.css(a,"marginLeft"))||0)}return{top:b,left:d}},setOffset:function(a,b,d){var e=c.css(a,"position");if(e==="static")a.style.position="relative";var f=c(a),g=f.offset(),i=c.css(a,"top"),h=c.css(a,"left"),j={},k={};if((e==="absolute"||e==="fixed")&&c.inArray("auto",[i,h])>-1){k=f.position();e=k.top;h=k.left}else{e=parseFloat(i)||0;h=parseFloat(h)||0}c.isFunction(b)&&(b=b.call(a,d,g));
if(b.top!=null)j.top=b.top-g.top+e;if(b.left!=null)j.left=b.left-g.left+h;"using"in b?b.using.call(a,j):f.css(j)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),e=db.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top=d.top-(parseFloat(c.css(a,"marginTop"))||0);d.left=d.left-(parseFloat(c.css(a,"marginLeft"))||0);e.top=e.top+(parseFloat(c.css(b[0],"borderTopWidth"))||0);e.left=e.left+(parseFloat(c.css(b[0],"borderLeftWidth"))||0);return{top:d.top-
e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||k.body;a&&!db.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);c.fn[a]=function(e){return c.access(this,function(a,e,i){var h=Da(a);if(i===void 0)return h?b in h?h[b]:c.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(!d?i:c(h).scrollLeft(),
d?i:c(h).scrollTop()):a[e]=i},a,e,arguments.length,null)}});c.each({Height:"height",Width:"width"},function(a,b){var d="client"+a,e="scroll"+a,f="offset"+a;c.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(c.css(a,b,"padding")):this[b]():null};c.fn["outer"+a]=function(a){var d=this[0];return d?d.style?parseFloat(c.css(d,b,a?"margin":"border")):this[b]():null};c.fn[b]=function(a){return c.access(this,function(a,b,g){if(c.isWindow(a)){b=a.document;a=b.documentElement[d];return c.support.boxModel&&
a||b.body&&b.body[d]||a}if(a.nodeType===9){b=a.documentElement;return b[d]>=b[e]?b[d]:Math.max(a.body[e],b[e],a.body[f],b[f])}if(g===void 0){a=c.css(a,b);b=parseFloat(a);return c.isNumeric(b)?b:a}c(a).css(b,g)},b,a,arguments.length,null)}});o.jQuery=o.$=c;"function"===typeof define&&(define.amd&&define.amd.jQuery)&&define("jquery",[],function(){return c});c.support.getSetAttribute||(c.removeAttr=function(a,b){b==="class"&&(b="className");a.removeAttribute(b)})})(window);Aloha=window.Aloha||{};Aloha.settings=Aloha.settings||{};Aloha.settings.jQuery=Aloha.settings.jQuery||jQuery.noConflict(!0);/*
 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2011, Tim Down
 Licensed under the MIT license.
 Version: 1.2.1
 Build date: 8 October 2011
 MIT License {@link http://creativecommons.org/licenses/MIT/}
 @return {String} outerHtml

 jquery.layout 1.3.0 - Release Candidate 30.7
 $Date: 2012-10-13 08:00:00 (Sat, 13 Oct 2012) $
 $Rev: 303007 $

 Copyright (c) 2012 
   Fabrizio Balliano (http://www.fabrizioballiano.net)
   Kevin Dalman (http://allpro.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 Changelog: http://layout.jquery-dev.net/changelog.cfm#1.3.0.rc30.7

 Docs: http://layout.jquery-dev.net/documentation.html
 Tips: http://layout.jquery-dev.net/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout
 RequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/i18n for details
*/
(function(){function Ha(m,d){var a;a=m||{};this.jQuery=d||{};this.config={};this.config.elements=a.elements?a.elements:[];this.config.attributes=a.attributes?a.attributes:{};this.config.attributes[Ha.ALL]=this.config.attributes[Ha.ALL]?this.config.attributes[Ha.ALL]:[];this.config.allow_comments=a.allow_comments?a.allow_comments:!1;this.allowed_elements={};this.config.protocols=a.protocols?a.protocols:{};this.config.add_attributes=a.add_attributes?a.add_attributes:{};this.dom=a.dom?a.dom:document;
for(var j=0,c=this.config.elements.length;j<c;j++)this.allowed_elements[this.config.elements[j]]=!0;this.config.remove_element_contents={};this.config.remove_all_contents=!1;if(a.remove_contents)if(a.remove_contents instanceof Array)for(var b=this.config.remove_element_contents,j=0,c=a.remove_contents.length;j<c;j++)b[a.remove_contents[j]]=!0;else this.config.remove_all_contents=!0;this.transformers=a.transformers?a.transformers:[];this.filters=a.filters?a.filters:[]}var ia;ia||(ia={});(function(){function m(a){return 10>
a?"0"+a:a}function d(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=g[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(c,e){var g,j,p,o,r=b,s,m=e[c];m&&("object"===typeof m&&"function"===typeof m.toJSON)&&(m=m.toJSON(c));"function"===typeof k&&(m=k.call(e,c,m));switch(typeof m){case "string":return d(m);case "number":return isFinite(m)?""+m:"null";case "boolean":case "null":return""+m;case "object":if(!m)return"null";
b+=f;s=[];if("[object Array]"===Object.prototype.toString.apply(m)){o=m.length;for(g=0;g<o;g+=1)s[g]=a(g,m)||"null";p=0===s.length?"[]":b?"[\n"+b+s.join(",\n"+b)+"\n"+r+"]":"["+s.join(",")+"]";b=r;return p}if(k&&"object"===typeof k){o=k.length;for(g=0;g<o;g+=1)"string"===typeof k[g]&&(j=k[g],(p=a(j,m))&&s.push(d(j)+(b?": ":":")+p))}else for(j in m)Object.prototype.hasOwnProperty.call(m,j)&&(p=a(j,m))&&s.push(d(j)+(b?": ":":")+p);p=0===s.length?"{}":b?"{\n"+b+s.join(",\n"+b)+"\n"+r+"}":"{"+s.join(",")+
"}";b=r;return p}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+m(this.getUTCMonth()+1)+"-"+m(this.getUTCDate())+"T"+m(this.getUTCHours())+":"+m(this.getUTCMinutes())+":"+m(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b,f,g={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof ia.stringify&&(ia.stringify=function(c,e,g){var d;f=b="";if(typeof g==="number")for(d=0;d<g;d=d+1)f=f+" ";else typeof g==="string"&&(f=g);if((k=e)&&typeof e!=="function"&&(typeof e!=="object"||typeof e.length!=="number"))throw Error("JSON.stringify");return a("",{"":c})});
"function"!==typeof ia.parse&&(ia.parse=function(a,b){function c(a,f){var l,k,g=a[f];if(g&&typeof g==="object")for(l in g)if(Object.prototype.hasOwnProperty.call(g,l)){k=c(g,l);k!==void 0?g[l]=k:delete g[l]}return b.call(a,f,g)}var f,a=""+a;j.lastIndex=0;j.test(a)&&(a=a.replace(j,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){f=eval("("+a+")");return typeof b==="function"?c({"":f},""):f}throw new SyntaxError("JSON.parse");})})();define("util/json2",[],function(){return ia});(function(){var m=function(){function d(a,b){var c=typeof a[b];return c==e||!!(c==l&&a[b])||"unknown"==c}function a(a,b){return!!(typeof a[b]==l&&a[b])}function j(a,b){return typeof a[b]!=q}function c(a){return function(b,e){for(var c=e.length;c--;)if(!a(b,e[c]))return!1;return!0}}function b(a){return a&&s(a,
r)&&u(a,o)}function f(a){window.alert("Rangy not supported in your browser. Reason: "+a);t.initialized=!0;t.supported=!1}function g(){if(!t.initialized){var e,c=!1,l=!1;d(document,"createRange")&&(e=document.createRange(),s(e,p)&&u(e,n)&&(c=!0),e.detach());if((e=a(document,"body")?document.body:document.getElementsByTagName("body")[0])&&d(e,"createTextRange"))e=e.createTextRange(),b(e)&&(l=!0);!c&&!l&&f("Neither Range nor TextRange are implemented");t.initialized=!0;t.features={implementsDomRange:c,
implementsTextRange:l};c=y.concat(x);l=0;for(e=c.length;l<e;++l)try{c[l](t)}catch(k){a(window,"console")&&d(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",k)}}}function k(a){this.name=a;this.supported=this.initialized=!1}var l="object",e="function",q="undefined",n="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),p="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),
o="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),r="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),s=c(d),m=c(a),u=c(j),t={version:"1.2.1",initialized:!1,supported:!0,util:{isHostMethod:d,isHostObject:a,isHostProperty:j,areHostMethods:s,areHostObjects:m,areHostProperties:u,isTextRange:b},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};
t.fail=f;t.warn=function(a){a="Rangy warning: "+a;t.config.alertOnWarn?window.alert(a):typeof window.console!=q&&typeof window.console.log!=q&&window.console.log(a)};({}).hasOwnProperty?t.util.extend=function(a,b){for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e])}:f("hasOwnProperty not supported");var x=[],y=[];t.init=g;t.addInitListener=function(a){t.initialized?a(t):x.push(a)};var z=[];t.addCreateMissingNativeApiListener=function(a){z.push(a)};t.createMissingNativeApi=function(a){a=a||window;g();
for(var b=0,e=z.length;b<e;++b)z[b](a)};k.prototype.fail=function(a){this.initialized=!0;this.supported=!1;throw Error("Module '"+this.name+"' failed to load: "+a);};k.prototype.warn=function(a){t.warn("Module "+this.name+": "+a)};k.prototype.createError=function(a){return Error("Error in Rangy "+this.name+" module: "+a)};t.createModule=function(a,b){var e=new k(a);t.modules[a]=e;y.push(function(a){b(a,e);e.initialized=!0;e.supported=!0})};t.requireModules=function(a){for(var b=0,e=a.length,c,f;b<
e;++b){f=a[b];c=t.modules[f];if(!c||!(c instanceof k))throw Error("Module '"+f+"' not found");if(!c.supported)throw Error("Module '"+f+"' not supported");}};var A=!1,m=function(){A||(A=!0,t.initialized||g())};if(typeof window==q)f("No window found");else if(typeof document==q)f("No document found");else return d(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",m,!1),d(window,"addEventListener")?window.addEventListener("load",m,!1):d(window,"attachEvent")?window.attachEvent("onload",
m):f("Window does not have required addEventListener or attachEvent method"),t}();m.createModule("DomUtil",function(d,a){function j(a){for(var b=0;a=a.previousSibling;)b++;return b}function c(a,b){var e=[],c;for(c=a;c;c=c.parentNode)e.push(c);for(c=b;c;c=c.parentNode)if(m(e,c))return c;return null}function b(a,b,e){for(e=e?a:a.parentNode;e;){a=e.parentNode;if(a===b)return e;e=a}return null}function f(a){a=a.nodeType;return 3==a||4==a||8==a}function g(a,b){var e=b.nextSibling,c=b.parentNode;e?c.insertBefore(a,
e):c.appendChild(a);return a}function k(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=o)return a.ownerDocument;if(typeof a.document!=o)return a.document;if(a.parentNode)return k(a.parentNode);throw Error("getDocument: no document found for node");}function l(a){if(a)return a.previousSibling?a.previousSibling.nextSibling:a.nextSibling?a.nextSibling.previousSibling:a.parentNode?a.parentNode.firstChild:a}function e(a){return!a?"[No node]":f(a)?'"'+a.data+'"':1==a.nodeType?"<"+a.nodeName+(a.id?
' id="'+a.id+'"':"")+">["+a.childNodes.length+"]":a.nodeName}function q(a){this._next=this.root=a}function n(a,b){this.node=a;this.offset=b}function p(a){this.code=this[a];this.codeName=a;this.message="DOMException: "+this.codeName}var o="undefined",r=d.util;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||a.fail("document missing a Node creation method");r.isHostMethod(document,"getElementsByTagName")||a.fail("document missing getElementsByTagName method");
var s=document.createElement("div");r.areHostMethods(s,["insertBefore","appendChild","cloneNode"])||a.fail("Incomplete Element implementation");r.isHostProperty(s,"innerHTML")||a.fail("Element is missing innerHTML property");s=document.createTextNode("test");r.areHostMethods(s,["splitText","deleteData","insertData","appendData","cloneNode"])||a.fail("Incomplete Text Node implementation");var m=function(a,b){for(var e=a.length;e--;)if(a[e]===b)return!0;return!1};q.prototype={_current:null,hasNext:function(){return!!this._next},
next:function(){var a=this._current=this._next,b;if(this._current){b=a.firstChild;if(!b)for(b=null;a!==this.root&&!(b=a.nextSibling);)a=a.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}};n.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+e(this.node)+":"+this.offset+")]"}};p.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,
NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};p.prototype.toString=function(){return this.message};d.dom={arrayContains:m,isHtmlNamespace:function(a){var b;return typeof a.namespaceURI==o||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b},parentElement:function(a){a=a.parentNode;return 1==a.nodeType?a:null},getNodeIndex:j,getNodeLength:function(a){var b;return f(a)?a.length:(b=a.childNodes)?b.length:0},getCommonAncestor:c,isAncestorOf:function(a,b,e){for(b=e?b:b.parentNode;b;){if(b===
a)return!0;b=b.parentNode}return!1},getClosestAncestorIn:b,isCharacterDataNode:f,insertAfter:g,splitDataNode:function(a,b){var e=a.cloneNode(!1);e.deleteData(0,b);a.deleteData(b,a.length-b);g(e,a);return e},getDocument:k,getWindow:function(a){a=k(a);if(typeof a.defaultView!=o)return a.defaultView;if(typeof a.parentWindow!=o)return a.parentWindow;throw Error("Cannot get a window object for node");},getIframeWindow:function(a){if(typeof a.contentWindow!=o)return a.contentWindow;if(typeof a.contentDocument!=
o)return a.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element");},getIframeDocument:function(a){if(typeof a.contentDocument!=o)return a.contentDocument;if(typeof a.contentWindow!=o)return a.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element");},getBody:function(a){return r.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]},getRootContainer:function(a){for(var b;b=a.parentNode;)a=b;return a},
comparePoints:function(a,e,f,k){var a=l(a),f=l(f),g;if(a==f)return e===k?0:e<k?-1:1;if(g=b(f,a,!0))return e<=j(g)?-1:1;if(g=b(a,f,!0))return j(g)<k?-1:1;e=c(a,f);a=a===e?e:b(a,e,!0);f=f===e?e:b(f,e,!0);if(a===f)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(e=e.firstChild;e;){if(e===a)return-1;if(e===f)return 1;e=e.nextSibling}throw Error("Should not be here!");},inspectNode:e,fragmentFromNodeChildren:function(a){for(var b=k(a).createDocumentFragment(),e;e=a.firstChild;)b.appendChild(e);
return b},createIterator:function(a){return new q(a)},DomPosition:n};d.DOMException=p});m.createModule("DomRange",function(d){function a(a,b){return 3!=a.nodeType&&(G.isAncestorOf(a,b.startContainer,!0)||G.isAncestorOf(a,b.endContainer,!0))}function j(a){return G.getDocument(a.startContainer)}function c(a,b,e){if(b=a._listeners[b])for(var c=0,f=b.length;c<f;++c)b[c].call(a,{target:a,args:e})}function b(a){return new S(a.parentNode,G.getNodeIndex(a))}function f(a){return new S(a.parentNode,G.getNodeIndex(a)+
1)}function g(a,b,e){var c=11==a.nodeType?a.firstChild:a;G.isCharacterDataNode(b)?e==b.length?G.insertAfter(a,b):b.parentNode.insertBefore(a,0==e?b:G.splitDataNode(b,e)):e>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[e]);return c}function k(a){for(var b,e,c=j(a.range).createDocumentFragment();e=a.next();){b=a.isPartiallySelectedSubtree();e=e.cloneNode(!b);b&&(b=a.getSubtreeIterator(),e.appendChild(k(b)),b.detach(!0));if(10==e.nodeType)throw new I("HIERARCHY_REQUEST_ERR");c.appendChild(e)}return c}
function l(a,b,e){for(var c,f,e=e||{stop:!1};c=a.next();)if(a.isPartiallySelectedSubtree())if(!1===b(c)){e.stop=!0;break}else{if(c=a.getSubtreeIterator(),l(c,b,e),c.detach(!0),e.stop)break}else for(c=G.createIterator(c);f=c.next();)if(!1===b(f)){e.stop=!0;return}}function e(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),e(b),b.detach(!0)):a.remove()}function q(a){for(var b,e=j(a.range).createDocumentFragment(),c;b=a.next();){a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),
c=a.getSubtreeIterator(),b.appendChild(q(c)),c.detach(!0)):a.remove();if(10==b.nodeType)throw new I("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,e){var c=!(!b||!b.length),f,k=!!e;c&&(f=RegExp("^("+b.join("|")+")$"));var g=[];l(new o(a,!1),function(a){(!c||f.test(a.nodeType))&&(!k||e(a))&&g.push(a)});return g}function p(a){return"["+("undefined"==typeof a.getName?"Range":a.getName())+"("+G.inspectNode(a.startContainer)+":"+a.startOffset+", "+G.inspectNode(a.endContainer)+":"+a.endOffset+
")]"}function o(a,b){this.range=a;this.clonePartiallySelectedTextNodes=b;if(!a.collapsed){this.sc=a.startContainer;this.so=a.startOffset;this.ec=a.endContainer;this.eo=a.endOffset;var e=a.commonAncestorContainer;this.sc===this.ec&&G.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===e&&!G.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:G.getClosestAncestorIn(this.sc,e,!0),this._last=this.ec===e&&!G.isCharacterDataNode(this.ec)?
this.ec.childNodes[this.eo-1]:G.getClosestAncestorIn(this.ec,e,!0))}}function r(a){this.code=this[a];this.codeName=a;this.message="RangeException: "+this.codeName}function s(a,b,e){this.nodes=n(a,b,e);this._next=this.nodes[0];this._position=0}function m(a){return function(b,e){for(var c,f=e?b:b.parentNode;f;){c=f.nodeType;if(G.arrayContains(a,c))return f;f=f.parentNode}return null}}function u(a,b){if(J(a,b))throw new r("INVALID_NODE_TYPE_ERR");}function t(a){if(!a.startContainer)throw new I("INVALID_STATE_ERR");
}function x(a,b){if(!G.arrayContains(b,a.nodeType))throw new r("INVALID_NODE_TYPE_ERR");}function y(a,b){if(0>b||b>(G.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new I("INDEX_SIZE_ERR");}function z(a,b){if(X(a,!0)!==X(b,!0))throw new I("WRONG_DOCUMENT_ERR");}function A(a){if(L(a,!0))throw new I("NO_MODIFICATION_ALLOWED_ERR");}function F(a,b){if(!a)throw new I(b);}function H(a){t(a);if(!G.arrayContains(Z,a.startContainer.nodeType)&&!X(a.startContainer,!0)||!G.arrayContains(Z,a.endContainer.nodeType)&&
!X(a.endContainer,!0)||!(a.startOffset<=(G.isCharacterDataNode(a.startContainer)?a.startContainer.length:a.startContainer.childNodes.length))||!(a.endOffset<=(G.isCharacterDataNode(a.endContainer)?a.endContainer.length:a.endContainer.childNodes.length)))throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")");}function D(){}function Q(a){a.START_TO_START=fa;a.START_TO_END=Qa;a.END_TO_END=ka;a.END_TO_START=ma;a.NODE_BEFORE=Ea;a.NODE_AFTER=ga;a.NODE_BEFORE_AND_AFTER=
la;a.NODE_INSIDE=Fa}function E(a){Q(a);Q(a.prototype)}function B(a,b){return function(){H(this);var e=this.startContainer,c=this.startOffset,k=this.commonAncestorContainer,g=new o(this,!0);e!==k&&(e=G.getClosestAncestorIn(e,k,!0),c=f(e),e=c.node,c=c.offset);l(g,A);g.reset();k=a(g);g.detach();b(this,e,c,e,c);return k}}function T(c,l,k){function g(a,e){return function(c){t(this);x(c,P);x(ua(c),Z);c=(a?b:f)(c);(e?j:n)(this,c.node,c.offset)}}function j(a,b,e){var c=a.endContainer,f=a.endOffset;if(b!==
a.startContainer||e!==this.startOffset){if(ua(b)!=ua(c)||1==G.comparePoints(b,e,c,f))c=b,f=e;l(a,b,e,c,f)}}function n(a,b,e){var c=a.startContainer,f=a.startOffset;if(b!==a.endContainer||e!==this.endOffset){if(ua(b)!=ua(c)||-1==G.comparePoints(b,e,c,f))c=b,f=e;l(a,c,f,b,e)}}function p(a,b,e){(b!==a.startContainer||e!==this.startOffset||b!==a.endContainer||e!==this.endOffset)&&l(a,b,e,b,e)}c.prototype=new D;d.util.extend(c.prototype,{setStart:function(a,b){t(this);u(a,!0);y(a,b);j(this,a,b)},setEnd:function(a,
b){t(this);u(a,!0);y(a,b);n(this,a,b)},setStartBefore:g(!0,!0),setStartAfter:g(!1,!0),setEndBefore:g(!0,!1),setEndAfter:g(!1,!1),collapse:function(a){H(this);a?l(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):l(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){t(this);u(a,!0);l(this,a,0,a,G.getNodeLength(a))},selectNode:function(a){t(this);u(a,!1);x(a,P);var e=b(a),a=f(a);l(this,e.node,e.offset,a.node,a.offset)},
extractContents:B(q,l),deleteContents:B(e,l),canSurroundContents:function(){H(this);A(this.startContainer);A(this.endContainer);var b=new o(this,!0),e=b._first&&a(b._first,this)||b._last&&a(b._last,this);b.detach();return!e},detach:function(){k(this)},splitBoundaries:function(){H(this);var a=this.startContainer,b=this.startOffset,e=this.endContainer,c=this.endOffset,f=a===e;G.isCharacterDataNode(e)&&(0<c&&c<e.length)&&G.splitDataNode(e,c);G.isCharacterDataNode(a)&&(0<b&&b<a.length)&&(a=G.splitDataNode(a,
b),f?(c-=b,e=a):e==a.parentNode&&c>=G.getNodeIndex(a)&&c++,b=0);l(this,a,b,e,c)},normalizeBoundaries:function(){H(this);var a=this.startContainer,b=this.startOffset,e=this.endContainer,c=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,c=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},k=function(f){var l=f.previousSibling;if(l&&l.nodeType==f.nodeType){a=f;var k=f.length;b=l.length;f.insertData(0,l.data);l.parentNode.removeChild(l);a==e?(c+=b,e=a):e==f.parentNode&&
(l=G.getNodeIndex(f),c==l?(e=f,c=k):c>l&&c--)}},g=!0;G.isCharacterDataNode(e)?e.length==c&&f(e):(0<c&&(g=e.childNodes[c-1])&&G.isCharacterDataNode(g)&&f(g),g=!this.collapsed);g?G.isCharacterDataNode(a)?0==b&&k(a):b<a.childNodes.length&&(f=a.childNodes[b])&&G.isCharacterDataNode(f)&&k(f):(a=e,b=c);l(this,a,b,e,c)},collapseToPoint:function(a,b){t(this);u(a,!0);y(a,b);p(this,a,b)}});E(c)}function W(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;a.commonAncestorContainer=
a.collapsed?a.startContainer:G.getCommonAncestor(a.startContainer,a.endContainer)}function O(a,b,e,f,l){var k=a.startContainer!==b||a.startOffset!==e,g=a.endContainer!==f||a.endOffset!==l;a.startContainer=b;a.startOffset=e;a.endContainer=f;a.endOffset=l;W(a);c(a,"boundarychange",{startMoved:k,endMoved:g})}function U(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};W(this)}d.requireModules(["DomUtil"]);var G=d.dom,S=G.DomPosition,
I=d.DOMException;o.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;a&&(this._next=a!==this._last?a.nextSibling:null,G.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so)));
return a},remove:function(){var a=this._current,b,e;G.isCharacterDataNode(a)&&(a===this.sc||a===this.ec)?(b=a===this.sc?this.so:0,e=a===this.ec?this.eo:a.length,b!=e&&a.deleteData(b,e-b)):a.parentNode&&a.parentNode.removeChild(a)},isPartiallySelectedSubtree:function(){return a(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new U(j(this.range));var b=this._current,e=b,c=0,f=b,l=G.getNodeLength(b);G.isAncestorOf(b,
this.sc,!0)&&(e=this.sc,c=this.so);G.isAncestorOf(b,this.ec,!0)&&(f=this.ec,l=this.eo);O(a,e,c,f,l)}return new o(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach();this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};r.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};r.prototype.toString=function(){return this.message};s.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=
this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var P=[1,3,4,5,7,8,10],Z=[2,9,11],Y=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ua=G.getRootContainer,X=m([9,11]),L=m([5,6,10,12]),J=m([6,10,12]),da=document.createElement("style"),C=!1;try{da.innerHTML="<b>x</b>",C=3==da.firstChild.nodeType}catch(Ta){}d.features.htmlParsingConforms=C;var va="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),
fa=0,Qa=1,ka=2,ma=3,Ea=0,ga=1,la=2,Fa=3;D.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){H(this);z(this.startContainer,b.startContainer);var e=a==ma||a==fa?"start":"end",c=a==Qa||a==fa?"start":"end";return G.comparePoints(this[e+"Container"],this[e+"Offset"],b[c+"Container"],b[c+"Offset"])},insertNode:function(a){H(this);x(a,Y);A(this.startContainer);if(G.isAncestorOf(a,this.startContainer,!0))throw new I("HIERARCHY_REQUEST_ERR");this.setStartBefore(g(a,
this.startContainer,this.startOffset))},cloneContents:function(){H(this);var a,b;if(this.collapsed)return j(this).createDocumentFragment();if(this.startContainer===this.endContainer&&G.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=j(this).createDocumentFragment(),b.appendChild(a),b;b=new o(this,!0);a=k(b);b.detach();return a},canSurroundContents:function(){H(this);A(this.startContainer);A(this.endContainer);
var b=new o(this,!0),e=b._first&&a(b._first,this)||b._last&&a(b._last,this);b.detach();return!e},surroundContents:function(a){x(a,ba);if(!this.canSurroundContents())throw new r("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset);a.appendChild(b);this.selectNode(a)},cloneRange:function(){H(this);for(var a=new U(j(this)),b=va.length,e;b--;)e=va[b],a[e]=this[e];return a},toString:function(){H(this);
var a=this.startContainer;if(a===this.endContainer&&G.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],a=new o(this,!0);l(a,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)});a.detach();return b.join("")},compareNode:function(a){H(this);var b=a.parentNode,e=G.getNodeIndex(a);if(!b)throw new I("NOT_FOUND_ERR");a=this.comparePoint(b,e);b=this.comparePoint(b,e+1);return 0>a?0<b?la:Ea:0<b?ga:Fa},comparePoint:function(a,b){H(this);
F(a,"HIERARCHY_REQUEST_ERR");z(a,this.startContainer);return 0>G.comparePoints(a,b,this.startContainer,this.startOffset)?-1:0<G.comparePoints(a,b,this.endContainer,this.endOffset)?1:0},createContextualFragment:C?function(a){var b=this.startContainer,e=G.getDocument(b);if(!b)throw new I("INVALID_STATE_ERR");var c=null;1==b.nodeType?c=b:G.isCharacterDataNode(b)&&(c=G.parentElement(b));c=null===c||"HTML"==c.nodeName&&G.isHtmlNamespace(G.getDocument(c).documentElement)&&G.isHtmlNamespace(c)?e.createElement("body"):
c.cloneNode(!1);c.innerHTML=a;return G.fragmentFromNodeChildren(c)}:function(a){t(this);var b=j(this).createElement("body");b.innerHTML=a;return G.fragmentFromNodeChildren(b)},toHtml:function(){H(this);var a=j(this).createElement("div");a.appendChild(this.cloneContents());return a.innerHTML},intersectsNode:function(a,b){H(this);F(a,"NOT_FOUND_ERR");if(G.getDocument(a)!==j(this))return!1;var e=a.parentNode,c=G.getNodeIndex(a);F(e,"NOT_FOUND_ERR");var f=G.comparePoints(e,c,this.endContainer,this.endOffset),
e=G.comparePoints(e,c+1,this.startContainer,this.startOffset);return b?0>=f&&0<=e:0>f&&0<e},isPointInRange:function(a,b){H(this);F(a,"HIERARCHY_REQUEST_ERR");z(a,this.startContainer);return 0<=G.comparePoints(a,b,this.startContainer,this.startOffset)&&0>=G.comparePoints(a,b,this.endContainer,this.endOffset)},intersectsRange:function(a,b){H(this);if(j(a)!=j(this))throw new I("WRONG_DOCUMENT_ERR");var e=G.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),c=G.comparePoints(this.endContainer,
this.endOffset,a.startContainer,a.startOffset);return b?0>=e&&0<=c:0>e&&0<c},intersection:function(a){if(this.intersectsRange(a)){var b=G.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),e=G.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),c=this.cloneRange();-1==b&&c.setStart(a.startContainer,a.startOffset);1==e&&c.setEnd(a.endContainer,a.endOffset);return c}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();
-1==G.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset);1==G.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset);return b}throw new r("Ranges do not intersect");},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==Fa},containsNodeContents:function(a){return 0<=this.comparePoint(a,0)&&0>=this.comparePoint(a,G.getNodeLength(a))},containsRange:function(a){return this.intersection(a).equals(a)},
containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var e=b.getNodes([3]);return 0<e.length?(b.setStart(e[0],0),a=e.pop(),b.setEnd(a,a.length),a=this.containsRange(b),b.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,b){H(this);return new s(this,a,b)},getNodes:function(a,b){H(this);return n(this,a,b)},getDocument:function(){return j(this)},collapseBefore:function(a){t(this);this.setEndBefore(a);this.collapse(!1)},collapseAfter:function(a){t(this);this.setStartAfter(a);
this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return U.rangesEqual(this,a)},inspect:function(){return p(this)}};T(U,O,function(a){t(a);a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.collapsed=a.commonAncestorContainer=null;c(a,"detach",null);a._listeners=null});d.rangePrototype=D.prototype;U.rangeProperties=va;U.RangeIterator=o;U.copyComparisonConstants=E;U.createPrototypeRange=T;U.inspect=p;U.getRangeDocument=j;U.rangesEqual=function(a,b){return a.startContainer===
b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset};d.DomRange=U;d.RangeException=r});m.createModule("WrappedRange",function(d){function a(a,e,c,k){var g=a.duplicate();g.collapse(c);var d=g.parentElement();b.isAncestorOf(e,d,!0)||(d=e);if(!d.canHaveHTML)return new f(d.parentNode,b.getNodeIndex(d));e=b.getDocument(d).createElement("span");e.parentNode&&e.parentNode.removeChild(e);var j,s=c?"StartToStart":"StartToEnd";do d.insertBefore(e,e.previousSibling),
g.moveToElementText(e);while(0<(j=g.compareEndPoints(s,a))&&e.previousSibling);s=e.nextSibling;if(-1==j&&s&&b.isCharacterDataNode(s)){g.setEndPoint(c?"EndToStart":"EndToEnd",a);if(/[\r\n]/.test(s.data)){g=g.duplicate();d=g.text.replace(/\r\n/g,"\r").length;for(d=g.moveStart("character",d);-1==g.compareEndPoints("StartToEnd",g);)d++,g.moveStart("character",1)}else if(d=g.text.replace(/\u00a0/g," "),c=s.data.replace(/\u00a0/g," "),0!==c.indexOf(d)){for(;0<d.length&&0!==c.indexOf(d);)d=d.substr(1);d=
d.length}else d=g.text.length;s=new f(s,d)}else s=(k||!c)&&e.previousSibling,s=(g=(k||c)&&e.nextSibling)&&b.isCharacterDataNode(g)?new f(g,0):s&&b.isCharacterDataNode(s)?new f(s,s.length):new f(d,b.getNodeIndex(e));e.parentNode.removeChild(e);return s}function j(a,e){var c,f,k=a.offset,g=b.getDocument(a.node),d=g.body.createTextRange(),j=b.isCharacterDataNode(a.node);j?(c=a.node,f=c.parentNode):(c=a.node.childNodes,c=k<c.length?c[k]:null,f=a.node);g=g.createElement("span");g.innerHTML="&#feff;";c?
f.insertBefore(g,c):f.appendChild(g);try{d.moveToElementText(g),d.collapse(!e)}catch(m){}f.removeChild(g);if(j)d[e?"moveStart":"moveEnd"]("character",k);return d}d.requireModules(["DomUtil","DomRange"]);var c,b=d.dom,f=b.DomPosition,g=d.DomRange;if(d.features.implementsDomRange&&(!d.features.implementsTextRange||!d.config.preferTextRange))(function(){function a(b){for(var e=f.length,c;e--;)c=f[e],b[c]=b.nativeRange[c]}var e,f=g.rangeProperties,k;c=function(b){if(!b)throw Error("Range must be specified");
this.nativeRange=b;a(this)};g.createPrototypeRange(c,function(a,b,e,c,f){var k=a.endContainer!==c||a.endOffset!=f;if(a.startContainer!==b||a.startOffset!=e||k)a.setEnd(c,f),a.setStart(b,e)},function(a){a.nativeRange.detach();a.detached=!0;for(var b=f.length,e;b--;)e=f[b],a[e]=null});e=c.prototype;e.selectNode=function(b){this.nativeRange.selectNode(b);a(this)};e.deleteContents=function(){this.nativeRange.deleteContents();a(this)};e.extractContents=function(){var b=this.nativeRange.extractContents();
a(this);return b};e.cloneContents=function(){return this.nativeRange.cloneContents()};e.surroundContents=function(b){this.nativeRange.surroundContents(b);a(this)};e.collapse=function(b){this.nativeRange.collapse(b);a(this)};e.cloneRange=function(){return new c(this.nativeRange.cloneRange())};e.refresh=function(){a(this)};e.toString=function(){return this.nativeRange.toString()};var j=document.createTextNode("test");b.getBody(document).appendChild(j);var o=document.createRange();o.setStart(j,0);o.setEnd(j,
0);try{o.setStart(j,1),e.setStart=function(b,e){this.nativeRange.setStart(b,e);a(this)},e.setEnd=function(b,e){this.nativeRange.setEnd(b,e);a(this)},k=function(b){return function(e){this.nativeRange[b](e);a(this)}}}catch(r){e.setStart=function(b,e){try{this.nativeRange.setStart(b,e)}catch(c){this.nativeRange.setEnd(b,e),this.nativeRange.setStart(b,e)}a(this)},e.setEnd=function(b,e){try{this.nativeRange.setEnd(b,e)}catch(c){this.nativeRange.setStart(b,e),this.nativeRange.setEnd(b,e)}a(this)},k=function(b,
e){return function(c){try{this.nativeRange[b](c)}catch(f){this.nativeRange[e](c),this.nativeRange[b](c)}a(this)}}}e.setStartBefore=k("setStartBefore","setEndBefore");e.setStartAfter=k("setStartAfter","setEndAfter");e.setEndBefore=k("setEndBefore","setStartBefore");e.setEndAfter=k("setEndAfter","setStartAfter");o.selectNodeContents(j);e.selectNodeContents=o.startContainer==j&&o.endContainer==j&&0==o.startOffset&&o.endOffset==j.length?function(b){this.nativeRange.selectNodeContents(b);a(this)}:function(a){this.setStart(a,
0);this.setEnd(a,g.getEndOffset(a))};o.selectNodeContents(j);o.setEnd(j,3);k=document.createRange();k.selectNodeContents(j);k.setEnd(j,4);k.setStart(j,2);e.compareBoundaryPoints=-1==o.compareBoundaryPoints(o.START_TO_END,k)&1==o.compareBoundaryPoints(o.END_TO_START,k)?function(a,b){b=b.nativeRange||b;a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END);return this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||
b)};d.util.isHostMethod(o,"createContextualFragment")&&(e.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)});b.getBody(document).removeChild(j);o.detach();k.detach()})(),d.createNativeRange=function(a){a=a||document;return a.createRange()};else if(d.features.implementsTextRange){c=function(a){this.textRange=a;this.refresh()};c.prototype=new g(document);c.prototype.refresh=function(){var c,e,f=this.textRange;c=f.parentElement();var k=f.duplicate();k.collapse(!0);
e=k.parentElement();k=f.duplicate();k.collapse(!1);f=k.parentElement();e=e==f?e:b.getCommonAncestor(e,f);e=e==c?e:b.getCommonAncestor(c,e);0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?e=c=a(this.textRange,e,!0,!0):(c=a(this.textRange,e,!0,!1),e=a(this.textRange,e,!1,!1));this.setStart(c.node,c.offset);this.setEnd(e.node,e.offset)};g.copyComparisonConstants(c);var k=function(){return this}();"undefined"==typeof k.Range&&(k.Range=c);d.createNativeRange=function(a){a=a||document;return a.body.createTextRange()}}d.features.implementsTextRange&&
(c.rangeToTextRange=function(a){if(a.collapsed)return j(new f(a.startContainer,a.startOffset),!0);var e=j(new f(a.startContainer,a.startOffset),!0),c=j(new f(a.endContainer,a.endOffset),!1),a=b.getDocument(a.startContainer).body.createTextRange();a.setEndPoint("StartToStart",e);a.setEndPoint("EndToEnd",c);return a});c.prototype.getName=function(){return"WrappedRange"};d.WrappedRange=c;d.createRange=function(a){a=a||document;return new c(d.createNativeRange(a))};d.createRangyRange=function(a){a=a||
document;return new g(a)};d.createIframeRange=function(a){return d.createRange(b.getIframeDocument(a))};d.createIframeRangyRange=function(a){return d.createRangyRange(b.getIframeDocument(a))};d.addCreateMissingNativeApiListener(function(a){a=a.document;if(typeof a.createRange=="undefined")a.createRange=function(){return d.createRange(this)};a=a=null})});m.createModule("WrappedSelection",function(d,a){function j(a){return(a||window).getSelection()}function c(a){return(a||window).document.selection}
function b(a,b,e){var c=e?"end":"start",e=e?"start":"end";a.anchorNode=b[c+"Container"];a.anchorOffset=b[c+"Offset"];a.focusNode=b[e+"Container"];a.focusOffset=b[e+"Offset"]}function f(a){a.anchorNode=a.focusNode=null;a.anchorOffset=a.focusOffset=0;a.rangeCount=0;a.isCollapsed=!0;a._ranges.length=0}function g(a){var b;a instanceof u?(b=a._selectionNativeRange,b||(b=d.createNativeRange(s.getDocument(a.startContainer)),b.setEnd(a.endContainer,a.endOffset),b.setStart(a.startContainer,a.startOffset),
a._selectionNativeRange=b,a.attachListener("detach",function(){this._selectionNativeRange=null}))):a instanceof t?b=a.nativeRange:d.features.implementsDomRange&&a instanceof s.getWindow(a.startContainer).Range&&(b=a);return b}function k(a){var b=a.getNodes(),e;a:if(!b.length||1!=b[0].nodeType)e=!1;else{e=1;for(var c=b.length;e<c;++e)if(!s.isAncestorOf(b[0],b[e])){e=!1;break a}e=!0}if(!e)throw Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return b[0]}
function l(a,e){var c=new t(e);a._ranges=[c];b(a,c,!1);a.rangeCount=1;a.isCollapsed=c.collapsed}function e(a){a._ranges.length=0;if("None"==a.docSelection.type)f(a);else{var e=a.docSelection.createRange();if(e&&"undefined"!=typeof e.text)l(a,e);else{a.rangeCount=e.length;for(var c,k=s.getDocument(e.item(0)),g=0;g<a.rangeCount;++g)c=d.createRange(k),c.selectNode(e.item(g)),a._ranges.push(c);a.isCollapsed=1==a.rangeCount&&a._ranges[0].collapsed;b(a,a._ranges[a.rangeCount-1],!1)}}}function q(a,b){for(var c=
a.docSelection.createRange(),f=k(b),g=s.getDocument(c.item(0)),g=s.getBody(g).createControlRange(),l=0,d=c.length;l<d;++l)g.add(c.item(l));try{g.add(f)}catch(j){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}g.select();e(a)}function n(a,b,e){this.nativeSelection=a;this.docSelection=b;this._ranges=[];this.win=e;this.refresh()}function p(a,b){for(var c=s.getDocument(b[0].startContainer),c=s.getBody(c).createControlRange(),
f=0,g;f<rangeCount;++f){g=k(b[f]);try{c.add(g)}catch(l){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)");}}c.select();e(a)}function o(a,b){if(a.anchorNode&&s.getDocument(a.anchorNode)!==s.getDocument(b))throw new x("WRONG_DOCUMENT_ERR");}function r(a){var b=[],e=new y(a.anchorNode,a.anchorOffset),c=new y(a.focusNode,a.focusOffset),f="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var k=
0,g=a.rangeCount;k<g;++k)b[k]=u.inspect(a.getRangeAt(k));return"["+f+"(Ranges: "+b.join(", ")+")(anchor: "+e.inspect()+", focus: "+c.inspect()+"]"}d.requireModules(["DomUtil","DomRange","WrappedRange"]);d.config.checkSelectionRanges=!0;var s=d.dom,m=d.util,u=d.DomRange,t=d.WrappedRange,x=d.DOMException,y=s.DomPosition,z,A,F=d.util.isHostMethod(window,"getSelection"),H=d.util.isHostObject(document,"selection"),D=H&&(!F||d.config.preferTextRange);D?(z=c,d.isSelectionValid=function(a){var a=(a||window).document,
b=a.selection;return"None"!=b.type||s.getDocument(b.createRange().parentElement())==a}):F?(z=j,d.isSelectionValid=function(){return!0}):a.fail("Neither document.selection or window.getSelection() detected.");d.getNativeSelection=z;var F=z(),Q=d.createNativeRange(document),E=s.getBody(document),B=m.areHostObjects(F,m.areHostProperties(F,["anchorOffset","focusOffset"]));d.features.selectionHasAnchorAndFocus=B;var T=m.isHostMethod(F,"extend");d.features.selectionHasExtend=T;var W="number"==typeof F.rangeCount;
d.features.selectionHasRangeCount=W;var O=!1,U=!0;m.areHostMethods(F,["addRange","getRangeAt","removeAllRanges"])&&("number"==typeof F.rangeCount&&d.features.implementsDomRange)&&function(){var a=document.createElement("iframe");E.appendChild(a);var b=s.getIframeDocument(a);b.open();b.write("<html><head></head><body>12</body></html>");b.close();var e=s.getIframeWindow(a).getSelection(),c=b.documentElement.lastChild.firstChild,b=b.createRange();b.setStart(c,1);b.collapse(true);e.addRange(b);U=e.rangeCount==
1;e.removeAllRanges();var f=b.cloneRange();b.setStart(c,0);f.setEnd(c,2);e.addRange(b);e.addRange(f);O=e.rangeCount==2;b.detach();f.detach();E.removeChild(a)}();d.features.selectionSupportsMultipleRanges=O;d.features.collapsedNonEditableSelectionsSupported=U;var G=!1,S;E&&m.isHostMethod(E,"createControlRange")&&(S=E.createControlRange(),m.areHostProperties(S,["item","add"])&&(G=!0));d.features.implementsControlRange=G;A=B?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:
function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:false};var I;m.isHostMethod(F,"getRangeAt")?I=function(a,b){try{return a.getRangeAt(b)}catch(e){return null}}:B&&(I=function(a){var b=s.getDocument(a.anchorNode),b=d.createRange(b);b.setStart(a.anchorNode,a.anchorOffset);b.setEnd(a.focusNode,a.focusOffset);if(b.collapsed!==this.isCollapsed){b.setStart(a.focusNode,a.focusOffset);b.setEnd(a.anchorNode,a.anchorOffset)}return b});d.getSelection=function(a){var a=a||window,b=a._rangySelection,
e=z(a),f=H?c(a):null;if(b){b.nativeSelection=e;b.docSelection=f;b.refresh(a)}else{b=new n(e,f,a);a._rangySelection=b}return b};d.getIframeSelection=function(a){return d.getSelection(s.getIframeWindow(a))};S=n.prototype;if(!D&&B&&m.areHostMethods(F,["removeAllRanges","addRange"])){S.removeAllRanges=function(){this.nativeSelection.removeAllRanges();f(this)};var P=function(a,b){var e=u.getRangeDocument(b),e=d.createRange(e);e.collapseToPoint(b.endContainer,b.endOffset);a.nativeSelection.addRange(g(e));
a.nativeSelection.extend(b.startContainer,b.startOffset);a.refresh()};S.addRange=W?function(a,e){if(G&&H&&this.docSelection.type=="Control")q(this,a);else if(e&&T)P(this,a);else{var c;if(O)c=this.rangeCount;else{this.removeAllRanges();c=0}this.nativeSelection.addRange(g(a));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==c+1){if(d.config.checkSelectionRanges)(c=I(this.nativeSelection,this.rangeCount-1))&&!u.rangesEqual(c,a)&&(a=new t(c));this._ranges[this.rangeCount-1]=a;b(this,
a,ba(this.nativeSelection));this.isCollapsed=A(this)}else this.refresh()}}:function(a,b){if(b&&T)P(this,a);else{this.nativeSelection.addRange(g(a));this.refresh()}};S.setRanges=function(a){if(G&&a.length>1)p(this,a);else{this.removeAllRanges();for(var b=0,e=a.length;b<e;++b)this.addRange(a[b])}}}else if(m.isHostMethod(F,"empty")&&m.isHostMethod(Q,"select")&&G&&D)S.removeAllRanges=function(){try{var a=jQuery.browser.msie&&jQuery.browser.version<8&&typeof document.documentMode==="undefined";a||this.docSelection.empty();
this.docSelection.type!="None"&&a&&this.docSelection.empty()}catch(b){}f(this)},S.addRange=function(a){if(this.docSelection.type=="Control")q(this,a);else try{t.rangeToTextRange(a).select();this._ranges[0]=a;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;b(this,a,false)}catch(e){}},S.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?p(this,a):b&&this.addRange(a[0])};else return a.fail("No means of selecting a Range or TextRange was found"),!1;S.getRangeAt=function(a){if(a<
0||a>=this.rangeCount)throw new x("INDEX_SIZE_ERR");return this._ranges[a]};var Z;if(D)Z=function(a){var b;if(d.isSelectionValid(a.win))b=a.docSelection.createRange();else{b=s.getBody(a.win.document).createTextRange();b.collapse(true)}a.docSelection.type=="Control"?e(a):b&&typeof b.text!="undefined"?l(a,b):f(a)};else if(m.isHostMethod(F,"getRangeAt")&&"number"==typeof F.rangeCount)Z=function(a){if(G&&H&&a.docSelection.type=="Control")e(a);else{a._ranges.length=a.rangeCount=a.nativeSelection.rangeCount;
if(a.rangeCount){for(var c=0,k=a.rangeCount;c<k;++c)a._ranges[c]=new d.WrappedRange(a.nativeSelection.getRangeAt(c));b(a,a._ranges[a.rangeCount-1],ba(a.nativeSelection));a.isCollapsed=A(a)}else f(a)}};else if(B&&"boolean"==typeof F.isCollapsed&&"boolean"==typeof Q.collapsed&&d.features.implementsDomRange)Z=function(a){var b;b=a.nativeSelection;if(b.anchorNode){b=I(b,0);a._ranges=[b];a.rangeCount=1;b=a.nativeSelection;a.anchorNode=b.anchorNode;a.anchorOffset=b.anchorOffset;a.focusNode=b.focusNode;
a.focusOffset=b.focusOffset;a.isCollapsed=A(a)}else f(a)};else return a.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;S.refresh=function(a){var b=a?this._ranges.slice(0):null;Z(this);if(a){a=b.length;if(a!=this._ranges.length)return false;for(;a--;)if(!u.rangesEqual(b[a],this._ranges[a]))return false;return true}};var Y=function(a,b){var e=a.getAllRanges(),c=false;a.removeAllRanges();for(var k=0,g=e.length;k<g;++k)c||b!==e[k]?a.addRange(e[k]):c=true;a.rangeCount||
f(a)};S.removeRange=G?function(a){if(this.docSelection.type=="Control"){for(var b=this.docSelection.createRange(),a=k(a),c=s.getDocument(b.item(0)),c=s.getBody(c).createControlRange(),f,g=false,l=0,d=b.length;l<d;++l){f=b.item(l);f!==a||g?c.add(b.item(l)):g=true}c.select();e(this)}else Y(this,a)}:function(a){Y(this,a)};var ba;!D&&B&&d.features.implementsDomRange?(ba=function(a){var b=false;a.anchorNode&&(b=s.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)==1);return b},S.isBackwards=
function(){return ba(this)}):ba=S.isBackwards=function(){return false};S.toString=function(){for(var a=[],b=0,e=this.rangeCount;b<e;++b)a[b]=""+this._ranges[b];return a.join("")};S.collapse=function(a,b){o(this,a);var e=d.createRange(s.getDocument(a));e.collapseToPoint(a,b);this.removeAllRanges();this.addRange(e);this.isCollapsed=true};S.collapseToStart=function(){if(this.rangeCount){var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)}else throw new x("INVALID_STATE_ERR");};S.collapseToEnd=
function(){if(this.rangeCount){var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)}else throw new x("INVALID_STATE_ERR");};S.selectAllChildren=function(a){o(this,a);var b=d.createRange(s.getDocument(a));b.selectNodeContents(a);this.removeAllRanges();this.addRange(b)};S.deleteFromDocument=function(){if(G&&H&&this.docSelection.type=="Control"){for(var a=this.docSelection.createRange(),b;a.length;){b=a.item(0);a.remove(b);b.parentNode.removeChild(b)}this.refresh()}else if(this.rangeCount){a=
this.getAllRanges();this.removeAllRanges();b=0;for(var e=a.length;b<e;++b)a[b].deleteContents();this.addRange(a[e-1])}};S.getAllRanges=function(){return this._ranges.slice(0)};S.setSingleRange=function(a){this.setRanges([a])};S.containsNode=function(a,b){for(var e=0,c=this._ranges.length;e<c;++e)if(this._ranges[e].containsNode(a,b))return true;return false};S.toHtml=function(){var a="";if(this.rangeCount){for(var a=u.getRangeDocument(this._ranges[0]).createElement("div"),b=0,e=this._ranges.length;b<
e;++b)a.appendChild(this._ranges[b].cloneContents());a=a.innerHTML}return a};S.getName=function(){return"WrappedSelection"};S.inspect=function(){return r(this)};S.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null};n.inspect=r;d.Selection=n;d.selectionPrototype=S;d.addCreateMissingNativeApiListener(function(a){if(typeof a.getSelection=="undefined")a.getSelection=function(){return d.getSelection(this)};a=null})});window.rangy=m})();define("vendor/rangy-core",function(){});
define("aloha/rangy-core",["jquery","vendor/rangy-core"],function(){return window.rangy});define("util/class",[],function(){var m=!1,d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){function a(){!m&&this._constructor&&this._constructor.apply(this,arguments)}var j=this.prototype;m=!0;var c=new this;m=!1;for(var b=0;b<arguments.length;b++){var f=arguments[b],g;for(g in f)c[g]="function"==typeof f[g]&&"function"==typeof j[g]&&d.test(f[g])?function(a,b){return function(){var e=
this._super;this._super=j[a];var c=b.apply(this,arguments);this._super=e;return c}}(g,f[g]):f[g]}a.prototype=c;a.constructor=a;a.extend=arguments.callee;return a};return this.Class});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/lang",[],function(){});(function(m){var d=m.GENTICS;d.Utils.applyProperties=function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};d.Utils.uniqeString4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};
d.Utils.guid=function(){var a=d.Utils.uniqeString4;return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}})(window);define("aloha/ecma5shims",[],function(){function m(a){var b=null;if(a){do b=a;while(null!=(a=a.parentNode))}return b}function d(a,b){return(a.contains(b)&&16)+(b.contains(a)&&8)+(0<=a.sourceIndex&&0<=b.sourceIndex?(a.sourceIndex<b.sourceIndex&&4)+(a.sourceIndex>b.sourceIndex&&2):1)}function a(a){return null!=a.sourceIndex?a:a.parentNode.insertBefore(document.createComment(""),a)}var j,
c={bind:function(a){var b=this.obj||this,c=Function.prototype.bind,l=Array.prototype.slice.call(arguments,1);return c?c.apply(b,arguments):function(){return b.apply(a,0===arguments.length?l:l.concat(Array.prototype.slice.call(arguments)))}},trim:function(){var a=this.obj||this,b=String.prototype.trim;return b?b.call(a):a.replace(/^\s+/,"").replace(/\s+$/,"")},indexOf:function(a,b){var c=this.obj||this,l=Array.prototype.indexOf;if(l)return l.call(c,a,b);void 0===b&&(b=0);0>b&&(b+=c.length);0>b&&(b=
0);for(l=c.length;b<l;b++)if(void 0!==c[b]&&c[b]===a)return b;return-1},forEach:function(a,b){var c=this.obj||this,l=Array.prototype.forEach;if(l)return l.call(c,a,b);var e,l=0;for(e=c.length;l<e;l++)void 0!==c[l]&&a.call(b,c[l],l,c)},map:function(a,b,c){var l=this.obj||this,e=Array.prototype.map,d="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,n=[];if(e)n=e.call(l,a,b);else{var e=[],p,n=0;for(p=l.length;n<p;n++)void 0!==l[n]&&(e[n]=a.call(b,l[n],n,l));n=e}return d?
j(n):n},filter:function(a,b,c){var l=this.obj||this,e=Array.prototype.filter,d="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,n=[];if(e)n=e.call(l,a,b);else{var e=[],p,o,n=0;for(o=l.length;n<o;n++)void 0!==l[n]&&a.call(b,p=l[n],n,l)&&e.push(p);n=e}return d?j(n):n},every:function(a,b){var c=this.obj||this,l=Array.prototype.every;if(l)return l.call(c,a,b);var e,l=0;for(e=c.length;l<e;l++)if(void 0!==c[l]&&!a.call(b,c[l],l,c))return!1;return!0},some:function(a,
b){var c=this.obj||this,l=Array.prototype.some;if(l)return l.call(c,a,b);var e,l=0;for(e=c.length;l<e;l++)if(void 0!==c[l]&&a.call(b,c[l],l,c))return!0;return!1},hasAttribute:function(a){var b=this.obj||this;return b.hasAttribute?b.hasAttribute(a):!!b.getAttribute(a)}};j=function(a){var b=function(){};b.prototype=c;b=new b;b.obj=a;return b};for(var b in c)c.hasOwnProperty(b)&&(j[b]=c[b]);j.Node="undefined"!=typeof window.Node?window.Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,
ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32};j.compareDocumentPosition=function(b,c){if(document.documentElement.compareDocumentPosition)return b.compareDocumentPosition(c);if(!document.documentElement.contains)throw"neither compareDocumentPosition nor contains is supported by this browser.";
if(b==c)return 0;if(m(b)!=m(c))return 1;if(null!=b.sourceIndex&&null!=c.sourceIndex)return d(b,c);if(b==document)return 20;if(c==document)return 10;var k=a(b),l=a(c),e=d(k,l);b!=k&&k.parentNode.removeChild(k);c!=l&&l.parentNode.removeChild(l);return e};j.getComputedStyle=function(a,b){return window.getComputedStyle?window.getComputedStyle(a,b):a.currentStyle?a.currentStyle:null};return j});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/dom",["jquery",
"util/class","aloha/ecma5shims"],function(m,d,a){var j;function c(a){if(!a)return-1;var b,e=a.parentNode.childNodes,c=e.length;for(b=0;b<c;b++)if(e[b]===a)return b;return-1}function b(a){if(1===a.nodeType){for(var b=0,a=a.firstChild;a;)b+=1,a=a.nextSibling;return b}return 3===a.nodeType?a.length:0}function f(a){return"aloha-editing-p"===a.className&&1===b(a)&&"BR"===a.children[0].nodeName&&"aloha-end-br"===a.children[0].className}function g(a,b){if(!a)return null;if(b(a))return a;var e=a.firstChild||
a.nextSibling||a.parentNode&&!q.Utils.Dom.isEditingHost(a.parentNode)&&a.parentNode.nextSibling;return e?g(e,b):null}function k(a){if(!a)return!0;if("BR"===a.nodeName)return!1;if(a.nodeType===j)return-1===a.data.search(/\S/)||1===a.data.length&&8192<=a.data.charCodeAt(0)?!0:!1;var e=b(a);if(0===e)return!0;var a=a.childNodes,c;for(c=0;c<e;c++)if(!k(a[c]))return!1;return!0}function l(a){return!k(a)}function e(a,b){a.nodeType!==j&&(k(a)||f(a))?m(a).replaceWith(b):m(a).after(b)}var q=window.GENTICS;j=
3;var n={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,LI:!0},d=d.extend({getIndexInParent:c,wordRegex:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
nonWordRegex:/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
mergeableTags:"b code del em i ins strong sub sup #text".split(" "),nonWordBoundaryTags:"a b code del em i ins span strong sub sup #text".split(" "),nonEmptyTags:["br"],tags:{flow:"a abbr address area article aside audio b bdi bdo blockquote br button canvas cite code command datalist del details dfn div dl em embed fieldset figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr i iframe img input ins kbd keygen label map mark math menu meter nav noscript object ol output p pre progress q ruby s samp script section select small span strong style sub sup svg table textarea time u ul var video wbr #text".split(" "),
phrasing:"a abbr area audio b bdi bdo br button canvas cite code command datalist del dfn em embed i iframe img input ins kbd keygen label map mark math meter noscript object output progress q ruby samp script select small span strong sub sup svg textarea time u var video wbr #text".split(" ")},children:{a:"phrasing",abbr:"phrasing",address:"flow",area:"empty",article:"flow",aside:"flow",audio:"source",b:"phrasing",base:"empty",bdo:"phrasing",blockquote:"phrasing",body:"flow",br:"empty",button:"phrasing",
canvas:"phrasing",caption:"flow",cite:"phrasing",code:"phrasing",col:"empty",colgroup:"col",command:"empty",datalist:["phrasing","option"],dd:"flow",del:"phrasing",div:"flow",details:["summary","flow"],dfn:"flow",dl:["dt","dd"],dt:"phrasing",em:"phrasing",embed:"empty",fieldset:["legend","flow"],figcaption:"flow",figure:["figcaption","flow"],footer:"flow",form:"flow",h1:"phrasing",h2:"phrasing",h3:"phrasing",h4:"phrasing",h5:"phrasing",h6:"phrasing",header:"flow",hgroup:"h1 h2 h3 h4 h5 h6".split(" "),
hr:"empty",i:"phrasing",iframe:"#text",img:"empty",input:"empty",ins:"phrasing",kbd:"phrasing",keygen:"empty",label:"phrasing",legend:"phrasing",li:"flow",link:"empty",map:"area",mark:"phrasing",menu:["li","flow"],meta:"empty",meter:"phrasing",nav:"flow",noscript:"phrasing",object:"param",ol:"li",optgroup:"option",option:"#text",output:"phrasing",p:"phrasing",param:"empty",pre:"phrasing",progress:"phrasing",q:"phrasing",rp:"phrasing",rt:"phrasing",ruby:["phrasing","rt","rp"],s:"phrasing",samp:"pharsing",
script:"#script",section:"flow",select:["option","optgroup"],small:"phrasing",source:"empty",span:"phrasing",strong:"phrasing",style:"phrasing",sub:"phrasing",summary:"phrasing",sup:"phrasing",table:"caption colgroup thead tbody tfoot tr".split(" "),tbody:"tr",td:"flow",textarea:"#text",tfoot:"tr",th:"phrasing",thead:"tr",time:"phrasing",title:"#text",tr:["th","td"],track:"empty",u:"phrasing",ul:"li","var":"phrasing",video:"source",wbr:"empty"},blockLevelElements:"p h1 h2 h3 h4 h5 h6 blockquote div pre".split(" "),
listElements:["li","ol","ul"],split:function(a,b,e){var c=m(a.startContainer),f=a.startOffset,k,l,g,d,j,q,n,H,D;e&&(c=m(a.endContainer),f=a.endOffset);1>b.length&&(b=m(document.body));e=!a.isCollapsed()&&!e;l=c.parents().get();l.unshift(c.get(0));m.each(l,function(a,e){if(b.filter(function(){return this==e}).length){a>0&&(k=l.slice(0,a));return false}});if(!k)return!0;k=k.reverse();c=0;for(q=k.length;c<q;++c)if(n=k[c],c===q-1)3===n.nodeType?(j=document.createTextNode(n.data.substring(f,n.data.length)),
n.data=n.data.substring(0,f),this.isBlockLevelElement(n.parentElement)&&(this.isEmpty(j)&&0===m("br",g).length)&&(j=m("<br/>").addClass("aloha-end-br"))):(H=m(n),j=H.contents(),H=H.clone(!1).empty(),j=H.append(j.slice(f,j.length)).get(0),m(j).addClass("aloha-editing-p"),1===j.childNodes.length&&"br"===j.childNodes.item(0).nodeName.toLowerCase()&&m(j.childNodes.item(0)).addClass("aloha-end-br")),e&&a.endContainer===n&&(a.endContainer=j,a.endOffset-=f,a.clearCaches()),d?d.prepend(j):m(n).after(j);else{H=
m(n).clone(!1).empty();g?d.prepend(H):g=H;for(d=H;;){D=k[c+1].nextSibling;if(!D)break;d.append(D)}if(e&&a.endContainer===n){a.endContainer=H.get(0);n=k[c+1];for(H=0;;){n=n.previousSibling;if(!n)break;H++}a.endOffset-=H;a.clearCaches()}}m(k[0]).after(g);return m([k[0],g?g.get(0):j])},allowsNesting:function(a,b){if(!a||!a.nodeName||!b||!b.nodeName)return!1;var e=a.nodeName.toLowerCase(),c=b.nodeName.toLowerCase();return!this.children[e]?!1:this.children[e]==c||m.isArray(this.children[e])&&0<=m.inArray(c,
this.children[e])||m.isArray(this.tags[this.children[e]])&&0<=m.inArray(c,this.tags[this.children[e]])?!0:!1},addMarkup:function(a,b,e){3===a.startContainer.nodeType&&(0<a.startOffset&&a.startOffset<a.startContainer.data.length)&&this.split(a,m(a.startContainer).parent(),!1);3===a.endContainer.nodeType&&(0<a.endOffset&&a.endOffset<a.endContainer.data.length)&&this.split(a,m(a.endContainer).parent(),!0);this.recursiveAddMarkup(a.getRangeTree(),b,a,e);this.doCleanup({merge:!0,removeempty:!0},a)},recursiveAddMarkup:function(a,
b,e,c){var f,k,e=0;for(k=a.length;e<k;++e)if("full"==a[e].type&&this.allowsNesting(b.get(0),a[e].domobj)){if((c||a[e].domobj.nodeName!=b.get(0).nodeName)&&(3!==a[e].domobj.nodeType||0!==m.trim(a[e].domobj.data).length))m(a[e].domobj).wrap(b),!c&&3!==a[e].domobj.nodeType&&(f=new q.Utils.RangeObject,f.startContainer=f.endContainer=a[e].domobj.parentNode,f.startOffset=0,f.endOffset=f.endContainer.childNodes.length,this.removeMarkup(f,b,m(a[e].domobj.parentNode)))}else(c||a[e].domobj&&a[e].domobj.nodeName!==
b.get(0).nodeName)&&(a[e].children&&0<a[e].children.length)&&this.recursiveAddMarkup(a[e].children,b)},findHighestElement:function(a,b,e){for(var b=b.toLowerCase(),c,f=a,a=e?function(){return e.filter(function(){return f==this}).length}:function(){return!1};!a()&&f;)f.nodeName.toLowerCase()===b&&(c=f),f=f.parentNode;return c},removeMarkup:function(a,b,e){var c=b.get(0).nodeName,f=this.findHighestElement(a.startContainer,c,e),k=this.findHighestElement(a.endContainer,c,e),l=!1;f&&0<a.startOffset&&(this.split(a,
m(f).parent(),!1),l=!0);if(k&&(3===a.endContainer.nodeType&&a.endOffset<a.endContainer.data.length&&(this.split(a,m(k).parent(),!0),l=!0),1===a.endContainer.nodeType&&a.endOffset<a.endContainer.childNodes.length))this.split(a,m(k).parent(),!0),l=!0;l&&a.correctRange();if(e=(e=this.findHighestElement(a.getCommonAncestorContainer(),c,e))?e.parentNode:a.getCommonAncestorContainer())c=a.getRangeTree(e),this.recursiveRemoveMarkup(c,b),this.doCleanup({merge:!0,removeempty:!0},a,e)},recursiveRemoveMarkup:function(a,
b){var e,c,f;e=0;for(c=a.length;e<c;++e)"full"==a[e].type&&a[e].domobj.nodeName==b.get(0).nodeName&&(f=m(a[e].domobj).contents(),0<f.length?f.first().unwrap():m(a[e].domobj).remove()),a[e].children&&this.recursiveRemoveMarkup(a[e].children,b)},doCleanup:function(a,b,e){var f=this,k,l,g,d,j;"undefined"===typeof a&&(a={});"undefined"===typeof a.merge&&(a.merge=!1);"undefined"===typeof a.removeempty&&(a.removeempty=!1);"undefined"===typeof e&&b&&(e=b.getCommonAncestorContainer());l=k=!1;g=m(e);d=b.startOffset;
j=b.endOffset;g.contents().each(function(){var e;try{e=this.nodeType}catch(n){return}switch(e){case 1:e=this.nodeName;if(k&&k.nodeName===e){if(b.startContainer===g&&d>c(this)){b.startOffset=b.startOffset-1;l=true}if(b.endContainer===g&&j>c(this)){b.endOffset=b.endOffset-1;l=true}m(k).append(m(this).contents());l=l|f.doCleanup(a,b,k);m(this).remove()}else{l=l|f.doCleanup(a,b,this);var r=false;if(a.removeempty){q.Utils.Dom.isBlockLevelElement(this)&&this.childNodes.length===0&&(r=true);m.inArray(e.toLowerCase(),
f.mergeableTags)>=0&&(m(this).text().length===0&&this.childNodes.length===0)&&(r=true)}if(r){if(b.startContainer===this.parentNode&&d>c(this)){b.startOffset=b.startOffset-1;l=true}if(b.endContainer===this.parentNode&&j>c(this)){b.endOffset=b.endOffset-1;l=true}m(this).remove()}else k=(a.mergeable?a.mergeable(this):m.inArray(e.toLowerCase(),f.mergeableTags)>=0)?this:false}break;case 3:if(k&&k.nodeType===3&&a.merge){e=k.nodeValue.length;if(b.startContainer===this){b.startContainer=k;b.startOffset=b.startOffset+
e;l=true}else if(b.startContainer===k.parentNode&&b.startOffset===c(k)+1){b.startContainer=k;b.startOffset=e;l=true}if(b.endContainer===this){b.endContainer=k;b.endOffset=b.endOffset+e;l=true}else if(b.endContainer===k.parentNode&&b.endOffset===c(k)+1){b.endContainer=k;b.endOffset=e;l=true}k.data=k.data+this.data}else if(!(this.nodeValue===""&&a.removeempty)){k=this;break}if(b.startContainer===this.parentNode&&b.startOffset>c(this)){b.startOffset=b.startOffset-1;l=true}if(b.endContainer===this.parentNode&&
b.endOffset>c(this)){b.endOffset=b.endOffset-1;l=true}m(this).remove();e=k.nextSibling;if(k&&(!e||e.nodeType!==3)){var r=k.data,H=r.length;for(e=H-1;e>=0&&H>1;e--)if(r.charAt(e)==="​"){k.deleteData(e,1);if(b.startContainer===k&&b.startOffset>e){b.startOffset--;l=true}if(b.endContainer===k&&b.endOffset>e){b.endOffset--;l=true}}}}});l&&b.clearCaches();return l},isBlockLevelElement:function(a){return!a?!1:1===a.nodeType&&0<=m.inArray(a.nodeName.toLowerCase(),this.blockLevelElements)?!0:!1},isLineBreakElement:function(a){return!a?
!1:1===a.nodeType&&"br"==a.nodeName.toLowerCase()},isListElement:function(a){return!a?!1:1===a.nodeType&&0<=m.inArray(a.nodeName.toLowerCase(),this.listElements)},isSplitObject:function(a){return 1===a.nodeType&&n.hasOwnProperty(a.nodeName)},searchAdjacentTextNode:function(a,b,e,c){if(!a||1!==a.nodeType||0>b||b>a.childNodes.length)return!1;"undefined"===typeof c&&(c={blocklevel:!0,list:!0,linebreak:!0});"undefined"===typeof c.blocklevel&&(c.blocklevel=!0);"undefined"===typeof c.list&&(c.list=!0);
"undefined"===typeof c.linebreak&&(c.linebreak=!0);"undefined"===typeof e&&(e=!0);var f,k=a;e&&0<b&&(f=a.childNodes[b-1]);for(!e&&b<a.childNodes.length&&(f=a.childNodes[b]);k;)if(f){if(3===f.nodeType&&0<m.trim(f.data).length)return f;if(c.blocklevel&&this.isBlockLevelElement(f)||c.linebreak&&this.isLineBreakElement(f)||c.list&&this.isListElement(f))return!1;3===f.nodeType?f=e?f.previousSibling:f.nextSibling:(k=f,f=e?f.lastChild:f.firstChild)}else{if(c.blocklevel&&this.isBlockLevelElement(k)||c.list&&
this.isListElement(k))return!1;f=e?k.previousSibling:k.nextSibling;k=k.parentNode}},insertIntoDOM:function(a,b,c,d,j){var q=b.getContainerParents(c,d),n=this,x;c||(c=m(document.body));0===q.length?x=c.get(0):m.each(q,function(b,e){if(n.allowsNesting(e,a.get(0)))return x=e,!1});"undefined"===typeof x&&0<c.length&&(x=c.get(0));if(!this.allowsNesting(x,a.get(0))&&!j)return!1;if("undefined"!==typeof x){c=this.split(b,m(x),d);if(!0===c){c=b.startContainer;j=b.startOffset;d&&(c=b.endContainer,j=b.endOffset);
if(0===j)return b=m(c).contents(),0<b.length?b.eq(0).before(a):m(c).append(a),!0;m(c).contents().eq(j-1).after(a);return!0}if(c){b=c[1];e(c[0],a);if(k(b)||f(b))g(b.nextSibling||b.parentNode&&b.parentNode.nextSibling,l)&&m(b).remove();return!0}}return!1},removeFromDOM:function(a,b,e){if(e){var e=c(a),f=m(a).contents().length,k=a.parentNode;b.startContainer==k&&b.startOffset>e?b.startOffset+=f-1:b.startContainer==a&&(b.startContainer=k,b.startOffset=e+b.startOffset);b.endContainer==k&&b.endOffset>e?
b.endOffset+=f-1:b.endContainer==a&&(b.endContainer=k,b.endOffset=e+b.endOffset);m(a).contents().unwrap();this.doCleanup({merge:!0},b,k)}},removeRange:function(a){if(!a||a.isCollapsed())return!1;3==a.startContainer.nodeType&&(0<a.startOffset&&a.startOffset<a.startContainer.data.length)&&this.split(a,m(a.startContainer).parent(),!1);3==a.endContainer.nodeType&&(0<a.endOffset&&a.endOffset<a.endContainer.data.length)&&this.split(a,m(a.endContainer).parent(),!0);var b=a.getRangeTree();a.endContainer=
a.startContainer;a.endOffset=a.startOffset;this.recursiveRemoveRange(b,a);this.doCleanup({merge:!0},a);a.clearCaches()},recursiveRemoveRange:function(a,b){var e;for(e=0;e<a.length;++e)"full"==a[e].type?(0<m(b.startContainer).parents().andSelf().filter(a[e].domobj).length&&(b.startContainer=b.endContainer=a[e].domobj.parentNode,b.startOffset=b.endOffset=c(a[e].domobj)),m(a[e].domobj).remove()):"partial"==a[e].type&&a[e].children&&this.recursiveRemoveRange(a[e].children,b)},extendToWord:function(a,
b){var e=this.searchWordBoundary(a.startContainer,a.startOffset,!0),c=this.searchWordBoundary(a.endContainer,a.endOffset,!1);if(b||!(a.startContainer==e.container&&a.startOffset==e.offset||a.endContainer==c.container&&a.endOffset==c.offset))a.startContainer=e.container,a.startOffset=e.offset,a.endContainer=c.container,a.endOffset=c.offset,a.correctRange(),a.clearCaches()},isWordBoundaryElement:function(a){return!a||!a.nodeName?!1:-1==m.inArray(a.nodeName.toLowerCase(),this.nonWordBoundaryTags)},searchWordBoundary:function(a,
b,e){"undefined"===typeof e&&(e=!0);for(var f=!1,k,l;!f;){var g=c(a);if(3===a.nodeType)if(e){for(l=k=a.data.substring(0,b).search(this.nonWordRegex);-1!=l;)k=l,l=a.data.substring(k+1,b).search(this.nonWordRegex),-1!=l&&(l=l+k+1);-1!=k?(b=k+1,f=!0):(b=g,a=a.parentNode)}else k=a.data.substring(b).search(this.nonWordRegex),-1!=k?(b+=k,f=!0):(b=g+1,a=a.parentNode);else 1===a.nodeType&&(e?0<b?this.isWordBoundaryElement(a.childNodes[b-1])?f=!0:(a=a.childNodes[b-1],b=3===a.nodeType?a.data.length:a.childNodes.length):
this.isWordBoundaryElement(a)?f=!0:(b=g,a=a.parentNode):b<a.childNodes.length?this.isWordBoundaryElement(a.childNodes[b])?f=!0:(a=a.childNodes[b],b=0):this.isWordBoundaryElement(a)?f=!0:(b=g+1,a=a.parentNode))}if(3!==a.nodeType&&(f=this.searchAdjacentTextNode(a,b,!e)))a=f,b=e?0:a.data.length;return{container:a,offset:b}},isEmpty:function(a){if(!a)return!0;if(-1!=m.inArray(a.nodeName.toLowerCase(),this.nonEmptyTags))return!1;if(3===a.nodeType)return-1==a.data.search(/\S/)||1===a.data.length&&8192<=
a.data.charCodeAt(0)?!0:!1;var b,e;b=0;for(e=a.childNodes.length;b<e;++b)if(!this.isEmpty(a.childNodes[b]))return!1;return!0},setCursorAfter:function(a){var b=new q.Utils.RangeObject;c(a);var e;3==a.nodeType?(e=a,a=e.nodeValue.length):a.nextSibling&&3==a.nextSibling.nodeType?(e=a.nextSibling,a=0):(e=a.parentNode,a=c(a)+1);b.startContainer=b.endContainer=e;b.startOffset=b.endOffset=a;b.select();return b},selectDomNode:function(a){var b=new q.Utils.RangeObject;b.startContainer=b.endContainer=a.parentNode;
b.startOffset=c(a);b.endOffset=b.startOffset+1;b.select()},setCursorInto:function(a){var b=new q.Utils.RangeObject;b.startContainer=b.endContainer=a;b.startOffset=b.endOffset=0;b.select()},isEditingHost:function(a){return a&&1==a.nodeType&&("true"==a.contentEditable||a.parentNode&&9==a.parentNode.nodeType&&"on"==a.parentNode.designMode)},isEditable:function(a){return a&&!this.isEditingHost(a)&&(1!=a.nodeType||"false"!=a.contentEditable)&&(this.isEditingHost(a.parentNode)||this.isEditable(a.parentNode))},
getEditingHostOf:function(a){if(this.isEditingHost(a))return a;if(this.isEditable(a)){for(a=a.parentNode;!this.isEditingHost(a);)a=a.parentNode;return a}return null},inSameEditingHost:function(a,b){return this.getEditingHostOf(a)&&this.getEditingHostOf(a)==this.getEditingHostOf(b)},isBlockNode:function(b){return b&&(b.nodeType==a.Node.ELEMENT_NODE&&-1==a(["inline","inline-block","inline-table","none"]).indexOf(a.getComputedStyle(b).display)||b.nodeType==a.Node.DOCUMENT_NODE||b.nodeType==a.Node.DOCUMENT_FRAGMENT_NODE)},
getFirstVisibleChild:function(b,e){if(!b||b.nodeType==a.Node.TEXT_NODE&&this.isEmpty(b)||b.nodeType==a.Node.ELEMENT_NODE&&0==b.offsetHeight&&-1===m.inArray(b.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(b.nodeType==a.Node.TEXT_NODE||b.nodeType==a.Node.ELEMENT_NODE&&0==b.childNodes.length||!m(b).contentEditable())return e?b:null;var c;for(c=0;c<b.childNodes.length;++c){var f=this.getFirstVisibleChild(b.childNodes[c],!0);if(null!=f)return f}return null},getLastVisibleChild:function(b,e){if(!b||
b.nodeType==a.Node.TEXT_NODE&&this.isEmpty(b)||b.nodeType==a.Node.ELEMENT_NODE&&0==b.offsetHeight&&-1===m.inArray(b.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(b.nodeType==a.Node.TEXT_NODE||b.nodeType==a.Node.ELEMENT_NODE&&0==b.childNodes.length||!m(b).contentEditable())return e?b:null;var c;for(c=b.childNodes.length-1;0<=c;--c){var f=this.getLastVisibleChild(b.childNodes[c],!0);if(null!=f)return f}return null}});q.Utils.Dom=new d;return q.Utils.Dom});define("aloha/pluginmanager",["jquery",
"util/class"],function(m,d){function a(a,b){if(0===a.length)b&&b();else{var f=a.length,g=function(){0===--f&&b&&b()},k,l;for(k=0;k<a.length;k++)(l=a[k],l.settings=l.settings||{},"undefined"===typeof l.settings.enabled&&(l.settings.enabled=!0),l.settings.enabled&&l.checkDependencies())?(l=l.init())&&"function"===typeof l.done?l.done(g):g():g()}}var j=window.Aloha;return new (d.extend({plugins:{},init:function(c,b){var f=this.plugins,g=j&&j.settings&&j.settings.plugins,k;for(k in g)g.hasOwnProperty(k)&&
f[k]&&(f[k].settings=g[k]||{});var l;if(f&&0===b.length)for(l in b=[],f)f.hasOwnProperty(l)&&b.push(l);g=b;k=[];var e;for(e=0;e<g.length;e++)(l=f[g[e]])&&k.push(l);a(k,c)},register:function(a){if(!a.name)throw Error("Plugin does not have an name.");if(this.plugins[a.name])throw Error('Already registered the plugin "'+a.name+'"!');this.plugins[a.name]=a},makeClean:function(a){for(var b in this.plugins)this.plugins.hasOwnProperty(b)&&(j.Log.isDebugEnabled()&&j.Log.debug(this,"Passing contents of HTML Element with id { "+
a.attr("id")+" } for cleaning to plugin { "+b+" }"),this.plugins[b].makeClean(a))},toString:function(){return"pluginmanager"}}))});define("aloha/core",["jquery","aloha/pluginmanager"],function(m,d){function a(){var a=m.browser,b=a.version;return!(a.webkit&&532.5>parseFloat(b)||a.mozilla&&1.9>parseFloat(b)||a.msie&&7>b||a.opera&&11>b)}function j(){m("html").mousedown(function(a){var b;if(b=c.activeEditable)if(b=!c.eventHandled)a=m(a.target),b=!(a.is(".aloha-dialog")||a.closest(".aloha").length);b&&
c.deactivateEditable()}).mouseup(function(){c.eventHandled=!1})}var c=window.Aloha,b=[{fn:null,event:null,deferred:null},{fn:function(b,g){if(a())m.browser.webkit?m("html").addClass("aloha-webkit"):m.browser.opera?m("html").addClass("aloha-opera"):m.browser.msie?m("html").addClass("aloha-ie"+parseInt(m.browser.version,10)):m.browser.mozilla&&m("html").addClass("aloha-mozilla"),-1!==navigator.appVersion.indexOf("Win")?c.OSName="Win":-1!==navigator.appVersion.indexOf("Mac")?c.OSName="Mac":-1!==navigator.appVersion.indexOf("X11")?
c.OSName="Unix":-1!==navigator.appVersion.indexOf("Linux")&&(c.OSName="Linux"),j(),c.settings.base=c.getAlohaUrl(),c.Log.init(),c.settings.errorhandling&&(window.onerror=function(a,b,f){c.Log.error(c,"Error message: "+a+"\nURL: "+b+"\nLine Number: "+f);return true}),b(),g();else{var k=window.console;if(k){var l=k.error?"error":k.log?"log":null;if(l)k[l]("This browser is not supported")}}},event:null,deferred:null},{fn:function(a,b){c.RepositoryManager.init();a();b()},event:null,deferred:null},{fn:function(a,
b){if(0===c.loadedPlugins.length){var k=d.plugins,l;for(l in k)k.hasOwnProperty(l)&&c.loadedPlugins.push(l)}var e=!1;d.init(function(){e||(a(),e=!0);b()},c.loadedPlugins);e||(a(),e=!0)},event:"aloha-plugins-loaded",deferred:null},{fn:function(a,b){var k;for(k=0;k<c.editables.length;k++)c.editables[k].ready||c.editables[k].init();a();b()},event:null,deferred:null},{fn:null,event:"aloha-ready",deferred:null}];m.extend(!0,c,{version:"0.24.32",editables:[],activeEditable:null,settings:{},defaults:{},
ui:{},OSName:"Unknown",loadedPlugins:[],_pluginBaseUrlByName:{},init:function(){c.initialize(b)},getLoadedPlugins:function(){return this.loadedPlugins},isPluginLoaded:function(a){var b=false;m.each(this.loadedPlugins,function(c,l){if(a===l.toString()){b=true;return false}});return b},activateEditable:function(a){var b=c.editables,k;for(k=0;k<b.length;k++)b[k]!==a&&b[k].isActive&&b[k].blur();c.activeEditable=a},getActiveEditable:function(){return c.activeEditable},deactivateEditable:function(){if(c.activeEditable){c.activeEditable.blur();
c.activeEditable=null}},getEditableById:function(a){var b=m("#"+a);b.length&&"textarea"===b[0].nodeName.toLowerCase()&&(a=a+"-aloha");for(b=0;b<c.editables.length;b++)if(c.editables[b].getId()===a)return c.editables[b];return null},isEditable:function(a){var b,k;b=0;for(k=c.editables.length;b<k;b++)if(c.editables[b].originalObj.get(0)===a)return true;return false},getEditableHost:function(){var a=function(a){var b;for(b=0;b<c.editables.length;b++)if(c.editables[b].originalObj[0]===a)return c.editables[b];
return null};return function(b){if(!b||0===b.length)return null;var c=a(b[0]);c||b.parents().each(function(b,e){if(c=a(e))return false});return c}}(),log:function(a,b,k){typeof c.Log!=="undefined"&&c.Log.log(a,b,k)},registerEditable:function(a){c.editables.push(a)},unregisterEditable:function(a){a=m.inArray(a,c.editables);a!==-1&&c.editables.splice(a,1)},isModified:function(){var a;for(a=0;a<c.editables.length;a++)if(c.editables[a].isModified&&c.editables[a].isModified())return true;return false},
getAlohaUrl:function(){return c.settings.baseUrl||""},getPluginUrl:function(a){if(!a)return null;(a=c.settings._pluginBaseUrlByName[a])&&(a.match("^(/|http[s]?:).*")||(a=c.getAlohaUrl()+"/"+a));return a},disableObjectResizing:function(){try{var a;try{a=document.queryCommandSupported("enableObjectResizing")}catch(b){a=false;c.Log.log("enableObjectResizing is not supported.")}if(a){document.execCommand("enableObjectResizing",false,false);c.Log.log("enableObjectResizing disabled.")}}catch(k){c.Log.error(k,
"Could not disable enableObjectResizing")}},toString:function(){return"Aloha"}});return c});define("aloha/console",["aloha/core","util/class","jquery"],function(m,d){var a=d.extend({init:function(){if("undefined"===typeof m.settings.logLevels||!m.settings.logLevels)m.settings.logLevels={error:!0,warn:!0};if("undefined"===typeof m.settings.logHistory||!m.settings.logHistory)m.settings.logHistory={};m.settings.logHistory.maxEntries||(m.settings.logHistory.maxEntries=100);m.settings.logHistory.highWaterMark||
(m.settings.logHistory.highWaterMark=90);m.settings.logHistory.levels||(m.settings.logHistory.levels={error:!0,warn:!0});this.flushLogHistory();m.trigger("aloha-logger-ready")},logHistory:[],highWaterMarkReached:!1,log:function(a,c,b){"undefined"===typeof c&&(b=a);"string"!==typeof c&&(c&&c.toString)&&(c=c.toString());"undefined"===typeof b&&(b=c,c=void 0);if("undefined"===typeof a||!a)a="log";a=a.toLowerCase();if("undefined"!==typeof m.settings.logLevels&&m.settings.logLevels[a]){c=c||"Unkown Aloha Component";
this.addToLogHistory({level:a,component:c,message:b,date:new Date});var f=window.console;switch(a){case "error":window.console&&f.error&&(!c&&!b?f.error("Error occured without message and component"):f.error(c+": "+b));break;case "warn":window.console&&f.warn&&f.warn(c+": "+b);break;case "info":window.console&&f.info&&f.info(c+": "+b);break;case "debug":window.console&&f.log&&f.log(c+" ["+a+"]: "+b);break;default:window.console&&f.log&&f.log(c+" ["+a+"]: "+b)}}},error:function(a,c){this.log("error",
a,c)},warn:function(a,c){this.log("warn",a,c)},info:function(a,c){this.log("info",a,c)},debug:function(a,c){this.log("debug",a,c)},deprecated:function(a,c){this.log("warn",a,c);if(m.settings.logLevels.deprecated)throw Error(c);},isLogLevelEnabled:function(a){return m.settings&&m.settings.logLevels&&m.settings.logLevels[a]},isErrorEnabled:function(){return this.isLogLevelEnabled("error")},isWarnEnabled:function(){return this.isLogLevelEnabled("warn")},isInfoEnabled:function(){return this.isLogLevelEnabled("info")},
isDebugEnabled:function(){return this.isLogLevelEnabled("debug")},addToLogHistory:function(a){m.settings.logHistory||this.init();if(!(0>=m.settings.logHistory.maxEntries)&&m.settings.logHistory.levels[a.level]){this.logHistory.push(a);!this.highWaterMarkReached&&this.logHistory.length>=m.settings.logHistory.maxEntries*m.settings.logHistory.highWaterMark/100&&(m.trigger("aloha-log-full"),this.highWaterMarkReached=!0);for(;this.logHistory.length>m.settings.logHistory.maxEntries;)this.logHistory.shift()}},
getLogHistory:function(){return this.logHistory},flushLogHistory:function(){this.logHistory=[];this.highWaterMarkReached=!1}}),a=new a;return m.Log=m.Console=a});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/range",["jquery","util/dom","util/class","aloha/console","aloha/rangy-core"],function(m,d,a,j,c){function b(a,b){var c=[],f;for(f=1===a.nodeType?a:a.parentNode;f&&!(f===b||9===f.nodeType);)1===f.nodeType&&c.push(f),f=f.parentNode;return c}function f(a,
b,c){var k,g,d=a.length;for(g=0;g<d;g++)k=a[g],"none"!==k.type&&"collapsed"!==k.type&&(k.domobj.nodeName===b&&c.push(k.domobj),0<k.children.length&&f(k.children,b,c))}var g=window.GENTICS,k=window.Aloha;g.Utils.RangeObject=a.extend({_constructor:function(a){if("object"===typeof a){if("undefined"!==typeof a.startContainer&&(this.startContainer=a.startContainer),"undefined"!==typeof a.startOffset&&(this.startOffset=a.startOffset),"undefined"!==typeof a.endContainer&&(this.endContainer=a.endContainer),
"undefined"!==typeof a.endOffset)this.endOffset=a.endOffset}else!0===a&&this.initializeFromUserSelection()},startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0,deleteContents:function(){d.removeRange(this)},log:function(a){j.deprecated("Utils.RangeObject",'log() is deprecated. use console.log() from module "aloha/console" instead: '+a)},isCollapsed:function(){return!this.endContainer||this.startContainer===this.endContainer&&this.startOffset===this.endOffset},getCommonAncestorContainer:function(){if(this.commonAncestorContainer)return this.commonAncestorContainer;
this.updateCommonAncestorContainer();return this.commonAncestorContainer},getContainerParents:function(a,e){var c=e?this.endContainer:this.startContainer;return!c?!1:m(b(c,a?a[0]:null))},getStartContainerParents:function(a){return this.getContainerParents(a,!1)},getEndContainerParents:function(a){return this.getContainerParents(a,!0)},updateCommonAncestorContainer:function(a){if(a)this.commonAncestorContainer=a;else{var b=this.getStartContainerParents(),c=this.getEndContainerParents(),f;if(!(0<b.length&&
0<c.length))return j.warn("aloha/range","could not find commonAncestorContainer"),!1;for(f=0;f<b.length;f++)if(-1!=c.index(b[f])){this.commonAncestorContainer=b[f];break}}j.debug(a?"commonAncestorContainer was set successfully":"commonAncestorContainer was calculated successfully");return!0},getCollapsedIERange:function(a,b){var c=document.body.createTextRange(),f,k,g;g=this.searchElementToLeft(a,b);g.element?(f=document.body.createTextRange(),f.moveToElementText(g.element),c.setEndPoint("StartToEnd",
f),0!==g.characters?c.moveStart("character",g.characters):(c.moveStart("character",1),c.moveStart("character",-1))):(this.searchElementToRight(a,b),k=3==a.nodeType?a.parentNode:a,f=document.body.createTextRange(),f.moveToElementText(k),c.setEndPoint("StartToStart",f),0!==g.characters&&c.moveStart("character",g.characters));c.collapse();return c},select:function(){var a,b;if("undefined"===typeof this.startContainer||"undefined"===typeof this.endContainer)return j.warn("can not select an empty range"),
!1;a=c.createRange();a.setStart(this.startContainer,this.startOffset);a.setEnd(this.endContainer,this.endOffset);b=c.getSelection();try{b.setSingleRange(a)}catch(f){j.warn(f)}},searchElementToLeft:function(a,b){var c,f=0;3===a.nodeType?(f=b,c=a.previousSibling):0<b&&(c=a.childNodes[b-1]);for(;c&&3===c.nodeType;)f+=c.data.length,c=c.previousSibling;return{element:c,characters:f}},searchElementToRight:function(a,b){var c,f=0;3===a.nodeType?(f=a.data.length-b,c=a.nextSibling):b<a.childNodes.length&&
(c=a.childNodes[b]);for(;c&&3===c.nodeType;)f+=c.data.length,c=c.nextSibling;return{element:c,characters:f}},update:function(a){j.debug("now updating rangeObject");this.initializeFromUserSelection(a);this.updateCommonAncestorContainer()},initializeFromUserSelection:function(){var a=c.getSelection();if(!a||!a.rangeCount)return!1;a=a.getRangeAt(0);if(!a)return!1;this.startContainer=a.startContainer;this.endContainer=a.endContainer;this.startOffset=a.startOffset;this.endOffset=a.endOffset;this.correctRange()},
correctRange:function(){var a,b;this.clearCaches();if(this.isCollapsed()){if(1===this.startContainer.nodeType){if(0<this.startOffset&&3===this.startContainer.childNodes[this.startOffset-1].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset-1];this.startOffset=this.startContainer.data.length;this.endContainer=this.startContainer;this.endOffset=this.startOffset;return}if(0<this.startOffset&&1===this.startContainer.childNodes[this.startOffset-1].nodeType){if(a=g.Utils.Dom.searchAdjacentTextNode(this.startContainer,
this.startOffset,!0)){this.startContainer=this.endContainer=a;this.startOffset=this.endOffset=a.data.length;return}if(a=g.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!1)){this.startContainer=this.endContainer=a;this.startOffset=this.endOffset=0;return}}if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset];this.startOffset=0;this.endContainer=
this.startContainer;this.endOffset=0;return}}if(3===this.startContainer.nodeType&&0===this.startOffset&&(a=g.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,g.Utils.Dom.getIndexInParent(this.startContainer),!0))&&k.activeEditable&&0<m(a).closest(k.activeEditable.obj).length)this.startContainer=this.endContainer=a,this.startOffset=this.endOffset=a.data.length}else{if(1===this.startContainer.nodeType)if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType)this.startContainer=
this.startContainer.childNodes[this.startOffset],this.startOffset=0;else if(this.startOffset<this.startContainer.childNodes.length&&1===this.startContainer.childNodes[this.startOffset].nodeType){a=!1;for(b=this.startContainer.childNodes[this.startOffset];!1===a&&b.childNodes&&0<b.childNodes.length;)b=b.childNodes[0],3===b.nodeType&&(a=b);!1!==a&&(this.startContainer=a,this.startOffset=0)}if(3===this.startContainer.nodeType&&this.startOffset===this.startContainer.data.length&&(a=g.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,
g.Utils.Dom.getIndexInParent(this.startContainer)+1,!1)))this.startContainer=a,this.startOffset=0;if(3===this.endContainer.nodeType&&0===this.endOffset)if(this.endContainer.previousSibling&&3===this.endContainer.previousSibling.nodeType)this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length;else if(this.endContainer.previousSibling&&1===this.endContainer.previousSibling.nodeType&&this.endContainer.parentNode){a=this.endContainer.parentNode;for(b=0;b<a.childNodes.length;++b)if(a.childNodes[b]==
this.endContainer){this.endOffset=b;break}this.endContainer=a}1==this.endContainer.nodeType&&0===this.endOffset&&this.endContainer.previousSibling&&(3===this.endContainer.previousSibling.nodeType?(this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length):1===this.endContainer.previousSibling.nodeType&&(this.endContainer.previousSibling.childNodes&&0<this.endContainer.previousSibling.childNodes.length)&&(this.endContainer=this.endContainer.previousSibling,this.endOffset=
this.endContainer.childNodes.length));if(1==this.endContainer.nodeType)if(0<this.endOffset&&3===this.endContainer.childNodes[this.endOffset-1].nodeType)this.endContainer=this.endContainer.childNodes[this.endOffset-1],this.endOffset=this.endContainer.data.length;else if(0<this.endOffset&&1===this.endContainer.childNodes[this.endOffset-1].nodeType){a=!1;for(b=this.endContainer.childNodes[this.endOffset-1];!1===a&&b.childNodes&&0<b.childNodes.length;)b=b.childNodes[b.childNodes.length-1],3===b.nodeType&&
(a=b);!1!==a&&(this.endContainer=a,this.endOffset=this.endContainer.data.length)}}},clearCaches:function(){this.commonAncestorContainer=void 0},getRangeTree:function(a){"undefined"===typeof a&&(a=this.getCommonAncestorContainer());this.inselection=!1;return this.recursiveGetRangeTree(a)},recursiveGetRangeTree:function(a){var b=0,c=this,f=[];m(a).contents().each(function(k){var d="none",j=!1,s=!1,m=!1,u=!1,t=!1,x=!1;c.isCollapsed()&&(a===c.startContainer&&c.startOffset===k)&&(f[b]=new g.Utils.RangeTree,
f[b].type="collapsed",f[b].domobj=void 0,c.inselection=!1,m=!0,b++);if(!c.inselection&&!m)switch(this.nodeType){case 3:this===c.startContainer&&(c.inselection=!0,d=0<c.startOffset?"partial":"full",j=c.startOffset,s=this.length);break;case 1:if(this===c.startContainer&&0===c.startOffset&&(c.inselection=!0,d="full"),a===c.startContainer&&c.startOffset===k)c.inselection=!0,d="full"}if(c.inselection&&!m){"none"==d&&(d="full");switch(this.nodeType){case 3:this===c.endContainer&&(c.inselection=!1,c.endOffset<
this.length&&(d="partial"),!1===j&&(j=0),s=c.endOffset);break;case 1:this===c.endContainer&&0===c.endOffset&&(c.inselection=!1)}a===c.endContainer&&c.endOffset<=k&&(c.inselection=!1,d="none")}f[b]=new g.Utils.RangeTree;f[b].domobj=this;f[b].type=d;"partial"==d&&(f[b].startOffset=j,f[b].endOffset=s);f[b].children=c.recursiveGetRangeTree(this);if(0<f[b].children.length){for(k=0;k<f[b].children.length;++k)switch(f[b].children[k].type){case "none":u=!0;break;case "full":x=!0;break;case "partial":t=!0}t||
x&&u?f[b].type="partial":x&&(!t&&!u)&&(f[b].type="full")}b++});this.isCollapsed()&&(a===this.startContainer&&this.startOffset==a.childNodes.length)&&(f[b]=new g.Utils.RangeTree,f[b].type="collapsed",f[b].domobj=void 0);return f},findMarkup:function(a,e,c){var c=c?this.endContainer:this.startContainer,f,e=e?e[0]:null;if(c){e=b(c,e);c=0;for(f=e.length;c<f;c++)if(a.apply(e[c]))return e[c];return!1}},findAllMarkupByTagName:function(a,b){var c=b.getRangeTree(),k=[],a=a.toUpperCase();f(c,a,k);return k},
getText:function(){return this.isCollapsed()?"":this.recursiveGetText(this.getRangeTree())},recursiveGetText:function(a){if(!a)return"";var b=this,c="";m.each(a,function(){"full"==this.type?c+=m(this.domobj).text():"partial"==this.type&&3===this.domobj.nodeType?c+=m(this.domobj).text().substring(this.startOffset,this.endOffset):"partial"==this.type&&(1===this.domobj.nodeType&&this.children)&&(c+=b.recursiveGetText(this.children))});return c}});g.Utils.RangeTree=a.extend({domobj:{},type:null,children:[]});
return g.Utils.RangeObject});define("util/functions",[],function(){return{identity:function(m){return m},noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1},complement:function(m){return function(){return!m.apply(this,arguments)}}}});define("util/arrays",["util/functions"],function(m){function d(a,b){var c,e,f=[];c=0;for(e=a.length;c<e;c++)f.push(b(a[c]));return f}function a(a,b){return a.map(b)}function j(a,b){var c,e,f,d=[];c=0;for(e=a.length;c<e;c++)f=a[c],b(f)&&
d.push(f);return d}function c(a,b){var c,e;c=0;for(e=a.length;c<e;c++)if(b===a[c])return c;return-1}function b(a,b){return-1!==c(a,b)}function f(a,b){var c,e;c=0;for(e=a.length;c<e;c++)if(b(a[c]))return!0;return!1}return{filter:j,indexOf:c,reduce:function(a,b,c){var e,f;e=0;for(f=a.length;e<f;e++)b=c(b,a[e]);return b},forEach:function(a,b){var c,e;c=0;for(e=a.length;c<e;c++)b(a[c],c,a)},some:f,every:function(a,b){return!f(a,m.complement(b))},map:Array.prototype.map?a:d,contains:b,equal:function(a,
b,c){var e,f=a.length;if(f!==b.length)return!1;if(c)for(e=0;e<f;e++){if(!c(a[e],b[e]))return!1}else for(e=0;e<f;e++)if(a[e]!==b[e])return!1;return!0},applyNotNull:function(a,b){return null==a?null:b(a)},sortUnique:function(a,b){var c;if(b){a.sort(b);for(c=1;c<a.length;c++)0===b(a[c],a[c-1])&&a.splice(c--,1)}else{a.sort();for(c=1;c<a.length;c++)a[c]==a[c-1]&&a.splice(c--,1)}return a},intersect:function(a,c){return j(a,function(a){return b(c,a)})},subtract:function(a,c){return j(a,function(a){return!b(c,
a)})},second:function(a){return a[1]},last:function(a){return a.length?a[a.length-1]:null},coerce:function(a){var b,c,e=[];b=0;for(c=a.length;b<c;b++)e.push(a[b]);return e},isEmpty:function(a){return 0===a.length}}});define("util/strings",["jquery"],function(){var m=/\s+/;return{words:function(d){d=d.split(m);d.length&&""===d[0]&&d.shift();d.length&&""===d[d.length-1]&&d.pop();return d},dashesToCamelCase:function(d){return d.replace(/[\-]([a-z])/gi,function(a,d){return d.toUpperCase()})},camelCaseToDashes:function(d){return d.replace(/[A-Z]/g,
function(a){return"-"+a.toLowerCase()})},splitIncl:function(d,a){for(var j=[],c=0,b;null!=(b=a.exec(d));)c<b.index&&(j.push(d.substring(c,b.index)),c=b.index),c+=b[0].length,j.push(b[0]);c<d.length&&j.push(d.substring(c,d.length));return j},empty:function(d){return""===d||null==d}}});define("util/maps",[],function(){return{isEmpty:function(m){for(var d in m)if(m.hasOwnProperty(d))return!1;return!0},fillTuples:function(m,d){for(var a=d.length,j;a--;)j=d[a],m[j[0]]=j[1];return m},fillKeys:function(m,
d,a){for(var j=d.length;j--;)m[d[j]]=a;return m},keys:function(m){var d=[],a;for(a in m)m.hasOwnProperty(a)&&d.push(a);return d},forEach:function(m,d){for(var a in m)m.hasOwnProperty(a)&&d(m[a],a,m)}}});define("util/browser",["jquery"],function(m){return{ie7:m.browser.msie&&8>parseInt(m.browser.version,10),ie8:m.browser.msie&&9>parseInt(m.browser.version,10),ie:m.browser.msie,mozilla:m.browser.mozilla}});define("util/dom2","aloha/core jquery util/functions util/maps util/arrays util/strings util/browser util/dom util/range".split(" "),
function(m,d,a,j,c,b,f,g,k){function l(a,b,c){for(;b;){var e=b.nextSibling;a.insertBefore(b,c);b=e}}function e(a){var b=a.outerHTML;if(typeof b!=="undefined")return b;try{return Y?Y.serializeToString(a):a.xml}catch(c){return a.xml}}function q(a){for(var b=[],a=e(a.cloneNode(false)),c;null!=(c=Z.exec(a));)b.push(c[1]);return b}function n(a,c){var e={},f,k,g,l,d,j,q;j=0;for(d=a.length;j<d;j++){g=a[j];if(g.className){k=b.words(g.className);for(q=0;q<k.length;q++){l=k[q];if(c[l])(f=e[l])?f.push(g):e[l]=
[g]}}}return e}function p(a){for(var b=0;a.previousSibling;){b++;a=a.previousSibling}return b}function o(a){for(var b=0,a=a.firstChild;a;){b=b+1;a=a.nextSibling}return b}function r(a,b){return 1===a.nodeType&&b>=o(a)||3===a.nodeType&&b===a.length&&!a.nextSibling}function s(a,b){1===a.nodeType&&b<o(a)?a=a.childNodes[b]:3===a.nodeType&&b===a.length&&(a=a.nextSibling||a.parentNode);return a}function v(a,b,c){c?b.appendChild(a):b.parentNode.insertBefore(a,b)}function u(a,b){this.node=a;this.atEnd=b}function t(a,
b){return new u(a,b)}function x(a,b){return t(s(a,b),r(a,b))}function y(a,b){for(var c=[],e=a.parentNode;e&&!b(e);){c.push(e);e=e.parentNode}return c}function z(a,b){var c=y(a,b),e=c.length?c[c.length-1]:a;e.parentNode&&c.push(e.parentNode);return c}function A(a,b){if(b(a))return[];var c=y(a,b);c.unshift(a);return c}function F(a,b){if(b(a))return[a];var c=z(a,b);c.unshift(a);return c}function H(a,b){var c=a.parentNode,e=a.nodeValue;if(0===b||b>=e.length)return a;var f=document.createTextNode(e.substring(0,
b)),e=document.createTextNode(e.substring(b,e.length));c.insertBefore(f,a);c.insertBefore(e,a);c.removeChild(a);return f}function D(a,b,c,e,f,k){if(b===f){f=k.length;if(c===0){b=k.parentNode;c=p(k)}else if(c<f)b=k;else if(c===f){b=k.parentNode;c=p(k)+1}else{b=k.nextSibling;c=c-f}a[e].call(a,b,c)}}function Q(a,b,c){if(3===a.nodeType){var e=c.startContainer,f=c.startOffset,k=c.endContainer,g=c.endOffset,b=H(a,b);D(c,e,f,"setStart",a,b);D(c,k,g,"setEnd",a,b)}}function E(a,b,c,e){for(;a&&!c(a,e);){var f=
a.nextSibling;b(a,e);a=f}}function B(b,c,e){E(b,c,a.returnFalse,e)}function T(a,b,c){1===a.nodeType&&B(a.firstChild,function(a){T(a,b,c)});b(a,c)}function W(a){if(a){this.startContainer=a.startContainer;this.startOffset=a.startOffset;this.endContainer=a.endContainer;this.endOffset=a.endOffset;this.commonAncestorContainer=a.commonAncestorContainer;this.collapsed=a.collapsed}}function O(a,b){b.atEnd?a.setStart(b.node,o(b.node)):a.setStart(b.node.parentNode,p(b.node))}function U(a,b){b.atEnd?a.setEnd(b.node,
o(b.node)):a.setEnd(b.node.parentNode,p(b.node))}function G(a,b){a.setStart(b.startContainer,b.startOffset);a.setEnd(b.endContainer,b.endOffset)}function S(a,b,c){if(!a.collapsed){for(var e=x(a.startContainer,a.startOffset),f=x(a.endContainer,a.endOffset),k=false;!e.equals(f)&&b(e)&&e.next();)k=true;c=c||b;b=false;for(3===a.endContainer.nodeType&&a.endOffset>0&&a.endOffset<a.endContainer.length&&f.next()&&c(f)&&f.prev();!f.equals(e)&&c(f)&&f.prev();)b=true;k&&O(a,e);b&&U(a,f)}}function I(a){if(a.firstChild)return a.firstChild;
for(;a&&!a.nextSibling;)a=a.parentNode;return a&&a.nextSibling}function P(a){for(var b=a.previousSibling;b&&b.lastChild;)b=b.lastChild;return b||a.parentNode}var Z=/\s([^\/<>\s=]+)(?:=(?:"[^"]*"|'[^']*'|[^>\/\s]+))?/g,Y=window.XMLSerializer&&new window.XMLSerializer;u.prototype.next=function(){var a=this.node,b;if(this.atEnd||1!==a.nodeType){if(b=a.nextSibling)this.atEnd=false;else{b=a.parentNode;if(!b)return false;this.atEnd=true}this.node=b}else(b=a.firstChild)?this.node=b:this.atEnd=true;return true};
u.prototype.prev=function(){var a=this.node,b;if(this.atEnd)(b=a.lastChild)?this.node=b:this.atEnd=false;else{if(b=a.previousSibling){if(1===a.nodeType)this.atEnd=true}else{b=a.parentNode;if(!b)return false}this.node=b}return true};u.prototype.equals=function(a){return a.node===this.node&&a.atEnd===this.atEnd};u.prototype.clone=function(a){return a(a.node,a.atEnd)};u.prototype.insert=function(a){return v(a,this.node,this.atEnd)};W.prototype.update=function(){if(this.startContainer&&this.endContainer){this.collapsed=
this.startContainer===this.endContainer&&this.startOffset===this.endOffset;var b=A(this.startContainer,a.returnFalse),e=A(this.endContainer,a.returnFalse);this.commonAncestorContainer=c.intersect(b,e)[0]}};W.prototype.setStart=function(a,b){this.startContainer=a;this.startOffset=b;this.update()};W.prototype.setEnd=function(a,b){this.endContainer=a;this.endOffset=b;this.update()};return{backward:P,forward:I,findForward:function(a,b,c){for(;a&&!c(a);){if(b(a))return a;a=I(a)}return null},findBackward:function(a,
b,c){for(;a&&!c(a);){if(b(a))return a;a=P(a)}return null},moveNextAll:l,attrNames:q,attrs:function(a){var b=[],c=q(a),e,f;e=0;for(f=c.length;e<f;e++){var k=c[e],g=d.attr(a,k),g=null==g?"":g.toString();b.push([k,g])}return b},indexByClass:function(a,b){var c;c=f.ie7?a.getElementsByTagName("*"):d(a).find("."+j.keys(b).join(",."));return n(c,b)},indexByName:function(a,b){var c,e={},f;c=0;for(f=b.length;c<f;c++){var k=b[c];e[k]=d.makeArray(a.getElementsByTagName(k))}return e},indexByClassHaveList:n,outerHtml:e,
removeShallow:function(a){var b=a.parentNode;l(b,a.firstChild,a);b.removeChild(a)},wrap:function(a,b){a.parentNode.replaceChild(b,a);b.appendChild(a)},insert:v,cursor:t,cursorFromBoundaryPoint:x,nodeAtOffset:s,isAtEnd:r,parentsUntil:y,parentsUntilIncl:z,childAndParentsUntil:A,childAndParentsUntilIncl:F,childAndParentsUntilNode:function(a,b){return A(a,function(a){return a===b})},childAndParentsUntilInclNode:function(a,b){return F(a,function(a){return a===b})},next:function(a,b,c){for(;a&&!b(a,c);)a=
a.nextSibling;return a},parent:function(a,b,c){for(;a&&!b(a,c);)a=a.parentNode;return a},isTextNode:function(a){return 3===a.nodeType},nodeIndex:p,splitTextNode:H,splitTextContainers:function(a){Q(a.startContainer,a.startOffset,a);Q(a.endContainer,a.endOffset,a)},walk:B,walkRec:T,walkUntil:E,walkUntilNode:function(a,b,c,e){E(a,b,function(a){return a===c},e)},stableRange:function(a){return new W(a)},trimRange:S,trimRangeClosingOpening:function(a,b,c){c=c||b;S(a,function(a){return a.atEnd||b(a.node)},
function(a){a=a.atEnd?a.node.lastChild:a.node.previousSibling;return!a||c(a)})},setRangeFromRef:G,setRangeStartFromCursor:O,setRangeEndFromCursor:U,splitTextNodeAdjustRange:Q,insertSelectText:function(a,b){if(a.length){Q(b.startContainer,b.startOffset,b);var c=s(b.startContainer,b.startOffset),e=r(b.startContainer,b.startOffset);if(!e&&3===c.nodeType){c.insertData(0,a);b.setStart(c,0);b.setEnd(c,a.length)}else{var f;if((f=e?c.lastChild:c.previousSibling)&&3===f.nodeType){f.insertData(f.length,a);
b.setStart(f,f.length-a.length)}else{f=document.createTextNode(a);v(f,c,e);b.setStart(f,0)}b.setEnd(f,f.length)}}},areRangesEq:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},collapseToEnd:function(a){a.setStart(a.endContainer,a.endOffset)},extendToWord:function(a){var b=new k(a);g.extendToWord(b);G(a,b)},rangeFromRangeObject:function(a){var b=m.createRange();b.setStart(a.startContainer,a.startOffset);
b.setEnd(a.endContainer,a.endOffset);return b},cloneShallow:function(a){return a.cloneNode(false)},setStyle:function(a,b,c){d(a).css(b,null==c?"":c)},getStyle:function(a,c){c=b.dashesToCamelCase(c);return a.nodeType===1?a.style[c]:null},getComputedStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];var c=a.ownerDocument;if(c.defaultView&&c.defaultView.getComputedStyle)if(c=c.defaultView.getComputedStyle(a,null))return c[b]||c.getPropertyValue(b);return null},nodeLength:function(a){return 1===
a.nodeType?o(a):3===a.nodeType?a.length:0}}});define("PubSub",[],function(){var m={},d={},a=0;return{sub:function(j,c){if("function"!==typeof c)return-1;var b=m[j];b||(b=m[j]=[]);b.push(++a);d[a]={channel:j,callback:c};return a},unsub:function(a){if(-1===a||!d[a])return!1;var c=d[a]&&m[d[a].channel];delete d[a];for(var b=c.length;b;)if(c[--b]===a)return c.splice(b,1),!0;return!1},pub:function(a,c){var b=a.split("."),f,g=b.length,k="",l=0;for(f=0;f<g;++f){var k=k+((0===f?"":".")+b[f]),e;var q=k;e=
c;if(m[q]){e?"object"!==typeof e&&(e={data:e}):e={};e.channel=q;for(var q=m[q].slice(),n=void 0,n=0;n<q.length;++n)d[q[n]].callback(e);e=n}else e=0;l+=e}return l}}});define("util/html",["jquery","util/dom","util/maps","util/arrays"],function(m,d,a,j){function c(a){return n.test(a)||r.test(a)}function b(a){return 3===a.nodeType&&c(a.data)}function f(a){return u[a.nodeName]}function g(a){return 3===a.nodeType&&!a.length}function k(a){return 3===a.nodeType&&0===a.data.length||a===a.parentNode.lastChild&&
f(a.parentNode)&&"BR"===a.nodeName?!0:b(a)}var l={A:!0,B:!0,EM:!0,FONT:!0,I:!0,S:!0,SPAN:!0,STRIKE:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0},e="address article aside audio blockquote canvas dd div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr noscript ol output p pre section table tfoot ul video".split(" "),q=["\\u200B","\\u200C","\\u200D","\\uFEFF"],n=RegExp("^[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+$"),
p=RegExp("^[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+"),o=RegExp("[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+$"),r=RegExp("["+q.join("")+"]+"),s=RegExp("^["+q.join("")+"]+"),v=RegExp("["+q.join("")+"]+$"),u={};a.fillKeys(u,
e,!0);a.fillKeys(u,j.map(e,function(a){return a.toUpperCase()}),!0);return{BLOCKLEVEL_ELEMENTS:e,VOID_ELEMENTS:"area base br col command embed hr img input keygen link meta param source track wbr".split(" "),TEXT_LEVEL_SEMANTIC_ELEMENTS:"a abbr b bdi bdo cite code del dfn em i ins kbd mark q rp rt ruby s samp small strong sub sup time u var".split(" "),isBlock:f,isIgnorableWhitespace:g,isInlineFormattable:function(a){return l[a.nodeName]},isProppedBlock:function(a){if(!u[a.nodeName])return!1;var b=
!1,a=a.children,c=a.length,e;for(e=0;e<c;e++)if(!b&&"br"===a[e].nodeName.toLowerCase())b=!0;else if(!g(a[e]))return!1;return b},isEditingHost:function(a){return 1===a.nodeType&&"true"===a.contentEditable},findNodeLeft:function(a,b){for(;a&&!b(a);)a=a.nextSibling;return a},findNodeRight:function(a,b){for(;a&&!b(a);)a=a.previousSibling;return a},allowNestedParagraph:function(a){return a.obj[0]&&d.allowsNesting(a.obj[0],m("<p>")[0])?!0:!1},trimWhitespaceCharacters:function(a){return a.replace(p,"").replace(o,
"").replace(s,"").replace(v,"")},isWSPorZWSPNode:b,isWSPorZWSPText:c,isUnrenderedNode:k,isRenderedNode:function(a){return!k(a)},hasOnlyWhiteSpaceChildren:function(a){var a=a.childNodes,c,e;c=0;for(e=a.length;c<e;c++)if(!b(a[c]))return!1;return!0}}});define("aloha/engine","aloha/core aloha/ecma5shims util/maps util/html util/dom jquery PubSub".split(" "),function(m,d,a,j,c,b,f){function g(a,b){return a.hasAttribute?a.hasAttribute(b):typeof a.attributes[b]!=="undefined"}function k(a,b){var c=a.cloneNode(false);
c.deleteData(0,b);a.deleteData(b,a.length-b);var e=a.nextSibling,f=a.parentNode;e?f.insertBefore(c,e):f.appendChild(c);return c}function l(a){return a===null||!a||a===Ab}function e(a,b){typeof b=="string"&&(b=[b]);typeof b=="object"&&(b=d(b).map(function(a){return a.toUpperCase()}));return a&&a.nodeType==1&&l(a.namespaceURI)&&(typeof b=="undefined"||d(b).indexOf(a.tagName)!=-1)}function q(a){return a&&a.nodeType==1&&l(a.namespaceURI)}function n(a,b){return a&&a.nodeType==1&&l(a.namespaceURI)&&b.toUpperCase()===
a.nodeName}function p(a,b){var c;if(c=a)if(c=a.nodeType==1)if(c=l(a.namespaceURI))a:{c=a.nodeName;var e,f;c=c.toUpperCase();e=0;for(f=b.length;e<f;e++)if(b[e].toUpperCase()===c){c=true;break a}c=false}return c}function o(a){var b,c=0;if(!a||!a.style)return 0;if(typeof a.style.length!=="undefined")return a.style.length;for(b in a.style)a.style[b]&&(a.style[b]!==0&&a.style[b]!=="false")&&c++;return c}function r(a){if(!a)return null;var b=[],c;for(c=a.length>>>0;c--;)b[c]=a[c];return b}function s(a){for(;a&&
!a.nextSibling;)a=a.parentNode;return!a?null:a.nextSibling}function v(a){return a.hasChildNodes()?a.firstChild:s(a)}function u(a){if(a.previousSibling){for(a=a.previousSibling;a.hasChildNodes();)a=a.lastChild;return a}return a.parentNode&&a.parentNode.nodeType==d.Node.ELEMENT_NODE?a.parentNode:null}function t(a,b){return a&&b&&Boolean(d.compareDocumentPosition(a,b)&d.Node.DOCUMENT_POSITION_CONTAINED_BY)}function x(a,b){return b&&a&&Boolean(d.compareDocumentPosition(b,a)&d.Node.DOCUMENT_POSITION_CONTAINED_BY)}
function y(a,b){return Boolean(d.compareDocumentPosition(a,b)&d.Node.DOCUMENT_POSITION_FOLLOWING)}function z(a){for(var b=[];a.parentNode;){b.unshift(a.parentNode);a=a.parentNode}return b}function A(a){for(var b=[],c=s(a);null!=(a=v(a))&&a!=c;)b.push(a);return b}function F(a){return{"xx-small":1,small:2,medium:3,large:4,"x-large":5,"xx-large":6,"xxx-large":7}[a]}function H(a){return a.dir=="ltr"?"ltr":a.dir=="rtl"?"rtl":!q(a.parentNode)?"ltr":H(a.parentNode)}function D(a){switch(a.nodeType){case d.Node.PROCESSING_INSTRUCTION_NODE:case d.Node.DOCUMENT_TYPE_NODE:return 0;
case d.Node.TEXT_NODE:case d.Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function Q(a,b,e,f){if(a==e){if(b==f)return"equal";if(b<f)return"before";if(b>f)return"after"}var k=d.compareDocumentPosition(e,a);if(k&d.Node.DOCUMENT_POSITION_FOLLOWING){f=Q(e,f,a,b);if(f=="before")return"after";if(f=="after")return"before"}if(k&d.Node.DOCUMENT_POSITION_CONTAINS){for(;e.parentNode!=a;)e=e.parentNode;if(c.getIndexInParent(e)<b)return"after"}return"before"}function E(a){for(;a.parentNode!=
null;)a=a.parentNode;return a}function B(a,b){return Q(a,0,b.startContainer,b.startOffset)!=="after"||Q(a,D(a),b.endContainer,b.endOffset)!=="before"?false:E(a)==E(b.startContainer)}function T(a,b){typeof b=="undefined"&&(b=function(){return true});for(var c=a.startContainer,c=c.hasChildNodes()&&a.startOffset<c.childNodes.length?c.childNodes[a.startOffset]:a.startOffset==D(c)?s(c):v(c),e=a.endContainer,e=e.hasChildNodes()&&a.endOffset<e.childNodes.length?e.childNodes[a.endOffset]:s(e),f=[];y(c,e);)if(B(c,
a)&&b(c)){f.push(c);c=s(c)}else c=v(c);return f}function W(a,b){typeof b=="undefined"&&(b=function(){return true});for(var c=a.startContainer,c=c.hasChildNodes()&&a.startOffset<c.childNodes.length?c.childNodes[a.startOffset]:a.startOffset==D(c)?s(c):v(c),e=a.endContainer,e=e.hasChildNodes()&&a.endOffset<e.childNodes.length?e.childNodes[a.endOffset]:s(e),f=[];y(c,e);){B(c,a)&&b(c)&&f.push(c);c=v(c)}return f}function O(a){if(a.toLowerCase()=="currentcolor")return null;var b=document.createElement("span");
document.body.appendChild(b);b.style.color="black";var c=document.createElement("span");b.appendChild(c);c.style.color=a;a=d.getComputedStyle(c).color;if(a=="rgb(0, 0, 0)"){b.color="white";a=d.getComputedStyle(c).color;if(a!="rgb(0, 0, 0)")return null}document.body.removeChild(b);return/^rgba\([0-9]+, [0-9]+, [0-9]+, 1\)$/.test(a)?a.replace("rgba","rgb").replace(", 1)",")"):a=="transparent"?"rgba(0, 0, 0, 0)":a}function U(a){a=a.toLowerCase();if(d(["aliceblue","antiquewhite","aqua","aquamarine","azure",
"beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite",
"forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue",
"mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue",
"slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]).indexOf(a)!=-1)return a;var a=O(a),b=/^rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)$/.exec(a);return b?"#"+parseInt(b[1],10).toString(16).replace(/^.$/,"0$&")+parseInt(b[2],10).toString(16).replace(/^.$/,"0$&")+parseInt(b[3],10).toString(16).replace(/^.$/,"0$&"):/^#[abcdef0123456789]+$/i.exec(a)?a:null}function G(a){a=d(a).trim();if(/^[\-+]?[0-9]+(\.[0-9]+)?([eE][\-+]?[0-9]+)?$/.test(a)){var b;
if(a[0]=="+"){a=a.slice(1);b="relative-plus"}else if(a[0]=="-"){a=a.slice(1);b="relative-minus"}else b="absolute";a=parseInt(a,10);b=="relative-plus"&&(a=a+3);b=="relative-minus"&&(a=3-a);a<1&&(a=1);a>7&&(a=7);a={1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[a]}return a}function S(a){a=G(a);if(b.inArray(a,["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large"])==-1&&!/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc|px)$/.test(a))return null;var c=document.createElement("font");
document.body.appendChild(c);a=="xxx-large"?c.size=7:c.style.fontSize=a;a=parseInt(d.getComputedStyle(c).fontSize,10);document.body.removeChild(c);for(var e=1;e<7;){c=document.createElement("font");c.size=e;document.body.appendChild(c);var f=parseInt(d.getComputedStyle(c).fontSize,10);c.size=1+e;var k=parseInt(d.getComputedStyle(c).fontSize,10);document.body.removeChild(c);if(a<(k+f)/2)return""+e;e++}return"7"}function I(a,b,c,e){var f;mb===0&&(La=c);mb++;try{f=e()}catch(k){mb--;throw k;}mb--;return f}
function P(a,c){a=a.toLowerCase();return I(a,"action",c,function(a){return function(){return b.inArray(a,["copy","cut","paste","selectall","stylewithcss","usecss"])!=-1||c!==null}}(a))}function Z(a){var b=new window.GENTICS.Utils.RangeObject;b.startContainer=a.startContainer;b.startOffset=a.startOffset;b.endContainer=a.endContainer;b.endOffset=a.endOffset;b.select()}function Y(a,b,c,e){var f=a.toLowerCase(),k=b,g=c;if(arguments.length==1||arguments.length>=4&&typeof k=="undefined")k=false;if(arguments.length<=
2||arguments.length>=4&&typeof g=="undefined")g="";return I(f,"action",e,function(a,b,c){return function(){if(!P(a))return false;M[a].action(c,e);Z(e);return true}}(f,k,g))}function ba(a,b){a=a.toLowerCase();return I(a,"state",b,function(a){return function(){return!P(a,b)?false:typeof ab(a,b)!="undefined"?ab(a,b):M[a].state(b)}}(a))}function ua(a,b){a=a.toLowerCase();return I(a,"value",b,function(){return!M.hasOwnProperty(a)||!M[a].hasOwnProperty("value")?"":a=="fontsize"&&Ma("fontsize",b)!==void 0?
S(Ma("fontsize",b)):typeof Ma(a,b)!="undefined"?Ma(a,b):M[a].value(b)})}function X(a){return a&&a.nodeType==1&&l(a.namespaceURI)&&aa[a.nodeName]}function L(a){return a&&(a.nodeType==d.Node.ELEMENT_NODE&&!Bb[d.getComputedStyle(a).display]||a.nodeType==d.Node.DOCUMENT_NODE||a.nodeType==d.Node.DOCUMENT_FRAGMENT_NODE)}function J(a){return a&&!L(a)}function da(a){return a&&a.nodeType==d.Node.ELEMENT_NODE&&(a.contentEditable=="true"||a.parentNode&&a.parentNode.nodeType==d.Node.DOCUMENT_NODE&&a.parentNode.designMode==
"on")}function C(a){return a&&!da(a)&&(a.nodeType!=d.Node.ELEMENT_NODE||a.contentEditable!="false"||b(a).hasClass("aloha-table-wrapper"))&&(da(a.parentNode)||C(a.parentNode))}function Ta(a){var b;for(b=0;b<a.childNodes.length;b++)if(C(a.childNodes[b])||Ta(a.childNodes[b]))return true;return false}function va(a){if(da(a))return a;if(C(a)){for(a=a.parentNode;!da(a);)a=a.parentNode;return a}return null}function fa(a,b){return va(a)&&va(a)==va(b)}function Qa(a){if(!n(a,"br"))return false;for(var c=a.parentNode;d.getComputedStyle(c).display==
"inline";)c=c.parentNode;var e=c.style.height,f=c.style.maxHeight,k=c.style.minHeight;c.style.height="auto";c.style.maxHeight="none";if(!(b.browser.msie&&b.browser.version<8))c.style.minHeight="0";var g=document.createTextNode("​"),l=c.offsetHeight;if(l==0)throw"isCollapsedLineBreak: original height is zero, bug?";a.parentNode.insertBefore(g,a.nextSibling);a=c.offsetHeight;g.parentNode.removeChild(g);c.style.height=e;c.style.maxHeight=f;if(!(b.browser.msie&&b.browser.version<8))c.style.minHeight=
k;return l<a-5}function ka(a){if(!n(a,"br")||n(a.parentNode,"li")&&a.parentNode.childNodes.length==1)return false;for(var c=a.parentNode;d.getComputedStyle(c).display=="inline";)c=c.parentNode;var e=c.style.height,f=c.style.maxHeight,k=c.style.minHeight,g=c.contentEditable;c.style.height="auto";c.style.maxHeight="none";c.style.minHeight="0";if(b.browser.msie&&b.browser.version<=7)c.contentEditable="false";var l=c.offsetHeight;if(l==0)throw"isExtraneousLineBreak: original height is zero, bug?";var j=
a.style.display;a.style.display="none";var q=c.offsetHeight;c.style.height=e;c.style.maxHeight=f;c.style.minHeight=k;if(b.browser.msie&&b.browser.version<=7)c.contentEditable=g;a.style.display=j;return l==q}function ma(a){var c=d.Node;if(a&&a.nodeType===c.TEXT_NODE){var e=a.parentNode,a=a.data;if(b.trim(a).length===0)return true;if(e&&/^[\t\n\r ]+$/.test(a))if(e.nodeType===c.ELEMENT_NODE){if(b.inArray(d.getComputedStyle(e).whiteSpace,["normal","nowrap"])!==-1||d.getComputedStyle(e).whiteSpace==="pre-line")return true}else if(e.nodeType===
c.DOCUMENT_FRAGMENT_NODE)return true}return false}function Ea(a){if(!ma(a))return false;if(a.data=="")return true;var b=a.parentNode;if(!b||d(z(a)).some(function(a){return a.nodeType==d.Node.ELEMENT_NODE&&d.getComputedStyle(a).display=="none"}))return true;for(;!L(b)&&b.parentNode;)b=b.parentNode;for(var c=a;c!=b;){c=u(c);if(L(c)||n(c,"br"))return true;if(c.nodeType==d.Node.TEXT_NODE&&!ma(c)||n(c,"img"))break}c=a;for(a=s(b);c!=a;){c=v(c);if(L(c)||n(c,"br"))return true;if(c&&c.nodeType==d.Node.TEXT_NODE&&
!ma(c)||n(c,"img"))break}return false}function ga(a){var b;if(!a||d(z(a).concat(a)).filter(function(a){return a.nodeType==d.Node.ELEMENT_NODE},true).some(function(a){return d.getComputedStyle(a).display=="none"}))return false;if(L(a)||a.nodeType==d.Node.TEXT_NODE&&!Ea(a)||n(a,"img")||n(a,"br")&&!ka(a))return true;for(b=0;b<a.childNodes.length;b++)if(ga(a.childNodes[b]))return true;return false}function la(a){return a&&!ga(a)}function Fa(a){var b;if(Qa(a)&&!ka(a))return true;if(!J(a)||a.nodeType!=
d.Node.ELEMENT_NODE)return false;var c=false;for(b=0;b<a.childNodes.length;b++){if(!la(a.childNodes[b])&&!Fa(a.childNodes[b]))return false;Fa(a.childNodes[b])&&(c=true)}return c}function rb(a){var b;if(a&&a.nodeType!==d.Node.TEXT_NODE)b=false;else{b=0;for(var a=a.data,c=a.length;b<c&&a.charAt(b)==="​";)b++;b=b===c}return!b}function Za(a){var b;if(b=a){if(!(b=!a.hasChildNodes())){if(j.isBlock(a))b=(b=j.findNodeRight(a.lastChild,ga))&&"br"===b.nodeName.toLowerCase()&&!j.findNodeRight(b.previousSibling,
ga);else b=false;b=b||!j.findNodeRight(a.lastChild,rb)}b=b&&da(a.parentNode)&&!a.previousSibling&&!a.nextSibling}return b}function Xa(a){var b=a.parentNode,e=c.getIndexInParent(a);b.removeChild(a);return{node:b,offset:e}}function K(){var a;if(La)a=La;else if(m.getSelection().rangeCount)a=m.getSelection().getRangeAt(0);else return null;if(b.inArray(a.startContainer.nodeType,[d.Node.TEXT_NODE,d.Node.ELEMENT_NODE])==-1||b.inArray(a.endContainer.nodeType,[d.Node.TEXT_NODE,d.Node.ELEMENT_NODE])==-1||!a.startContainer.ownerDocument||
!a.endContainer.ownerDocument||!x(a.startContainer,a.startContainer.ownerDocument)||!x(a.endContainer,a.endContainer.ownerDocument))throw"Invalid active range; test bug?";return a}function ra(a,b,e,f){if(e==-1)e=b.childNodes.length;var k=a.parentNode,g=c.getIndexInParent(a),l,j=[f];for(l=0;l<m.getSelection().rangeCount;l++)j.push(m.getSelection().getRangeAt(l));var q=[];d(j).forEach(function(a){q.push([a.startContainer,a.startOffset]);q.push([a.endContainer,a.endOffset])});d(q).forEach(function(a){a[0]==
b&&a[1]>e&&a[1]++;if(a[0]==k&&(a[1]==g||a[1]==g+1)){a[0]=b;a[1]=a[1]+(e-g)}a[0]==k&&a[1]>g+1&&a[1]--});b.childNodes.length==e?b.appendChild(a):b.insertBefore(a,b.childNodes[e]);var n=null;if(q[0][1]>q[0][0].childNodes.length&&q[1][1]>q[1][0].childNodes.length){f.setStart(a,0);f.setEnd(a,0)}else{f.setStart(q[0][0],q[0][1]);f.setEnd(q[1][0],q[1][1]);m.getSelection().removeAllRanges();for(l=1;l<j.length;l++){n=m.createRange();n.setStart(q[2*l][0],q[2*l][1]);n.setEnd(q[2*l+1][0],q[2*l+1][1]);m.getSelection().addRange(n)}n&&
(f=n)}}function Sa(a,c){b.browser.msie&&(b.browser.version>=7&&typeof a.attributes[b.expando]!=="undefined")&&b(a).removeAttr(b.expando);var e=a.attributes,f;for(f=0;f<e.length;f++){var k=e[f];if(typeof k.specified==="undefined"||k.specified)typeof c.setAttributeNS==="function"?c.setAttributeNS(k.namespaceURI,k.name,k.value):c.setAttribute(k.name,k.value)}}function Ca(a,b,c){if(n(a,b)||!a.parentNode)return a;b=a.ownerDocument.createElement(b);a.parentNode.insertBefore(b,a);for(Sa(a,b);a.childNodes.length;)ra(a.firstChild,
b,b.childNodes.length,c);a.parentNode.removeChild(a);if(c.startContainer===a)c.startContainer=b;if(c.endContainer===a)c.endContainer=b;return b}function hb(a){var b=a.previousSibling;if(b){for(;b.hasChildNodes();)b=b.lastChild;for(;la(b)&&!ka(b)&&b!=a.parentNode;)b=u(b);C(b)&&ka(b)&&b.parentNode.removeChild(b)}}function Ja(a){for(var b=a;b.hasChildNodes();)b=b.lastChild;for(;la(b)&&!ka(b)&&b!=a;)b=u(b);C(b)&&ka(b)&&b.parentNode.removeChild(b)}function ib(a){hb(a);Ja(a)}function ya(a,b,e,f){var k;
typeof b=="undefined"&&(b=function(){return false});typeof e=="undefined"&&(e=function(){return null});if(!a.length||!C(a[0]))return null;J(a[a.length-1])&&(!n(a[a.length-1],"br")&&n(a[a.length-1].nextSibling,"br"))&&a.push(a[a.length-1].nextSibling);e=C(a[0].previousSibling)&&b(a[0].previousSibling)?a[0].previousSibling:C(a[a.length-1].nextSibling)&&b(a[a.length-1].nextSibling)?a[a.length-1].nextSibling:e();if(!e)return null;if(!e.parentNode){a[0].parentNode.insertBefore(e,a[0]);k=f.startContainer;
var g=f.startOffset,l=f.endContainer,d=f.endOffset,j=c.getIndexInParent(e);g>=j&&k==e.parentNode&&f.setStart(k,g+1);d>=j&&l==e.parentNode&&f.setEnd(l,d+1);if(La&&La!==f){k=La.startContainer;g=La.startOffset;l=La.endContainer;d=La.endOffset;k==e.parentNode&&g>=j&&La.setStart(k,g+1);l==e.parentNode&&d>=j&&La.setEnd(l,d+1)}}g=a[0].parentNode;if(y(e,a[0])){!J(e)&&(J(e.lastChild)&&J(a[0])&&!n(e.lastChild,"BR"))&&e.appendChild(e.ownerDocument.createElement("br"));for(k=0;k<a.length;k++)ra(a[k],e,-1,f)}else{!J(e)&&
(J(e.firstChild)&&J(a[a.length-1])&&!n(a[a.length-1],"BR"))&&e.insertBefore(e.ownerDocument.createElement("br"),e.firstChild);for(k=a.length-1;k>=0;k--)ra(a[k],e,0,f)}C(g)&&!g.hasChildNodes()&&g.parentNode.removeChild(g);if(C(e.nextSibling)&&b(e.nextSibling)){for(!J(e)&&(J(e.lastChild)&&J(e.nextSibling.firstChild)&&!n(e.lastChild,"BR"))&&e.appendChild(e.ownerDocument.createElement("br"));e.nextSibling.hasChildNodes();)ra(e.nextSibling.firstChild,e,-1,f);e.parentNode.removeChild(e.nextSibling)}ib(e);
return e}function na(a,c){if((Cb[c]||p(c,["colgroup","table","tbody","tfoot","thead","tr"]))&&typeof a=="object"&&a.nodeType==d.Node.TEXT_NODE&&!/^[ \t\n\f\r]*$/.test(a.data)||(Db[c]||p(c,["script","style","plaintext","xmp"]))&&(typeof a!="object"||a.nodeType!=d.Node.TEXT_NODE)||typeof a=="object"&&(a.nodeType==d.Node.DOCUMENT_NODE||a.nodeType==d.Node.DOCUMENT_FRAGMENT_NODE||a.nodeType==d.Node.DOCUMENT_TYPE_NODE))return false;q(a)&&(a=a.tagName.toLowerCase());if(typeof a!="string")return true;if(q(c)){for(var e=
c;e;){if(a=="a"&&n(e,"a")||aa[a.toUpperCase()]&&e&&e.nodeType==1&&l(e.namespaceURI)&&Eb[e.nodeName]||/^h[1-6]$/.test(a)&&q(e)&&/^H[1-6]$/.test(e.tagName))return false;e=e.parentNode}c=c.tagName.toLowerCase()}if(typeof c=="object"&&(c.nodeType==d.Node.ELEMENT_NODE||c.nodeType==d.Node.DOCUMENT_FRAGMENT_NODE))return true;if(typeof c!="string")return false;switch(c){case "colgroup":return a=="col";case "table":return b.inArray(a,["caption","col","colgroup","tbody","td","tfoot","th","thead","tr"])!=-1;
case "tbody":case "thead":case "tfoot":return b.inArray(a,["td","th","tr"])!=-1;case "tr":return b.inArray(a,["td","th"])!=-1;case "dl":return b.inArray(a,["dt","dd"])!=-1;case "dir":case "ol":case "ul":return b.inArray(a,["dir","li","ol","ul"])!=-1;case "hgroup":return/^h[1-6]$/.test(a)}if(b.inArray(a,["body","caption","col","colgroup","frame","frameset","head","html","tbody","td","tfoot","th","thead","tr"])!=-1||b.inArray(a,["dd","dt"])!=-1&&c!="dl"||a=="li"&&c!="ol"&&c!="ul")return false;return(e=
Fb[c.toUpperCase()])&&e[a.toUpperCase()]?false:true}function $a(a,b){return b.collapsed?false:B(a,b)||a==b.startContainer&&a.nodeType==d.Node.TEXT_NODE&&D(a)!=b.startOffset||a==b.endContainer&&a.nodeType==d.Node.TEXT_NODE&&b.endOffset!=0||a.hasChildNodes()&&d(a.childNodes).every(function(a){return $a(a,b)})&&(!x(b.startContainer,a)||b.startContainer.nodeType!=d.Node.TEXT_NODE||b.startOffset==0)&&(!x(b.endContainer,a)||b.endContainer.nodeType!=d.Node.TEXT_NODE||b.endOffset==D(b.endContainer))?true:
false}function sa(a,b){typeof b=="undefined"&&(b=function(){return true});for(var c=a.startContainer;$a(c.parentNode,a);)c=c.parentNode;for(var e=s(a.endContainer),f=[];y(c,e);){$a(c,a)&&b(c)&&f.push(c);c=v(c)}return f}function Ya(a){if(!q(a))return false;if(b.inArray(a.tagName,["B","EM","I","S","SPAN","STRIKE","STRONG","SUB","SUP","U"])!=-1&&(a.attributes.length==0||a.attributes.length==1&&g(a,"style")))return true;if(a.tagName=="FONT"||a.tagName=="A"){var c=a.attributes.length;g(a,"style")&&c--;
if(a.tagName=="FONT"){g(a,"color")&&c--;g(a,"face")&&c--;g(a,"size")&&c--}a.tagName=="A"&&g(a,"href")&&c--;if(c==0)return true}return false}function Ka(a){return!q(a)||b.inArray(a.tagName,["A","B","EM","FONT","I","S","SPAN","STRIKE","STRONG","SUB","SUP","U"])==-1?false:a.attributes.length==0?true:a.attributes.length>1?false:g(a,"style")&&o(a)==0||a.tagName=="A"&&g(a,"href")||a.tagName=="FONT"&&(g(a,"color")||g(a,"face")||g(a,"size"))||(a.tagName=="B"||a.tagName=="STRONG")&&g(a,"style")&&o(a)==1&&
a.style.fontWeight!=""||(a.tagName=="I"||a.tagName=="EM")&&g(a,"style")&&o(a)==1&&a.style.fontStyle!=""||(a.tagName=="A"||a.tagName=="FONT"||a.tagName=="SPAN")&&g(a,"style")&&o(a)==1&&a.style.textDecoration==""||b.inArray(a.tagName,["A","FONT","S","SPAN","STRIKE","U"])!=-1&&g(a,"style")&&o(a)==1&&(a.style.textDecoration=="line-through"||a.style.textDecoration=="underline"||a.style.textDecoration=="overline"||a.style.textDecoration=="none")?true:false}function Da(a,b,c){return b===null&&c===null||
typeof b=="string"&&typeof c=="string"&&b==c&&!M[a].hasOwnProperty("equivalentValues")||typeof b=="string"&&typeof c=="string"&&M[a].hasOwnProperty("equivalentValues")&&M[a].equivalentValues(b,c)?true:false}function wa(a,b,c){if(Da(a,b,c))return true;if(a!="fontsize"||typeof b!="string"||typeof c!="string")return false;var e=wa;if(e.sizeMap===void 0){e.sizeMap={};var f=document.createElement("font");document.body.appendChild(f);d(["xx-small","small","medium","large","x-large","xx-large","xxx-large"]).forEach(function(a){f.size=
F(a);e.sizeMap[a]=d.getComputedStyle(f).fontSize});document.body.removeChild(f)}return b===e.sizeMap[c]||c===e.sizeMap[b]}function ea(a,b){if(a.nodeType!=d.Node.ELEMENT_NODE&&(!a.parentNode||a.parentNode.nodeType!=d.Node.ELEMENT_NODE))return null;if(a.nodeType!=d.Node.ELEMENT_NODE)return ea(a.parentNode,b);if(b=="createlink"||b=="unlink"){for(;a&&(!q(a)||a.tagName!="A"||!g(a,"href"));)a=a.parentNode;return!a?null:a.getAttribute("href")}if(b=="backcolor"||b=="hilitecolor"){for(;(d.getComputedStyle(a).backgroundColor==
"rgba(0, 0, 0, 0)"||d.getComputedStyle(a).backgroundColor===""||d.getComputedStyle(a).backgroundColor=="transparent")&&a.parentNode&&a.parentNode.nodeType==d.Node.ELEMENT_NODE;)a=a.parentNode;return d.getComputedStyle(a).backgroundColor=="rgba(0, 0, 0, 0)"||d.getComputedStyle(a).backgroundColor===""||d.getComputedStyle(a).backgroundColor=="transparent"?"rgb(255, 255, 255)":d.getComputedStyle(a).backgroundColor}if(b=="subscript"||b=="superscript"){for(var c=false,e=false;J(a);){d.getComputedStyle(a);
n(a,"sub")?c=true:n(a,"sup")&&(e=true);a=a.parentNode}return c&&e?"mixed":c?"subscript":e?"superscript":null}if(b=="strikethrough"){do{if(d.getComputedStyle(a).textDecoration.indexOf("line-through")!=-1)return"line-through";a=a.parentNode}while(a&&a.nodeType==d.Node.ELEMENT_NODE);return null}if(b=="underline"){do{if(d.getComputedStyle(a).textDecoration.indexOf("underline")!=-1)return"underline";a=a.parentNode}while(a&&a.nodeType==d.Node.ELEMENT_NODE);return null}if(!M[b].hasOwnProperty("relevantCssProperty"))throw"Bug: no relevantCssProperty for "+
b+" in getEffectiveCommandValue";return d.getComputedStyle(a)[M[b].relevantCssProperty].toString()}function ja(a,b){if((b=="backcolor"||b=="hilitecolor")&&d.getComputedStyle(a).display!="inline")return null;if(b=="createlink"||b=="unlink")return q(a)&&a.tagName=="A"&&g(a,"href")?a.getAttribute("href"):null;if(b=="subscript"||b=="superscript")return n(a,"sup")?"superscript":n(a,"sub")?"subscript":null;if(b=="strikethrough"&&a.style.textDecoration!="")return a.style.textDecoration.indexOf("line-through")!=
-1?"line-through":null;if(b=="strikethrough"&&p(a,["S","STRIKE"]))return"line-through";if(b=="underline"&&a.style.textDecoration!="")return a.style.textDecoration.indexOf("underline")!=-1?"underline":null;if(b=="underline"&&n(a,"U"))return"underline";var c=M[b].relevantCssProperty;if(c===null)return null;if(a.style[c]!="")return a.style[c];if(l(a.namespaceURI)&&a.tagName=="FONT"){if(c=="color"&&g(a,"color"))return a.color;if(c=="fontFamily"&&g(a,"face"))return a.face;if(c=="fontSize"&&g(a,"size")){c=
parseInt(a.size,10);c<1&&(c=1);c>7&&(c=7);return{1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[c]}}return c=="fontWeight"&&(a.tagName=="B"||a.tagName=="STRONG")?"bold":c=="fontStyle"&&(a.tagName=="I"||a.tagName=="EM")?"italic":null}function Pa(a,b,e,f){for(var k=a;Ya(k)&&k.childNodes.length==1&&Ya(k.firstChild)&&(!Ka(k)||!Da(b,ja(k,b),e));)k=k.firstChild;if(!(k==a||!Ka(k)||!Da(b,ja(k,b),e)||!wa(b,ea(k,b),e))){for(;k.hasChildNodes();)ra(k.firstChild,k.parentNode,
c.getIndexInParent(k),f);a.parentNode.insertBefore(k,a.nextSibling);ra(a,k,-1,f)}}function xa(a){var c=[],a=b.makeArray(a),e,f,k,g,l,d;for(e=0;e<a.length;e++){k=a[e];for(f=0;f<ub.length;f++){g=ub[f];l=k;if(l.nodeType!=1)l=l.parentNode;for(d=null;l&&l.nodeType==1&&(d=ja(l,g))===null;)l=l.parentNode;c.push([k,g,d])}}return c}function bb(a,b,e){if(!C(a)||ja(a,b)===null)return[];if(Ka(a)){var b=Array.prototype.slice.call(r(a.childNodes)),f;for(f=0;f<b.length;f++)ra(b[f],a.parentNode,c.getIndexInParent(a),
e);a.parentNode.removeChild(a);return b}if(b=="strikethrough"&&a.style.textDecoration.indexOf("line-through")!=-1){a.style.textDecoration=a.style.textDecoration=="line-through"?"":a.style.textDecoration.replace("line-through","");a.getAttribute("style")==""&&a.removeAttribute("style")}if(b=="underline"&&a.style.textDecoration.indexOf("underline")!=-1){a.style.textDecoration=a.style.textDecoration=="underline"?"":a.style.textDecoration.replace("underline","");a.getAttribute("style")==""&&a.removeAttribute("style")}if(M[b].relevantCssProperty!==
null){a.style[M[b].relevantCssProperty]="";a.getAttribute("style")==""&&a.removeAttribute("style")}if(l(a.namespaceURI)&&a.tagName=="FONT"){b=="forecolor"&&a.removeAttribute("color");b=="fontname"&&a.removeAttribute("face");b=="fontsize"&&a.removeAttribute("size")}n(a,"A")&&(b=="createlink"||b=="unlink")&&a.removeAttribute("href");return ja(a,b)===null?[]:[Ca(a,"span",e)]}function Na(a,e,f,k){var g=[],l,j;if(a.parentNode&&f!==null){if(na(a,"span")){Pa(a.previousSibling,e,f,k);Pa(a.nextSibling,e,f,
k);ya([a],function(a){return Ka(a)&&Da(e,ja(a,e),f)&&wa(e,ea(a,e),f)},function(){return null},k)}if(!wa(e,ea(a,e),f))if(na(a,"span")){if(!wa(e,ea(a,e),f)){g=null;if(!jb){if(e=="bold"&&(f=="bold"||f=="700"))g=a.ownerDocument.createElement("b");e=="italic"&&f=="italic"&&(g=a.ownerDocument.createElement("i"));e=="strikethrough"&&f=="line-through"&&(g=a.ownerDocument.createElement("s"));e=="underline"&&f=="underline"&&(g=a.ownerDocument.createElement("u"));if(e=="forecolor"&&U(f)){g=a.ownerDocument.createElement("span");
b(g).css("color",U(f))}if(e=="fontname"){g=a.ownerDocument.createElement("font");g.face=f}}if(e=="createlink"||e=="unlink"){g=a.ownerDocument.createElement("a");g.setAttribute("href",f);for(l=a.parentNode;l;){n(l,"A")&&(l=Ca(l,"span",k));l=l.parentNode}}if(e=="fontsize"&&b.inArray(f,["xx-small","small","medium","large","x-large","xx-large","xxx-large"])!=-1&&(!jb||f=="xxx-large")){g=a.ownerDocument.createElement("font");g.size=F(f)}if((e=="subscript"||e=="superscript")&&f=="subscript")g=a.ownerDocument.createElement("sub");
if((e=="subscript"||e=="superscript")&&f=="superscript")g=a.ownerDocument.createElement("sup");g||(g=a.ownerDocument.createElement("span"));a.parentNode.insertBefore(g,a);l=M[e].relevantCssProperty;l!==null&&!wa(e,ea(g,e),f)&&(g.style[l]=f);if(e=="strikethrough"&&f=="line-through"&&ea(g,"strikethrough")!="line-through")g.style.textDecoration="line-through";if(e=="underline"&&f=="underline"&&ea(g,"underline")!="underline")g.style.textDecoration="underline";ra(a,g,g.childNodes.length,k);if(a.nodeType==
d.Node.ELEMENT_NODE&&!Da(e,ea(a,e),f)){ra(a,g.parentNode,c.getIndexInParent(g),k);g.parentNode.removeChild(g);g=[];for(l=0;l<a.childNodes.length;l++){if(a.childNodes[l].nodeType==d.Node.ELEMENT_NODE){j=ja(a.childNodes[l],e);if(j!==null&&!Da(e,f,j))continue}g.push(a.childNodes[l])}for(l=0;l<g.length;l++)Na(g[l],e,f,k)}}}else{for(l=0;l<a.childNodes.length;l++){if(a.childNodes[l].nodeType==d.Node.ELEMENT_NODE){j=ja(a.childNodes[l],e);if(j!==null&&!Da(e,f,j))continue}g.push(a.childNodes[l])}for(l=0;l<
g.length;l++)Na(g[l],e,f,k)}}}function ia(a,b,c,e){if(a.parentNode&&a.parentNode.nodeType==d.Node.ELEMENT_NODE&&!wa(b,ea(a,b),c)){for(var f=a.parentNode,k=[];C(f)&&f.nodeType==d.Node.ELEMENT_NODE&&!wa(b,ea(f,b),c);){k.push(f);f=f.parentNode}if(k.length){var g=ja(k[k.length-1],b);if(!(g===null&&g!=c)&&(c===null||wa(b,ea(k[k.length-1].parentNode,b),c)))for(;k.length;){f=k.pop();ja(f,b)!==null&&(g=ja(f,b));c=Array.prototype.slice.call(r(f.childNodes));ja(f,b)!==null&&bb(f,b,e);for(f=0;f<c.length;f++){var l=
c[f];l!=a&&!(l.nodeType==d.Node.ELEMENT_NODE&&ja(l,b)!==null&&!Da(b,g,ja(l,b)))&&l!=k[k.length-1]&&Na(l,b,g,e)}}}}}function Ia(a,b){d(a).forEach(function(a){var c=a[0],e=a[1],a=a[2],f=c;if(!f||f.nodeType!=d.Node.ELEMENT_NODE)f=f.parentNode;for(;f&&f.nodeType==d.Node.ELEMENT_NODE&&ja(f,e)===null;)f=f.parentNode;a===null&&f&&f.nodeType==d.Node.ELEMENT_NODE?ia(c,e,null,b):(f&&f.nodeType==d.Node.ELEMENT_NODE&&!Da(e,ja(f,e),a)||(!f||f.nodeType!=d.Node.ELEMENT_NODE)&&a!==null)&&Na(c,e,a,b)})}function oa(a,
b,c){c=c||K();if(d(sa(c)).filter(function(a){return a.nodeType==d.Node.TEXT_NODE},true).some(C)){if(C(c.startContainer)&&c.startContainer.nodeType==d.Node.TEXT_NODE&&c.startOffset!=0&&c.startOffset!=D(c.startContainer)){var e=k(c.startContainer,c.startOffset),f=m.createRange();if(c.startContainer==c.endContainer){var g=c.endOffset-c.startOffset;f.setEnd(e,g);c.setEnd(e,g)}f.setStart(e,0);m.getSelection().removeAllRanges();m.getSelection().addRange(f);c.setStart(e,0)}if(C(c.endContainer)&&c.endContainer.nodeType==
d.Node.TEXT_NODE&&c.endOffset!=0&&c.endOffset!=D(c.endContainer)){e=c;f=[e.startContainer,e.startOffset];g=[e.endContainer,e.endOffset];k(e.endContainer,e.endOffset);e.setStart(f[0],f[1]);e.setEnd(g[0],g[1]);m.getSelection().removeAllRanges();m.getSelection().addRange(e)}d(sa(K(),function(a){return C(a)&&a.nodeType==d.Node.ELEMENT_NODE})).forEach(function(b){bb(b,a,c)});d(sa(c,C)).forEach(function(e){ia(e,a,b,c);Na(e,a,b,c)})}else{M[a].hasOwnProperty("inlineCommandActivatedValues")&&nb(a,d(M[a].inlineCommandActivatedValues).indexOf(b)!=
-1,c);a=="subscript"&&ob("superscript",c);a=="superscript"&&ob("subscript",c);b===null?vb(a,c):M[a].hasOwnProperty("value")&&sb(a,b,c)}}function V(a,b){var c;if(a.nodeType===d.Node.TEXT_NODE&&b<a.length)for(c=b;c<a.length;c++)if(a.data.charAt(c)!=="\t"&&a.data.charAt(c)!=="\r"&&a.data.charAt(c)!=="\n"||a.data.charCodeAt(c)===160)return false;if(a.nextSibling&&a.nextSibling.className&&a.nextSibling.className.indexOf("aloha-table-wrapper")>=0)return a.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&
a.parentNode.nextSibling.className&&a.parentNode.nextSibling.className.indexOf("aloha-table-wrapper")>=0)return a.parentNode.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&ma(a.parentNode.nextSibling)&&a.parentNode.nextSibling.nextSibling&&a.parentNode.nextSibling.nextSibling.className&&a.parentNode.nextSibling.nextSibling.className.indexOf("aloha-table-wrapper")>=0)return a.parentNode.nextSibling.nextSibling}function R(a,b){var c;if(a.nodeType===d.Node.TEXT_NODE&&b>0)for(c=b-1;c>=0;c--)if(a.data.charAt(c)!==
"\t"&&a.data.charAt(c)!=="\r"&&a.data.charAt(c)!=="\n"||a.data.charCodeAt(c)===160)return false;return a.previousSibling&&a.previousSibling.className&&a.previousSibling.className.indexOf("aloha-table-wrapper")>=0?a.previousSibling:a.parentNode&&a.parentNode.previousSibling&&a.parentNode.previousSibling.className&&a.parentNode.previousSibling.className.indexOf("aloha-table-wrapper")>=0?a.parentNode.previousSibling:a.parentNode&&a.parentNode.previousSibling&&ma(a.parentNode.previousSibling)&&a.parentNode.previousSibling.previousSibling&&
a.parentNode.previousSibling.previousSibling.className&&a.parentNode.previousSibling.previousSibling.className.indexOf("aloha-table-wrapper")>=0?a.parentNode.previousSibling.previousSibling:false}function za(a,b){return!a.parentNode&&b==0||0<=b-1&&b-1<a.childNodes.length&&ga(a.childNodes[b-1])&&(L(a.childNodes[b-1])||n(a.childNodes[b-1],"br"))}function ha(a,b){return!a.parentNode&&b==D(a)||b<a.childNodes.length&&ga(a.childNodes[b])&&L(a.childNodes[b])}function ta(a){for(var b=0;!za(a,b)&&!ha(a,b);){if(0<=
b-1&&b-1<a.childNodes.length&&ga(a.childNodes[b-1]))return false;if(b==0||!a.hasChildNodes()){b=c.getIndexInParent(a);a=a.parentNode}else{a=a.childNodes[b-1];b=D(a)}}return true}function Ga(a){for(var b=D(a);!za(a,b)&&!ha(a,b);){if(b<a.childNodes.length&&ga(a.childNodes[b]))return false;if(b==D(a)||!a.hasChildNodes()){b=1+c.getIndexInParent(a);a=a.parentNode}else{a=a.childNodes[b];b=0}}return true}function N(a,e){var f,k=a[0].parentNode;if(C(k)&&k.parentNode){b.inArray(k.firstChild,a)!=-1&&hb(k);
f=b.inArray(k.firstChild,a)!=-1;var g=b.inArray(k.lastChild,a)!=-1,l=f&&ta(k),d=g&&Ga(k);if(!f&&g){for(f=a.length-1;f>=0;f--)ra(a[f],k.parentNode,1+c.getIndexInParent(k),e);d&&!Ga(a[a.length-1])&&a[a.length-1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling);Ja(k)}else{if(!f){f=k.cloneNode(false);k.removeAttribute("id");for(k.parentNode.insertBefore(f,k);a[0].previousSibling;)ra(k.firstChild,f,f.childNodes.length,e)}for(f=0;f<a.length;f++)ra(a[f],k.parentNode,c.getIndexInParent(k),
e);l&&!ta(a[0])&&a[0].parentNode.insertBefore(document.createElement("br"),a[0]);J(a[a.length-1])&&(!n(a[a.length-1],"br")&&n(k.firstChild,"br")&&!J(k))&&k.removeChild(k.firstChild);if(k.hasChildNodes())hb(k);else{if(k.parentNode===e.startContainer&&k.parentNode===e.endContainer&&e.startContainer===e.endContainer&&e.startOffset===e.endOffset&&k.parentNode.childNodes.length===e.startOffset){e.startOffset=k.parentNode.childNodes.length-1;e.endOffset=e.startOffset}k.parentNode.removeChild(k);d&&!Ga(a[a.length-
1])&&a[a.length-1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling)}!a[a.length-1].nextSibling&&a[a.length-1].parentNode&&Ja(a[a.length-1].parentNode)}}}function pa(a){return p(a,["address","div","h1","h2","h3","h4","h5","h6","listing","p","pre","xmp"])}function ca(a){return pa(a)||p(a,["li","dt","dd"])}function Ra(){return document.createElement("br")}function Ua(a){a&&(da(a)||n(a.lastChild,"br")||d(a.childNodes).some(ga)||(b.browser.msie?b.browser.msie&&(b.browser.version<=
7&&p(a,["p","h1","h2","h3","h4","h5","h6","pre","blockquote"]))&&(a.firstChild||a.appendChild(document.createTextNode("​"))):a.appendChild(Ra())))}function Oa(a,f){var k;if(C(a))if(d(z(a)).every(function(b){return!fa(a,b)||!na(a,b)})&&!e(a,db))if(p(a,["dd","dt"]))ya([a],function(a){return n(a,"dl")&&!a.attributes.length},function(){return document.createElement("dl")},f);else{if(X(a)){a=Ca(a,db,f);Ua(a);Oa(a,f);var g=A(a);for(k=0;k<g.length;k++)Oa(g[k],f)}}else{for(var g=xa([a]),l;!na(a,a.parentNode);){for(k=
a.parentNode.childNodes.length-1;k>=0;--k)if(a.parentNode.childNodes[k].nodeType==3&&a.parentNode.childNodes[k].data.length==0){a.parentNode.removeChild(a.parentNode.childNodes[k]);f.startContainer==a.parentNode&&f.startOffset>k&&f.startOffset--;f.endContainer==a.parentNode&&f.endOffset>k&&f.endOffset--}if(a.parentNode.childNodes.length==1&&b.inArray(a.nodeName,Gb)===-1){k=f.startOffset;l=f.endOffset;f.startContainer===a.parentNode&&f.startOffset>c.getIndexInParent(a)&&(k=f.startOffset+(b(a).contents().length-
1));f.endContainer===a.parentNode&&f.endOffset>c.getIndexInParent(a)&&(l=f.endOffset+(b(a).contents().length-1));b(a).contents().unwrap();f.startOffset=k;f.endOffset=l;break}else{k=a.parentNode;N([a],f);if(k===a.parentNode){k=f.startOffset;l=f.endOffset;f.startContainer===a.parentNode&&f.startOffset>c.getIndexInParent(a)&&(k=f.startOffset+(b(a).contents().length-1));f.endContainer===a.parentNode&&f.endOffset>c.getIndexInParent(a)&&(l=f.endOffset+(b(a).contents().length-1));b(a).contents().unwrap();
f.startOffset=k;f.endOffset=l;break}}}Ia(g,f)}}function kb(a,b){function e(a){return p(a,["OL","UL"])}if(n(a,"LI")&&C(a)&&C(a.parentNode))for(var f=null;d(a.childNodes).some(e);){var k=a.lastChild;if(p(k,["OL","UL"])||!f&&k.nodeType==d.Node.TEXT_NODE&&/^[ \t\n\f\r]*$/.test(k.data)){f=null;ra(k,a.parentNode,1+c.getIndexInParent(a),b)}else{if(!f){f=a.ownerDocument.createElement("li");a.parentNode.insertBefore(f,a.nextSibling)}ra(k,f,0,b)}}}function Hb(a,c){p(a,["OL","UL"])&&C(a)&&b(a).children("ol,ul").each(function(a,
b){n(b.previousSibling,"LI")&&ra(b,b.previousSibling,b.previousSibling.childNodes.length,c)})}function qa(a){var b=a.startContainer,e=a.startOffset,f=a.endContainer,a=a.endOffset,k=d(z(b).concat(b)).filter(function(a){return n(a,"li")}).slice(-1);if(k.length){e=c.getIndexInParent(k[0]);b=k[0].parentNode}if(!za(b,e)){do if(e==0){e=c.getIndexInParent(b);b=b.parentNode}else e--;while(!za(b,e)&&!ha(b,e))}for(;e==0&&b.parentNode;){e=c.getIndexInParent(b);b=b.parentNode}k=d(z(f).concat(f)).filter(function(a){return n(a,
"li")}).slice(-1);if(k.length){a=1+c.getIndexInParent(k[0]);f=k[0].parentNode}if(!ha(f,a)){do if(a==D(f)){a=1+c.getIndexInParent(f);f=f.parentNode}else a++;while(!za(f,a)&&!ha(f,a))}for(;a==D(f)&&f.parentNode;){a=1+c.getIndexInParent(f);f=f.parentNode}k=m.createRange();k.setStart(b,e);k.setEnd(f,a);return k}function lb(){var a=qa(K()),b=T(a,function(a){return C(a)&&(p(a,["ol","ul"])||p(a.parentNode,["ol","ul"])||na(a,"li"))});if(!b.length)return"none";if(d(b).every(function(a){return n(a,"ol")||n(a.parentNode,
"ol")||n(a.parentNode,"li")&&n(a.parentNode.parentNode,"ol")})&&!d(b).some(function(a){return n(a,"ul")||a.querySelector&&a.querySelector("ul")}))return"ol";if(d(b).every(function(a){return n(a,"ul")||n(a.parentNode,"ul")||n(a.parentNode,"li")&&n(a.parentNode.parentNode,"ul")})&&!d(b).some(function(a){return n(a,"ol")||a.querySelector&&a.querySelector("ol")}))return"ul";a=d(b).some(function(a){return n(a,"ol")||n(a.parentNode,"ol")||a.querySelector&&a.querySelector("ol")||n(a.parentNode,"li")&&n(a.parentNode.parentNode,
"ol")});b=d(b).some(function(a){return n(a,"ul")||n(a.parentNode,"ul")||a.querySelector&&a.querySelector("ul")||n(a.parentNode,"li")&&n(a.parentNode.parentNode,"ul")});return a&&b?"mixed":a?"mixed ol":b?"mixed ul":"none"}function Aa(a){for(;a&&a.nodeType!=d.Node.ELEMENT_NODE||a.nodeType==d.Node.ELEMENT_NODE&&b.inArray(d.getComputedStyle(a).display,["inline","none"])!=-1;)a=a.parentNode;if(!a||a.nodeType!=d.Node.ELEMENT_NODE)return"left";var c=d.getComputedStyle(a).textAlign.replace(/^-(moz|webkit)-/,
"").replace(/^auto$/,"start");return c=="start"?H(a)=="ltr"?"left":"right":c=="end"?H(a)=="ltr"?"right":"left":b.inArray(c,["center","justify","left","right"])!=-1?c:"left"}function Ib(a){var b=[];Ma("createlink",a)!==void 0&&b.push(["createlink",Ma("createlink",a)]);d(["bold","italic","strikethrough","subscript","superscript","underline"]).forEach(function(c){ab(c,a)!==void 0&&b.push([c,ab(c,a)])});d(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(c){Ma(c,a)!==void 0&&b.push([c,
Ma(c,a)])});return b}function Jb(a){var b=[],c=d(sa(a)).filter(function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE})[0];if(!c)return b;b.push(["createlink",M.createlink.value(a)]);d(["bold","italic","strikethrough","subscript","superscript","underline"]).forEach(function(a){d(M[a].inlineCommandActivatedValues).indexOf(ea(c,a))!=-1?b.push([a,true]):b.push([a,false])});d(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(c){b.push([c,M[c].value(a)])});b.push(["fontsize",ea(c,"fontsize")]);
return b}function eb(a,b){function c(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE}var e,f,k,g=d(sa(b)).filter(function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE})[0];if(g)for(e=0;e<a.length;e++){f=a[e][0];k=a[e][1];if(typeof k=="boolean"&&ba(f,b)!=k)Y(f,false,k,b);else if(typeof k=="string"&&f!="fontsize"&&!Da(f,ua(f,b),k))Y(f,false,k,b);else if(typeof k=="string"&&f=="fontsize"&&(Ma("fontsize",b)!==void 0&&Ma("fontsize",b)!==k||Ma("fontsize",b)===void 0&&!wa(f,ea(g,"fontsize"),k)))Y("fontsize",
false,k,b);else continue;g=d(sa(b)).filter(c)[0]||g}else for(e=0;e<a.length;e++){f=a[e][0];k=a[e][1];typeof k=="boolean"&&nb(f,k,b);typeof k=="string"&&sb(f,k,b)}}function Kb(a,b,c){if(a==0)return"";if(a==1&&!b&&!c)return" ";if(a==1)return" ";var e="",f;for(f=b?"  ":"  ";a>3;){e=e+f;a=a-2}return a==3?e+(!b&&!c?"   ":b&&!c?"   ":!b&&c?"   ":b&&c?"   ":"impossible"):e+(!b&&!c?"  ":b&&!c?"  ":!b&&c?"  ":b&&c?"  ":"impossible")}function Va(a,e){if(C(a)||da(a)){for(var f=a,k=e;;)if(0<=k-1&&fa(f,f.childNodes[k-
1])){f=f.childNodes[k-1];k=D(f)}else if(k==0&&!ta(f)&&fa(f,f.parentNode)){k=c.getIndexInParent(f);f=f.parentNode}else if(f.nodeType==d.Node.TEXT_NODE&&b.inArray(d.getComputedStyle(f.parentNode).whiteSpace,["pre","pre-wrap"])==-1&&k!=0&&/[ \xa0]/.test(f.data[k-1]))k--;else break;for(var g=f,l=k,j=0,q=false;;)if(l<g.childNodes.length&&fa(g,g.childNodes[l])){g=g.childNodes[l];l=0}else if(l==D(g)&&!Ga(g)&&fa(g,g.parentNode)){l=1+c.getIndexInParent(g);g=g.parentNode}else if(g.nodeType==d.Node.TEXT_NODE&&
b.inArray(d.getComputedStyle(g.parentNode).whiteSpace,["pre","pre-wrap"])==-1&&l!=D(g)&&/[ \xa0]/.test(g.data[l]))if(q&&" "==g.data[l])g.deleteData(l,1);else{q=" "==g.data[l];l++;j++}else break;for(j=Kb(j,k==0&&ta(f),l==D(g)&&Ga(g));Q(f,k,g,l)=="before";)if(k<f.childNodes.length){f=f.childNodes[k];k=0}else if(f.nodeType!=d.Node.TEXT_NODE||k==D(f)){k=1+c.getIndexInParent(f);f=f.parentNode}else{q=j[0];j=j.slice(1);if(q!=f.data[k]){f.insertData(k,q);f.deleteData(k+1,1)}k++}}}function Ba(a,b,e,f,k){var g,
l={},j;if(arguments.length<3)g=a;else{g=m.createRange();g.setStart(a,b);g.setEnd(e,f)}arguments.length==2&&(l=b);arguments.length==5&&(l=k);var q=null!=l.blockMerging?!!l.blockMerging:true,o=null!=l.stripWrappers?!!l.stripWrappers:true;if(g){var s=g.startContainer;j=g.startOffset;for(var u=g.endContainer,v=g.endOffset,y;s.hasChildNodes();)if(j==D(s)&&fa(s,s.parentNode)&&J(s)){j=1+c.getIndexInParent(s);s=s.parentNode}else{if(j==D(s))break;y=s.childNodes[j];if(L(y)||y.nodeType==d.Node.ELEMENT_NODE&&
!y.hasChildNodes()||y.nodeType!=d.Node.ELEMENT_NODE&&y.nodeType!=d.Node.TEXT_NODE)break;s=y;j=0}for(;u.hasChildNodes();)if(v==0&&fa(u,u.parentNode)&&J(u)){v=c.getIndexInParent(u);u=u.parentNode}else{if(v==0)break;y=u.childNodes[v-1];if(L(y)||y.nodeType==d.Node.ELEMENT_NODE&&!y.hasChildNodes()||y.nodeType!=d.Node.ELEMENT_NODE&&y.nodeType!=d.Node.TEXT_NODE)break;u=y;v=D(y)}if(Q(u,v,s,j)!=="after"){g.setEnd(g.startContainer,g.startOffset);return g}if(u.nodeType==d.Node.TEXT_NODE&&v==D(u)&&s!=u){v=1+
c.getIndexInParent(u);u=u.parentNode}g.setStart(s,j);g.setEnd(u,v);for(var z=g.startContainer;fa(z,z.parentNode)&&J(z);)z=z.parentNode;if(!L(z)&&!da(z)||!na("span",z)||p(z,["td","th"]))z=null;for(var A=g.endContainer;fa(A,A.parentNode)&&J(A);)A=A.parentNode;if(!L(A)&&!da(A)||!na("span",A)||p(A,["td","th"]))A=null;l=Jb(g);if(s==u&&C(s)&&s.nodeType==d.Node.TEXT_NODE){y=s.parentNode;s.deleteData(j,v-j);j>0&&(s.data.substr(j-1,1)===" "&&j<s.data.length&&s.data.substr(j,1)===" ")&&s.replaceData(j-1,1,
" ");Va(s,j);g.setStart(g.startContainer,g.startOffset);g.setEnd(g.startContainer,g.startOffset);eb(l,g);(C(y)||da(y))&&!J(y)&&Ua(y);return g}C(s)&&s.nodeType==d.Node.TEXT_NODE&&s.deleteData(j,D(s)-j);var H=T(g,function(a){return C(a)&&!p(a,["thead","tbody","tfoot","tr","th","td"])});for(j=0;j<H.length;j++){var F=H[j];y=F.parentNode;y.removeChild(F);if(o||!t(y,s)&&y!=s)for(;C(y)&&J(y)&&D(y)==0;){F=y.parentNode;F.removeChild(y);y=F}(C(y)||da(y))&&!J(y)&&Ua(y)}C(u)&&u.nodeType==d.Node.TEXT_NODE&&u.deleteData(0,
v);Va(g.startContainer,g.startOffset);Va(g.endContainer,g.endOffset);if(!q||!z||!A||!fa(z,A)||z==A){g.setEnd(g.startContainer,g.startOffset);A=z||A;if(Za(A)){A=Xa(A);g.setStart(A.node,A.offset);g.setEnd(A.node,A.offset)}eb(l,g);return g}z.children.length==1&&Fa(z.firstChild)&&z.removeChild(z.firstChild);A.children.length==1&&Fa(A.firstChild)&&A.removeChild(A.firstChild);if(t(z,A)){for(y=A;y.parentNode!=z;)y=y.parentNode;g.setStart(z,c.getIndexInParent(y));g.setEnd(z,c.getIndexInParent(y));if(!A.hasChildNodes()){for(;C(A)&&
A.parentNode.childNodes.length==1&&A.parentNode!=z;){y=A;y.removeChild(A);A=y}C(A)&&(!J(A)&&J(A.previousSibling)&&J(A.nextSibling))&&A.parentNode.insertBefore(document.createElement("br"),A.nextSibling);C(A)&&A.parentNode.removeChild(A);eb(l,g);return g}if(!J(A.firstChild)){eb(l,g);return g}o=[];for(o.push(A.firstChild);!n(o[o.length-1],"br")&&J(o[o.length-1].nextSibling);)o.push(o[o.length-1].nextSibling);for(q=xa(o);o[0].parentNode!=z;)N(o,g);C(o[0].previousSibling)&&n(o[0].previousSibling,"br")&&
o[0].parentNode.removeChild(o[0].previousSibling)}else if(x(z,A)){g.setStart(z,D(z));g.setEnd(z,D(z));for(y=z;y.parentNode!=A;)y=y.parentNode;J(y.nextSibling)&&n(z.lastChild,"br")&&z.removeChild(z.lastChild);A=[];y.nextSibling&&(!n(y.nextSibling,"br")&&!L(y.nextSibling))&&A.push(y.nextSibling);A.length&&(A[A.length-1].nextSibling&&!n(A[A.length-1].nextSibling,"br")&&!L(A[A.length-1].nextSibling))&&A.push(A[A.length-1].nextSibling);q=xa(A);d(A).forEach(function(a){ra(a,z,-1,g)});n(y.nextSibling,"br")&&
y.parentNode.removeChild(y.nextSibling)}else{g.setStart(z,D(z));g.setEnd(z,D(z));J(A.firstChild)&&n(z.lastChild,"br")&&z.removeChild(z.lastChild);for(q=xa([].slice.call(r(A.childNodes)));A.hasChildNodes();)ra(A.firstChild,z,-1,g);for(;!A.hasChildNodes();){y=A.parentNode;y.removeChild(A);A=y}}Ia(q,g);if(Za(z)){A=Xa(z);g.setStart(A.node,A.offset);g.setEnd(A.node,A.offset);z=A.node}Ua(z);eb(l,g);return g}}function pb(a,b){a.hasChildNodes()?N([].slice.call(r(a.childNodes)),b):a.parentNode.removeChild(a)}
function Lb(a,e){a&&b(a).find("ul,ol,li").each(function(){b(this).contents().each(function(){if(ma(this)){var a=c.getIndexInParent(this);if(e.startContainer===this.parentNode&&e.startOffset>a)e.startOffset--;else if(e.startContainer===this){e.startContainer=this.parentNode;e.startOffset=a}if(e.endContainer===this.parentNode&&e.endOffset>a)e.endOffset--;else if(e.endContainer===this){e.endContainer=this.parentNode;e.endOffset=a}b(this).remove()}})})}function Mb(a,b){if(a.length){var c=a[0];if(p(c.parentNode,
["OL","UL"])){var f=c.parentNode.tagName;ya(a,function(a){return e(a,f)},function(){return c.ownerDocument.createElement(f)},b)}else{var k=ya(a,function(){return false},function(){return c.ownerDocument.createElement("blockquote")},b);Oa(k,b)}}}function tb(a,b){if(C(a)){for(var c=a.parentNode,e=[];C(c)&&c.nodeType==d.Node.ELEMENT_NODE&&!p(c,["ol","ul"]);){e.push(c);c=c.parentNode}C(c);c=a.parentNode;for(e=[];C(c)&&c.nodeType==d.Node.ELEMENT_NODE&&!p(c,["ol","ul"]);){e.push(c);c=c.parentNode}if(p(a,
["OL","UL"])&&(!C(c)||1)){a.removeAttribute("reversed");a.removeAttribute("start");a.removeAttribute("type");c=[].slice.call(r(a.childNodes));if(a.attributes.length&&!p(a.parentNode,["OL","UL"]))Ca(a,"div",b);else{e=xa([].slice.call(r(a.childNodes)));pb(a,b);Ia(e,b)}for(e=0;e<c.length;e++)Oa(c[e],b)}else C(c)}}function wb(a,b){function c(){return document.createElement("li")}function f(a){return p(a,["ol","ul"])}function k(a){return function(b){return e(b,a)}}function g(a){return function(){return document.createElement(a)}}
function l(a,b){return function(){C(b[0].parentNode);return document.createElement(a)}}var j=lb()==a?"disable":"enable",a=a.toUpperCase(),q=a=="OL"?"UL":"OL",o=[];(function(){var a;for(a=b.endContainer;a!=b.commonAncestorContainer;a=a.parentNode)n(a,"li")&&o.unshift(a);for(a=b.startContainer;a;a=a.parentNode)n(a,"li")&&o.unshift(a)})();d(o).forEach(function(a){kb(a,b)});var t=qa(b);j=="enable"&&d(W(t,function(a){return C(a)&&e(a,q)})).forEach(function(c){if(C(c.previousSibling)&&e(c.previousSibling,
a)||C(c.nextSibling)&&e(c.nextSibling,a)){var c=[].slice.call(r(c.childNodes)),f=xa(c);N(c,b);ya(c,function(b){return e(b,a)},function(){return null},b);Ia(f,b)}else Ca(c,a,b)});t=T(t,function(a){return C(a)&&(p(a,["OL","UL"])||p(a.parentNode,["OL","UL"])||na(a,"li"))});j=="enable"&&(t=d(t).filter(function(a){return!p(a,["ol","ul"])||p(a.parentNode,["ol","ul"])}));var s;if(j=="disable")for(;t.length;){j=[];j.push(t.shift());if(e(j[0],a))tb(j[0],b);else{for(;t.length&&t[0]==j[j.length-1].nextSibling&&
!e(t[0],a);)j.push(t.shift());s=xa(j);N(j,b);var x;for(x=0;x<j.length;x++)Oa(j[x],b);Ia(s,b)}}else for(;t.length;){for(j=[];!j.length||t.length&&t[0]==j[j.length-1].nextSibling;)if(p(t[0],["p","div"])){j.push(Ca(t[0],"li",b));t.shift()}else if(p(t[0],["li","ol","ul"]))j.push(t.shift());else{for(s=[];!s.length||t.length&&t[0]==s[s.length-1].nextSibling&&J(t[0])&&J(s[s.length-1])&&!n(s[s.length-1],"br");)s.push(t.shift());j.push(ya(s,void 0,c,b))}if(!e(j[0].parentNode,a)&&!d(j).every(f))if(e(j[0].parentNode,
q)){s=xa(j);N(j,b);ya(j,k(a),g(a),b);Ia(s,b)}else Oa(ya(j,k(a),l(a,j,b),b),b)}}function qb(a,b){function c(a){return function(b){return n(b,"div")&&d(b.attributes).every(function(c){return c.name=="align"&&c.value.toLowerCase()==a||c.name=="style"&&o(b)==1&&b.style.textAlign==a})}}function e(a){return function(){var b=document.createElement("div");b.setAttribute("style","text-align: "+a);return b}}for(var f=qa(b),k=W(f,function(a){return a.nodeType==d.Node.ELEMENT_NODE&&C(a)&&(g(a,"align")||a.style.textAlign!=
""||n(a,"center"))}),f=0;f<k.length;f++){var l=k[f];l.removeAttribute("align");l.style.textAlign="";l.getAttribute("style")==""&&l.removeAttribute("style");p(l,["div","span","center"])&&!l.attributes.length&&pb(l,b);n(l,"center")&&l.attributes.length&&Ca(l,"div",b)}f=qa(La);k=[];for(k=T(f,function(b){return C(b)&&na(b,"div")&&Aa(b)!=a});k.length;){f=[];for(f.push(k.shift());k.length&&k[0]==f[f.length-1].nextSibling;)f.push(k.shift());ya(f,c(a),e(a),b)}}function xb(a,b){var c;if(a.collapsed){c=a.startOffset;
if(b){if(a.startContainer&&a.startContainer.nodeType===d.Node.TEXT_NODE)for(;c<a.startContainer.data.length&&a.startContainer.data.charAt(c)==="​";)c++}else if(a.startContainer&&a.startContainer.nodeType===d.Node.TEXT_NODE)for(;c>0&&a.startContainer.data.charAt(c-1)==="​";)c--;if(c!==a.startOffset){a.setStart(a.startContainer,c);a.setEnd(a.startContainer,c)}}}function Ha(a){var a=a.childNodes,c,e,k,g;for(e=0;e<a.length;e++){c=b(a[e]).find("a");k=0;for(g=c.length;k<g;k++)f.pub("aloha.link.pasted",
{href:c[k].getAttribute("href"),element:c[k]})}}var Ab="http://www.w3.org/1999/xhtml",jb=false,La=null,M={},ab,nb,Wa,ob,Ma,sb,vb,mb=0,aa={ADDRESS:true,ARTICLE:true,ASIDE:true,BLOCKQUOTE:true,CAPTION:true,CENTER:true,COL:true,COLGROUP:true,DD:true,DETAILS:true,DIR:true,DIV:true,DL:true,DT:true,FIELDSET:true,FIGCAPTION:true,FIGURE:true,FOOTER:true,FORM:true,H1:true,H2:true,H3:true,H4:true,H5:true,H6:true,HEADER:true,HGROUP:true,HR:true,LI:true,LISTING:true,MENU:true,NAV:true,OL:true,P:true,PLAINTEXT:true,
PRE:true,SECTION:true,SUMMARY:true,TABLE:true,TBODY:true,TD:true,TFOOT:true,TH:true,THEAD:true,TR:true,UL:true,XMP:true},Bb={inline:true,"inline-block":true,"inline-table":true,none:true};(function(){var b={},c={},e=null;Wa=function(f){if(!e||e.startContainer!=f.startContainer||e.endContainer!=f.endContainer||e.startOffset!=f.startOffset||e.endOffset!=f.endOffset){e={startContainer:f.startContainer,endContainer:f.endContainer,startOffset:f.startOffset,endOffset:f.endOffset};if(!a.isEmpty(b)||!a.isEmpty(c)){b=
{};c={};return true}}return false};ab=function(a,c){Wa(c);return b[a]};nb=function(a,c,e){Wa(e);b[a]=c};ob=function(a,c){Wa(c);delete b[a]};Ma=function(a,b){Wa(b);return c[a]};sb=function(a,b,e){Wa(e);c[a]=b;if(a=="backcolor")c.hilitecolor=b;else if(a=="hilitecolor")c.backcolor=b};vb=function(a,b){Wa(b);delete c[a];a=="backcolor"?delete c.hilitecolor:a=="hilitecolor"&&delete c.backcolor}})();var Eb={A:true,ABBR:true,B:true,BDI:true,BDO:true,CITE:true,CODE:true,DFN:true,EM:true,H1:true,H2:true,H3:true,
H4:true,H5:true,H6:true,I:true,KBD:true,MARK:true,P:true,PRE:true,Q:true,RP:true,RT:true,RUBY:true,S:true,SAMP:true,SMALL:true,SPAN:true,STRONG:true,SUB:true,SUP:true,U:true,VAR:true,ACRONYM:true,LISTING:true,STRIKE:true,XMP:true,BIG:true,BLINK:true,FONT:true,MARQUEE:true,NOBR:true,TT:true},Cb={colgroup:true,table:true,tbody:true,tfoot:true,thead:true,tr:true},Db={script:true,style:true,plaintext:true,xmp:true},fb=b.extend({H1:true,H2:true,H3:true,H4:true,H5:true,H6:true},aa),yb={CAPTION:true,COL:true,
COLGROUP:true,TBODY:true,TD:true,TFOOT:true,TH:true,THEAD:true,TR:true},zb={DD:true,DT:true},Fb={A:b.extend({A:true},aa),DD:zb,DT:zb,LI:{LI:true},NOBR:b.extend({NOBR:true},aa),H1:fb,H2:fb,H3:fb,H4:fb,H5:fb,H6:fb,TD:yb,TH:yb,ABBR:aa,B:aa,BDI:aa,BDO:aa,CITE:aa,CODE:aa,DFN:aa,EM:aa,I:aa,KBD:aa,MARK:aa,P:aa,PRE:aa,Q:aa,RP:aa,RT:aa,RUBY:aa,S:aa,SAMP:aa,SMALL:aa,SPAN:aa,STRONG:aa,SUB:aa,SUP:aa,U:aa,VAR:aa,ACRONYM:aa,LISTING:aa,STRIKE:aa,XMP:aa,BIG:aa,BLINK:aa,FONT:aa,MARQUEE:aa,TT:aa},ub=["subscript","bold",
"fontname","fontsize","forecolor","hilitecolor","italic","strikethrough","underline"];M.backcolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||U(a)||a.toLowerCase()=="transparent")&&oa("backcolor",a,b)},standardInlineValueCommand:true,relevantCssProperty:"backgroundColor",equivalentValues:function(a,b){return O(a)===O(b)}};M.bold={action:function(a,b){ba("bold",b)?oa("bold","normal",b):oa("bold","bold",b)},inlineCommandActivatedValues:["bold",
"600","700","800","900"],relevantCssProperty:"fontWeight",equivalentValues:function(a,b){return a==b||a=="bold"&&b=="700"||a=="700"&&b=="bold"||a=="normal"&&b=="400"||a=="400"&&b=="normal"}};M.createlink={action:function(a,b){if(a!==""){d(sa(K())).forEach(function(b){d(z(b)).forEach(function(b){C(b)&&(n(b,"a")&&g(b,"href"))&&b.setAttribute("href",a)})});oa("createlink",a,b)}},standardInlineValueCommand:true};M.fontname={action:function(a,b){oa("fontname",a,b)},standardInlineValueCommand:true,relevantCssProperty:"fontFamily"};
M.fontsize={action:function(a,c){if(a!==""){a=G(a);(b.inArray(a,["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large"])!=-1||/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc)$/.test(a))&&oa("fontsize",a,c)}},indeterm:function(){return d(sa(K(),function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE})).map(function(a){return ea(a,"fontsize")},true).filter(function(a,b,c){return d(c.slice(0,b)).indexOf(a)==-1}).length>=2},value:function(a){var b=sa(a,function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE})[0];
if(b===void 0)b=a.startContainer;a=ea(b,"fontsize");return S(a)},relevantCssProperty:"fontSize"};M.forecolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||U(a)||a.toLowerCase()=="transparent")&&oa("forecolor",a,b)},standardInlineValueCommand:true,relevantCssProperty:"color",equivalentValues:function(a,b){return O(a)===O(b)}};M.hilitecolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||U(a)||
a.toLowerCase()=="transparent")&&oa("hilitecolor",a,b)},indeterm:function(){return d(sa(K(),function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE})).map(function(a){return ea(a,"hilitecolor")},true).filter(function(a,b,c){return d(c.slice(0,b)).indexOf(a)==-1}).length>=2},standardInlineValueCommand:true,relevantCssProperty:"backgroundColor",equivalentValues:function(a,b){return O(a)===O(b)}};M.italic={action:function(a,b){ba("italic",b)?oa("italic","normal",b):oa("italic","italic",b)},inlineCommandActivatedValues:["italic",
"oblique"],relevantCssProperty:"fontStyle"};M.removeformat={action:function(a,b){function e(a){return C(a)&&p(a,["abbr","acronym","b","bdi","bdo","big","blink","cite","code","dfn","em","font","i","ins","kbd","mark","nobr","q","s","samp","small","span","strike","strong","sub","sup","tt","u","var"])}var f,g;f=sa(K(),e);d(f).forEach(function(a){for(;a.hasChildNodes();)ra(a.firstChild,a.parentNode,c.getIndexInParent(a),K());a.parentNode.removeChild(a)});if(C(K().startContainer)&&K().startContainer.nodeType==
d.Node.TEXT_NODE&&K().startOffset!=0&&K().startOffset!=D(K().startContainer))if(K().startContainer==K().endContainer){f=K().endOffset-K().startOffset;g=k(K().startContainer,K().startOffset);K().setStart(g,0);K().setEnd(g,f)}else K().setStart(k(K().startContainer,K().startOffset),0);if(C(K().endContainer)&&K().endContainer.nodeType==d.Node.TEXT_NODE&&K().endOffset!=0&&K().endOffset!=D(K().endContainer)){g=[K().startContainer,K().startOffset];f=[K().endContainer,K().endOffset];K().setEnd(document.documentElement,
0);k(f[0],f[1]);K().setStart(g[0],g[1]);K().setEnd(f[0],f[1])}d(sa(K(),C)).forEach(function(a){for(;e(a.parentNode)&&fa(a.parentNode,a);)N([a],K())});d(["subscript","bold","fontname","fontsize","forecolor","hilitecolor","italic","strikethrough","underline"]).forEach(function(a){oa(a,null,b)})}};M.strikethrough={action:function(a,b){ba("strikethrough",b)?oa("strikethrough",null,b):oa("strikethrough","line-through",b)},inlineCommandActivatedValues:["line-through"]};M.subscript={action:function(a,b){var c=
ba("subscript",b);oa("subscript",null,b);c||oa("subscript","subscript",b)},indeterm:function(){var a=sa(K(),function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE});return d(a).some(function(a){return ea(a,"subscript")=="subscript"})&&d(a).some(function(a){return ea(a,"subscript")!="subscript"})||d(a).some(function(a){return ea(a,"subscript")=="mixed"})},inlineCommandActivatedValues:["subscript"]};M.superscript={action:function(a,b){var c=ba("superscript",b);oa("superscript",null,b);c||oa("superscript",
"superscript",b)},indeterm:function(){var a=sa(K(),function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE});return d(a).some(function(a){return ea(a,"superscript")=="superscript"})&&d(a).some(function(a){return ea(a,"superscript")!="superscript"})||d(a).some(function(a){return ea(a,"superscript")=="mixed"})},inlineCommandActivatedValues:["superscript"]};M.underline={action:function(a,b){ba("underline",b)?oa("underline",null,b):oa("underline","underline",b)},inlineCommandActivatedValues:["underline"]};
M.unlink={action:function(){var a=K(),b=[],c;for(c=a.startContainer;c;c=c.parentNode)n(c,"A")&&g(c,"href")&&b.unshift(c);for(c=a.startContainer;c!=s(a.endContainer);c=v(c))n(c,"A")&&(g(c,"href")&&(B(c,a)||t(c,a.endContainer)||c==a.endContainer))&&b.push(c);for(c=0;c<b.length;c++)bb(b[c],"unlink",a)},standardInlineValueCommand:true};var db="p",Gb=["TABLE","OL","UL","DL"];M["delete"]={action:function(a,e){var f;b.browser.msie&&b.browser.version<=7&&xb(e,false);if(e.collapsed){Va(e.startContainer,e.startOffset);
for(var k=e.startContainer,g=e.startOffset,l=f=false;;){if(g>0){f=n(k.childNodes[g-1],"br")||false;l=n(k.childNodes[g-1],"hr")||false}if(g==0&&C(k.previousSibling)&&la(k.previousSibling))k.parentNode.removeChild(k.previousSibling);else if(0<=g-1&&g-1<k.childNodes.length&&C(k.childNodes[g-1])&&(la(k.childNodes[g-1])||f||l)){k.removeChild(k.childNodes[g-1]);g--;if(f||l){e.setStart(k,g);e.setEnd(k,g);return}}else if(g==0&&J(k)||la(k)){g=c.getIndexInParent(k);k=k.parentNode}else{if(0<=g-1&&g-1<k.childNodes.length&&
C(k.childNodes[g-1])&&n(k.childNodes[g-1],"a")){pb(k.childNodes[g-1],e);return}if(0<=g-1&&g-1<k.childNodes.length&&!L(k.childNodes[g-1])&&!p(k.childNodes[g-1],["br","img"])){k=k.childNodes[g-1];g=D(k)}else break}}if(f=R(k,g))f.parentNode.removeChild(f);else if(k.nodeType==d.Node.TEXT_NODE&&g!=0){e.setStart(k,g-1);e.setEnd(k,g-1);Ba(k,g-1,k,g)}else if(k.nodeType==d.Node.TEXT_NODE&&g==0&&b.browser.msie){g=1;e.setStart(k,g);e.setEnd(k,g);e.startOffset=0;Ba(e)}else if(!J(k))if(0<=g-1&&g-1<k.childNodes.length&&
p(k.childNodes[g-1],["br","hr","img"])){e.setStart(k,g);e.setEnd(k,g);Ba(e)}else if(p(k,["li","dt","dd"])&&k==k.parentNode.firstChild&&g==0){g=[];for(f=k.parentNode;f;f=f.parentNode)n(f,"li")&&g.unshift(f);for(f=0;f<g.length;f++)kb(g[f],e);f=xa([k]);N([k],e);Ia(f,e);p(k,["dd","dt"])&&d(z(k)).every(function(a){return!fa(k,a)||!na(k,a)})&&(k=Ca(k,db,e));Oa(k,e);for(f=0;f<g.length;f++)Hb(g[f].parentNode,e)}else{f=k;for(l=g;;)if(l==0){l=c.getIndexInParent(f);f=f.parentNode}else if(0<=l-1&&l-1<f.childNodes.length&&
C(f.childNodes[l-1])&&la(f.childNodes[l-1])){f.removeChild(f.childNodes[l-1]);l--}else break;if(g==0&&d(z(k).concat(k)).filter(function(a){return C(a)&&fa(a,k)&&false}).length){g=m.createRange();g.setStart(k,0);g.setEnd(k,0);g=qa(g);g=T(g,function(a){return C(a)&&!Ta(a)});for(f=0;f<g.length;f++)tb(g[f],e)}else if(!n(f.childNodes[l],"table"))if(0<=l-1&&l-1<f.childNodes.length&&n(f.childNodes[l-1],"table")){e.setStart(f,l-1);e.setEnd(f,l)}else if(g==0&&(n(f.childNodes[l-1],"hr")||n(f.childNodes[l-1],
"br")&&(n(f.childNodes[l-1].previousSibling,"br")||!J(f.childNodes[l-1].previousSibling)))){e.setStart(k,g);e.setEnd(k,g);Ba(f,l-1,f,l)}else{if(p(f.childNodes[l],["li","dt","dd"])&&J(f.childNodes[l].firstChild)&&l!=0){var j=f.childNodes[l-1];J(j.lastChild)&&!n(j.lastChild,"br")&&j.appendChild(document.createElement("br"));J(j.lastChild)&&j.appendChild(document.createElement("br"))}if(p(f.childNodes[l],["li","dt","dd"])&&p(f.childNodes[l-1],["li","dt","dd"])){f=f.childNodes[l-1];l=D(f);k=f.nextSibling;
g=0}else for(;0<=l-1&&l-1<f.childNodes.length;)if(C(f.childNodes[l-1])&&la(f.childNodes[l-1])){f.removeChild(f.childNodes[l-1]);l--}else{f=f.childNodes[l-1];l=D(f)}j=m.createRange();j.setStart(f,l);j.setEnd(k,g);Ba(j);if(!document.body&&!e.startContainer||!(document.body==e.startContainer||t(document.body,e.startContainer)))if(j.startContainer.hasChildNodes()||j.startContainer.nodeType==d.Node.TEXT_NODE||da(j.startContainer)){e.setStart(j.startContainer,j.startOffset);e.setEnd(j.startContainer,j.startOffset)}else{e.setStart(j.startContainer.parentNode,
c.getIndexInParent(j.startContainer));e.setEnd(j.startContainer.parentNode,c.getIndexInParent(j.startContainer))}}}}else Ba(e)}};var gb=["address","dd","div","dt","h1","h2","h3","h4","h5","h6","p","pre"];M.formatblock={action:function(a){function c(a){return function(b){return C(b)&&fa(b,a)&&e(b,gb)&&!d(A(b)).some(X)}}function f(a){return function(b){return e(b,a)&&!b.attributes.length}}function k(){return false}function g(a){return function(){return document.createElement(a)}}var l;/^<.*>$/.test(a)&&
(a=a.slice(1,-1));a=a.toLowerCase();if(d(gb).indexOf(a)!=-1){var j=qa(K()),q=T(j,function(a){return C(a)&&(pa(a)||na(a,"p")||p(a,["dd","dt"]))&&!d(A(a)).some(X)}),o=xa(q);for(l=0;l<q.length;l++)for(var t=q[l];d(z(t)).some(c(t));)N([t],j);for(Ia(o,j);q.length;){if(ca(q[0])){l=[].slice.call(r(q[0].childNodes));o=xa(l);pb(q[0],j);Ia(o,j);q.shift()}else{l=[];for(l.push(q.shift());q.length&&q[0]==l[l.length-1].nextSibling&&!ca(q[0])&&!n(l[l.length-1],"BR");)l.push(q.shift())}Oa(ya(l,b.inArray(a,["div",
"p"])==-1?f(a):k,g(a),j),j)}}},indeterm:function(){var a=qa(K()),a=W(a,function(a){return ga(a)&&C(a)&&!a.hasChildNodes()});if(!a.length)return false;var b=null,c;for(c=0;c<a.length;c++){for(var f=a[c];C(f.parentNode)&&fa(f,f.parentNode)&&!e(f,gb);)f=f.parentNode;var k="";if(C(f)&&e(f,gb)&&!d(A(f)).some(X))k=f.tagName;if(b===null)b=k;else if(b!=k)return true}return false},value:function(){var a=qa(K()),a=W(a,function(a){return ga(a)&&C(a)&&!a.hasChildNodes()});if(!a.length)return"";for(a=a[0];C(a.parentNode)&&
fa(a,a.parentNode)&&!e(a,gb);)a=a.parentNode;return C(a)&&e(a,gb)&&!d(A(a)).some(X)?a.tagName.toLowerCase():""}};M.forwarddelete={action:function(a,e){b.browser.msie&&b.browser.version<=7&&xb(e,true);if(e.collapsed){Va(e.startContainer,e.startOffset);for(var f=e.startContainer,k=e.startOffset;;)if(k==D(f)&&C(f.nextSibling)&&la(f.nextSibling))f.parentNode.removeChild(f.nextSibling);else if(k<f.childNodes.length&&C(f.childNodes[k])&&la(f.childNodes[k]))f.removeChild(f.childNodes[k]);else if(k<f.childNodes.length&&
Fa(f.childNodes[k]))k++;else if(k==D(f)&&J(f)||la(f)){k=1+c.getIndexInParent(f);f=f.parentNode}else if(k<f.childNodes.length&&!L(f.childNodes[k])&&!p(f.childNodes[k],["br","img"])){f=f.childNodes[k];k=0}else break;Va(e.startContainer,e.startOffset);var g=V(f,k);if(g)g.parentNode.removeChild(g);else if(f.nodeType==d.Node.TEXT_NODE&&k!=D(f)){e.setStart(f,k);e.setEnd(f,k);for(g=k+1;g!=f.length&&/^[\u0300-\u036f\u0591-\u05bd\u05c1\u05c2]$/.test(f.data[g]);)g++;Ba(f,k,f,g)}else if(!J(f))if(k<f.childNodes.length&&
p(f.childNodes[k],["br","hr","img"])){e.setStart(f,k);e.setEnd(f,k);Ba(f,k,f,k+1)}else{for(var l=f,g=k;;)if(g==D(l)){g=1+c.getIndexInParent(l);l=l.parentNode}else if(g<l.childNodes.length&&C(l.childNodes[g])&&la(l.childNodes[g]))l.removeChild(l.childNodes[g]);else break;if(!n(l.childNodes[g-1],"table"))if(n(l.childNodes[g],"table")){e.setStart(l,g);e.setEnd(l,g+1)}else if(k==D(f)&&p(l.childNodes[g],["br","hr"])){e.setStart(f,k);e.setEnd(f,k);Ba(l,g,l,g+1)}else{for(;g<l.childNodes.length;)if(C(l.childNodes[g])&&
la(l.childNodes[g]))l.removeChild(l.childNodes[g]);else{l=l.childNodes[g];g=0}f=Ba(f,k,l,g);e.setStart(f.startContainer,f.startOffset);e.setEnd(f.endContainer,f.endOffset)}}}else Ba(e)}};M.indent={action:function(){var a=[],b;for(b=K().endContainer;b!=K().commonAncestorContainer;b=b.parentNode)n(b,"LI")&&a.unshift(b);for(b=K().startContainer;b!=K().commonAncestorContainer;b=b.parentNode)n(b,"LI")&&a.unshift(b);for(b=K().commonAncestorContainer;b;b=b.parentNode)n(b,"LI")&&a.unshift(b);for(b=0;b<a.length;b++)kb(a[b],
K());a=qa(K());b=[];b=T(a,function(a){return C(a)&&(na(a,"div")||na(a,"ol"))});for(b.length&&(n(b[0],"LI")&&p(b[0].parentNode,["OL","UL"])&&n(b[0].previousSibling,"LI"))&&kb(b[0].previousSibling,a);b.length;){var c=[];for(c.push(b.shift());b.length&&b[0]==c[c.length-1].nextSibling;)c.push(b.shift());Mb(c,a)}}};M.inserthorizontalrule={action:function(a,b){for(;b.startOffset==0&&b.startContainer.parentNode;)b.setStart(b.startContainer.parentNode,c.getIndexInParent(b.startContainer));for(;b.endOffset==
D(b.endContainer)&&b.endContainer.parentNode;)b.setEnd(b.endContainer.parentNode,1+c.getIndexInParent(b.endContainer));Ba(b,{blockMerging:false});if(C(K().startContainer)||da(K().startContainer)){if(K().startContainer.nodeType==d.Node.TEXT_NODE&&K().startOffset==0){K().setStart(K().startContainer.parentNode,c.getIndexInParent(K().startContainer));K().collapse(true)}if(K().startContainer.nodeType==d.Node.TEXT_NODE&&K().startOffset==D(K().startContainer)){K().setStart(K().startContainer.parentNode,
1+c.getIndexInParent(K().startContainer));K().collapse(true)}var e=document.createElement("hr");b.insertNode(e);Oa(e,b);b.setStart(e.parentNode,1+c.getIndexInParent(e));b.setEnd(e.parentNode,1+c.getIndexInParent(e));m.getSelection().removeAllRanges();m.getSelection().addRange(b)}}};M.inserthtml={action:function(a,b){Ba(b);if(C(b.startContainer)||da(b.startContainer)){var e=b.createContextualFragment(a);Ha(e);var f=e.lastChild;if(f){var k=A(e);L(b.startContainer)&&d(b.startContainer.childNodes).filter(function(a,
b){return C(a)&&Fa(a)&&c.getIndexInParent(a)>=b.startOffset},true).forEach(function(a){a.parentNode.removeChild(a)});b.insertNode(e);L(b.startContainer)&&Ua(b.startContainer);b.setStart(f.parentNode,1+c.getIndexInParent(f));b.setEnd(f.parentNode,1+c.getIndexInParent(f));for(e=0;e<k.length;e++)Oa(k[e],b);Z(b)}}}};M.insertimage={action:function(a){if(a!==""){var b=K();Ba(b,{stripWrappers:false});if(C(K().startContainer)||da(K().startContainer)){L(b.startContainer)&&(b.startContainer.childNodes.length==
1&&n(b.startContainer.firstChild,"br")&&b.startOffset==0)&&b.startContainer.removeChild(b.startContainer.firstChild);var e=document.createElement("img");e.setAttribute("src",a);b.insertNode(e);b.setStart(e.parentNode,1+c.getIndexInParent(e));b.setEnd(e.parentNode,1+c.getIndexInParent(e));m.getSelection().removeAllRanges();m.getSelection().addRange(b);e.removeAttribute("width");e.removeAttribute("height")}}}};M.insertlinebreak={action:function(a,e){Ba(e,{stripWrappers:false});if(C(e.startContainer)||
da(e.startContainer))if(e.startContainer.nodeType!=d.Node.ELEMENT_NODE||na("br",e.startContainer))if(e.startContainer.nodeType==d.Node.ELEMENT_NODE||na("br",e.startContainer.parentNode)){var f,k;if(e.startContainer.nodeType==d.Node.TEXT_NODE&&e.startOffset==0){f=e.startContainer.parentNode;k=c.getIndexInParent(e.startContainer);m.getSelection().collapse(f,k);e.setStart(f,k);e.setEnd(f,k)}if(e.startContainer.nodeType==d.Node.TEXT_NODE&&e.startOffset==D(e.startContainer)){f=e.startContainer.parentNode;
k=1+c.getIndexInParent(e.startContainer);m.getSelection().collapse(f,k);e.setStart(f,k);e.setEnd(f,k)}f=document.createElement("br");e.insertNode(f);m.getSelection().collapse(f.parentNode,1+c.getIndexInParent(f));e.setStart(f.parentNode,1+c.getIndexInParent(f));e.setEnd(f.parentNode,1+c.getIndexInParent(f));if(Qa(f)){e.insertNode(Ra());m.getSelection().collapse(f.parentNode,1+c.getIndexInParent(f));e.setStart(f.parentNode,1+c.getIndexInParent(f));e.setEnd(f.parentNode,1+c.getIndexInParent(f))}b.browser.msie&&
b.browser.version<8&&f.parentNode.removeAttribute("style")}}};M.insertorderedlist={action:function(a,b){wb("ol",b)},indeterm:function(){return/^mixed( ol)?$/.test(lb())},state:function(){return lb()=="ol"}};var Nb={LI:true,DT:true,DD:true};M.insertparagraph={action:function(a,e){var f;Ba(e);Lb(va(e.startContainer),e);if(C(e.startContainer)||da(e.startContainer)){var g=e.startContainer,l=e.startOffset;g.nodeType==d.Node.TEXT_NODE&&(l!=0&&l!=D(g))&&k(g,l);if(g.nodeType==d.Node.TEXT_NODE&&l==D(g)){l=
1+c.getIndexInParent(g);g=g.parentNode}if(g.nodeType==d.Node.TEXT_NODE||g.nodeType==d.Node.COMMENT_NODE){l=c.getIndexInParent(g);g=g.parentNode}m.getSelection().collapse(g,l);e.setStart(g,l);e.setEnd(g,l);for(var j=g;!ca(j)&&C(j.parentNode)&&fa(g,j.parentNode);)j=j.parentNode;if(!C(j)||!fa(j,g)||!ca(j)){var q=db;f=qa(e);f=T(f,function(a){return na(a,"p")}).slice(0,1);if(!f.length){if(!na(q,e.startContainer))return;j=document.createElement(q);e.insertNode(j);j.appendChild(Ra());m.getSelection().collapse(j,
0);e.setStart(j,0);e.setEnd(j,0);return}for(;f[f.length-1].nextSibling&&na(f[f.length-1].nextSibling,"p");)f.push(f[f.length-1].nextSibling);j=ya(f,function(){return false},function(){return document.createElement(q)},e)}if(j){var r;if(j.tagName=="ADDRESS"||j.tagName=="LISTING"||j.tagName=="PRE"){var o=document.createElement("br");f=j.offsetHeight;e.insertNode(o);r=j.offsetHeight;m.getSelection().collapse(g,l+1);e.setStart(g,l+1);e.setEnd(g,l+1);if(f==r&&!x(v(o),j)){e.insertNode(Ra());m.getSelection().collapse(g,
l+1);e.setEnd(g,l+1)}}else if(Nb[j.tagName]&&(!j.hasChildNodes()||j.childNodes.length==1&&n(j.firstChild,"br"))){N([j],e);p(j,["dd","dt"])&&d(z(j)).every(function(a){return!fa(j,a)||!na(j,a)})&&(j=Ca(j,db,e));Oa(j,e);if(n(j,"li")&&n(j.nextSibling,"li")&&p(j.nextSibling.firstChild,["ol","ul"])){g=j.nextSibling;l=j.nextSibling.childNodes.length;for(f=0;f<l;f++)j.appendChild(g.childNodes[0]);g.parentNode.removeChild(g)}}else if(n(j,"p")&&n(j.parentNode,"blockquote")&&!j.nextSibling&&(!j.hasChildNodes()||
j.childNodes.length===1&&n(j.firstChild,"br")))b(j.parentNode).after(j);else{l=m.createRange();l.setStart(e.startContainer,e.startOffset);for(l.setEnd(j,D(j));l.startOffset==0&&l.startContainer!=j;)l.setStart(l.startContainer.parentNode,c.getIndexInParent(l.startContainer));for(;l.startOffset==D(l.startContainer)&&l.startContainer!=j;)l.setStart(l.startContainer.parentNode,1+c.getIndexInParent(l.startContainer));g=T(l);g=!g.length||g.length==1&&n(g[0],"br");g=/^H[1-6]$/.test(j.tagName)&&g?db:j.tagName==
"DT"&&g?"dd":j.tagName=="DD"&&g?"dt":j.tagName.toLowerCase();g=document.createElement(g);Sa(j,g);g.removeAttribute("id");j.parentNode.insertBefore(g,j.nextSibling);r=W(l);l=l.extractContents();o=A(l);for(f=0;f<o.length;f++)o[f].nodeType==d.Node.ELEMENT_NODE&&d(r).indexOf(o[f])==-1&&o[f].removeAttribute("id");f=[];if(r=l.firstChild){do ma(r)||f.push(r);while(null!=(r=r.nextSibling))}if(n(g,"li")&&f.length&&p(f[0],["ul","ol"])){f=g.offsetHeight;o=Ra();g.appendChild(o);r=g.offsetHeight;f!==r&&g.removeChild(o)}g.appendChild(l);
Ua(j);Ua(g);m.getSelection().collapse(g,0);e.setStart(g,0);e.setEnd(g,0)}}}}};M.inserttext={action:function(a,c){var e;Ba(c,{stripWrappers:false});if(C(c.startContainer)||da(c.startContainer))if(a.length>1)for(e=0;e<a.length;e++)M.inserttext.action(a[e],c);else if(a!="")if(a=="\n")M.insertparagraph.action("",c);else{e=c.startContainer;var f=c.startOffset;if(0<=f-1&&f-1<e.childNodes.length&&e.childNodes[f-1].nodeType==d.Node.TEXT_NODE){e=e.childNodes[f-1];f=D(e)}if(0<=f&&f<e.childNodes.length&&e.childNodes[f].nodeType==
d.Node.TEXT_NODE){e=e.childNodes[f];f=0}var k=e.nodeType==d.Node.ELEMENT_NODE?e:e.parentNode;a==" "&&(k.nodeType==d.Node.ELEMENT_NODE&&b.inArray(d.getComputedStyle(k).whiteSpace,["pre","pre-wrap"])==-1)&&(a=" ");k=Ib(c);if(e.nodeType==d.Node.TEXT_NODE){e.insertData(f,a);m.getSelection().collapse(e,f);c.setStart(e,f);m.getSelection().extend(e,f+1);c.setEnd(e,f+1)}else{e.childNodes.length==1&&Qa(e.firstChild)&&e.removeChild(e.firstChild);e=document.createTextNode(a);c.insertNode(e);m.getSelection().collapse(e,
0);c.setStart(e,0);m.getSelection().extend(e,1);c.setEnd(e,1)}eb(k,c);Va(c.startContainer,c.startOffset);Va(c.endContainer,c.endOffset);m.getSelection().collapseToEnd();c.collapse(false)}}};M.insertunorderedlist={action:function(a,b){wb("ul",b)},indeterm:function(){return/^mixed( ul)?$/.test(lb())},state:function(){return lb()=="ul"}};M.justifycenter={action:function(a,b){qb("center",b)},indeterm:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return d(a).some(function(a){return Aa(a)==
"center"})&&d(a).some(function(a){return Aa(a)!="center"})},state:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length&&d(a).every(function(a){return Aa(a)=="center"})},value:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length?Aa(a[0]):"left"}};M.justifyfull={action:function(a,b){qb("justify",b)},indeterm:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return d(a).some(function(a){return Aa(a)==
"justify"})&&d(a).some(function(a){return Aa(a)!="justify"})},state:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length&&d(a).every(function(a){return Aa(a)=="justify"})},value:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length?Aa(a[0]):"left"}};M.justifyleft={action:function(a,b){qb("left",b)},indeterm:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return d(a).some(function(a){return Aa(a)==
"left"})&&d(a).some(function(a){return Aa(a)!="left"})},state:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length&&d(a).every(function(a){return Aa(a)=="left"})},value:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length?Aa(a[0]):"left"}};M.justifyright={action:function(a,b){qb("right",b)},indeterm:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return d(a).some(function(a){return Aa(a)==
"right"})&&d(a).some(function(a){return Aa(a)!="right"})},state:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length&&d(a).every(function(a){return Aa(a)=="right"})},value:function(){var a=W(qa(K()),function(a){return C(a)&&ga(a)&&!a.hasChildNodes()});return a.length?Aa(a[0]):"left"}};M.outdent={action:function(){var a=[];(function(){var b;for(b=K().endContainer;b!=K().commonAncestorContainer;b=b.parentNode)n(b,"li")&&a.unshift(b);for(b=K().startContainer;b;b=
b.parentNode)n(b,"li")&&a.unshift(b)})();d(a).forEach(function(a){kb(a,K())});for(var b=qa(K()),c=T(b,function(a){return C(a)&&(!d(A(a)).some(C)||p(a,["ol","ul"])||n(a,"li")&&p(a.parentNode,["ol","ul"]))});c.length;){for(;c.length&&(p(c[0],["OL","UL"])||!p(c[0].parentNode,["OL","UL"]));)tb(c.shift(),b);if(!c.length)break;var e=[];for(e.push(c.shift());c.length&&c[0]==e[e.length-1].nextSibling&&!p(c[0],["OL","UL"]);)e.push(c.shift());var f=xa(e);N(e,b);d(e).forEach(Oa);Ia(f,b)}}};M.selectall={action:function(){var a=
document.body;if(!a)a=document.documentElement;a?m.getSelection().selectAllChildren(a):m.getSelection().removeAllRanges()}};M.stylewithcss={action:function(a){jb=(""+a).toLowerCase()!="false"},state:function(){return jb}};M.usecss={action:function(a){jb=(""+a).toLowerCase()=="false"}};(function(){var a=[],b;for(b in M)M.hasOwnProperty(b)&&a.push(b);d(a).forEach(function(a){if(null==M[a].relevantCssProperty)M[a].relevantCssProperty=null;if(null!=M[a].inlineCommandActivatedValues&&null==M[a].indeterm)M[a].indeterm=
function(b){var b=d(sa(b,function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE})).map(function(b){return ea(b,a)}),c=d(b).filter(function(b){return d(M[a].inlineCommandActivatedValues).indexOf(b)!=-1});return c.length>=1&&b.length-c.length>=1};if(null!=M[a].inlineCommandActivatedValues)M[a].state=function(b){var c=sa(b,function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE});return c.length==0?d(M[a].inlineCommandActivatedValues).indexOf(ea(b.startContainer,a))!=-1:d(c).every(function(b){return d(M[a].inlineCommandActivatedValues).indexOf(ea(b,
a))!=-1})};if(null!=M[a].standardInlineValueCommand){M[a].indeterm=function(){var b=d(sa(K())).filter(function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE},true).map(function(b){return ea(b,a)}),c;for(c=1;c<b.length;c++)if(b[c]!=b[c-1])return true;return false};M[a].value=function(b){var c=sa(b,function(a){return C(a)&&a.nodeType==d.Node.TEXT_NODE})[0];if(typeof c=="undefined")c=b.startContainer;return ea(c,a)}}})})();return{commands:M,execCommand:Y,queryCommandIndeterm:function(a,b){a=a.toLowerCase();
return I(a,"indeterm",b,function(a){return function(){return!P(a,b)?false:M[a].indeterm(b)}}(a))},queryCommandState:ba,queryCommandValue:ua,queryCommandEnabled:P,queryCommandSupported:function(a){a=a.toLowerCase();return M.hasOwnProperty(a)},copyAttributes:Sa,createEndBreak:Ra,isEndBreak:function(a){return n(a,"br")&&a.parentNode.lastChild===a},ensureContainerEditable:Ua,isEditingHost:da,isEditable:C,getStateOverride:ab,setStateOverride:nb,resetOverrides:Wa,unsetStateOverride:ob}});define("aloha/selection",
"aloha/core jquery util/class util/range util/arrays util/strings util/dom util/dom2 aloha/console PubSub aloha/engine aloha/ecma5shims aloha/rangy-core".split(" "),function(m,d,a,j,c,b,f,g,k,l,e,q){function n(a,b){var e=m.activeEditable?m.activeEditable.obj.parent()[0]:null,e=d(a).parentsUntil(e).get(),f;f=[];var k,g,l;1===a.nodeType&&a.nodeName!=="BODY"&&a.nodeName!=="HTML"?f.push(a.cloneNode(false).outerHTML):f.push("#"+a.nodeType);l=0;for(g=e.length;l<g;l++){k=e[l];if(k.nodeName==="BODY"||k.nodeName===
"HTML")break;f.push(k.cloneNode(false).outerHTML)}f=f.join("");return b&&a===b.node&&c.equal(b.parents,e)&&f===b.html?null:{node:a,parents:e,html:f}}function p(a){var b;if(d.browser.msie&&a.startContainer===a.endContainer&&a.startOffset===a.endOffset&&a.startContainer.nodeType==3&&a.startOffset==a.startContainer.data.length&&a.startContainer.nextSibling){b=a.startContainer.nextSibling;if("OL"===b.nodeName||"UL"===b.nodeName)a.startContainer.data[a.startContainer.data.length-1]==" "?a.startOffset=
a.endOffset=a.startOffset-1:a.startContainer.data=a.startContainer.data+" "}}var o=window.GENTICS,r=null,s=null,j=a.extend({_constructor:function(){this.rangeObject={};this.correctSelectionFlag=this.preventSelectionChangedFlag=false;this.tagHierarchy={textNode:{},abbr:{textNode:true},b:{textNode:true,b:true,i:true,em:true,sup:true,sub:true,br:true,span:true,img:true,a:true,del:true,ins:true,u:true,cite:true,q:true,code:true,abbr:true,strong:true},pre:{textNode:true,b:true,i:true,em:true,sup:true,
sub:true,br:true,span:true,img:true,a:true,del:true,ins:true,u:true,cite:true,q:true,code:true,abbr:true},blockquote:{textNode:true,b:true,i:true,em:true,sup:true,sub:true,br:true,span:true,img:true,a:true,del:true,ins:true,u:true,cite:true,q:true,code:true,abbr:true,p:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true},ins:{textNode:true,b:true,i:true,em:true,sup:true,sub:true,br:true,span:true,img:true,a:true,u:true,p:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true},ul:{li:true},ol:{li:true},
li:{textNode:true,b:true,i:true,em:true,sup:true,sub:true,br:true,span:true,img:true,ul:true,ol:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,del:true,ins:true,u:true,a:true},tr:{td:true,th:true},table:{tr:true},div:{textNode:true,b:true,i:true,em:true,sup:true,sub:true,br:true,span:true,img:true,ul:true,ol:true,table:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,del:true,ins:true,u:true,p:true,div:true,pre:true,blockquote:true,a:true},h1:{textNode:true,b:true,i:true,em:true,sup:true,
sub:true,br:true,span:true,img:true,a:true,del:true,ins:true,u:true}};this.tagHierarchy={textNode:this.tagHierarchy.textNode,abbr:this.tagHierarchy.abbr,br:this.tagHierarchy.textNode,img:this.tagHierarchy.textNode,b:this.tagHierarchy.b,strong:this.tagHierarchy.b,code:this.tagHierarchy.b,q:this.tagHierarchy.b,blockquote:this.tagHierarchy.blockquote,cite:this.tagHierarchy.b,i:this.tagHierarchy.b,em:this.tagHierarchy.b,sup:this.tagHierarchy.b,sub:this.tagHierarchy.b,span:this.tagHierarchy.b,del:this.tagHierarchy.del,
ins:this.tagHierarchy.ins,u:this.tagHierarchy.b,p:this.tagHierarchy.b,pre:this.tagHierarchy.pre,a:this.tagHierarchy.b,ul:this.tagHierarchy.ul,ol:this.tagHierarchy.ol,li:this.tagHierarchy.li,div:this.tagHierarchy.div,h1:this.tagHierarchy.h1,h2:this.tagHierarchy.h1,h3:this.tagHierarchy.h1,h4:this.tagHierarchy.h1,h5:this.tagHierarchy.h1,h6:this.tagHierarchy.h1,table:this.tagHierarchy.div,tr:this.tagHierarchy.div,th:this.tagHierarchy.div,td:this.tagHierarchy.div};this.replacingElements={h1:{p:true,h1:true,
h2:true,h3:true,h4:true,h5:true,h6:true,pre:true,blockquote:true}};this.replacingElements={h1:this.replacingElements.h1,h2:this.replacingElements.h1,h3:this.replacingElements.h1,h4:this.replacingElements.h1,h5:this.replacingElements.h1,h6:this.replacingElements.h1,pre:this.replacingElements.h1,p:this.replacingElements.h1,blockquote:this.replacingElements.h1};this.allowedToStealElements={h1:{textNode:true}};this.allowedToStealElements={h1:this.allowedToStealElements.h1,h2:this.allowedToStealElements.h1,
h3:this.allowedToStealElements.h1,h4:this.allowedToStealElements.h1,h5:this.allowedToStealElements.h1,h6:this.allowedToStealElements.h1,p:this.tagHierarchy.b}},SelectionTree:function(){this.domobj={};this.selection=void 0;this.children=[]},onChange:function(a,b,c,e){this.updateSelectionTimeout&&window.clearTimeout(this.updateSelectionTimeout);var f=this;this.updateSelectionTimeout=window.setTimeout(function(){var k=new m.Selection.SelectionRange(true);if(!k.startContainer||"HTML"===k.startContainer.nodeName||
"BODY"===k.startContainer.nodeName){if(!this.updateSelectionTimeout)f.onChange(a,b,10+(c||5)*2)}else{d.browser.msie&&e&&k.select();m.Selection._updateSelection(b,k)}},c||5)},preventSelectionChanged:function(){this.preventSelectionChangedFlag=true},isSelectionChangedPrevented:function(){var a=this.preventSelectionChangedFlag;this.preventSelectionChangedFlag=false;return a},isSelectionEditable:function(){return this.rangeObject.commonAncestorContainer&&d(this.rangeObject.commonAncestorContainer).contentEditable()},
isFloatingMenuVisible:function(){var a=d(m.Selection.rangeObject.commonAncestorContainer).attr("data-aloha-floatingmenu-visible");return a!=="undefined"&&a==="true"?true:false},updateSelection:function(a){return this._updateSelection(a,null)},_updateSelection:function(a,b){if(a&&a.originalEvent&&true===a.originalEvent.stopSelectionUpdate||typeof b==="undefined")return false;if((this.rangeObject=b=b||new m.Selection.SelectionRange(true))&&b.startContainer&&"HR"===b.startContainer.nodeName&&b.endContainer&&
"HR"===b.endContainer.nodeName){m.getSelection().removeAllRanges();return true}b.update();if(b&&b.startContainer&&b.endContainer&&!this.correctSelectionFlag&&d(b.commonAncestorContainer).closest(".aloha-editable").length>0&&!d(b.startContainer).closest(".aloha-editable,.aloha-block,.aloha-table-cell-editable,.aloha-table-cell_active").first().hasClass("aloha-block")){var c=this._validEditablePosition(b.startContainer),e=this._validEditablePosition(b.endContainer),f,g=a&&a.keyCode===40;if(!c)if(f=
this._getNearestEditablePosition(b.startContainer,g)){b.startContainer=f.container;b.startOffset=f.offset}if(!e)if(f=this._getNearestEditablePosition(b.endContainer,g)){b.endContainer=f.container;b.endOffset=f.offset}if(!c||!e){this.correctSelectionFlag=true;b.correctRange();b.select()}}this.correctSelectionFlag=false;if(this.isSelectionChangedPrevented())return true;m.trigger("aloha-selection-changed-before",[this.rangeObject,a]);m.trigger("aloha-selection-changed",[this.rangeObject,a]);c=this.rangeObject;
f=c.startContainer;e=c.endContainer;if(!f||!e)k.warn("aloha/selection","encountered range object without start or end container");else{f=n(f,r);e=n(e,s);if(f||e){r=f;s=e;l.pub("aloha.selection.context-change",{range:c,event:a})}}m.trigger("aloha-selection-changed-after",[this.rangeObject,a]);return true},_validEditablePosition:function(a){if(!a)return false;switch(a.nodeType){case 1:return d(a).contentEditable();case 3:return d(a.parentNode).contentEditable();default:return false}},_getNearestEditablePosition:function(a,
b){for(var c=a,e=c.parentNode;e!==null&&!d(e).contentEditable();){c=e;e=e.parentNode}return c===null?false:b?f.isBlockLevelElement(c.nextSibling)&&d(c.nextSibling).contentEditable()?{container:c.nextSibling,offset:0}:{container:e,offset:f.getIndexInParent(c)+1}:f.isBlockLevelElement(c.previousSibling)&&d(c.previousSibling).contentEditable()?{container:c.previousSibling,offset:c.previousSibling.childNodes.length}:{container:e,offset:f.getIndexInParent(c)}},getSelectionTree:function(a){if(!a)return this.rangeObject.getSelectionTree();
if(!a.commonAncestorContainer){m.Log.error(this,"the rangeObject is missing the commonAncestorContainer");return false}this.inselection=false;if(o.Utils.Dom.doCleanup({merge:true},a)){a.update();a.select()}return this.recursiveGetSelectionTree(a,a.commonAncestorContainer)},recursiveGetSelectionTree:function(a,b){var c=0,e=this,f=[];d(b).contents().each(function(k){var g="none",l=false,j=false,d=false,q=false,n=false,p=false;if(a.isCollapsed()&&b===a.startContainer&&a.startOffset==k){f[c]=new m.Selection.SelectionTree;
f[c].selection="collapsed";f[c].domobj=void 0;e.inselection=false;d=true;c++}if(!e.inselection&&!d){var r;try{r=this.nodeType}catch(o){return}switch(r){case 3:if(this===a.startContainer){e.inselection=true;g=a.startOffset>0?"partial":"full";l=a.startOffset;j=this.length}break;case 1:if(this===a.startContainer&&a.startOffset===0){e.inselection=true;g="full"}if(b===a.startContainer&&a.startOffset===k){e.inselection=true;g="full"}}}if(e.inselection&&!d){g=="none"&&(g="full");switch(this.nodeType){case 3:if(this===
a.endContainer){e.inselection=false;a.endOffset<this.length&&(g="partial");l===false&&(l=0);j=a.endOffset}break;case 1:if(this===a.endContainer&&a.endOffset===0)e.inselection=false}if(b===a.endContainer&&a.endOffset<=k){e.inselection=false;g="none"}}f[c]=new m.Selection.SelectionTree;f[c].domobj=this;f[c].selection=g;if(g=="partial"){f[c].startOffset=l;f[c].endOffset=j}f[c].children=e.recursiveGetSelectionTree(a,this);g=f[c].children.length;if(g>0){for(k=0;k<g;++k)switch(f[c].children[k].selection){case "none":q=
true;break;case "full":p=true;break;case "partial":n=true}if(n||p&&q)f[c].selection="partial";else if(p&&!n&&!q)f[c].selection="full"}c++});if(a.isCollapsed()&&b===a.startContainer&&a.startOffset==b.childNodes.length){f[c]=new m.Selection.SelectionTree;f[c].selection="collapsed";f[c].domobj=void 0}return f},getRangeObject:function(){return this.rangeObject},isRangeObjectWithinMarkup:function(a,b,c,e,f){var k=this,a=d(!b?a.startContainer:a.endContainer).parents(),g=false,l=-1;typeof e!=="undefined"&&
typeof e!=="function"&&m.Log.error(this,"parameter tagComparator is not a function");typeof e==="undefined"&&(e=function(a,b){return k.standardTextLevelSemanticsComparator(a,b)});a.length>0&&a.each(function(){if(this===f){m.Log.debug(k,"reached limit dom obj");return false}if(e(this,c)){g===false&&(g=[]);m.Log.debug(k,"reached object equal to markup");l++;g[l]=this;return true}});return g},standardSectionsAndGroupingContentComparator:function(a,b){if(a.nodeType!==1){m.Log.debug(this,"only element nodes (nodeType == 1) can be compared");
return false}if(!b[0].nodeName)return false;var c=m.Selection.replacingElements[a.nodeName.toLowerCase()];return c&&c[b[0].nodeName.toLowerCase()]},standardTagNameComparator:function(a,b){if(a.nodeType===1)return a.nodeName!=b[0].nodeName?false:true;m.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return false},standardTextLevelSemanticsComparator:function(a,b){if(a.nodeType===1)return a.nodeName!=b[0].nodeName||!this.standardAttributesComparator(a,b)?false:true;m.Log.debug(this,
"only element nodes (nodeType == 1) can be compared");return false},standardAttributesComparator:function(a,e){var f=b.words(a&&a.className||""),k=b.words(e.length&&e[0].className||"");c.sortUnique(f);c.sortUnique(k);return c.equal(f,k)},changeMarkup:function(a,b,c){var f=b[0].tagName.toLowerCase(),k,g,l=this.isRangeObjectWithinMarkup(a,false,b,c,k),j=this.isRangeObjectWithinMarkup(a,true,b,c,k),n,p,r,o;if(this.replacingElements[f]){g=a;a=new this.SelectionRange(a);f=m.activeEditable?m.activeEditable.obj.get(0):
d("body");a.update(f);b.isReplacingElement=true}else if(a.isCollapsed()){m.Log.debug(this,"early returning from applying markup because nothing is currently selected");return false}k=m.activeEditable?m.activeEditable.obj[0]:d("body");if(!b.isReplacingElement&&a.startOffset===0&&null!=(r=this.getTextNodeSibling(false,a.commonAncestorContainer.parentNode,a.startContainer)))o=this.isRangeObjectWithinMarkup({startContainer:r,startOffset:0},false,b,c,k);if(!b.isReplacingElement&&a.endOffset===a.endContainer.length&&
null!=(n=this.getTextNodeSibling(true,a.commonAncestorContainer.parentNode,a.endContainer)))p=this.isRangeObjectWithinMarkup({startContainer:n,startOffset:0},false,b,c,k);if(!b.isReplacingElement&&l&&!j){m.Log.info(this,"markup 2 non-markup");this.prepareForRemoval(a.getSelectionTree(),b,c);d(l).addClass("preparedForRemoval");this.insertCroppedMarkups(l,a,false,c)}else if(!b.isReplacingElement&&l&&j){m.Log.info(this,"markup 2 markup");this.prepareForRemoval(a.getSelectionTree(),b,c);this.splitRelevantMarkupObject(l,
j,a,c)}else if(!b.isReplacingElement&&(!l&&j||p||o)){m.Log.info(this,"non-markup 2 markup OR with next2markup");if(o&&p){l=new m.Selection.SelectionRange(a);l.startContainer=d(o[o.length-1]).textNodes()[0];l.startOffset=0;l.endContainer=d(p[p.length-1]).textNodes().last()[0];l.endOffset=l.endContainer.length;l.update();this.applyMarkup(l.getSelectionTree(),a,b,c);m.Log.info(this,"double extending previous markup(previous and after selection), actually wrapping it ...")}else if(o&&!p&&!j){this.extendExistingMarkupWithSelection(o,
a,false,c);m.Log.info(this,"extending previous markup")}else if(o&&!p&&j){l=new m.Selection.SelectionRange(a);l.startContainer=d(o[o.length-1]).textNodes()[0];l.startOffset=0;l.endContainer=d(j[j.length-1]).textNodes().last()[0];l.endOffset=l.endContainer.length;l.update();this.applyMarkup(l.getSelectionTree(),a,b,c);m.Log.info(this,"double extending previous markup(previous and relevant at the end), actually wrapping it ...")}else if(!o&&p){this.extendExistingMarkupWithSelection(p,a,true,c);m.Log.info(this,
"extending following markup backwards")}else this.extendExistingMarkupWithSelection(j,a,true,c)}else if(b.isReplacingElement||!l&&!j&&!o&&!p){m.Log.info(this,"non-markup 2 non-markup");if(a.startContainer!==a.endContainer)j=false;else if(a.startContainer.nodeType!=1)j=false;else{j=a.startContainer.firstChild;j=!j||!j.nextSibling&&j.nodeName=="BR"}if(j){b=b.clone();c=a.startContainer!==a.endContainer?false:a.startContainer.nodeType!=1?false:e.isEndBreak(a.startContainer);c&&b[0].appendChild(e.createEndBreak());
m.activeEditable&&d.browser.mozilla&&m.activeEditable.obj.focus();if(e.isEditable(a.startContainer)){e.copyAttributes(a.startContainer,b[0]);d(a.startContainer).after(b[0]).remove()}else if(e.isEditingHost(a.startContainer)){d(a.startContainer).append(b[0]);e.ensureContainerEditable(b[0])}g.startContainer=b[0];g.endContainer=b[0];g.startOffset=0;g.endOffset=0;return}this.applyMarkup(a.getSelectionTree(),a,b,c,{setRangeObject2NewMarkup:true});g.startContainer=a.startContainer;g.endContainer=a.endContainer;
g.startOffset=a.startOffset;g.endOffset=a.endOffset}if(b.isReplacingElement){if(g&&g.startContainer.className&&g.startContainer.className.indexOf("preparedForRemoval")>-1){c=d(g.startContainer).parents(b[0].tagName).get(0);g.startContainer=c;a.startContainer=c}if(g&&g.endContainer.className&&g.endContainer.className.indexOf("preparedForRemoval")>-1){c=d(g.endContainer).parents(b[0].tagName).get(0);g.endContainer=c;a.endContainer=c}}d(".preparedForRemoval").zap();if(b.isReplacingElement){if(q.Node.ELEMENT_NODE===
g.startContainer.nodeType&&g.startContainer.childNodes&&g.startContainer.childNodes.length<g.startOffset){g.startOffset=g.startContainer.childNodes.length;a.startOffset=g.startContainer.childNodes.length}if(q.Node.ELEMENT_NODE===g.endContainer.nodeType&&g.endContainer.childNodes&&g.endContainer.childNodes.length<g.endOffset){g.endOffset=g.endContainer.childNodes.length;a.endOffset=g.endContainer.childNodes.length}a.endContainer=g.endContainer;a.endOffset=g.endOffset;a.startContainer=g.startContainer;
a.startOffset=g.startOffset;g.update();g.select()}else{a.update();a.select()}},areMarkupObjectsAsLongAsRangeObject:function(a,b,c){var e,f,k;if(c.startOffset!==0)return false;e=0;for(k=a.length;e<k;e++){f=d(a[e]);if(f.textNodes().first()[0]!==c.startContainer)return false}e=0;for(a=b.length;e<a;e++){f=d(b[e]);f=f.textNodes().last()[0];if(f!==c.endContainer||f.length!=c.endOffset)return false}return true},splitRelevantMarkupObject:function(a,b,c,e){d(a).addClass("preparedForRemoval");d(b).addClass("preparedForRemoval");
if(this.areMarkupObjectsAsLongAsRangeObject(a,b,c))return true;var f=this.intersectRelevantMarkupObjects(a,b);if(f){this.insertCroppedMarkups([f],c,false,e);this.insertCroppedMarkups([f],c,true,e)}else{this.insertCroppedMarkups(a,c,false,e);this.insertCroppedMarkups(b,c,true,e)}return true},intersectRelevantMarkupObjects:function(a,b){var c=false,e,f,k,g,l,j;if(!a||!b)return c;l=a.length;j=b.length;for(e=0;e<l;e++){f=a[e];for(k=0;k<j;k++){g=b[k];f===g&&(c=f)}}return c},extendExistingMarkupWithSelection:function(a,
b,c,e){var f,k,g,l,j,q,n;c||(f=true);c&&(k=true);c=[];g=0;for(l=a.length;g<l;g++){c[g]=new this.SelectionRange;j=a[g];if(k&&!f){c[g].startContainer=b.startContainer;c[g].startOffset=b.startOffset;q=d(j).textNodes(true);n=q.length-1;c[g].endContainer=q[n];c[g].endOffset=q[n].length;c[g].update();this.applyMarkup(c[g].getSelectionTree(),b,this.getClonedMarkup4Wrapping(j),e,{setRangeObject2NewMarkup:true})}if(!k&&f){q=d(j).textNodes(true);c[g].startContainer=q[0];c[g].startOffset=0;c[g].endContainer=
b.endContainer;c[g].endOffset=b.endOffset;c[g].update();this.applyMarkup(c[g].getSelectionTree(),b,this.getClonedMarkup4Wrapping(j),e,{setRangeObject2NewMarkup:true})}}return true},getClonedMarkup4Wrapping:function(a){a=d(a.outerHTML).removeClass("preparedForRemoval").empty();a.attr("class").length===0&&a.removeAttr("class");return a},insertCroppedMarkups:function(a,b,c,e){var f,k,g,l,j;c?k=true:f=true;c=[];for(l=0;l<a.length;l++){c[l]=new this.SelectionRange;j=a[l];if(f&&!k){g=d(j).textNodes(true);
c[l].startContainer=g[0];c[l].startOffset=0;if(c[l].startContainer===b.startContainer&&c[l].startOffset===b.startOffset)continue;if(b.startOffset===0){c[l].endContainer=this.getTextNodeSibling(false,j,b.startContainer);c[l].endOffset=c[l].endContainer.length}else{c[l].endContainer=b.startContainer;c[l].endOffset=b.startOffset}c[l].update();this.applyMarkup(c[l].getSelectionTree(),b,this.getClonedMarkup4Wrapping(j),e,{setRangeObject2NextSibling:true})}if(!f&&k){c[l].startContainer=b.endContainer;c[l].startOffset=
b.endOffset;g=d(j).textNodes(true);c[l].endContainer=g[g.length-1];c[l].endOffset=g[g.length-1].length;c[l].update();this.applyMarkup(c[l].getSelectionTree(),b,this.getClonedMarkup4Wrapping(j),e,{setRangeObject2PreviousSibling:true})}}return true},changeMarkupOnSelection:function(a){var b=this.getRangeObject();this.changeMarkup(b,a,this.getStandardTagComparator(a));o.Utils.Dom.doCleanup({merge:true},b);b.update();b.select();this.rangeObject=b},applyMarkup:function(a,b,c,e,f){var k,g,f=f||{};this.prepareForRemoval(a,
c,e);a=this.optimizeSelectionTree4Markup(a,c,e);for(k=0;k<a.length;k++){g=a[k];if(g.wrappable)this.wrapMarkupAroundSelectionTree(g.elements,b,c,e,f);else{m.Log.debug(this,"dive further into non-wrappable object");this.applyMarkup(g.element.children,b,c,e,f)}}},getMarkupType:function(a){var b=d(a)[0].nodeName.toLowerCase();a.outerHtml&&m.Log.debug(this,"Node name detected: "+b+" for: "+a.outerHtml());if(b=="#text")return"textNode";if(this.replacingElements[b])return"sectionOrGroupingContent";if(this.tagHierarchy[b])return"textLevelSemantics";
m.Log.warn(this,"unknown markup passed to this.getMarkupType(...): "+a.outerHtml())},getStandardTagComparator:function(a){var b=this;switch(this.getMarkupType(a)){case "textNode":a=function(){return false};break;case "sectionOrGroupingContent":a=function(a,c){return b.standardSectionsAndGroupingContentComparator(a,c)};break;default:a=function(a,c){return b.standardTextLevelSemanticsComparator(a,c)}}return a},prepareForRemoval:function(a,b,c){var e,f;typeof c!=="undefined"&&typeof c!=="function"&&
m.Log.error(this,"parameter tagComparator is not a function");typeof c==="undefined"&&(c=this.getStandardTagComparator(b));for(e=0;e<a.length;e++){f=a[e];if(f.domobj&&(f.selection=="full"||f.selection=="partial"&&b.isReplacingElement)&&f.domobj.nodeType===1&&c(f.domobj,b)){m.Log.debug(this,"Marking for removal: "+f.domobj.nodeName);d(f.domobj).addClass("preparedForRemoval")}f.selection!="none"&&f.children.length>0&&this.prepareForRemoval(f.children,b,c)}},wrapMarkupAroundSelectionTree:function(a,
b,c,e,f){var k=[],g=-1,l="",j="",q,n,p;m.Log.debug(this,"The formatting <"+c[0].tagName+"> will be wrapped around the selection");for(q=0;q<a.length;q++){n=a[q];if(n.domobj&&!this.canTag1WrapTag2(n.domobj.parentNode.tagName.toLowerCase(),c[0].tagName.toLowerCase()))m.Log.info(this,"Skipping the wrapping of <"+c[0].tagName.toLowerCase()+"> because this tag is not allowed inside <"+n.domobj.parentNode.tagName.toLowerCase()+">");else if(!n.domobj||!(n.domobj.nodeType===3&&d.trim(n.domobj.nodeValue).length===
0)){if(n.domobj&&n.selection=="partial"&&!c.isReplacingElement)if(n.startOffset!==void 0&&n.endOffset===void 0){g++;l=l+n.domobj.data.substr(0,n.startOffset);n.domobj.data=n.domobj.data.substr(n.startOffset,n.domobj.data.length-n.startOffset);k[g]=n.domobj}else if(n.endOffset!==void 0&&n.startOffset===void 0){g++;j=j+n.domobj.data.substr(n.endOffset,n.domobj.data.length-n.endOffset);n.domobj.data=n.domobj.data.substr(0,n.endOffset);k[g]=n.domobj}else if(n.endOffset!==void 0&&n.startOffset!==void 0){if(n.startOffset==
n.endOffset){m.Log.debug(this,"skipping empty selection");continue}g++;l=l+n.domobj.data.substr(0,n.startOffset);p=n.domobj.data.substr(n.startOffset,n.endOffset-n.startOffset);j=j+n.domobj.data.substr(n.endOffset,n.domobj.data.length-n.endOffset);n.domobj.data=p;k[g]=n.domobj}else{m.Log.debug(this,"diving into object");this.applyMarkup(n.children,b,c,e,f)}if(n.domobj&&(n.selection=="full"||n.selection=="partial"&&c.isReplacingElement)){g++;k[g]=n.domobj}}}if(k.length>0){k=d(k);d.each(k,function(a,
b){if(d.browser.msie&&b.nodeType==3&&!b.nextSibling&&!b.previousSibling&&b.parentNode&&b.parentNode.nodeName.toLowerCase()=="li")b.data=d.trim(b.data)});a=k.wrapAll(c).parent();a.before(l).after(j);if(f.setRangeObject2NewMarkup){l=k.textNodes();if(l.index(b.startContainer)!=-1)b.startOffset=0;if(l.index(b.endContainer)!=-1)b.endOffset=b.endContainer.length}if(f.setRangeObject2NextSibling){l=true;j=a.textNodes(true).last()[0];if(k.index(b.startContainer)!=-1){b.startContainer=this.getTextNodeSibling(l,
a.parent(),j);b.startOffset=0}if(k.index(b.endContainer)!=-1){b.endContainer=this.getTextNodeSibling(l,a.parent(),j);b.endOffset=b.endOffset-j.length}}if(f.setRangeObject2PreviousSibling){l=false;j=a.textNodes(true).first()[0];if(k.index(b.startContainer)!=-1){b.startContainer=this.getTextNodeSibling(l,a.parent(),j);b.startOffset=0}if(k.index(b.endContainer)!=-1){b.endContainer=this.getTextNodeSibling(l,a.parent(),j);b.endOffset=b.endContainer.length}}}},getTextNodeSibling:function(a,b,c){b=d(b).textNodes(true);
c=b.index(c);return c==-1?false:b[c+(!a?-1:1)]||false},optimizeSelectionTree4Markup:function(a,b,c){var e=[],f=0,k=0,g=this,l,j,q,n;typeof c==="undefined"&&(c=function(a,b){return g.standardTextLevelSemanticsComparator(b)});for(l=0;l<a.length;l++)if(a[l].domobj&&a[l].selection!="none")if(b.isReplacingElement&&c(b[0],d(a[l].domobj))){e[f]!==void 0&&f++;e[f]={};e[f].wrappable=true;e[f].elements=[];e[f].elements[k]=a[l];f++}else if(this.canMarkupBeApplied2ElementAsWhole([a[l]],b)){if(e[f]===void 0){e[f]=
{};e[f].wrappable=true;e[f].elements=[]}if(b.isReplacingElement){n=l;for(j=l-1;j>=0;j--)if(this.canMarkupBeApplied2ElementAsWhole([a[j]],b)&&this.isMarkupAllowedToStealSelectionTreeElement(a[j],b))n=j;else break;q=l;for(j=l+1;j<a.length;j++)if(this.canMarkupBeApplied2ElementAsWhole([a[j]],b)&&this.isMarkupAllowedToStealSelectionTreeElement(a[j],b))q=j;else break;k=0;for(j=n;j<=q;j++){e[f].elements[k]=a[j];e[f].elements[k].selection="full";k++}k=0}else{e[f].elements[k]=a[l];k++}}else{e[f]!==void 0&&
f++;e[f]={};e[f].wrappable=false;e[f].element=a[l];k=0;f++}return e},isMarkupAllowedToStealSelectionTreeElement:function(a,b){if(!a.domobj)return false;var c=a.domobj.nodeName.toLowerCase(),c=c=="#text"?"textNode":c,e=this.allowedToStealElements[b[0].nodeName.toLowerCase()];return e&&e[c]},canMarkupBeApplied2ElementAsWhole:function(a,b){var c,e,f;if(b.jquery)c=b[0].tagName;if(b.tagName)c=b.tagName;for(e=0;e<a.length;e++){f=a[e];if(f.domobj&&(f.selection!="none"||b.isReplacingElement))if(!this.canTag1WrapTag2(c,
f.domobj.nodeName)||f.children.length>0&&!this.canMarkupBeApplied2ElementAsWhole(f.children,b))return false}return true},canTag1WrapTag2:function(a,b){var a=a=="#text"?"textNode":a.toLowerCase(),b=b=="#text"?"textNode":b.toLowerCase(),c=this.tagHierarchy[a];return!c||!this.tagHierarchy[b]?true:c[b]},mayInsertTag:function(a){var b;if(typeof this.rangeObject.unmodifiableMarkupAtStart=="object"){for(b=0;b<this.rangeObject.unmodifiableMarkupAtStart.length;++b)if(!this.canTag1WrapTag2(this.rangeObject.unmodifiableMarkupAtStart[b].nodeName,
a))return false;return true}m.Log.warn(this,"Unable to determine whether tag "+a+" may be inserted");return true},toString:function(){return"Aloha.Selection"},SelectionRange:o.Utils.RangeObject.extend({_constructor:function(a){this._super(a);if(a){if(a.commonAncestorContainer)this.commonAncestorContainer=a.commonAncestorContainer;if(a.selectionTree)this.selectionTree=a.selectionTree;if(a.limitObject)this.limitObject=a.limitObject;if(a.markupEffectiveAtStart)this.markupEffectiveAtStart=a.markupEffectiveAtStart;
if(a.unmodifiableMarkupAtStart)this.unmodifiableMarkupAtStart=a.unmodifiableMarkupAtStart;if(a.splitObject)this.splitObject=a.splitObject}},commonAncestorContainer:void 0,selectionTree:void 0,markupEffectiveAtStart:[],unmodifiableMarkupAtStart:[],limitObject:void 0,splitObject:void 0,select:function(){this._super();m.Selection.updateSelection()},update:function(a){this.updatelimitObject();this.updateMarkupEffectiveAtStart();this.updateCommonAncestorContainer(a);this.selectionTree=void 0},getSelectionTree:function(){if(!this.selectionTree)this.selectionTree=
m.Selection.getSelectionTree(this);return this.selectionTree},getSelectedSiblings:function(a){var b=this.getSelectionTree();return this.recursionGetSelectedSiblings(a,b)},recursionGetSelectedSiblings:function(a,b){var c=false,e=false,f;for(f=0;f<b.length;++f)if(b[f].domobj===a){e=true;c=[]}else if(!e&&b[f].children){c=this.recursionGetSelectedSiblings(a,b[f].children);if(c!==false)break}else if(e&&b[f].domobj&&b[f].selection!="collapsed"&&b[f].selection!="none")c.push(b[f].domobj);else if(e&&b[f].selection==
"none")break;return c},updateMarkupEffectiveAtStart:function(){this.markupEffectiveAtStart=[];this.unmodifiableMarkupAtStart=[];var a=this.getStartContainerParents(),b=false,c,e,f;for(e=0;e<a.length;e++){f=a[e];if(!b&&f!==this.limitObject){this.markupEffectiveAtStart[e]=f;if(!c&&o.Utils.Dom.isSplitObject(f)){c=true;this.splitObject=f}}else{b=true;this.unmodifiableMarkupAtStart.push(f)}}if(!c)this.splitObject=false},updatelimitObject:function(){if(m.editables&&m.editables.length>0){var a=this.getStartContainerParents(),
b=m.editables,c,e,f,k;for(c=0;c<a.length;c++){e=a[c];for(f=0;f<b.length;f++){k=b[f].obj[0];if(e===k){this.limitObject=e;return true}}}}this.limitObject=d("body");return true},toString:function(a){return!a?"Aloha.Selection.SelectionRange":"Aloha.Selection.SelectionRange {start ["+this.startContainer.nodeValue+"] offset "+this.startOffset+", end ["+this.endContainer.nodeValue+"] offset "+this.endOffset+"}"}})}),v=a.extend({_constructor:function(a){this._nativeSelection=a;this.ranges=[];this.preventChange=
false},anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0,isCollapsed:false,rangeCount:0,collapse:function(a,b){this._nativeSelection.collapse(a,b)},collapseToStart:function(){throw"NOT_IMPLEMENTED";},extend:function(){},modify:function(){},collapseToEnd:function(){this._nativeSelection.collapseToEnd()},selectAllChildren:function(){throw"NOT_IMPLEMENTED";},deleteFromDocument:function(){throw"NOT_IMPLEMENTED";},getRangeAt:function(a){a=this._nativeSelection.getRangeAt(a);p(a);return a},addRange:function(a){this._nativeSelection.addRange(a);
var b=this._nativeSelection._ranges;p(a);b[0]=a;m.Selection.updateSelection()},removeRange:function(){this._nativeSelection.removeRange()},removeAllRanges:function(){this._nativeSelection.removeAllRanges()},refresh:function(){},toString:function(){return"Aloha.Selection"},getRangeCount:function(){return this._nativeSelection.rangeCount}});m.getSelection=function(a){a=a!==document||a!==window?window:a;return new v(window.rangy.getSelection(a))};m.createRange=function(a){return window.rangy.createRange(a)};
a=new j;return m.Selection=a});define("aloha/block-jump",["aloha/core","jquery","aloha/console"],function(m,d,a){function j(a,b){a.deleteData(0,a.length);""!==b&&(a.nextSibling&&3===a.nextSibling.nodeType?a.nextSibling.insertData(0,b):a.previousSibling&&3===a.previousSibling.nodeType?a.previousSibling.insertData(a.previousSibling.length,b):a.insertData(0,b));setTimeout(function(){0===a.length&&d(a).remove()},0)}function c(){if(b){var c=b.nodeValue.replace(/\u200b/,"");c===b.nodeValue&&a.warn("Expected to remove the zero width text node fix, but couldn't find it");
j(b,c);b=null}}var b=null;return{removeZeroWidthTextNodeFix:c,insertZeroWidthTextNodeFix:function(a,g){c();b=document.createTextNode("​");g?d(a).after(b):d(a).before(b);m.bind("aloha-selection-changed",function(a){c();m.unbind(a)});return b}}});define("aloha/markup","aloha/core util/class util/html jquery aloha/ecma5shims aloha/console aloha/block-jump".split(" "),function(m,d,a,j,c,b,f){function g(a){return"false"===j(a).attr("contenteditable")}function k(a){return a&&3===a.nodeType}function l(a){return!a?
0:k(a)?a.length:a.childNodes.length}function e(a){return!a?null:a.nextSibling?k(a.nextSibling)&&!(0<a.nextSibling.data.replace(/\s+/g,"").length)||"BR"===a.nextSibling.nodeName&&a.nextSibling===a.parentNode.lastChild||""===a.nextSibling.innerHTML&&!g(a.nextSibling)?e(a.nextSibling):a.nextSibling:a.parentNode?e(a.parentNode):null}function q(a){return!a?null:a.previousSibling?k(a.previousSibling)&&!(0<a.previousSibling.data.replace(/\s+/g,"").length)?q(a.previousSibling):""===a.previousSibling.innerHTML&&
!g(a.previousSibling)?q(a.previouSibling):a.previousSibling:a.parentNode?q(a.parentNode):null}function n(a,b){return k(a)&&b<=a.data.length-a.data.replace(/^\s+/,"").length?true:b===0}function p(a,b){var c=l(a);if(c===b)return true;var e=k(a);return e&&a.data.replace(/\s+$/,"").length===b?true:1===c&&!e?"BR"===a.childNodes[0].nodeName:false}function o(a){var b;if(b=window.$_alohaPlaceholder){b=a.startContainer;var a=a.endContainer,e=window.$_alohaPlaceholder;b=!(e.is(b)||e.is(a)||(u?c.compareDocumentPosition(e[0],
b)&16:0<j(e[0]).find(b).length)||(u?c.compareDocumentPosition(e[0],a)&16:0<j(e[0]).find(a).length))}if(b){0===window.$_alohaPlaceholder.html().replace(/^(&nbsp;)*$/,"").length&&window.$_alohaPlaceholder.remove();window.$_alohaPlaceholder=null}}function r(a,b){var c;if(a.parentNode){for(c=0;c<b.length;c++)if(b[c]===a.parentNode.nodeName)return true;return r(a.parentNode,b)}return false}function s(a,b){if(!a.parentNode)return true;var c=a.nodeType===3&&a.parentNode.firstChild===a||a.parentNode.children[0]===
a,e=a.nodeName==="TR"&&a.parentNode.children[0].className.indexOf("aloha-table-selectcolumn")!==-1,e=(a.nodeName==="TD"&&a.parentNode.children[0].className.indexOf("aloha-table-selectrow")!==-1||e)&&a.parentNode.children[1]===a;return c||e?a.parentNode.nodeName===b?true:s(a.parentNode,b):false}var v=window.GENTICS,u=!!(j.browser.msie&&9>parseInt(j.browser.version,10)),t=function(){return function(a,b){if(!a.parentNode)return true;var c;a:{c=a.parentNode;var e,f;for(f=c.childNodes.length-1;f>-1;f--){e=
c.childNodes[f];if(e.nodeName!=="CAPTION"&&!(e.nodeType===3&&/^[\t\n\r ]+$/.test(e.data))){c=e;break a}}c=c.lastChild}return c===a?a.parentNode.nodeName===b?true:t(a.parentNode,b):false}}();m.Markup=d.extend({keyHandlers:{},addKeyHandler:function(a,b){this.keyHandlers[a]||(this.keyHandlers[a]=[]);this.keyHandlers[a].push(b)},removeKeyHandler:function(a){this.keyHandlers[a]&&(this.keyHandlers[a]=null)},insertBreak:function(){var a=m.Selection.rangeObject,b,c,e;a.isCollapsed()||this.removeSelectedMarkup();
e=j("<br/>");v.Utils.Dom.insertIntoDOM(e,a,m.activeEditable.obj);if(c=v.Utils.Dom.searchAdjacentTextNode(e.parent().get(0),v.Utils.Dom.getIndexInParent(e.get(0))+1,false)){b=c.data.search(/\S/);if(b>0)c.data=c.data.substring(b)}a.startContainer=a.endContainer=e.get(0).parentNode;a.startOffset=a.endOffset=v.Utils.Dom.getIndexInParent(e.get(0))+1;a.correctRange();a.clearCaches();a.select()},preProcessKeyStrokes:function(b){if(b.type!=="keydown")return false;var c,e;if(this.keyHandlers[b.keyCode]){c=
this.keyHandlers[b.keyCode];for(e=0;e<c.length;++e)if(!c[e](b))return false}if(b.keyCode===37||b.keyCode===39){if(m.getSelection().getRangeCount()){c=m.getSelection().getRangeAt(0);if(this.processCursor(c,b.keyCode)){o(m.Selection.rangeObject);return true}}return false}if(b.keyCode===38||b.keyCode===40){if(m.getSelection().getRangeCount()){c=m.getSelection().getRangeAt(0);if(this.processCursorUpDown(c,b.keyCode))return false}return true}if(b.keyCode===8){b.preventDefault();m.execCommand("delete",
false);return false}if(b.keyCode===46){m.execCommand("forwarddelete",false);return false}if(b.keyCode===13){!b.shiftKey&&a.allowNestedParagraph(m.activeEditable)?m.execCommand("insertparagraph",false):m.execCommand("insertlinebreak",false);return false}return true},processCursorUpDown:function(a,b){if(!a.collapsed)return false;var c=a.startContainer;if(b===38&&n(c,a.startOffset)&&r(c,["TD","TH"])&&s(c,"TABLE")){c=j(c).parents("div.aloha-table-wrapper").get(0);if(!c)return false;for(c=c.previousElementSibling?
c.previousElementSibling:c.previousSibling;c.nodeType!==3;){c=c.lastChild;if(c===null)return false}m.Selection.rangeObject.startContainer=c;m.Selection.rangeObject.endContainer=c;m.Selection.rangeObject.startOffset=c.length;m.Selection.rangeObject.endOffset=c.length;m.Selection.rangeObject.select();m.activeEditable&&j.browser.mozilla&&m.activeEditable.obj.focus();return true}if(b===40&&p(c,a.startOffset)&&r(c,["TD","TH"])&&t(c,"TABLE")){c=j(c).parents("div.aloha-table-wrapper").get(0);if(!c)return false;
for(c=c.nextElementSibling?c.nextElementSibling:c.nextSibling;c.nodeType!==3;){c=c.firstChild;if(c===null)return false}m.Selection.rangeObject.startContainer=c;m.Selection.rangeObject.endContainer=c;m.Selection.rangeObject.startOffset=0;m.Selection.rangeObject.endOffset=0;m.Selection.rangeObject.select();m.activeEditable&&j.browser.mozilla&&m.activeEditable.obj.focus();return true}return false},processCursor:function(a,b){if(!a.collapsed)return true;f.removeZeroWidthTextNodeFix();var c=a.startContainer,
d=m.getSelection();if(!c)return true;var r,s;if(j.browser.msie&&parseInt(j.browser.version,10)<=7&&k(c))if(b==37){for(s=a.startOffset;s>0&&c.data.charAt(s-1)==="​";)s--;if(s!=a.startOffset){a.setStart(a.startContainer,s);a.setEnd(a.startContainer,s);d=m.getSelection();d.removeAllRanges();d.addRange(a)}}else if(b==39){for(s=a.startOffset;s<c.data.length&&c.data.charAt(s)==="​";)s++;if(s!=a.startOffset){a.setStart(a.startContainer,s);a.setEnd(a.startContainer,s);d.removeAllRanges();d.addRange(a)}}if(u&&
!j(c).contentEditable()){d=j(c).parents("[contenteditable=false]");if(d.length>0)if(d.parent().hasClass("aloha-editable"))r=d[0];else return true}var t;if(!r){t=37===b||38===b;s=a.startOffset;if(k(c))if(t){if(1!==s&&!n(c,s))return true}else{if(!p(c,s))return true}else c=c.childNodes[s===l(c)?s-1:s];r=t?q(c):e(c)}if(g(r)){c=r;r=new v.Utils.RangeObject;d=t?q(c):e(c);if(!d||g(d)){d=j("<div>&nbsp;</div>");t?j(c).before(d):j(c).after(d);r.startContainer=r.endContainer=d[0];r.startOffset=r.endOffset=0;
o(r);window.$_alohaPlaceholder=d}else{if(a.startContainer.nodeType===3&&a.startContainer===a.endContainer&&a.startContainer.nodeValue!==""&&(t?a.startOffset===1:a.endOffset+1===a.endContainer.length)||a.startContainer.nodeType===1&&(!a.startOffset||a.startContainer.childNodes[a.startOffset]&&a.startContainer.childNodes[a.startOffset].nodeType===1)){d=f.insertZeroWidthTextNodeFix(c,t);r.startContainer=r.endContainer=d;r.startOffset=r.endOffset=t?1:0}else{r.startContainer=r.endContainer=d;r.startOffset=
r.endOffset=t?l(d):0;t||f.insertZeroWidthTextNodeFix(c,true)}o(r)}r.select();m.trigger("aloha-block-selected",c);m.Selection.preventSelectionChanged();return false}return true},processShiftEnter:function(a){this.insertHTMLBreak(a.getSelectionTree(),a)},processEnter:function(a){a.splitObject?this.splitRangeObject(a):this.insertHTMLBreak(a.getSelectionTree(),a)},insertHTMLCode:function(a){var b=m.Selection.rangeObject;this.insertHTMLBreak(b.getSelectionTree(),b,j(a))},insertHTMLBreak:function(a,b,c){var e,
f,k,g,l,c=c||j("<br/>");e=0;for(f=a.length;e<f;++e){k=a[e];g=k.domobj?j(k.domobj):void 0;if(k.selection!=="none")if(k.selection=="collapsed"){if(e>0){k=j(a[e-1].domobj);k.after(c)}else{k=j(a[1].domobj);k.before(c)}b.startContainer=b.endContainer=c[0].parentNode;b.startOffset=b.endOffset=v.Utils.Dom.getIndexInParent(c[0])+1;b.correctRange()}else if(k.domobj&&k.domobj.nodeType===3){k.domobj.nextSibling&&(k.domobj.nextSibling.nodeType==1&&m.Selection.replacingElements[k.domobj.nextSibling.nodeName.toLowerCase()])&&
g.after("<br/>");if(this.needEndingBreak()){for(l=k.domobj;l;)if(l.nextSibling)l=false;else{l=l.parentNode;if(v.Utils.Dom.isBlockLevelElement(l)||v.Utils.Dom.isListElement(l))break;l===b.limitObject&&(l=false)}l&&j(l).append('<br class="aloha-cleanme" />')}g.between(c,k.startOffset);g=0;for(k=c[0];k;){k=k.previousSibling;++g}b.startContainer=c[0].parentNode;b.endContainer=c[0].parentNode;b.startOffset=g;b.endOffset=g;b.correctRange()}else if(k.domobj&&k.domobj.nodeType===1){if(g.parent().find("br.aloha-ephemera").length===
0){j(b.limitObject).find("br.aloha-ephemera").remove();j(b.commonAncestorContainer).append(this.getFillUpElement(b.splitObject))}g.after(c);b.startContainer=b.commonAncestorContainer;b.endContainer=b.startContainer;b.startOffset=e+2;b.endOffset=e+2;b.update()}}b.select()},needEndingBreak:function(){return!j.browser.msie},getSelectedText:function(){var a=m.Selection.rangeObject;return a.isCollapsed()?false:this.getFromSelectionTree(a.getSelectionTree(),true)},getFromSelectionTree:function(a,b){var c=
"",e,f,k,g;e=0;for(f=a.length;e<f;e++){k=a[e];if(k.selection=="partial")if(k.domobj.nodeType===3)c=c+k.domobj.data.substring(k.startOffset,k.endOffset);else{if(k.domobj.nodeType===1&&k.children)if(b)c=c+this.getFromSelectionTree(k.children,b);else{g=j(k.domobj.outerHTML).empty();g.html(this.getFromSelectionTree(k.children,b));c=c+g.outerHTML()}}else k.selection=="full"&&(k.domobj.nodeType===3?c=c+j(k.domobj).text():k.domobj.nodeType===1&&k.children&&(c=c+(b?j(k.domobj).text():j(k.domobj).outerHTML())))}return c},
getSelectedMarkup:function(){var a=m.Selection.rangeObject;return a.isCollapsed()?null:this.getFromSelectionTree(a.getSelectionTree(),false)},removeSelectedMarkup:function(){var a=m.Selection.rangeObject,b;if(!a.isCollapsed()){b=new m.Selection.SelectionRange;this.removeFromSelectionTree(a.getSelectionTree(),b);b.update();v.Utils.Dom.doCleanup({merge:true,removeempty:true},m.Selection.rangeObject);m.Selection.rangeObject=b;b.correctRange();b.update();b.select();m.Selection.updateSelection()}},removeFromSelectionTree:function(a,
b){var c,e,f,k,g;f=0;for(g=a.length;f<g;f++){k=a[f];if(k.selection=="partial")if(k.domobj.nodeType===3){e="";k.startOffset>0&&(e=e+k.domobj.data.substring(0,k.startOffset));k.endOffset<k.domobj.data.length&&(e=e+k.domobj.data.substring(k.endOffset,k.domobj.data.length));k.domobj.data=e;if(!b.startContainer){b.startContainer=b.endContainer=k.domobj;b.startOffset=b.endOffset=k.startOffset}}else{if(k.domobj.nodeType===1&&k.children){this.removeFromSelectionTree(k.children,b);if(c){if(c.nodeName==k.domobj.nodeName){j(c).append(j(k.domobj).contents());
j(k.domobj).remove()}}else c=k.domobj}}else if(k.selection=="full"){if(!b.startContainer)if(e=v.Utils.Dom.searchAdjacentTextNode(k.domobj.parentNode,v.Utils.Dom.getIndexInParent(k.domobj)+1,false,{blocklevel:false})){b.startContainer=b.endContainer=e;b.startOffset=b.endOffset=0}else{b.startContainer=b.endContainer=k.domobj.parentNode;b.startOffset=b.endOffset=v.Utils.Dom.getIndexInParent(k.domobj)+1}j(k.domobj).remove()}}},splitRangeObject:function(a){j(a.splitObject);var b,c;a.update(a.splitObject);
b=a.getSelectionTree();c=this.getSplitFollowUpContainer(a);this.splitRangeObjectHelper(b,a,c);c.hasClass("preparedForRemoval")&&c.removeClass("preparedForRemoval");b=this.getInsertAfterObject(a,c);j(c).insertAfter(b);a.splitObject.nodeName.toLowerCase()==="li"&&!m.Selection.standardTextLevelSemanticsComparator(a.splitObject,c)&&j(a.splitObject).remove();a.startContainer=null;b=c.contents();if(b.length>0&&b.get(0).nodeType==1&&b.get(0).nodeName.toLowerCase()==="br")a.startContainer=c.get(0);if(!a.startContainer)a.startContainer=
c.textNodes(true,true).first().get(0);if(!a.startContainer)a.startContainer=c.textNodes(false).first().parent().get(0);if(a.startContainer){a.endContainer=a.startContainer;a.startOffset=0;a.endOffset=0}else{a.startContainer=a.endContainer=c.parent().get(0);a.startOffset=a.endOffset=v.Utils.Dom.getIndexInParent(c.get(0))}a.update();a.select()},getInsertAfterObject:function(a,b){var c,e,f;for(e=0;e<a.markupEffectiveAtStart.length;e++){f=a.markupEffectiveAtStart[e];f===a.splitObject&&(c=true);if(c&&
m.Selection.canTag1WrapTag2(j(f).parent()[0].nodeName,b[0].nodeName))return f}return false},getFillUpElement:function(){return j.browser.msie?false:j('<br class="aloha-cleanme"/>')},removeElementContentWhitespaceObj:function(a){var b=0,c=[],e,f;for(e=0;e<a.length;++e){f=a[e];f.isElementContentWhitespace&&(c[c.length]=e)}for(e=0;e<c.length;++e){f=c[e];a.splice(f-b,1);++b}},splitRangeObjectHelper:function(a,b,c,e){c||m.Log.warn(this,"no followUpContainer, no inBetweenMarkup, nothing to do...");var f=
this.getFillUpElement(b.splitObject),k=j(b.splitObject),g=false,l,d,q,n,p;if(a.length>0){q=c.contents();q.length!==a.length&&this.removeElementContentWhitespaceObj(q);d=0;for(p=a.length;d<p;++d){l=a[d];if(l.selection==="none"&&g===false||l.domobj&&l.domobj.nodeType===3&&l===a[a.length-1]&&l.startOffset===l.domobj.data.length)if(c.textNodes().length>1||l.domobj.nodeType===1&&l.children.length===0)q.eq(d).remove();else if(v.Utils.Dom.isSplitObject(c[0]))f?c.html(f):c.empty();else{c.empty();c.addClass("preparedForRemoval")}else if(l.selection!==
"none"){if(l.domobj&&l.domobj.nodeType===3&&l.startOffset!==void 0){g=l.domobj.data;if(l.startOffset>0)l.domobj.data=g.substr(0,l.startOffset);else if(a.length>1)j(l.domobj).remove();else{n=j(l.domobj).parent();v.Utils.Dom.isSplitObject(n[0])?f?n.html(f):n.empty():n.remove()}if(g.length-l.startOffset>0)q[d].data=g.substr(l.startOffset,g.length);else if(q.length>1)q.eq(d).remove();else if(v.Utils.Dom.isBlockLevelElement(c[0]))f?c.html(f):c.empty();else{c.empty();c.addClass("preparedForRemoval")}}g=
true;l.children.length>0&&this.splitRangeObjectHelper(l.children,b,q.eq(d),e)}else l.selection==="none"&&g===true&&j(l.domobj).remove()}}else m.Log.error(this,"can not split splitObject due to an empty selection tree");k.find("br.aloha-ephemera:gt(0)").remove();c.find("br.aloha-ephemera:gt(0)").remove();k.find(".preparedForRemoval").remove();c.find(".preparedForRemoval").remove();k.contents().length===0&&(v.Utils.Dom.isSplitObject(k[0])&&f)&&k.html(f);c.contents().length===0&&(v.Utils.Dom.isSplitObject(c[0])&&
f)&&c.html(f)},getSplitFollowUpContainer:function(a){var b;switch(a.splitObject.nodeName.toLowerCase()){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":if((b=j(a.splitObject).textNodes(":not(.aloha-cleanme)").last()[0])&&a.startContainer===b&&a.startOffset===b.length){b=j("<p></p>");a=j(a.splitObject.outerHTML).contents();b.append(a);return b}break;case "li":if(a.startContainer.nodeName.toLowerCase()==="br"&&j(a.startContainer).hasClass("aloha-ephemera")){b=j("<p></p>");a=j(a.splitObject.outerHTML).contents();
b.append(a);return b}if(!a.splitObject.nextSibling&&j.trim(j(a.splitObject).text()).length===0)return b=j("<p></p>")}return j(a.splitObject.outerHTML)},transformDomObject:function(a,b,c){var e=j(a),b=j("<"+b+">"),f,k=e[0].cloneNode(false).attributes;if(k)for(f=0;f<k.length;++f)(typeof k[f].specified==="undefined"||k[f].specified)&&b.attr(k[f].nodeName,k[f].nodeValue);if(e[0].style&&e[0].style.cssText)b[0].style.cssText=e[0].style.cssText;e.contents().appendTo(b);e.replaceWith(b);if(c){if(c.startContainer==
a)c.startContainer=b.get(0);if(c.endContainer==a)c.endContainer=b.get(0)}return b},toString:function(){return"Aloha.Markup"}});m.Markup=new m.Markup;return m.Markup});define("aloha/observable",["jquery"],function(m){return{_eventHandlers:null,bind:function(d,a,j){this._eventHandlers=this._eventHandlers||{};this._eventHandlers[d]||(this._eventHandlers[d]=[]);this._eventHandlers[d].push({handler:a,scope:j||window})},unbind:function(d,a){this._eventHandlers=this._eventHandlers||{};this._eventHandlers[d]&&
(this._eventHandlers[d]=a?m.grep(this._eventHandlers[d],function(j){return j.handler===a?!1:!0}):[])},trigger:function(d){this._eventHandlers=this._eventHandlers||{};if(this._eventHandlers[d]){var a=[];m.each(arguments,function(j,c){0<j&&a.push(c)});m.each(this._eventHandlers[d],function(j,c){c.handler.apply(c.scope,a)})}},unbindAll:function(){this._eventHandlers=null}}});define("aloha/registry",["jquery","aloha/observable","util/class"],function(m,d,a){return a.extend(d,{_entries:null,_ids:null,
_constructor:function(){this._entries={};this._ids=[]},register:function(a,c){this._entries[a]=c;this._ids.push(a);this.trigger("register",c,a)},unregister:function(a){var c,b=this._entries[a];delete this._entries[a];for(c in this._ids)if(this._ids.hasOwnProperty(c)&&this._ids[c]===a){this._ids.splice(c,1);break}this.trigger("unregister",b,a)},get:function(a){return this._entries[a]},has:function(a){return this._entries[a]?!0:!1},getEntries:function(){return m.extend({},this._entries)},getIds:function(){return m.extend([],
this._ids)}})});define("aloha/contenthandlermanager",["aloha/core","aloha/registry","util/class"],function(m,d,a){return new (d.extend({createHandler:function(j){if("function"!==typeof j.handleContent)throw"ContentHandler has no function handleContent().";return new (a.extend({handleContent:function(){}},j))},handleContent:function(a,c,b){var f=c?c.contenthandler:this.getIds();if(!f)return a;var g,k;for(g=0;g<f.length&&!((k=this.get(f[g]))&&(a=k.handleContent(a,c,b||m.activeEditable)),null===a);g++);
return a}}))});define("util/trees",["jquery"],function(m){function d(a,b,c){var e=m.type(a),f,k,g;if("array"===e){e=c?a:[];g=f=0;for(k=a.length;g<k;g++)c=b(a[g]),c.length&&(e[f++]=c[0]);f!==e.length&&(e=e.slice(0,f))}else if("object"===e)for(f in e=c?a:{},a)a.hasOwnProperty(f)&&(c=b(a[f]),c.length?e[f]=c[0]:delete e[f]);else e=a;return e}function a(a,b){return d(a,b,!0)}function j(a,b){var c,e,f;if(1===a.nodeType)for(e=a.firstChild;e;)c=b(e),f=e.nextSibling,c.length?c[0]!==e&&a.replaceChild(c[0],
e):a.removeChild(e),e=f;return a}function c(a,b,c,e){return[c(b(e),a)]}function b(a,b,c,e){return[b(c(e,a))]}function f(a,b,c,e){return b(e)?[]:[c(e,a)]}function g(a,b,c,e){a=c(e,a);return b(a)?[]:[a]}function k(a,b,c,e){function f(e){return a(f,b,c,e)}return f(e)[0]}function l(a){a=m.type(a);return"object"!==a&&"array"!==a}function e(b,c,e){function f(a){return l(a)?[c(a)]:[k(a,f)]}var k=e?a:d;return f(b)[0]}return{prewalk:function(b,e,f){return k(c,e,f?a:d,b)},postwalk:function(c,e,f){return k(b,
e,f?a:d,c)},preprune:function(b,c,e){return k(f,c,e?a:d,b)},postprune:function(b,c,e){return k(g,c,e?a:d,b)},prewalkDom:function(a,b,e){return k(c,b,j,e?a:a.cloneNode(!0))},postwalkDom:function(a,c,e){return k(b,c,j,e?a:a.cloneNode(!0))},prepruneDom:function(a,b,c){return k(f,b,j,c?a:a.cloneNode(!0))},postpruneDom:function(a,b,c){return k(g,b,j,c?a:a.cloneNode(!0))},isLeaf:l,leaves:e,clone:function(a){function b(a){return[d(a,b)]}return b(a)[0]},flatten:function(a){var b=[];e(a,function(a){b.push(a);
return a},!0);return b},walk:d,walkInplace:a,walkDomInplace:j}});define("util/misc",[],function(){return{anyRx:function(m,d){var a,j;a=0;for(j=m.length;a<j;a++)if(m[a].test(d))return!0;return!1}}});define("aloha/ephemera","jquery aloha/core aloha/console util/strings util/trees util/arrays util/maps util/dom2 util/functions util/html util/misc util/browser PubSub".split(" "),function(m,d,a,j,c,b,f,g,k,l,e,q,n){function p(a){var a=m(a),b=a.attr("data-aloha-ephemera-attr"),c;q.ie7||a.removeAttr("data-aloha-ephemera-attr");
if(typeof b==="string"){c=j.words(b);for(b=0;b<c.length;b++)a.removeAttr(c[b])}}function o(a,c,f,k){return(f=f[c])&&(true===f||-1!==b.indexOf(f,a.nodeName))?true:e.anyRx(k,c)}function r(a,b){var c=null,e=g.attrNames(a),f,k,l;k=0;for(l=e.length;k<l;k++){f=e[k];if(o(a,f,b.attrMap,b.attrRxs)){c=c||m(a);c.removeAttr(f)}}}function s(a,c){var e=a.className;if(e&&-1!==e.indexOf(u)){e=j.words(e);if(-1!==b.indexOf(e,"aloha-cleanme")||-1!==b.indexOf(e,"aloha-ephemera")){m.removeData(a);return false}if(-1!==
b.indexOf(e,"aloha-ephemera-wrapper")||-1!==b.indexOf(e,"aloha-ephemera-filler")){g.moveNextAll(a.parentNode,a.firstChild,a.nextSibling);m.removeData(a);return false}if(-1!==b.indexOf(e,"aloha-ephemera-empty-wrapper")){l.hasOnlyWhiteSpaceChildren(a)||g.moveNextAll(a.parentNode,a.firstChild,a.nextSibling);m.removeData(a);return false}-1!==b.indexOf(e,"aloha-ephemera-attr")&&p(a);var f=b.filter(e,function(a){return!c.classMap[a]});if(f.length!==e.length)0===f.length?m(a).removeAttr("class"):a.className=
f.join(" ")}r(a,c);return true}var v={classMap:{"aloha-ephemera-wrapper":true,"aloha-ephemera-filler":true,"aloha-ephemera-attr":true,"aloha-ephemera":true,"aloha-cleanme":true},attrMap:{hidefocus:true,hideFocus:true,tabindex:true,tabIndex:true,contenteditable:["TABLE"],contentEditable:["TABLE"]},attrRxs:[/^(?:nodeIndex|sizcache|sizset|jquery)[\w\d]*$/i],pruneFns:[]},u="aloha-";return{ephemera:function(a){a&&(v=a);n.pub("aloha.ephemera",{ephemera:v});return v},classes:function(){var b=Array.prototype.slice.call(arguments);
f.fillKeys(v.classMap,b,true);var c=b,e,k;e=0;for(k=c.length;e<k;e++)if(-1===c[e].indexOf(u)){a.warn('Class "'+c[e]+'" was set to be ephemeral,which hurts peformance. Add the common substring "'+u+'" to the class to fix this problem.');u=""}n.pub("aloha.ephemera.classes",{ephemera:v,newClasses:b})},attributes:function(){var a=Array.prototype.slice.call(arguments);f.fillKeys(v.attrMap,a,true);n.pub("aloha.ephemera.attributes",{ephemera:v,newAttributes:a})},markElement:function(a){m(a).addClass("aloha-ephemera")},
markAttr:function(a,c){var a=m(a),e=a.attr("data-aloha-ephemera-attr");null==e||""===e?e=c:-1===b.indexOf(j.words(e),c)&&(e=e+(" "+c));a.attr("data-aloha-ephemera-attr",e);a.addClass("aloha-ephemera-attr")},markWrapper:function(a){m(a).addClass("aloha-ephemera-wrapper")},markWhiteSpaceWrapper:function(a){m(a).addClass("aloha-ephemera-empty-wrapper")},markFiller:function(a){m(a).addClass("aloha-ephemera-filler")},prune:function(a,e){function f(a){var k;a:{k=e;var g=f;if(1===a.nodeType){if(!s(a,k)){k=
[];break a}a=c.walkDomInplace(a,g)}k=(a=b.reduce(k.pruneFns,a,b.applyNotNull))?[a]:[]}return k}e=e||v;return f(a)[0]},isAttrEphemeral:o}});define("aloha/copypaste",["jquery","aloha/core"],function(m,d){function a(a){var c=d.createRange(),b=d.getSelection();c.setStart(a.startContainer,a.startOffset);c.setEnd(a.endContainer,a.endOffset);b.removeAllRanges();b.addRange(c)}return{getEditableAt:function(a){if(!a||!a.commonAncestorContainer)return null;a=m(a.commonAncestorContainer);return a.length?d.getEditableHost(a):
null},getRange:function(){var a=d.getSelection();return a.getRangeCount()?a.getRangeAt(0):null},selectAllOf:function(j){a({startContainer:j,endContainer:j,startOffset:0,endOffset:j.childNodes?j.childNodes.length:j.length});m(j).focus()},setSelectionAt:a}});define("aloha/command",["aloha/core","aloha/registry","aloha/engine","util/dom","aloha/contenthandlermanager"],function(m,d,a,j,c){var b={execCommand:function(b,g,k,l){var e={commandId:b,preventDefault:!1};m.trigger("aloha-command-will-execute",
e);if(!0!==e.preventDefault){e=m.getSelection();if(!l){if(!e.getRangeCount())return;l=e.getRangeAt(0)}"inserthtml"===b.toLowerCase()&&(k=c.handleContent(k,{contenthandler:m.settings.contentHandler.insertHtml,command:"insertHtml"}));a.execCommand(b,g,k,l);"insertparagraph"!==b.toLowerCase()&&e.getRangeCount()&&(l=e.getRangeAt(0),g=l.commonAncestorContainer,g.parentNode&&(g=g.parentNode),k=new window.GENTICS.Utils.RangeObject,k.startContainer=l.startContainer,k.startOffset=l.startOffset,k.endContainer=
l.endContainer,k.endOffset=l.endOffset,j.doCleanup({merge:!0,removeempty:!1},k,g),k.select());m.trigger("aloha-command-executed",b)}},queryCommandEnabled:function(b,c){if(!c){if(!m.getSelection().getRangeCount())return;c=m.getSelection().getRangeAt(0)}return a.queryCommandEnabled(b,c)},queryCommandIndeterm:function(b,c){if(!c){if(!m.getSelection().getRangeCount())return;c=m.getSelection().getRangeAt(0)}return a.queryCommandIndeterm(b,c)},queryCommandState:function(b,c){if(!c){if(!m.getSelection().getRangeCount())return;
c=m.getSelection().getRangeAt(0)}return a.queryCommandState(b,c)},queryCommandSupported:function(b){return a.queryCommandSupported(b)},queryCommandValue:function(b,c){if(!c){if(!m.getSelection().getRangeCount())return;c=m.getSelection().getRangeAt(0)}return a.queryCommandValue(b,c)},querySupportedCommands:function(){var b=[],c;for(c in a.commands)a.commands.hasOwnProperty(c)&&b.push(c);return b},getStateOverride:a.getStateOverride,setStateOverride:a.setStateOverride,resetOverrides:a.resetOverrides,
unsetStateOverride:a.unsetStateOverride},b=new (d.extend(b));m.execCommand=b.execCommand;m.queryCommandEnabled=b.queryCommandEnabled;m.queryCommandIndeterm=b.queryCommandIndeterm;m.queryCommandState=b.queryCommandState;m.queryCommandSupported=b.queryCommandSupported;m.queryCommandValue=b.queryCommandValue;m.querySupportedCommands=b.querySupportedCommands;return b});define("aloha/state-override","aloha/core jquery aloha/command util/dom2 util/maps util/range PubSub".split(" "),function(m,d,a,j,c,b,
f){function g(){e=q=null}function k(a,b,c){if(l){q=b;e=e||{};e[a]=c}}var l=m.settings.stateOverride!==false,e=null,q=null;m.bind("aloha-selection-changed",function(a,b){if(q&&!j.areRangesEq(q,b)){g();f.pub("aloha.selection.context-change",{range:b,event:a})}});return{enabled:function(a){null!=a&&(l=a);return l},keyPressHandler:function(a){if(e&&!a.altKey&&!a.ctrlKey&&a.which){var b=m.getSelection();if(b.getRangeCount()){var f=String.fromCharCode(a.which),k=b.getRangeAt(0);j.insertSelectText(f,k);
c.forEach(e,function(a,b){a(b,k)});j.collapseToEnd(k);b.removeAllRanges();b.addRange(k);a.preventDefault()}}},setWithRangeObject:function(a,c,e){if(l){k(a,j.rangeFromRangeObject(c),function(a,c){var f=new b(c);e(a,f);j.setRangeFromRef(c,f)});c.select()}},set:k,clear:g}});define("aloha/editable","aloha/core util/class jquery aloha/pluginmanager aloha/selection aloha/markup aloha/contenthandlermanager aloha/console aloha/block-jump aloha/ephemera util/dom2 PubSub aloha/copypaste aloha/command aloha/state-override".split(" "),
function(m,d,a,j,c,b,f,g,k,l,e,q,n,p,o){function r(a){return f.handleContent(a.getContents(),{contenthandler:m.settings.contentHandler.smartContentChange},a)}function s(a){var e=a.obj;e.mousedown(function(b){if(!m.eventHandled){m.eventHandled=true;if(m.activeEditable==null||typeof m.activeEditable==="undefined"||e[0]!==m.activeEditable.obj[0])m.mouseEventChangedEditable=true;return a.activate(b)}});e.mouseup(function(){m.eventHandled=false});e.focus(function(b){return a.activate(b)});e.keydown(function(c){var e=
b.preProcessKeyStrokes(c);a.keyCode=c.which;e||a.smartContentChange(c);return e});e.keypress(o.keyPressHandler);e.keypress(function(a){m.activeEditable.smartContentChange(a)});e.keyup(function(a){if(a.keyCode===27){m.deactivateEditable();return false}});e.contentEditableSelectionChange(function(a){c.onChange(e,a,0,m.mouseEventChangedEditable);if(m.mouseEventChangedEditable)m.mouseEventChangedEditable=false;return e})}var v=window.unescape,u=window.GENTICS,t=false,x={};m.defaults.contentHandler={};
m.defaults.contentHandler.initEditable=["blockelement","sanitize"];m.defaults.contentHandler.getContents=["blockelement","sanitize","basic"];if(typeof m.settings.contentHandler==="undefined")m.settings.contentHandler={};var y=function(b){return a(b).html()},z={65:"a"},A={"ctrl+a":function(){var a=n.getEditableAt(n.getRange());if(a){n.selectAllOf(a.obj[0]);return false}}};a(document).keydown(function(a){if(m.activeEditable){var b=z[a.which];if(b){var c=a.altKey?"alt":a.ctrlKey?"ctrl":a.shiftKey?"shift":
null,b=(c?c+"+":"")+b;if(A[b])return A[b](a)}}});m.Editable=d.extend({_constructor:function(a){a.attr("id")||a.attr("id",u.Utils.guid());this.originalObj=this.obj=a;this.ready=false;this.sccDelimiters=[":",";",".","!","?",",",v("%u0009"),v("%u0020"),v("%u0008"),v("%u007F"),"Enter"];this.sccIdle=5E3;this.sccDelay=500;this.sccTimerDelay=this.sccTimerIdle=false;this.keyCodeMap={93:"Apps",18:"Alt",20:"CapsLock",17:"Control",40:"Down",35:"End",13:"Enter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",
118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",36:"Home",45:"Insert",37:"Left",224:"Meta",34:"PageDown",33:"PageUp",19:"Pause",44:"PrintScreen",39:"Right",145:"Scroll",16:"Shift",38:"Up",91:"Win",92:"Win"};this.placeholderClass="aloha-placeholder";m.registerEditable(this)},init:function(){var a=this;if((this.settings=m.settings)&&m.settings.smartContentChange){if(m.settings.smartContentChange.delimiters)this.sccDelimiters=m.settings.smartContentChange.delimiters;if(m.settings.smartContentChange.idle)this.sccIdle=
m.settings.smartContentChange.idle;if(m.settings.smartContentChange.delay)this.sccDelay=m.settings.smartContentChange.delay}if(this.check(this.obj)){if(typeof m.settings.contentHandler.getContents==="undefined")m.settings.contentHandler.getContents=m.defaults.contentHandler.getContents;if(typeof m.settings.contentHandler.initEditable==="undefined")m.settings.contentHandler.initEditable=m.defaults.contentHandler.initEditable;var b=a.obj.html(),b=f.handleContent(b,{contenthandler:m.settings.contentHandler.initEditable,
command:"initEditable"},a);a.obj.html(b);m.bind("aloha-plugins-loaded",function(){a.obj.addClass("aloha-editable").contentEditable(true);s(a);a.setUnmodified();a.snapshotContent=a.getContents();a.initPlaceholder();a.ready=true;window.setTimeout(function(){m.disableObjectResizing()},20);m.trigger("aloha-editable-created",[a]);q.pub("aloha.editable.created",{data:a})})}else this.destroy()},isActive:false,originalContent:null,range:void 0,check:function(){var b=this,c=this.obj,e=c.get(0).nodeName.toLowerCase(),
f=["a","abbr","address","article","aside","b","bdo","blockquote","cite","code","command","del","details","dfn","div","dl","em","footer","h1","h2","h3","h4","h5","h6","header","i","ins","menu","nav","p","pre","q","ruby","section","small","span","strong","sub","sup","var"],k;for(k=0;k<f.length;++k)if(e===f[k])return true;switch(e){case "textarea":case "input":e=a('<div id="'+this.getId()+'-aloha" class="aloha-'+e+'" />').insertAfter(c);e.height(c.height()).width(c.width()).html(c.val());c.hide();c.parents("form:first").submit(function(){c.val(b.getContents())});
this.obj=e;return true}return false},initPlaceholder:function(){m.settings.placeholder&&this.isEmpty()&&this.addPlaceholder()},isEmpty:function(){var b=a.trim(this.getContents());return b.length===0||(b==="<br>"?true:false)},addPlaceholder:function(){var b=a("<div>"),c=a("<span>"),e,f=this.obj;e=u.Utils.Dom.allowsNesting(f[0],b[0])?b:c;if(a("."+this.placeholderClass,f).length===0){a.each(m.settings.placeholder,function(a,b){f.is(a)&&e.html(b)});if(!e.is(":empty")){e.addClass(this.placeholderClass).addClass("aloha-ephemera");
a(f).append(e)}a("br",f).remove()}},removePlaceholder:function(b,e){var f=this.placeholderClass,k;a("."+this.placeholderClass,b).length!==0&&(e===true?window.setTimeout(function(){k=new c.SelectionRange;k.startContainer=k.endContainer=b.get(0);k.startOffset=k.endOffset=0;a("."+f,b).remove();k.select()},100):a("."+f,b).remove())},destroy:function(){this===m.getActiveEditable()&&this.blur();switch(this.originalObj.get(0).nodeName.toLowerCase()){case "textarea":case "input":this.originalObj.val(this.getContents());
this.obj.remove();this.originalObj.show()}this.ready=false;this.removePlaceholder(this.obj);this.obj.removeClass("aloha-editable").contentEditable(false).unbind("mousedown click dblclick focus keydown keypress keyup");m.trigger("aloha-editable-destroyed",[this]);q.pub("aloha.editable.destroyed",{data:this});m.unregisterEditable(this)},setUnmodified:function(){this.originalContent=this.getContents()},isModified:function(){return this.originalContent!==this.getContents()},toString:function(){return"Aloha.Editable"},
isDisabled:function(){return!this.obj.contentEditable()||this.obj.contentEditable()==="false"},disable:function(){return this.isDisabled()||this.obj.contentEditable(false)},enable:function(){return this.isDisabled()&&this.obj.contentEditable(true)},activate:function(a){var b=m.getActiveEditable();if(t)t=false;else if((!a||!(a.type==="focus"&&b!==null&&b.obj.parent().get(0)===a.currentTarget))&&!this.isActive&&!this.isDisabled()){this.obj.addClass("aloha-editable-active");m.activateEditable(this);
t=true;this.removePlaceholder(this.obj,true);t=false;this.isActive=true;m.trigger("aloha-editable-activated",{oldActive:b,editable:this});q.pub("aloha.editable.activated",{data:{old:b,editable:this}})}},blur:function(){this.obj.blur();this.isActive=false;this.initPlaceholder();this.obj.removeClass("aloha-editable-active");m.trigger("aloha-editable-deactivated",{editable:this});q.pub("aloha.editable.deactivated",{data:{editable:this}});m.activeEditable.smartContentChange({type:"blur"},null)},empty:function(b){return null===
b||a.trim(b)===""||b==="<br/>"},getContents:function(b){var c=this.obj.html(),e=x[this.getId()];if(!e||c!==e.raw){k.removeZeroWidthTextNodeFix();var g=this.obj.clone(false);this.removePlaceholder(g);g=a(l.prune(g[0]));j.makeClean(g);g=a("<div>"+f.handleContent(g.html(),{contenthandler:m.settings.contentHandler.getContents,command:"getContents"},this)+"</div>");e=x[this.getId()]={};e.raw=c;e.element=g}if(b)return e.element.clone().contents();if(null==e.serialized)e.serialized=y(e.element[0]);return e.serialized},
setContents:function(a,b){var c=null;if(m.getActiveEditable()===this){m.deactivateEditable();c=this}this.obj.html(a);null!==c&&c.activate();this.smartContentChange({type:"set-contents"});return b?this.obj.contents():y(this.obj[0])},getId:function(){return this.obj.attr("id")},smartContentChange:function(b){function c(){null==l&&(l=e.getSnapshotContent());return l}var e=this,f=null,k;if(b&&(b.metaKey||b.crtlKey||b.altKey))return false;if(b&&b.originalEvent){k=/U\+(\w{4})/;k.exec(b.originalEvent.keyIdentifier);
f=this.keyCodeMap[this.keyCode]||String.fromCharCode(b.which)||"unknown"}var l=null;if(a.inArray(f,this.sccDelimiters)>=0){clearTimeout(this.sccTimerIdle);clearTimeout(this.sccTimerDelay);this.sccTimerDelay=window.setTimeout(function(){m.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:b.originalEvent.keyIdentifier,keyCode:b.keyCode,"char":f,triggerType:"keypress",getSnapshotContent:c});r(e);g.debug("Aloha.Editable","smartContentChanged: event type keypress triggered")},this.sccDelay)}else if(b&&
b.type==="paste"){m.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,keyCode:null,"char":null,triggerType:"paste",getSnapshotContent:c});r(e)}else if(b&&b.type==="blur"){m.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,keyCode:null,"char":null,triggerType:"blur",getSnapshotContent:c});r(e)}else if(b&&b.type==="block-change"){m.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,keyCode:null,"char":null,triggerType:"block-change",getSnapshotContent:c});
r(e)}else if(f!==null){clearTimeout(this.sccTimerDelay);clearTimeout(this.sccTimerIdle);this.sccTimerIdle=window.setTimeout(function(){m.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,keyCode:null,"char":null,triggerType:"idle",getSnapshotContent:c});r(e)},this.sccIdle)}},getSnapshotContent:function(){var a=this.snapshotContent;this.snapshotContent=this.getContents();return a}});m.Editable.setContentSerializer=function(a){y=a};m.Editable.getContentSerializer=function(){return y};
m.Editable.registerEvents=s});define("aloha/plugin",["aloha/core","jquery","util/class","aloha/pluginmanager","aloha/console"],function(m,d,a,j,c){function b(a){var b=m.getEditableById(a.attr("id"));return b?b.originalObj:a}var f=a.extend({name:null,defaults:{},settings:{},dependencies:[],_constructor:function(a){"string"!==typeof a?c.error("Cannot initialise unnamed plugin, skipping"):this.name=a},checkDependencies:function(){var a=this,b=!0;d.each(a.dependencies,function(f,e){if(!m.isPluginLoaded(e.toString()))return b=
!1,c.error("plugin."+a.name,'Required plugin "'+e+'" not found.'),!1});return b},init:function(){},getEditableConfig:function(a){var c=null,f=!1,e=this;this.settings.editables&&(a=b(a),d.each(this.settings.editables,function(b,j){var p;if(a.is(b))if(f=!0,j instanceof Array)c=[],c=d.merge(c,j);else if("object"===typeof j)for(p in c={},c["aloha-editable-selector"]=b,j)j.hasOwnProperty(p)&&(j[p]instanceof Array?c[p]=j[p]:"object"===typeof j[p]?(c[p]={},c[p]=d.extend(!0,c[p],e.config[p],j[p])):c[p]=j[p]);
else c=j}));f||(c="undefined"===typeof this.settings.config||!this.settings.config?this.config:this.settings.config);return c},makeClean:function(){},getUID:function(){c.deprecated("plugin","getUID() is deprecated. Use plugin.name instead.");return this.name},toString:function(){return this.name},log:function(a,b){c.deprecated("plugin","log() is deprecated. Use Aloha.console instead.");c.log(a,this,b)}});f.create=function(a,b){var c=new (f.extend(b))(a);c.settings=d.extendObjects(!0,c.defaults,m.settings[a]);
j.register(c);return c};return f});define("aloha/jquery.aloha",["aloha/core","aloha/selection","jquery","aloha/console"],function(m,d,a,j){function c(a,b,c,e){if(!(b!==e.target&&(/textarea|input|select/i.test(e.target.nodeName)||"text"===e.target.type)))return a.apply(b,c)}function b(b){var f,l,e,j;if("string"===typeof b.data){f=b.handler;l=b.data.toLowerCase().split(" ");e={};for(j=0;j<l.length;j++)e[l[j]]=!0;b.handler=function(b){if(this===b.target){var g="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],
l="";b.altKey&&"alt"!==g&&(l+="alt+");b.ctrlKey&&"ctrl"!==g&&(l+="ctrl+");b.metaKey&&(!b.ctrlKey&&"meta"!==g)&&(l+="meta+");b.shiftKey&&"shift"!==g&&(l+="shift+");if(g){if(e[l+g])return c(f,this,arguments,b)}else if(g=String.fromCharCode(b.which).toLowerCase(),e[l+g]||e[l+a.hotkeys.shiftNums[g]]||"shift+"===l&&e[a.hotkeys.shiftNums[g]])return c(f,this,arguments,b)}}}}var f=window.XMLSerializer;a.fn.between=function(a,b){var c;3!==this[0].nodeType?(c=this.children().size(),b>c&&(b=c),0>=b?this.prepend(a):
this.children().eq(b-1).after(a)):0>=b?this.before(a):(b>=this[0].length||(c=this[0].data,this[0].data=c.substring(0,b),this.after(c.substring(b,c.length))),this.after(a))};a.fn.contentEditable=function(b){var c=a(this),f="contenteditable";a.browser.msie&&7==parseInt(a.browser.version,10)&&(f="contentEditable");if("undefined"===typeof b){if("undefined"===typeof c[0]){j.warn("The jquery object did not contain any valid elements.");return}return"undefined"===typeof c[0].isContentEditable?(j.warn("Could not determine whether the is editable or not. I assume it is."),
!0):c[0].isContentEditable}""===b?c.removeAttr(f):c.attr(f,b&&"false"!==b?"true":"false");return c};a.fn.aloha=function(){var b=this;m.bind("aloha-plugins-loaded",function(){b.each(function(b,c){m.isEditable(c)||(new m.Editable(a(c))).init()})});return b};a.fn.mahalo=function(){return this.each(function(){m.isEditable(this)&&m.getEditableById(a(this).attr("id")).destroy()})};a.fn.alohaText=function(){return this.each(function(){m.isEditable(this)&&m.getEditableById(a(this).attr("id")).getContents()})};
a.fn.contentEditableSelectionChange=function(b){var c=this;this.keyup(function(a){d.getRangeObject();b(a)});this.dblclick(function(a){b(a)});this.mousedown(function(){c.selectionStarted=!0});a(document).mouseup(function(a){d.eventOriginalTarget=c;c.selectionStarted&&b(a);d.eventOriginalTarget=!1;c.selectionStarted=!1});return this};a.fn.outerHtml=a.fn.outerHtml||function(){var b=a(this).get(0);if("undefined"!=typeof b.outerHTML)return b.outerHTML;try{return(new f).serializeToString(b)}catch(c){try{return b.xml}catch(l){}}};
a.fn.zap=function(){return this.each(function(){a(this.childNodes).insertBefore(this)}).remove()};a.fn.textNodes=function(b,c){var f=[],e=function(j){var d,p;if(3===j.nodeType&&a.trim(j.data)&&!c||3===j.nodeType&&c||"BR"==j.nodeName&&!b)f.push(j);else{d=0;for(p=j.childNodes.length;d<p;++d)e(j.childNodes[d])}};e(this[0]);return a(f)};a.extendObjects=a.fn.extendObjects=function(b,c){var f,e,j,d,p;f=1;var o=b||{},r=arguments.length,s=!1,m;"boolean"===typeof o&&(s=o,o=c||{},f=2);"object"!==typeof o&&
!a.isFunction(o)&&(o={});r===f&&(o=this,--f);for(m=f;m<r;m++)if(null!=(f=arguments[m]))for(e in f)f.hasOwnProperty(e)&&(j=o[e],d=f[e],o!==d&&(s&&d&&(a.isPlainObject(d)||!0===(p=a.isArray(d)))?(p?(p=!1,j=j&&a.isArray(j)?j:[]):j=j&&a.isPlainObject(j)?j:{},o[e]=a.isArray(d)?d:a.extendObjects(s,j,d)):void 0!==d&&(o[e]=d)));return o};a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",
35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?",
"\\":"|"}};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})});define("aloha/sidebar",["aloha/core","jquery","aloha/selection","PubSub"],function(m,d,a,j){var c=+new Date;d.easing.easeOutExpo||d.extend(d.easing,{easeOutExpo:function(a,b,c,f,k){return b==k?c+f:f*(-Math.pow(2,-10*b/k)+1)+c},easeOutElastic:function(a,b,c,f,k){var a=Math,g=1.70158,l=0,j=f;if(!b)return c;if(1==(b/=k))return c+f;l||(l=0.3*k);j<a.abs(f)?(j=f,g=l/4):g=l/(2*a.PI)*a.asin(f/j);return j*a.pow(2,
-10*b)*a.sin((b*k-g)*2*a.PI/l)+f+c}});var b=function(a){this.id=null;this.folds={};this.button=null;this.title=d('<div class="aloha-sidebar-panel-title"><span class="aloha-sidebar-panel-title-arrow"></span><span class="aloha-sidebar-panel-title-text">Untitled</span></div>');this.content=d('<div class="aloha-sidebar-panel-content"><div class="aloha-sidebar-panel-content-inner"><div class="aloha-sidebar-panel-content-inner-text"></div></div></div>');this.effectiveElement=this.element=null;this.expanded=
!1;this.isActive=!0;this.init(a)},f=function(a){var b=this;this.id="aloha-sidebar-"+ ++c;this.panels={};this.container=d('<div class="aloha-ui aloha-sidebar-bar"><div class="aloha-sidebar-handle"><span class="aloha-sidebar-handle-icon"></span></div><div class="aloha-sidebar-inner"><ul class="aloha-sidebar-panels"></ul></div></div>');this.width=300;this.isCompletelyOpen=this.isOpen=this.opened=!1;this.settings={rotateIcons:!d.browser.msie,overlayPage:!0};d(function(){"undefined"!==typeof m.settings.sidebar&&
m.settings.sidebar.disabled||b.init(a)})},g=null,k=null;d.extend(f.prototype,{init:function(a){var b=this,c;"object"===typeof a&&(c=a.panels,delete a.panels);d.extend(this,a);"object"===typeof c&&d.each(c,function(){b.addPanel(this,true)});a=this.container;"right"===this.position&&a.addClass("aloha-sidebar-right");a.hide().appendTo(d("body")).click(function(){b.barClicked.apply(b,arguments)}).find(".aloha-sidebar-panels").width(this.width);a.width(this.width);this.width=a.width();this.updateHeight();
this.initToggler();this.container.css("right"===this.position?"marginRight":"marginLeft",-this.width);this.opened&&this.open(0);this.toggleHandleIcon(this.isOpen);this.subscribeToEvents();d(window).resize(function(){b.updateHeight();b.correctHeight()});this.correctHeight()},show:function(){this.container.css("display","block");return this},hide:function(){this.container.css("display","none");return this},checkActivePanels:function(a){var b=[];if("undefined"!==typeof a&&"undefined"!==typeof a.markupEffectiveAtStart){var c=
a.markupEffectiveAtStart.length,f;for(f=0;f<c;++f)b.push(d(a.markupEffectiveAtStart[f]))}var k=this;d.each(this.panels,function(){k.showActivePanel(this,b)});this.correctHeight()},subscribeToEvents:function(){var a=this;j.sub("aloha.selection.context-change",function(b){a.isOpen&&a.checkActivePanels(b.range);a.lastRange=b.range});m.bind("aloha-editable-deactivated",function(){a.isOpen&&a.checkActivePanels();a.lastRange=null});this.container.mousedown(function(a){a.originalEvent.stopSelectionUpdate=
!0;m.eventHandled=!0});this.container.mouseup(function(a){a.originalEvent.stopSelectionUpdate=!0;m.eventHandled=!1})},correctHeight:function(){if(this.isOpen)if(this.isCompletelyOpen){var a=d(window).height(),b=[],c=[],f;for(f in this.panels)this.panels.hasOwnProperty(f)&&this.panels[f].isActive&&(c.push(this.panels[f]),b.push(f));if(0!==c.length&&(b=b.sort().join(","),!(k===b&&g===a))){g=a;k=b;for(var a=this.container.find(".aloha-sidebar-inner").height()-(c[0].title.outerHeight()+10)*c.length,l,
j,s,m=0,u=Math,t;0<c.length&&0<a;){a+=m;m=0;s=[];for(t=c.length-1;0<=t;--t)b=c[t],l=b.content.find(".aloha-sidebar-panel-content-inner"),f=u.min(l.height("auto").height(),u.floor(a/(t+1))),l.height(f),a-=f,j=l.find(".aloha-sidebar-panel-content-inner-text"),j.height()>f?(s.push(b),m+=f,l.css({"overflow-x":"hidden","overflow-y":"scroll"})):l.css("overflow-y","hidden"),b.expanded&&b.expand();c=s}}}else this.correctHeightWhenCompletelyOpen=!0},showActivePanel:function(a,b){b.push(null);a.content.parent("li");
var c=a.activeOn,f=d(),k=0,g=b.length,l;for(l=0;l<g;++l)c(b[l])&&(++k,b[l]&&d.merge(f,b[l]));k?a.activate(f):a.deactivate()},initToggler:function(){var a=this,b=this.container,c=b.find(".aloha-sidebar-handle-icon"),f,k="right"===this.position;this.opened&&this.rotateHandleArrow(k?0:180,0);d(function(){"undefined"!==typeof m.settings.sidebar&&(m.settings.sidebar.handle&&m.settings.sidebar.handle.top)&&(d(b.find(".aloha-sidebar-handle"))[0].style.top=m.settings.sidebar.handle.top)});b.find(".aloha-sidebar-handle").click(function(){f&&
clearInterval(f);c.stop().css("marginLeft",4);a.isOpen?(d(this).removeClass("aloha-sidebar-toggled"),a.close(),a.isOpen=!1):(d(this).addClass("aloha-sidebar-toggled"),a.open(),a.isOpen=!0)}).hover(function(){var b=a.isOpen?-1:1;f&&clearInterval(f);c.stop();d(this).stop().animate(k?{marginLeft:"-="+5*b}:{marginRight:"-="+5*b},200);f=setInterval(function(){b*=-1;c.animate(k?{left:"-="+4*b}:{right:"-="+4*b},300)},300)},function(){f&&clearInterval(f);c.stop().css(k?"left":"right",5);d(this).stop().animate(k?
{marginLeft:0}:{marginRight:0},600,"easeOutElastic")})},roundCorners:function(){var a=this.container,b=a.find(".aloha-sidebar-panels>li:not(.aloha-sidebar-deactivated)");a.find(".aloha-sidebar-panel-top, .aloha-sidebar-panel-bottom").removeClass("aloha-sidebar-panel-top").removeClass("aloha-sidebar-panel-bottom");b.first().find(".aloha-sidebar-panel-title").addClass("aloha-sidebar-panel-top");b.last().find(".aloha-sidebar-panel-content").addClass("aloha-sidebar-panel-bottom")},updateHeight:function(){var a=
d(window).height();this.container.height(a).find(".aloha-sidebar-inner").height(a)},barClicked:function(a){this.handleBarclick(d(a.target))},handleBarclick:function(a){a.hasClass("aloha-sidebar-panel-title")?this.togglePanel(a):!a.hasClass("aloha-sidebar-panel-content")&&(!a.hasClass("aloha-sidebar-handle")&&!a.hasClass("aloha-sidebar-bar"))&&this.handleBarclick(a.parent())},getPanelById:function(a){return this.panels[a]},getPanelByElement:function(a){return this.getPanelById(("LI"===a[0].tagName?
a:a.parent("li"))[0].id)},togglePanel:function(a){this.getPanelByElement(a).toggle()},rotateHandleIcon:function(a,b){var c=this.container.find(".aloha-sidebar-handle-icon");c.animate({angle:a},{duration:"number"===typeof b||"string"===typeof b?b:500,easing:"easeOutExpo",step:function(a){c.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},toggleHandleIcon:function(a){a^="right"===this.position;
if(this.settings.rotateIcons)this.rotateHandleIcon(a?180:0,0);else{var b=this.container.find(".aloha-sidebar-handle-icon");a?b.addClass("aloha-sidebar-handle-icon-left"):b.removeClass("aloha-sidebar-handle-icon-left")}},open:function(a){if(this.isOpen)return this;var b="right"===this.position,c=b?{marginRight:0}:{marginLeft:0},f=this;this.toggleHandleIcon(!0);this.container.animate(c,"number"===typeof a||"string"===typeof a?a:500,"easeOutExpo");this.settings.overlayPage||d("body").animate(b?{marginRight:"+="+
this.width}:{marginLeft:"+="+this.width},500,"easeOutExpo",function(){f.isCompletelyOpen=!0;f.correctHeightWhenCompletelyOpen&&f.correctHeight()});this.isOpen=!0;this.correctHeight();this.lastRange&&this.checkActivePanels(this.lastRange);d("body").trigger("aloha-sidebar-opened",this);return this},close:function(a){if(!this.isOpen)return this;var b="right"===this.position,c=b?{marginRight:-this.width}:{marginLeft:-this.width};this.toggleHandleIcon(!1);this.container.animate(c,"number"===typeof a||
"string"===typeof a?a:500,"easeOutExpo");this.settings.overlayPage||d("body").animate(b?{marginRight:"-="+this.width}:{marginLeft:"-="+this.width},500,"easeOutExpo");this.isCompletelyOpen=this.isOpen=!1;return this},activatePanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.activate(b);this.roundCorners();return this},expandPanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.expand(b);return this},collapsePanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));
a&&a.collapse(b);return this},addPanel:function(c){c instanceof b||(c.width||(c.width=this.width),c.sidebar=this,c=new b(c));this.panels[c.id]=c;this.container.find(".aloha-sidebar-panels").append(c.element);this.checkActivePanels(a.getRangeObject());return c}});d.extend(b.prototype,{init:function(a){this.setTitle(a.title).setContent(a.content);delete a.title;delete a.content;d.extend(this,a);this.id||(this.id="aloha-sidebar-"+ ++c);this.element=d('<li id="'+this.id+'">').append(this.title,this.content);
this.expanded&&this.content.height("auto");this.toggleTitleIcon(this.expanded);this.coerceActiveOn();this.title.attr("unselectable","on").css("-moz-user-select","none").each(function(){this.onselectstart=function(){return false}});"function"===typeof this.onInit&&this.onInit.apply(this)},toggleTitleIcon:function(a){if(this.sidebar.settings.rotateIcons)this.rotateTitleIcon(a?90:0);else{var b=this.title.find(".aloha-sidebar-panel-title-arrow");a?b.addClass("aloha-sidebar-panel-title-arrow-down"):b.removeClass("aloha-sidebar-panel-title-arrow-down")}},
coerceActiveOn:function(){if("function"!==typeof this.activeOn){var a=this.activeOn;this.activeOn=function(){var b=typeof a;return"boolean"===b?function(){return a}:"undefined"===b?function(){return!0}:"string"===b?function(b){return b?b.is(a):!1}:function(){return!1}}()}},activate:function(a){this.isActive=!0;this.content.parent("li").show().removeClass("aloha-sidebar-deactivated");this.effectiveElement=a;"function"===typeof this.onActivate&&this.onActivate.call(this,a)},deactivate:function(){this.isActive&&
(this.isActive=!1,this.content.parent("li").hide().addClass("aloha-sidebar-deactivated"),this.effectiveElement=null)},toggle:function(){this.expanded?this.collapse():this.expand()},expand:function(a){var b=this,c=this.content,f=c.height(),k=c.height("auto").height();c.height(f).stop().animate({height:k},500,"easeOutExpo",function(){"function"===typeof a&&a.call(b)});this.element.removeClass("collapsed");this.toggleTitleIcon(!0);this.expanded=!0;return this},collapse:function(a,b){var c=this;this.element.addClass("collapsed");
this.content.stop().animate({height:3},250,"easeOutExpo",function(){"function"===typeof b&&b.call(c)});this.toggleTitleIcon(!1);this.expanded=!1;return this},setTitle:function(a){this.title.find(".aloha-sidebar-panel-title-text").html(a);return this},setContent:function(a){if(!a||""===a)a="&nbsp;";this.content.find(".aloha-sidebar-panel-content-inner-text").html(a);return this},rotateTitleIcon:function(a,b){var c=this.title.find(".aloha-sidebar-panel-title-arrow");c.animate({angle:a},{duration:"number"===
typeof b?b:500,easing:"easeOutExpo",step:function(a){c.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},renderEffectiveParents:function(a,b){for(var c=a.first(),f=[],k=[],g=this.activeOn,l,j;0<c.length&&!c.is(".aloha-editable");){if(g(c)){k.push("<span>"+c[0].tagName.toLowerCase()+"</span>");l=k.length;for(j=[];l--;)j.push(k[l]);f.push('<div class="aloha-sidebar-panel-parent"><div class="aloha-sidebar-panel-parent-path">'+
j.join("")+'</div><div class="aloha-sidebar-panel-parent-contentaloha-sidebar-opened">'+("function"===typeof b?b(c):"----")+"</div></div>")}c=c.parent()}this.setContent(f.join(""));d(".aloha-sidebar-panel-parent-path").click(function(){var a=d(this).parent().find(".aloha-sidebar-panel-parent-content");a.hasClass("aloha-sidebar-opened")?a.hide().removeClass("aloha-sidebar-opened"):a.show().addClass("aloha-sidebar-opened")});this.content.height("auto").find(".aloha-sidebar-panel-content-inner").height("auto")}});
var l=new f({position:"left",width:250}),f=new f({position:"right",width:250});m.Sidebar={left:l,right:f};return m.Sidebar});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/position",["jquery"],function(m){var d=window.GENTICS;d.Utils.Position={};d.Utils.Position.w=m(window);d.Utils.Position.Scroll={top:0,left:0,isScrolling:!1};d.Utils.Position.ScrollCorrection={top:100,left:50};d.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0};
d.Utils.Position.mouseStopCallbacks=[];d.Utils.Position.mouseMoveCallbacks=[];d.Utils.Position.update=function(){var a=this.w.scrollTop(),j=this.w.scrollLeft();if(this.Scroll.isScrolling)this.Scroll.top==a&&this.Scroll.left==j&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=a||this.Scroll.left!=j)this.Scroll.isScrolling=!0;this.Scroll.top=a;this.Scroll.left=j;if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){if(this.Mouse.isMoving=!1,!this.Mouse.triggeredMouseStop){this.Mouse.triggeredMouseStop=
!0;for(a=0;a<this.mouseStopCallbacks.length;a++)this.mouseStopCallbacks[a].call()}}else{this.Mouse.isMoving=!0;this.Mouse.triggeredMouseStop=!1;for(a=0;a<this.mouseMoveCallbacks.length;a++)this.mouseMoveCallbacks[a].call()}this.Mouse.oldX=this.Mouse.x;this.Mouse.oldY=this.Mouse.y};d.Utils.Position.addMouseStopCallback=function(a){this.mouseStopCallbacks.push(a);return this.mouseStopCallbacks.length-1};d.Utils.Position.addMouseMoveCallback=function(a){this.mouseMoveCallbacks.push(a);return this.mouseMoveCallbacks.length-
1};m(function(){window.setInterval(function(){d.Utils.Position.update()},500)});m("html").mousemove(function(a){d.Utils.Position.Mouse.x=a.pageX;d.Utils.Position.Mouse.y=a.pageY})});define("aloha/repositoryobjects",["aloha/core","util/class"],function(m,d){var a=window.GENTICS;m.RepositoryObject=function(){};m.RepositoryDocument=d.extend({_constructor:function(j){this.type="document";j.id&&(j.name&&j.repositoryId)&&(a.Utils.applyProperties(this,j),this.baseType="document")}});m.RepositoryFolder=d.extend({_constructor:function(j){this.type=
"folder";j.id&&(j.name&&j.repositoryId)&&(a.Utils.applyProperties(this,j),this.baseType="folder")}})});define("aloha/repositorymanager",["jquery","util/class","aloha/core","aloha/console","aloha/repositoryobjects"],function(m,d,a,j){function c(a,b){var c={items:a,results:a.length};b&&(c.numItems=b.numItems,c.hasMoreItems=b.hasMoreItems,c.timeout=b.timeout);return c}function b(a,b){a(b)}var f=function(a){return a?function(a,b){return a.filter(b)}:function(a,b){var c=[],e,f=a.length;for(e=0;e<f;e++)b(a[e])&&
c.push(a[e]);return c}}(Array.prototype.hasOwnProperty("filter")),g=function(a){return"function"===typeof a.query},k=function(a){return"function"===typeof a.getChildren},l=function(a){return"function"===typeof a.getSelectedFolder},d=d.extend({repositories:[],settings:a.settings&&a.settings.repositories||{},initialized:!1,init:function(){"undefined"===typeof this.settings.timeout&&(this.settings.timeout=5E3);var a;for(a=0;a<this.repositories.length;a++)this.initRepository(this.repositories[a]);this.initialized=
!0},register:function(a){this.getRepository(a.repositoryId)?j.warn(this,'A repository with name "'+a.repositoryId+'" already registerd. Ignoring this.'):(this.repositories.push(a),this.initialized&&this.initRepository(a))},initRepository:function(a){a.settings||(a.settings={});this.settings[a.repositoryId]&&m.extend(a.settings,this.settings[a.repositoryId]);a.init()},getRepository:function(a){var b;for(b=0;b<this.repositories.length;b++)if(this.repositories[b].repositoryId===a)return this.repositories[b];
return null},query:function(a,k){var l=this,d,o=[],r={numItems:0,hasMoreItems:!1},s,v=a.timeout&&parseInt(a.timeout,10)||l.settings.timeout,u=window.setTimeout(function(){r=r||{};r.timeout=!0;0<s&&(j.warn(l,s+" repositories did not return before the configured timeout of "+v+"ms."),s=0);clearTimeout(u);var a=c(o,r);k(a)},v),t=function(a,b){if(0!==s){if(a&&a.length){if(!a[0].repositoryId){var e=this.repositoryId,f;for(f=0;f<a.length;f++)a[f].repositoryId=e}m.merge(o,a)}b&&r?(r.numItems=m.isNumeric(b.numItems)&&
m.isNumeric(r.numItems)?r.numItems+b.numItems:void 0,r.hasMoreItems="boolean"===typeof b.hasMoreItems&&"boolean"===typeof r.hasMoreItems?r.hasMoreItems||b.hasMoreItems:void 0,b.timeout&&(r.timeout=!0)):r=void 0;j.debug(l,"The repository "+this.repositoryId+"returned with "+a.length+" results.");0===--s&&(clearTimeout(u),e=c(o,r),k(e))}};d=a.repositoryId?[l.getRepository(a.repositoryId)]:l.repositories;var x=f(d,g);if(0===x.length)clearTimeout(u),b(k,c(o,r));else{var y=function(a){return function(){t.apply(a,
arguments)}};s=x.length;for(d=0;d<x.length;d++)x[d].query(a,y(x[d]))}},getChildren:function(b,c){var g=this,l,d=[],r=0,s=b.timeout&&parseInt(b.timeout,10)||g.settings.timeout,v=window.setTimeout(function(){0<r&&(j.warn(g,r+" repositories did not respond before the configured timeout of "+s+"ms."),r=0);clearTimeout(v);c(d)},s),u=function(a){0!==r&&(a&&m.merge(d,a),0===--r&&(clearTimeout(v),c(d)))},t=b.repositoryId?[g.getRepository(b.repositoryId)]:g.repositories;b.repositoryFilter&&b.repositoryFilter.length&&
(t=f(t,function(a){return-1<m.inArray(a.repositoryId,b.repositoryFilter)}));if("aloha"===b.inFolderId){for(l=0;l<t.length;l++)d.push(new a.RepositoryFolder({id:t[l].repositoryId,name:t[l].repositoryName,repositoryId:t[l].repositoryId,type:"repository",hasMoreItems:!0}));clearTimeout(v);c(d)}else if(t=f(t,k),0===t.length)clearTimeout(v),c(d);else{r=t.length;for(l=0;l<t.length;l++)t[l].getChildren(b,u)}},makeClean:function(a){var b=this,c={},f=0,k=b.repositories.length;a.find("[data-gentics-aloha-repository="+
this.prefix+"]").each(function(){for(;f<k;)c.makeClean(a),f+=1;j.debug(b,"Passing contents of HTML Element with id { "+this.attr("id")+" } for cleaning to repository { "+c.repositoryId+" }");c.makeClean(this)})},markObject:function(a,b){if(a){var c=m(a);if(b){var f=this.getRepository(b.repositoryId);if(f){if(c.attr("data-gentics-aloha-repository")!==b.repositoryId||c.attr("data-gentics-aloha-object-id")!==b.id)c.attr({"data-gentics-aloha-repository":b.repositoryId,"data-gentics-aloha-object-id":b.id}),
f.markObject(a,b)}else j.error(this,'Trying to apply a repository "'+b.name+'" to an object, but item has no repositoryId.')}else c.removeAttr("data-gentics-aloha-repository").removeAttr("data-gentics-aloha-object-id")}},getObject:function(a,b){var c=m(a),f=c.attr("data-gentics-aloha-object-id"),c=c.attr("data-gentics-aloha-repository"),k=this.getRepository(c);if(k&&f){this.itemCache||(this.itemCache=[]);var g=this.itemCache[c];g||(g=this.itemCache[c]=[]);g[f]?b([g[f]]):k.getObjectById(f,function(a){g[f]=
a[0];b(a)})}},folderOpened:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderOpened&&b.folderOpened(a)},folderClosed:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderClosed&&b.folderClosed(a)},folderSelected:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderSelected&&b.folderSelected(a)},getSelectedFolder:function(){var a=f(this.repositories,l),b,c;for(b=0;b<a.length;b++)if(c=a[b].getSelectedFolder())return c;
return null},toString:function(){return"repositorymanager"}});a.RepositoryManager=new d;return a.RepositoryManager});define("aloha/repository",["aloha/core","util/class","aloha/repositorymanager"],function(m,d,a){d=d.extend({_constructor:function(j,c){this.repositoryId=j;this.settings={};this.repositoryName=c||j;a.register(this)},init:function(){},query:null,getChildren:null,makeClean:function(){},markObject:function(){},setTemplate:function(a){this.template=a?a:null},hasTemplate:function(){return this.template?
!0:!1},getTemplate:function(){return this.template},getObjectById:function(){return!0}});return m.AbstractRepository=d});(function(m){function d(){var a,b,c=Aloha.settings.plugins&&Aloha.settings.plugins.load,f=Aloha.settings.baseUrl,g,j=/\/aloha.js(\?\S*)?$/,d=/\/[^\/]*\.js$/,r;if(!c||!f){a=document.getElementsByTagName("script");for(r=0;r<a.length;r++){b=a[r];g=b.getAttribute("data-aloha-plugins");if(null!=g){c||(c=g);f||(f=b.src.replace(d,""));break}!f&&j.test(b.src)&&(f=b.src.replace(j,""))}}"string"===
typeof c&&""!==c&&(c=c.replace(/\s+/g,"").split(","));return{baseUrl:f,plugins:c||[]}}function a(){for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++)if("true"===a[b].getAttribute("data-aloha-defer-init"))return!0;return!1}function j(a){var b={},c=[],f={},g={},j,d,r=Aloha.settings.basePath||"",s=Aloha.settings.bundles||{},m;for(m=0;m<a.length;m++){j=a[m].split("/");d=j[0];j=j[1];d=s[d]?r+s[d]:r+"../plugins/"+d;var u=b,t=d,x=j,y=["nls","css","vendor","res"],z=void 0,A=void 0;u[x]=
t+"/"+x+"/lib";for(A=0;A<y.length;A++)z=y[A],u[x+"/"+z]=t+"/"+x+"/"+z;f[j]=d+"/"+j;c.push(j+"/"+j+"-plugin");g[j]={jquery:"aloha/jquery"}}return{paths:b,entryPoints:c,baseUrlByName:f,names:[],map:g}}function c(){var a={},b=Array.prototype.slice.call(arguments),c,f,g;for(f=0;f<b.length;f++)for(c in g=b[f],g)g.hasOwnProperty(c)&&(a[c]=b[f][c]);return a}function b(a,b){define(a,function(){return b})}function f(){Aloha.features={};Aloha.defaults={};Aloha.settings=Aloha.settings||{};Aloha.initialize=g.start;
var a=d(),f=j(a.plugins);Aloha.settings.baseUrl=a.baseUrl;Aloha.settings.loadedPlugins=f.names;Aloha.settings._pluginBaseUrlByName=f.baseUrlByName;var a=c({aloha:{jquery:"aloha/jquery"},"aloha/jquery":{jquery:"jquery"},jqueryui:{jquery:"aloha/jquery"},vendor:{jquery:"aloha/jquery"},util:{jquery:"aloha/jquery"},RepositoryBrowser:{jquery:"aloha/jquery"},jstree:{jquery:"aloha/jquery"},jqgrid:{jquery:"aloha/jquery"},"jqgrid-locale-en":{jquery:"aloha/jquery"},"jqgrid-locale-de":{jquery:"aloha/jquery"},
"jquery-layout":{jquery:"aloha/jquery"}},f.map),e=c({context:"aloha",config:{i18n:{locale:Aloha.settings.locale||"en"}},baseUrl:Aloha.settings.baseUrl,map:a},Aloha.settings.requireConfig);e.paths=c({jquery:"vendor/jquery-1.7.2",jqueryui:"vendor/jquery-ui-1.9.0.custom-aloha"},{PubSub:"vendor/pubsub/js/pubsub-unminified",Class:"vendor/class",RepositoryBrowser:"vendor/repository-browser/js/repository-browser-unminified",jstree:"vendor/jquery.jstree",jqgrid:"vendor/jquery.jqgrid","jquery-layout":"vendor/jquery.layout-1.3.0-rc30.7",
"jqgrid-locale-en":"vendor/grid.locale.en","jqgrid-locale-de":"vendor/grid.locale.de","repository-browser-i18n-de":"vendor/repository-browser/js/repository-browser-unminified","repository-browser-i18n-en":"vendor/repository-browser/js/repository-browser-unminified"},f.paths,e.paths);a=Aloha.settings.predefinedModules||{};Aloha.settings.jQuery&&(a.jquery=Aloha.settings.jQuery);for(var q in a)a.hasOwnProperty(q)&&(b(q,a[q]),delete e.paths[q]);var n=require.config(e);Aloha.require=function(a){return 1===
arguments.length&&typeof a==="function"?n(["aloha"],a):n.apply(this,arguments)};Aloha.bind=function(a,b){Aloha.require(["aloha/jquery"],function(c){Aloha.bind=function(a,b){switch(g.getReadiness(a)){case "deferred":var e=g.getPhaseByEvent(a);if(!e.deferred)e.deferred=c.Deferred();e.deferred.done(b);break;case "immediate":b();break;case "normal":c(Aloha,"body").bind(a,b);break;default:throw"Unknown readiness";}return this};Aloha.bind(a,b)});return this};Aloha.trigger=function(a,b){Aloha.require(["aloha/jquery"],
function(c){Aloha.trigger=function(a,b){var e=g.getPhaseByEvent(a);if(e&&e.deferred){c(e.deferred.resolve);e.deferred=null}c(Aloha,"body").trigger(a,b);return this};Aloha.trigger(a,b)});return this};Aloha.unbind=function(a){Aloha.require(["aloha/jquery"],function(b){Aloha.unbind=function(a){b(Aloha,"body").unbind(a)};Aloha.unbind(a)})};Aloha.ready=function(a){this.bind("aloha-ready",a);return this};var p=Aloha.settings.jQuery;define("aloha/jquery",["jquery"],function(a){return p||a});Aloha.jQuery=
p;define("aloha","aloha/jquery util/json2 aloha/rangy-core util/class util/lang util/range util/dom aloha/core aloha/editable aloha/console aloha/markup aloha/plugin aloha/selection aloha/command aloha/jquery.aloha aloha/sidebar util/position aloha/repositorymanager aloha/repository aloha/repositoryobjects aloha/contenthandlermanager".split(" "),function(a){Aloha.features.jquery=true;Aloha.jQuery=a;Aloha.settings=a.extendObjects(true,{},Aloha.defaults,Aloha.settings);return Aloha});require(e,["aloha",
"aloha/jquery"],function(a,b){require(e,f.entryPoints,function(){b(function(){window.rangy.init();a.init()})})})}var g={phases:[],completed:[],start:function(a,b){g.phases=g.phases.concat(a);g.proceed(0,a,b)},proceed:function(a,b,c){if(a<b.length){var f=b[a],j=function(){g.proceed(++a,b,c)},d=function(){g.completed.push(f);f.event&&Aloha.trigger(f.event)};f.fn?f.fn(d,j):(d(),j())}else c&&c()},getPhaseByEvent:function(a){var b;for(b=0;b<g.phases.length;b++)if(a===g.phases[b].event)return g.phases[b];
return null},getReadiness:function(a){var b;for(b=0;b<g.completed.length;b++)if(a===g.completed[b].event)return"immediate";return g.getPhaseByEvent(a)?"deferred":"normal"}};m.Aloha=m.Aloha||{};m.Aloha.settings=m.Aloha.settings||{};m.__DEPS__=m.__DEPS__||{};m.__DEPS__.lang=m.Aloha.settings.locale||"en";m.Aloha.deferInit||a()?m.Aloha.deferInit=f:Aloha._load=f})(window);define("ui/context",["aloha","jquery","util/class"],function(m,d,a){var j;j=d("#aloha-ui-context");j.length||(j=d("<div>",{"class":"aloha",
id:"aloha-ui-context"}),d(function(){j.appendTo("body")}));m=a.extend({surfaces:[],containers:[]});d.extend(m,{selector:"#aloha-ui-context",element:j});return m});define("ui/scopes",["jquery","PubSub","util/maps"],function(m,d,a){function j(a,b){if(c.hasOwnProperty(b))for(var f=c[b],k=0;k<f.length;k++){var g=f[k];a.push(g);j(a,g)}}var c={"Aloha.empty":[],"Aloha.global":["Aloha.empty"],"Aloha.continuoustext":["Aloha.global"]},b=[],f={},g=!1;Aloha.bind("aloha-selection-changed-before",function(){g=
!1});Aloha.bind("aloha-selection-changed-after",function(a,b,c){"undefined"!==typeof c&&!g&&k.setScope("Aloha.continuoustext")});var k={enterScope:function(a,b){var b=b||"_globalCounter",c=f[a];c||(c=f[a]={});var k=c[b]||0;c[b]=k+1;k||d.pub("aloha.ui.scope.change")},leaveScope:function(b,c,k){var c=c||"_globalCounter",g=f[b];if(g){var j=g[c];j&&((j-=1)&&!k?g[c]=j:(delete g[c],a.isEmpty(g)&&delete f[b],d.pub("aloha.ui.scope.change")))}},isActiveScope:function(a){return f[a]||-1!==m.inArray(a,b)?!0:
!1},getPrimaryScope:function(){return b[0]},setScope:function(a){g=!0;b[0]!=a&&(b=[a],j(b,a),d.pub("aloha.ui.scope.change"))},createScope:function(a,b){b?"string"===typeof b&&(b=[b]):b=["Aloha.empty"];c[a]=b}};return k});define("ui/container",["jquery","util/class","ui/scopes"],function(m,d,a){function j(c,k){switch(m.type(k)){case "function":return k;case "object":if(k.scope)return b[k.scope]?b[k.scope]:b[k.scope]=function(){return a.isActiveScope(k.scope)};throw"Invalid showOn configuration";default:return f}}
var c=0,b={},f=function(){return!0},d=d.extend({element:null,_constructor:function(a,b){var f=j(this,b.showOn),e;f.showOnId||(f.showOnId=++c);e=f.showOnId;var d=a.containers[e];this.context=a;d||(d=a.containers[e]={shouldShow:f,containers:[]});d.containers.push(this)},show:function(){},hide:function(){},focus:function(){},foreground:function(){},childVisible:function(){},childFocus:function(){},childForeground:function(){}});m.extend(d,{showContainersForContext:function(a,b){var c,e,f;if(a.containers)for(e in f=
a.containers,f)if(f.hasOwnProperty(e)){c=f[e];var j=c.containers;c=c.shouldShow(b)?"show":"hide";for(var d=void 0,d=0;d<j.length;d++)j[d][c]()}}});return d});define("ui/surface",["aloha/core","jquery","util/class","ui/container"],function(m,d,a){var j=a.extend({_constructor:function(a){a.surfaces.push(this)},isActive:function(){return!0}});d.extend(j,{range:null,show:function(a){d.each(a.surfaces,function(a,c){c.show()})},hide:function(a){d.each(a.surfaces,function(a,c){c.hide()})},trackRange:function(a){a.bind("mousedown",
function(a){a.originalEvent.stopSelectionUpdate=!0;m.eventHandled=!0;j.suppressHide=!0;m.activeEditable&&(a=m.getSelection(),j.range=0<a.getRangeCount()?a.getRangeAt(0):null)});a.bind("mouseup",function(a){a.originalEvent.stopSelectionUpdate=!0;m.eventHandled=!1;j.suppressHide=!1})}});return j});define("ui/component",["aloha/core","jquery","util/class"],function(m,d,a){var j=0;return a.extend({id:0,isInstance:!0,container:null,type:null,visible:!0,_constructor:function(){this.id=j++;this.init()},
adoptParent:function(a){this.container=a},init:function(){},isVisible:function(){return this.visible},show:function(a){!1===a?this.hide():this.visible||(this.visible=!0,this.element.show(),this.container&&this.container.childVisible(this,!0))},hide:function(){this.visible&&(this.visible=!1,this.element.hide(),this.container&&this.container.childVisible(this,!1))},focus:function(){this.element.focus();this.container&&this.container.childFocus(this)},foreground:function(){this.container&&this.container.childForeground(this)},
enable:function(){},disable:function(){}})});define("jqueryui",["jquery"],function(m){(function(d,a){function j(a,b){var f,e;f=a.nodeName.toLowerCase();if("area"===f){f=a.parentNode;e=f.name;if(!a.href||!e||"map"!==f.nodeName.toLowerCase())return!1;f=d("img[usemap=#"+e+"]")[0];return!!f&&c(f)}return(/input|select|textarea|button|object/.test(f)?!a.disabled:"a"===f?a.href||b:b)&&c(a)}function c(a){return!d(a).parents().andSelf().filter(function(){return"hidden"===d.css(this,"visibility")||d.expr.filters.hidden(this)}).length}
var b=0,f=/^ui-id-\d+$/;d.ui=d.ui||{};d.ui.version||(d.extend(d.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),d.fn.extend({_focus:d.fn.focus,focus:function(a,b){return"number"===typeof a?this.each(function(){var c=this;setTimeout(function(){d(c).focus();b&&b.call(c)},
a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=d.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(d.css(this,"position"))&&/(auto|scroll)/.test(d.css(this,"overflow")+d.css(this,"overflow-y")+d.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(d.css(this,"overflow")+d.css(this,"overflow-y")+d.css(this,"overflow-x"))}).eq(0);
return/fixed/.test(this.css("position"))||!a.length?d(document):a},zIndex:function(b){if(b!==a)return this.css("zIndex",b);if(this.length)for(var b=d(this[0]),c;b.length&&b[0]!==document;){c=b.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(b.css("zIndex"),10),!isNaN(c)&&0!==c)return c;b=b.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&d(this).removeAttr("id")})}}),
d("<a>").outerWidth(1).jquery||d.each(["Width","Height"],function(b,c){function f(a,b,c,k){d.each(e,function(){b-=parseFloat(d.css(a,"padding"+this))||0;c&&(b-=parseFloat(d.css(a,"border"+this+"Width"))||0);k&&(b-=parseFloat(d.css(a,"margin"+this))||0)});return b}var e="Width"===c?["Left","Right"]:["Top","Bottom"],j=c.toLowerCase(),n={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+c]=function(b){return b===a?n["inner"+
c].call(this):this.each(function(){d(this).css(j,f(this,b)+"px")})};d.fn["outer"+c]=function(a,b){return"number"!==typeof a?n["outer"+c].call(this,a):this.each(function(){d(this).css(j,f(this,a,!0,b)+"px")})}}),d.extend(d.expr[":"],{data:d.expr.createPseudo?d.expr.createPseudo(function(a){return function(b){return!!d.data(b,a)}}):function(a,b,c){return!!d.data(a,c[3])},focusable:function(a){return j(a,!isNaN(d.attr(a,"tabindex")))},tabbable:function(a){var b=d.attr(a,"tabindex"),c=isNaN(b);return(c||
0<=b)&&j(a,!c)}}),d(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));b.offsetHeight;d.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});d.support.minHeight=100===b.offsetHeight;d.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"}),d.fn.extend({disableSelection:function(){return this.bind((d.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),
d.extend(d.ui,{plugin:{add:function(a,b,c){var e,a=d.ui[a].prototype;for(e in c)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([b,c[e]])},call:function(a,b,c){var e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<e.length;b++)a.options[e[b][0]]&&e[b][1].apply(a.element,c)}},contains:d.contains,hasScroll:function(a,b){if("hidden"===d(a).css("overflow"))return!1;var c=b&&"left"===b?"scrollLeft":"scrollTop",e=!1;if(0<a[c])return!0;a[c]=1;e=0<a[c];a[c]=0;return e},
isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,b,c,e,f,j){return d.ui.isOverAxis(a,c,f)&&d.ui.isOverAxis(b,e,j)}}))})(m);(function(d,a){var j=0,c=Array.prototype.slice,b=d.cleanData;d.cleanData=function(a){for(var c=0,k;null!=(k=a[c]);c++)try{d(k).triggerHandler("remove")}catch(l){}b(a)};d.widget=function(a,b,c){var l,e,j,n,p=a.split(".")[0],a=a.split(".")[1];l=p+"-"+a;c||(c=b,b=d.Widget);d.expr[":"][l.toLowerCase()]=function(a){return!!d.data(a,l)};d[p]=d[p]||{};e=d[p][a];j=d[p][a]=
function(a,b){if(!this._createWidget)return new j(a,b);arguments.length&&this._createWidget(a,b)};d.extend(j,e,{version:c.version,_proto:d.extend({},c),_childConstructors:[]});n=new b;n.options=d.widget.extend({},n.options);d.each(c,function(a,e){d.isFunction(e)&&(c[a]=function(){var c=function(){return b.prototype[a].apply(this,arguments)},f=function(c){return b.prototype[a].apply(this,c)};return function(){var a=this._super,b=this._superApply,k;this._super=c;this._superApply=f;k=e.apply(this,arguments);
this._super=a;this._superApply=b;return k}}())});j.prototype=d.widget.extend(n,{widgetEventPrefix:a},c,{constructor:j,namespace:p,widgetName:a,widgetBaseClass:l,widgetFullName:l});e?(d.each(e._childConstructors,function(a,b){var c=b.prototype;d.widget(c.namespace+"."+c.widgetName,j,b._proto)}),delete e._childConstructors):b._childConstructors.push(j);d.widget.bridge(a,j)};d.widget.extend=function(b){for(var g=c.call(arguments,1),k=0,l=g.length,e,j;k<l;k++)for(e in g[k])j=g[k][e],g[k].hasOwnProperty(e)&&
j!==a&&(b[e]=d.isPlainObject(j)?d.widget.extend({},b[e],j):j);return b};d.widget.bridge=function(b,g){var k=g.prototype.widgetFullName;d.fn[b]=function(l){var e="string"===typeof l,j=c.call(arguments,1),n=this,l=!e&&j.length?d.widget.extend.apply(null,[l].concat(j)):l;e?this.each(function(){var c,e=d.data(this,k);if(!e)return d.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+l+"'");if(!d.isFunction(e[l])||"_"===l.charAt(0))return d.error("no such method '"+
l+"' for "+b+" widget instance");c=e[l].apply(e,j);if(c!==e&&c!==a)return n=c&&c.jquery?n.pushStack(c.get()):c,!1}):this.each(function(){var a=d.data(this,k);a?a.option(l||{})._init():new g(l,this)});return n}};d.Widget=function(){};d.Widget._childConstructors=[];d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,b){b=d(b||this.defaultElement||this)[0];this.element=d(b);this.uuid=j++;this.eventNamespace="."+
this.widgetName+this.uuid;this.options=d.widget.extend({},this.options,this._getCreateOptions(),a);this.bindings=d();this.hoverable=d();this.focusable=d();b!==this&&(d.data(b,this.widgetName,this),d.data(b,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=d(b.style?b.ownerDocument:b.document||b),this.window=d(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:d.noop,
_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:d.noop,widget:function(){return this.element},option:function(b,c){var k=b,l,e,j;if(0===arguments.length)return d.widget.extend({},this.options);if("string"===typeof b)if(k={},l=b.split("."),b=l.shift(),l.length){e=k[b]=d.widget.extend({},this.options[b]);for(j=0;j<l.length-1;j++)e[l[j]]=e[l[j]]||{},e=e[l[j]];b=l.pop();if(c===a)return e[b]===a?null:e[b];e[b]=c}else{if(c===a)return this.options[b]===a?null:this.options[b];k[b]=c}this._setOptions(k);return this},_setOptions:function(a){for(var b in a)this._setOption(b,
a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,b){b?(a=d(a),this.bindings=this.bindings.add(a)):(b=a,a=this.element);var c=this;d.each(b,
function(b,e){function g(){if(!(c.options.disabled===true||d(this).hasClass("ui-state-disabled")))return(typeof e==="string"?c[e]:e).apply(c,arguments)}if(typeof e!=="string")g.guid=e.guid=e.guid||g.guid||d.guid++;var j=b.match(/^(\w+)\s*(.*)$/),p=j[1]+c.eventNamespace;(j=j[2])?c.widget().delegate(j,p,g):a.bind(p,g)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===
typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){d(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){d(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){d(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){d(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,b,c){var l,
e=this.options[a],c=c||{},b=d.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(l in a)l in b||(b[l]=a[l]);this.element.trigger(b,c);return!(d.isFunction(e)&&!1===e.apply(this.element[0],[b].concat(c))||b.isDefaultPrevented())}};d.each({show:"fadeIn",hide:"fadeOut"},function(a,b){d.Widget.prototype["_"+a]=function(c,l,e){"string"===typeof l&&(l={effect:l});var j,n=!l?a:!0===l||"number"===typeof l?b:l.effect||b,l=
l||{};"number"===typeof l&&(l={duration:l});j=!d.isEmptyObject(l);l.complete=e;l.delay&&c.delay(l.delay);if(j&&d.effects&&(d.effects.effect[n]||!1!==d.uiBackCompat&&d.effects[n]))c[a](l);else if(n!==a&&c[n])c[n](l.duration,l.easing,e);else c.queue(function(b){d(this)[a]();e&&e.call(c[0]);b()})}});!1!==d.uiBackCompat&&(d.Widget.prototype._getCreateOptions=function(){return d.metadata&&d.metadata.get(this.element[0])[this.widgetName]})})(m);(function(d){var a=!1;d(document).mouseup(function(){a=!1});
d.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(!0===d.data(c.target,a.widgetName+".preventClickEvent"))return d.removeData(c.target,a.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);
this._mouseMoveDelegate&&d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(j){if(!a){this._mouseStarted&&this._mouseUp(j);this._mouseDownEvent=j;var c=this,b=1===j.which,f="string"===typeof this.options.cancel&&j.target.nodeName?d(j.target).closest(this.options.cancel).length:!1;if(!b||f||!this._mouseCapture(j))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(j)&&this._mouseDelayMet(j)&&(this._mouseStarted=!1!==this._mouseStart(j),!this._mouseStarted))return j.preventDefault(),!0;!0===d.data(j.target,this.widgetName+".preventClickEvent")&&d.removeData(j.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};d(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);j.preventDefault();return a=!0}},_mouseMove:function(a){if(d.browser.msie&&!(9<=document.documentMode)&&!a.button)return this._mouseUp(a);if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a));return!this._mouseStarted},_mouseUp:function(a){d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,a.target===this._mouseDownEvent.target&&d.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(m);
(function(d,a){function j(a,b,c){return[parseInt(a[0],10)*(p.test(a[0])?b/100:1),parseInt(a[1],10)*(p.test(a[1])?c/100:1)]}function c(a,b){return parseInt(d.css(a,b),10)||0}d.ui=d.ui||{};var b,f=Math.max,g=Math.abs,k=Math.round,l=/left|center|right/,e=/top|center|bottom/,q=/[\+\-]\d+%?/,n=/^\w+/,p=/%$/,o=d.fn.position;d.position={scrollbarWidth:function(){if(b!==a)return b;var c,e,f=d("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");
e=f.children()[0];d("body").append(f);c=e.offsetWidth;f.css("overflow","scroll");e=e.offsetWidth;c===e&&(e=f[0].clientWidth);f.remove();return b=c-e},getScrollInfo:function(a){var b=a.isWindow?"":a.element.css("overflow-x"),c=a.isWindow?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight;return{width:"scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth?d.position.scrollbarWidth():0,height:c?d.position.scrollbarWidth():0}},getWithinInfo:function(a){var a=
d(a||window),b=d.isWindow(a[0]);return{element:a,isWindow:b,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b?a.width():a.outerWidth(),height:b?a.height():a.outerHeight()}}};d.fn.position=function(a){if(!a||!a.of)return o.apply(this,arguments);var a=d.extend({},a),b,p,m,t,x,y=d(a.of),z=d.position.getWithinInfo(a.within),A=d.position.getScrollInfo(z),F=y[0],H=(a.collision||"flip").split(" "),D={};9===F.nodeType?(p=y.width(),m=y.height(),t={top:0,left:0}):d.isWindow(F)?
(p=y.width(),m=y.height(),t={top:y.scrollTop(),left:y.scrollLeft()}):F.preventDefault?(a.at="left top",p=m=0,t={top:F.pageY,left:F.pageX}):(p=y.outerWidth(),m=y.outerHeight(),t=y.offset());x=d.extend({},t);d.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,f;b.length===1&&(b=l.test(b[0])?b.concat(["center"]):e.test(b[0])?["center"].concat(b):["center","center"]);b[0]=l.test(b[0])?b[0]:"center";b[1]=e.test(b[1])?b[1]:"center";c=q.exec(b[0]);f=q.exec(b[1]);D[this]=[c?c[0]:0,f?f[0]:0];a[this]=
[n.exec(b[0])[0],n.exec(b[1])[0]]});1===H.length&&(H[1]=H[0]);"right"===a.at[0]?x.left+=p:"center"===a.at[0]&&(x.left+=p/2);"bottom"===a.at[1]?x.top+=m:"center"===a.at[1]&&(x.top+=m/2);b=j(D.at,p,m);x.left+=b[0];x.top+=b[1];return this.each(function(){var e,l,n=d(this),q=n.outerWidth(),o=n.outerHeight(),F=c(this,"marginLeft"),U=c(this,"marginTop"),G=q+F+c(this,"marginRight")+A.width,S=o+U+c(this,"marginBottom")+A.height,I=d.extend({},x),P=j(D.my,n.outerWidth(),n.outerHeight());if(a.my[0]==="right")I.left=
I.left-q;else if(a.my[0]==="center")I.left=I.left-q/2;if(a.my[1]==="bottom")I.top=I.top-o;else if(a.my[1]==="center")I.top=I.top-o/2;I.left=I.left+P[0];I.top=I.top+P[1];if(!d.support.offsetFractions){I.left=k(I.left);I.top=k(I.top)}e={marginLeft:F,marginTop:U};d.each(["left","top"],function(c,f){if(d.ui.position[H[c]])d.ui.position[H[c]][f](I,{targetWidth:p,targetHeight:m,elemWidth:q,elemHeight:o,collisionPosition:e,collisionWidth:G,collisionHeight:S,offset:[b[0]+P[0],b[1]+P[1]],my:a.my,at:a.at,within:z,
elem:n})});d.fn.bgiframe&&n.bgiframe();a.using&&(l=function(b){var c=t.left-I.left,e=c+p-q,k=t.top-I.top,l=k+m-o,j={target:{element:y,left:t.left,top:t.top,width:p,height:m},element:{element:n,left:I.left,top:I.top,width:q,height:o},horizontal:e<0?"left":c>0?"right":"center",vertical:l<0?"top":k>0?"bottom":"middle"};if(p<q&&g(c+e)<p)j.horizontal="center";if(m<o&&g(k+l)<m)j.vertical="middle";j.important=f(g(c),g(e))>f(g(k),g(l))?"horizontal":"vertical";a.using.call(this,b,j)});n.offset(d.extend(I,
{using:l}))})};d.ui.position={fit:{left:function(a,b){var c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,k=c.width,g=a.left-b.collisionPosition.marginLeft,c=e-g,l=g+b.collisionWidth-k-e;b.collisionWidth>k?0<c&&0>=l?(e=a.left+c+b.collisionWidth-k-e,a.left+=c-e):a.left=0<l&&0>=c?e:c>l?e+k-b.collisionWidth:e:a.left=0<c?a.left+c:0<l?a.left-l:f(a.left-g,a.left)},top:function(a,b){var c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,k=b.within.height,g=a.top-b.collisionPosition.marginTop,c=e-g,l=g+
b.collisionHeight-k-e;b.collisionHeight>k?0<c&&0>=l?(e=a.top+c+b.collisionHeight-k-e,a.top+=c-e):a.top=0<l&&0>=c?e:c>l?e+k-b.collisionHeight:e:a.top=0<c?a.top+c:0<l?a.top-l:f(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,e=c.offset.left+c.scrollLeft,f=c.width,k=c.isWindow?c.scrollLeft:c.offset.left,l=a.left-b.collisionPosition.marginLeft,c=l-k,j=l+b.collisionWidth-f-k,l="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,d="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:
0,n=-2*b.offset[0];if(0>c){if(e=a.left+l+d+n+b.collisionWidth-f-e,0>e||e<g(c))a.left+=l+d+n}else if(0<j&&(e=a.left-b.collisionPosition.marginLeft+l+d+n-k,0<e||g(e)<j))a.left+=l+d+n},top:function(a,b){var c=b.within,e=c.offset.top+c.scrollTop,f=c.height,k=c.isWindow?c.scrollTop:c.offset.top,l=a.top-b.collisionPosition.marginTop,c=l-k,j=l+b.collisionHeight-f-k,l="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,d="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*
b.offset[1];if(0>c){if(e=a.top+l+d+n+b.collisionHeight-f-e,a.top+l+d+n>c&&(0>e||e<g(c)))a.top+=l+d+n}else if(0<j&&(e=a.top-b.collisionPosition.marginTop+l+d+n-k,a.top+l+d+n>j&&(0<e||g(e)<j)))a.top+=l+d+n}},flipfit:{left:function(){d.ui.position.flip.left.apply(this,arguments);d.ui.position.fit.left.apply(this,arguments)},top:function(){d.ui.position.flip.top.apply(this,arguments);d.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b,c,e,f=document.getElementsByTagName("body")[0];c=document.createElement("div");
a=document.createElement(f?"div":"body");b={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&d.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in b)a.style[e]=b[e];a.appendChild(c);b=f||document.documentElement;b.insertBefore(a,b.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=d(c).offset().left;d.support.offsetFractions=10<c&&11>c;a.innerHTML="";b.removeChild(a)})();!1!==d.uiBackCompat&&function(b){var c=b.fn.position;b.fn.position=
function(e){if(!e||!e.offset)return c.call(this,e);var f=e.offset.split(" "),k=e.at.split(" ");1===f.length&&(f[1]=f[0]);/^\d/.test(f[0])&&(f[0]="+"+f[0]);/^\d/.test(f[1])&&(f[1]="+"+f[1]);1===k.length&&(/left|center|right/.test(k[0])?k[1]="center":(k[1]=k[0],k[0]="center"));return c.call(this,b.extend(e,{at:k[0]+f[0]+" "+k[1]+f[1],offset:a}))}}(m)})(m);(function(d){d.widget("ui.draggable",d.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,
containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&
this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(a){var j=this.options;if(this.helper||j.disabled||d(a.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(a);if(!this.handle)return!1;d(!0===j.iframeFix?"iframe":j.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var j=this.options;this.helper=this._createHelper(a);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();d.ui.ddmanager&&(d.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset=
{top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt);j.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();
d.ui.ddmanager&&!j.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this._mouseDrag(a,!0);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,j){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!j){var c=this._uiHash();if(!1===this._trigger("drag",a,c))return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var j=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(j=d.ui.ddmanager.drop(this,a));this.dropped&&(j=this.dropped,this.dropped=!1);for(var c=this.element[0],b=!1;c&&(c=c.parentNode);)c==document&&(b=!0);if(!b&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!j||"valid"==this.options.revert&&j||!0===this.options.revert||d.isFunction(this.options.revert)&&
this.options.revert.call(this.element,j)){var f=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",a)!==false&&f._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},_mouseUp:function(a){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a);return d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(a){var j=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;d(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(j=!0)});return j},_createHelper:function(a){var j=this.options,a=d.isFunction(j.helper)?d(j.helper.apply(this.element[0],[a])):"clone"==j.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==j.appendTo?this.element[0].parentNode:
j.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-
a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.contains(this.scrollParent[0],this.offsetParent[0]))&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+
(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),
10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?
0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:d(window).scrollLeft())+d("document"==a.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:d(window).scrollTop())+(d("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=d(a.containment),j=a[0];if(j){a.offset();var c="hidden"!=d(j).css("overflow");this.containment=[(parseInt(d(j).css("borderLeftWidth"),10)||0)+(parseInt(d(j).css("paddingLeft"),10)||0),(parseInt(d(j).css("borderTopWidth"),10)||0)+(parseInt(d(j).css("paddingTop"),10)||0),(c?Math.max(j.scrollWidth,j.offsetWidth):j.offsetWidth)-(parseInt(d(j).css("borderLeftWidth"),10)||0)-(parseInt(d(j).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(j.scrollHeight,j.offsetHeight):j.offsetHeight)-(parseInt(d(j).css("borderTopWidth"),10)||0)-(parseInt(d(j).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=a}}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,j){j||(j=this.position);var c="absolute"==a?1:-1,b="absolute"==this.cssPosition&&
!(this.scrollParent[0]!=document&&d.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(b[0].tagName);return{top:j.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:b.scrollTop())*c,left:j.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:b.scrollLeft())*c}},_generatePosition:function(a){var j=this.options,
c="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,b=/(html|body)/i.test(c[0].tagName),f=a.pageX,g=a.pageY;if(this.originalPosition){var k;this.containment&&(this.relative_container?(k=this.relative_container.offset(),k=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]):k=this.containment,a.pageX-this.offset.click.left<k[0]&&(f=k[0]+this.offset.click.left),
a.pageY-this.offset.click.top<k[1]&&(g=k[1]+this.offset.click.top),a.pageX-this.offset.click.left>k[2]&&(f=k[2]+this.offset.click.left),a.pageY-this.offset.click.top>k[3]&&(g=k[3]+this.offset.click.top));j.grid&&(g=j.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/j.grid[1])*j.grid[1]:this.originalPageY,g=k?!(g-this.offset.click.top<k[1]||g-this.offset.click.top>k[3])?g:!(g-this.offset.click.top<k[1])?g-j.grid[1]:g+j.grid[1]:g,f=j.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/
j.grid[0])*j.grid[0]:this.originalPageX,f=k?!(f-this.offset.click.left<k[0]||f-this.offset.click.left>k[2])?f:!(f-this.offset.click.left<k[0])?f-j.grid[0]:f+j.grid[0]:f)}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():b?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():b?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,j,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[j,c]);"drag"==a&&(this.positionAbs=this._convertPositionTo("absolute"));return d.Widget.prototype._trigger.call(this,a,j,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.ui.plugin.add("draggable","connectToSortable",
{start:function(a,j){var c=d(this).data("draggable"),b=c.options,f=d.extend({},j,{item:c.element});c.sortables=[];d(b.connectToSortable).each(function(){var b=d.data(this,"sortable");b&&!b.options.disabled&&(c.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,f))})},stop:function(a,j){var c=d(this).data("draggable"),b=d.extend({},j,{item:c.element});d.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=
!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,"original"==c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,b))})},drag:function(a,j){var c=d(this).data("draggable"),b=this;d.each(c.sortables,function(){this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=
c.helperProportions;this.instance.offset.click=c.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(b).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return j.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,
!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",a),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=
!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",a),c.dropped=!1)})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),j=d(this).data("draggable").options;a.css("cursor")&&(j._cursor=a.css("cursor"));a.css("cursor",
j.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,j){var c=d(j.helper),b=d(this).data("draggable").options;c.css("opacity")&&(b._opacity=c.css("opacity"));c.css("opacity",b.opacity)},stop:function(a,j){var c=d(this).data("draggable").options;c._opacity&&d(j.helper).css("opacity",c._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");
a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(a){var j=d(this).data("draggable"),c=j.options,b=!1;if(j.scrollParent[0]!=document&&"HTML"!=j.scrollParent[0].tagName){if(!c.axis||"x"!=c.axis)j.overflowOffset.top+j.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity?j.scrollParent[0].scrollTop=b=j.scrollParent[0].scrollTop+c.scrollSpeed:a.pageY-j.overflowOffset.top<c.scrollSensitivity&&(j.scrollParent[0].scrollTop=b=j.scrollParent[0].scrollTop-
c.scrollSpeed);if(!c.axis||"y"!=c.axis)j.overflowOffset.left+j.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity?j.scrollParent[0].scrollLeft=b=j.scrollParent[0].scrollLeft+c.scrollSpeed:a.pageX-j.overflowOffset.left<c.scrollSensitivity&&(j.scrollParent[0].scrollLeft=b=j.scrollParent[0].scrollLeft-c.scrollSpeed)}else{if(!c.axis||"x"!=c.axis)a.pageY-d(document).scrollTop()<c.scrollSensitivity?b=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<
c.scrollSensitivity&&(b=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed));if(!c.axis||"y"!=c.axis)a.pageX-d(document).scrollLeft()<c.scrollSensitivity?b=d(document).scrollLeft(d(document).scrollLeft()-c.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity&&(b=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed))}!1!==b&&(d.ui.ddmanager&&!c.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(j,a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=
d(this).data("draggable"),j=a.options;a.snapElements=[];d(j.snap.constructor!=String?j.snap.items||":data(draggable)":j.snap).each(function(){var c=d(this),b=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:b.top,left:b.left})})},drag:function(a,j){for(var c=d(this).data("draggable"),b=c.options,f=b.snapTolerance,g=j.offset.left,k=g+c.helperProportions.width,l=j.offset.top,e=l+c.helperProportions.height,q=c.snapElements.length-1;0<=q;q--){var n=
c.snapElements[q].left,p=n+c.snapElements[q].width,o=c.snapElements[q].top,r=o+c.snapElements[q].height;if(n-f<g&&g<p+f&&o-f<l&&l<r+f||n-f<g&&g<p+f&&o-f<e&&e<r+f||n-f<k&&k<p+f&&o-f<l&&l<r+f||n-f<k&&k<p+f&&o-f<e&&e<r+f){if("inner"!=b.snapMode){var m=Math.abs(o-e)<=f,v=Math.abs(r-l)<=f,u=Math.abs(n-k)<=f,t=Math.abs(p-g)<=f;m&&(j.position.top=c._convertPositionTo("relative",{top:o-c.helperProportions.height,left:0}).top-c.margins.top);v&&(j.position.top=c._convertPositionTo("relative",{top:r,left:0}).top-
c.margins.top);u&&(j.position.left=c._convertPositionTo("relative",{top:0,left:n-c.helperProportions.width}).left-c.margins.left);t&&(j.position.left=c._convertPositionTo("relative",{top:0,left:p}).left-c.margins.left)}var x=m||v||u||t;if("outer"!=b.snapMode&&(m=Math.abs(o-l)<=f,v=Math.abs(r-e)<=f,u=Math.abs(n-g)<=f,t=Math.abs(p-k)<=f,m&&(j.position.top=c._convertPositionTo("relative",{top:o,left:0}).top-c.margins.top),v&&(j.position.top=c._convertPositionTo("relative",{top:r-c.helperProportions.height,
left:0}).top-c.margins.top),u&&(j.position.left=c._convertPositionTo("relative",{top:0,left:n}).left-c.margins.left),t))j.position.left=c._convertPositionTo("relative",{top:0,left:p-c.helperProportions.width}).left-c.margins.left;!c.snapElements[q].snapping&&(m||v||u||t||x)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[q].item}));c.snapElements[q].snapping=m||v||u||t||x}else c.snapElements[q].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,
a,d.extend(c._uiHash(),{snapItem:c.snapElements[q].item})),c.snapElements[q].snapping=!1}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options,a=d.makeArray(d(a.stack)).sort(function(a,b){return(parseInt(d(a).css("zIndex"),10)||0)-(parseInt(d(b).css("zIndex"),10)||0)});if(a.length){var j=parseInt(a[0].style.zIndex)||0;d(a).each(function(a){this.style.zIndex=j+a});this[0].style.zIndex=j+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,
j){var c=d(j.helper),b=d(this).data("draggable").options;c.css("zIndex")&&(b._zIndex=c.css("zIndex"));c.css("zIndex",b.zIndex)},stop:function(a,j){var c=d(this).data("draggable").options;c._zIndex&&d(j.helper).css("zIndex",c._zIndex)}})})(m);(function(d){d.widget("ui.droppable",{version:"1.9.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,j=a.accept;this.isover=0;this.isout=
1;this.accept=d.isFunction(j)?j:function(a){return a.is(j)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);a.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],j=0;j<a.length;j++)a[j]==this&&a.splice(j,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},
_setOption:function(a,j){"accept"==a&&(this.accept=d.isFunction(j)?j:function(a){return a.is(j)});d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var j=d.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);j&&this._trigger("activate",a,this.ui(j))},_deactivate:function(a){var j=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);j&&this._trigger("deactivate",a,this.ui(j))},_over:function(a){var j=
d.ui.ddmanager.current;if(j&&(j.currentItem||j.element)[0]!=this.element[0])if(this.accept.call(this.element[0],j.currentItem||j.element))this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(j))},_out:function(a){var j=d.ui.ddmanager.current;if(j&&(j.currentItem||j.element)[0]!=this.element[0])if(this.accept.call(this.element[0],j.currentItem||j.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",
a,this.ui(j))},_drop:function(a,j){var c=j||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var b=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var a=d.data(this,"droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope==c.options.scope&&a.accept.call(a.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(a,{offset:a.element.offset()}),a.options.tolerance))return b=!0,!1});return b?!1:this.accept.call(this.element[0],
c.currentItem||c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(c)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.ui.intersect=function(a,j,c){if(!j.offset)return!1;var b=(a.positionAbs||a.position.absolute).left,f=b+a.helperProportions.width,g=(a.positionAbs||a.position.absolute).top,
k=g+a.helperProportions.height,l=j.offset.left,e=l+j.proportions.width,q=j.offset.top,n=q+j.proportions.height;switch(c){case "fit":return l<=b&&f<=e&&q<=g&&k<=n;case "intersect":return l<b+a.helperProportions.width/2&&f-a.helperProportions.width/2<e&&q<g+a.helperProportions.height/2&&k-a.helperProportions.height/2<n;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,
q,l,j.proportions.height,j.proportions.width);case "touch":return(g>=q&&g<=n||k>=q&&k<=n||g<q&&k>n)&&(b>=l&&b<=e||f>=l&&f<=e||b<l&&f>e);default:return!1}};d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,j){var c=d.ui.ddmanager.droppables[a.options.scope]||[],b=j?j.type:null,f=(a.currentItem||a.element).find(":data(droppable)").andSelf(),g=0;a:for(;g<c.length;g++)if(!(c[g].options.disabled||a&&!c[g].accept.call(c[g].element[0],a.currentItem||a.element))){for(var k=
0;k<f.length;k++)if(f[k]==c[g].element[0]){c[g].proportions.height=0;continue a}c[g].visible="none"!=c[g].element.css("display");c[g].visible&&("mousedown"==b&&c[g]._activate.call(c[g],j),c[g].offset=c[g].element.offset(),c[g].proportions={width:c[g].element[0].offsetWidth,height:c[g].element[0].offsetHeight})}},drop:function(a,j){var c=!1;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options&&(!this.options.disabled&&(this.visible&&d.ui.intersect(a,this,this.options.tolerance))&&
(c=this._drop.call(this,j)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)))this.isout=1,this.isover=0,this._deactivate.call(this,j)});return c},dragStart:function(a,j){a.element.parentsUntil("body").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,j)})},drag:function(a,j){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,j);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&
!this.greedyChild&&this.visible){var c=d.ui.intersect(a,this,this.options.tolerance);if(c=!c&&1==this.isover?"isout":c&&0==this.isover?"isover":null){var b;if(this.options.greedy){var f=this.options.scope,g=this.element.parents(":data(droppable)").filter(function(){return d.data(this,"droppable").options.scope===f});g.length&&(b=d.data(g[0],"droppable"),b.greedyChild="isover"==c?1:0)}b&&"isover"==c&&(b.isover=0,b.isout=1,b._out.call(b,j));this[c]=1;this["isout"==c?"isover":"isout"]=0;this["isover"==
c?"_over":"_out"].call(this,j);b&&"isout"==c&&(b.isout=0,b.isover=1,b._over.call(b,j))}}})},dragStop:function(a,j){a.element.parentsUntil("body").unbind("scroll.droppable");a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,j)}}})(m);(function(d){d.widget("ui.resizable",d.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,
maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var a=this,b=this.options;this.element.addClass("ui-resizable");d.extend(this,{_aspectRatio:!!b.aspectRatio,aspectRatio:b.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(d('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,
marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=b.handles||(!d(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",
se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var f=this.handles.split(",");this.handles={};for(var g=0;g<f.length;g++){var k=d.trim(f[g]),l=d('<div class="ui-resizable-handle ui-resizable-'+k+'"></div>');l.css({zIndex:b.zIndex});"se"==k&&l.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[k]=".ui-resizable-"+k;this.element.append(l)}}this._renderAxis=
function(a){var a=a||this.element,b;for(b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=d(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var c=d(this.handles[b],this.element),f=0,f=/sw|ne|nw|se|n|s/.test(b)?c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(c,f);this._proportionallyResize()}d(this.handles[b])}};
this._renderAxis(this.element);this._handles=d(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!a.resizing){if(this.className)var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);a.axis=b&&b[1]?b[1]:"se"}});b.autoHide&&(this._handles.hide(),d(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(!b.disabled){d(this).removeClass("ui-resizable-autohide");a._handles.show()}}).mouseleave(function(){if(!b.disabled&&!a.resizing){d(this).addClass("ui-resizable-autohide");
a._handles.hide()}}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var a=function(a){d(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var b=this.element;b.after(this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")})).remove()}this.originalElement.css("resize",
this.originalResizeStyle);a(this.originalElement);return this},_mouseCapture:function(a){var b=!1,f;for(f in this.handles)d(this.handles[f])[0]==a.target&&(b=!0);return!this.options.disabled&&b},_mouseStart:function(c){var b=this.options,f=this.element.position(),g=this.element;this.resizing=!0;this.documentScroll={top:d(document).scrollTop(),left:d(document).scrollLeft()};(g.is(".ui-draggable")||/absolute/.test(g.css("position")))&&g.css({position:"absolute",top:f.top,left:f.left});this._renderProxy();
var f=a(this.helper.css("left")),k=a(this.helper.css("top"));b.containment&&(f+=d(b.containment).scrollLeft()||0,k+=d(b.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:f,top:k};this.size=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalPosition={left:f,top:k};this.sizeDiff={width:g.outerWidth()-
g.width(),height:g.outerHeight()-g.height()};this.originalMousePosition={left:c.pageX,top:c.pageY};this.aspectRatio="number"==typeof b.aspectRatio?b.aspectRatio:this.originalSize.width/this.originalSize.height||1;b=d(".ui-resizable-"+this.axis).css("cursor");d("body").css("cursor","auto"==b?this.axis+"-resize":b);g.addClass("ui-resizable-resizing");this._propagate("start",c);return!0},_mouseDrag:function(a){var b=this.helper,f=this.originalMousePosition,g=this._change[this.axis];if(!g)return!1;f=
g.apply(this,[a,a.pageX-f.left||0,a.pageY-f.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)f=this._updateRatio(f,a);f=this._respectSize(f,a);this._propagate("resize",a);b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(f);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(a){this.resizing=
!1;var b=this.options;if(this._helper){var f=this._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),f=g&&d.ui.hasScroll(f[0],"left")?0:this.sizeDiff.height,g=g?0:this.sizeDiff.width,g={width:this.helper.width()-g,height:this.helper.height()-f},f=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,k=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;b.animate||this.element.css(d.extend(g,{top:k,left:f}));
this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!b.animate&&this._proportionallyResize()}d("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",a);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b=this.options,f,g,k,b={minWidth:j(b.minWidth)?b.minWidth:0,maxWidth:j(b.maxWidth)?b.maxWidth:Infinity,minHeight:j(b.minHeight)?b.minHeight:0,maxHeight:j(b.maxHeight)?b.maxHeight:Infinity};
if(this._aspectRatio||a)if(a=b.minHeight*this.aspectRatio,g=b.minWidth/this.aspectRatio,f=b.maxHeight*this.aspectRatio,k=b.maxWidth/this.aspectRatio,a>b.minWidth&&(b.minWidth=a),g>b.minHeight&&(b.minHeight=g),f<b.maxWidth&&(b.maxWidth=f),k<b.maxHeight)b.maxHeight=k;this._vBoundaries=b},_updateCache:function(a){this.offset=this.helper.offset();j(a.left)&&(this.position.left=a.left);j(a.top)&&(this.position.top=a.top);j(a.height)&&(this.size.height=a.height);j(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=
this.position,f=this.size,g=this.axis;j(a.height)?a.width=a.height*this.aspectRatio:j(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==g&&(a.left=b.left+(f.width-a.width),a.top=null);"nw"==g&&(a.top=b.top+(f.height-a.height),a.left=b.left+(f.width-a.width));return a},_respectSize:function(a){var b=this._vBoundaries,f=this.axis,g=j(a.width)&&b.maxWidth&&b.maxWidth<a.width,k=j(a.height)&&b.maxHeight&&b.maxHeight<a.height,l=j(a.width)&&b.minWidth&&b.minWidth>a.width,e=j(a.height)&&b.minHeight&&b.minHeight>
a.height;l&&(a.width=b.minWidth);e&&(a.height=b.minHeight);g&&(a.width=b.maxWidth);k&&(a.height=b.maxHeight);var d=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height,p=/sw|nw|w/.test(f),f=/nw|ne|n/.test(f);l&&p&&(a.left=d-b.minWidth);g&&p&&(a.left=d-b.maxWidth);e&&f&&(a.top=n-b.minHeight);k&&f&&(a.top=n-b.maxHeight);(b=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:b&&(!a.top&&a.left)&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a=
this.helper||this.element,b=0;b<this._proportionallyResizeElements.length;b++){var f=this._proportionallyResizeElements[b];if(!this.borderDif){var g=[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],k=[f.css("paddingTop"),f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")];this.borderDif=d.map(g,function(a,b){var c=parseInt(a,10)||0,f=parseInt(k[b],10)||0;return c+f})}f.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||
0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||d('<div style="overflow:hidden;"></div>');var b=d.browser.msie&&7>d.browser.version,f=b?1:0,b=b?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+b,height:this.element.outerHeight()+b,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++a.zIndex});
this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,f){return{top:this.originalPosition.top+f,height:this.originalSize.height-f}},s:function(a,b,f){return{height:this.originalSize.height+f}},se:function(a,b,f){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,b,f]))},sw:function(a,
b,f){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,f]))},ne:function(a,b,f){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,f]))},nw:function(a,b,f){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,f]))}},_propagate:function(a,b){d.ui.plugin.call(this,a,[b,this.ui()]);"resize"!=a&&this._trigger(a,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,
helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});d.ui.plugin.add("resizable","alsoResize",{start:function(){var a=d(this).data("resizable").options,b=function(a){d(a).each(function(){var a=d(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof a.alsoResize&&!a.alsoResize.parentNode?a.alsoResize.length?
(a.alsoResize=a.alsoResize[0],b(a.alsoResize)):d.each(a.alsoResize,function(a){b(a)}):b(a.alsoResize)},resize:function(a,b){var f=d(this).data("resizable"),g=f.options,k=f.originalSize,l=f.originalPosition,e={height:f.size.height-k.height||0,width:f.size.width-k.width||0,top:f.position.top-l.top||0,left:f.position.left-l.left||0},j=function(a,c){d(a).each(function(){var a=d(this),f=d(this).data("resizable-alsoresize"),k={},g=c&&c.length?c:a.parents(b.originalElement[0]).length?["width","height"]:
["width","height","top","left"];d.each(g,function(a,b){var c=(f[b]||0)+(e[b]||0);c&&0<=c&&(k[b]=c||null)});a.css(k)})};"object"==typeof g.alsoResize&&!g.alsoResize.nodeType?d.each(g.alsoResize,function(a,b){j(a,b)}):j(g.alsoResize)},stop:function(){d(this).removeData("resizable-alsoresize")}});d.ui.plugin.add("resizable","animate",{stop:function(a){var b=d(this).data("resizable"),f=b.options,g=b._proportionallyResizeElements,k=g.length&&/textarea/i.test(g[0].nodeName),l=k&&d.ui.hasScroll(g[0],"left")?
0:b.sizeDiff.height,k={width:b.size.width-(k?0:b.sizeDiff.width),height:b.size.height-l},l=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,e=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(d.extend(k,e&&l?{top:e,left:l}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var e={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),
10),left:parseInt(b.element.css("left"),10)};g&&g.length&&d(g[0]).css({width:e.width,height:e.height});b._updateCache(e);b._propagate("resize",a)}})}});d.ui.plugin.add("resizable","containment",{start:function(){var c=d(this).data("resizable"),b=c.element,f=c.options.containment;if(b=f instanceof d?f.get(0):/parent/.test(f)?b.parent().get(0):f)if(c.containerElement=d(b),/document/.test(f)||f==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:d(document),
left:0,top:0,width:d(document).width(),height:d(document).height()||document.body.parentNode.scrollHeight};else{var g=d(b),k=[];d(["Top","Right","Left","Bottom"]).each(function(b,c){k[b]=a(g.css("padding"+c))});c.containerOffset=g.offset();c.containerPosition=g.position();c.containerSize={height:g.innerHeight()-k[3],width:g.innerWidth()-k[1]};var f=c.containerOffset,l=c.containerSize.height,e=c.containerSize.width,e=d.ui.hasScroll(b,"left")?b.scrollWidth:e,l=d.ui.hasScroll(b)?b.scrollHeight:l;c.parentData=
{element:b,left:f.left,top:f.top,width:e,height:l}}},resize:function(a){var b=d(this).data("resizable"),f=b.options,g=b.containerOffset,k=b.position,a=b._aspectRatio||a.shiftKey,l={top:0,left:0},e=b.containerElement;e[0]!=document&&/static/.test(e.css("position"))&&(l=g);if(k.left<(b._helper?g.left:0))b.size.width+=b._helper?b.position.left-g.left:b.position.left-l.left,a&&(b.size.height=b.size.width/b.aspectRatio),b.position.left=f.helper?g.left:0;if(k.top<(b._helper?g.top:0))b.size.height+=b._helper?
b.position.top-g.top:b.position.top,a&&(b.size.width=b.size.height*b.aspectRatio),b.position.top=b._helper?g.top:0;b.offset.left=b.parentData.left+b.position.left;b.offset.top=b.parentData.top+b.position.top;f=Math.abs(b.offset.left-l.left+b.sizeDiff.width);g=Math.abs((b._helper?b.offset.top-l.top:b.offset.top-g.top)+b.sizeDiff.height);k=b.containerElement.get(0)==b.element.parent().get(0);l=/relative|absolute/.test(b.containerElement.css("position"));k&&l&&(f-=b.parentData.left);f+b.size.width>=
b.parentData.width&&(b.size.width=b.parentData.width-f,a&&(b.size.height=b.size.width/b.aspectRatio));g+b.size.height>=b.parentData.height&&(b.size.height=b.parentData.height-g,a&&(b.size.width=b.size.height*b.aspectRatio))},stop:function(){var a=d(this).data("resizable"),b=a.options,f=a.containerOffset,g=a.containerPosition,k=a.containerElement,l=d(a.helper),e=l.offset(),j=l.outerWidth()-a.sizeDiff.width,l=l.outerHeight()-a.sizeDiff.height;a._helper&&(!b.animate&&/relative/.test(k.css("position")))&&
d(this).css({left:e.left-g.left-f.left,width:j,height:l});a._helper&&(!b.animate&&/static/.test(k.css("position")))&&d(this).css({left:e.left-g.left-f.left,width:j,height:l})}});d.ui.plugin.add("resizable","ghost",{start:function(){var a=d(this).data("resizable"),b=a.options,f=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof b.ghost?b.ghost:
"");a.ghost.appendTo(a.helper)},resize:function(){var a=d(this).data("resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=d(this).data("resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});d.ui.plugin.add("resizable","grid",{resize:function(){var a=d(this).data("resizable"),b=a.options,f=a.size,g=a.originalSize,k=a.originalPosition,l=a.axis;b.grid="number"==typeof b.grid?[b.grid,b.grid]:b.grid;var e=Math.round((f.width-
g.width)/(b.grid[0]||1))*(b.grid[0]||1),b=Math.round((f.height-g.height)/(b.grid[1]||1))*(b.grid[1]||1);/^(se|s|e)$/.test(l)?(a.size.width=g.width+e,a.size.height=g.height+b):/^(ne)$/.test(l)?(a.size.width=g.width+e,a.size.height=g.height+b,a.position.top=k.top-b):(/^(sw)$/.test(l)?(a.size.width=g.width+e,a.size.height=g.height+b):(a.size.width=g.width+e,a.size.height=g.height+b,a.position.top=k.top-b),a.position.left=k.left-e)}});var a=function(a){return parseInt(a,10)||0},j=function(a){return!isNaN(parseInt(a,
10))}})(m);(function(d){d.widget("ui.selectable",d.ui.mouse,{version:"1.9.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable");this.dragged=!1;var j;this.refresh=function(){j=d(a.options.filter,a.element[0]);j.addClass("ui-selectee");j.each(function(){var a=d(this),b=a.offset();d.data(this,"selectable-item",{element:this,$element:a,left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),
startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=j.addClass("ui-selectee");this._mouseInit();this.helper=d("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(a){var j=this;this.opos=[a.pageX,
a.pageY];if(!this.options.disabled){var c=this.options;this.selectees=d(c.filter,this.element[0]);this._trigger("start",a);d(c.appendTo).append(this.helper);this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0});c.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var b=d.data(this,"selectable-item");b.startselected=!0;!a.metaKey&&!a.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,j._trigger("unselecting",
a,{unselecting:b.element}))});d(a.target).parents().andSelf().each(function(){var b=d.data(this,"selectable-item");if(b){var c=!a.metaKey&&!a.ctrlKey||!b.$element.hasClass("ui-selected");b.$element.removeClass(c?"ui-unselecting":"ui-selected").addClass(c?"ui-selecting":"ui-unselecting");b.unselecting=!c;b.selecting=c;(b.selected=c)?j._trigger("selecting",a,{selecting:b.element}):j._trigger("unselecting",a,{unselecting:b.element});return!1}})}},_mouseDrag:function(a){var j=this;this.dragged=!0;if(!this.options.disabled){var c=
this.options,b=this.opos[0],f=this.opos[1],g=a.pageX,k=a.pageY;if(b>g)var l=g,g=b,b=l;f>k&&(l=k,k=f,f=l);this.helper.css({left:b,top:f,width:g-b,height:k-f});this.selectees.each(function(){var e=d.data(this,"selectable-item");if(e&&e.element!=j.element[0]){var l=false;c.tolerance=="touch"?l=!(e.left>g||e.right<b||e.top>k||e.bottom<f):c.tolerance=="fit"&&(l=e.left>b&&e.right<g&&e.top>f&&e.bottom<k);if(l){if(e.selected){e.$element.removeClass("ui-selected");e.selected=false}if(e.unselecting){e.$element.removeClass("ui-unselecting");
e.unselecting=false}if(!e.selecting){e.$element.addClass("ui-selecting");e.selecting=true;j._trigger("selecting",a,{selecting:e.element})}}else{if(e.selecting)if((a.metaKey||a.ctrlKey)&&e.startselected){e.$element.removeClass("ui-selecting");e.selecting=false;e.$element.addClass("ui-selected");e.selected=true}else{e.$element.removeClass("ui-selecting");e.selecting=false;if(e.startselected){e.$element.addClass("ui-unselecting");e.unselecting=true}j._trigger("unselecting",a,{unselecting:e.element})}if(e.selected&&
!a.metaKey&&!a.ctrlKey&&!e.startselected){e.$element.removeClass("ui-selected");e.selected=false;e.$element.addClass("ui-unselecting");e.unselecting=true;j._trigger("unselecting",a,{unselecting:e.element})}}}});return!1}},_mouseStop:function(a){var j=this;this.dragged=!1;d(".ui-unselecting",this.element[0]).each(function(){var c=d.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=!1;c.startselected=!1;j._trigger("unselected",a,{unselected:c.element})});d(".ui-selecting",
this.element[0]).each(function(){var c=d.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=!1;c.selected=!0;c.startselected=!0;j._trigger("selected",a,{selected:c.element})});this._trigger("stop",a);this.helper.remove();return!1}})})(m);(function(d){d.widget("ui.sortable",d.ui.mouse,{version:"1.9.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,
forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();
this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,j){"disabled"===a?(this.options[a]=j,this.widget().toggleClass("ui-sortable-disabled",!!j)):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,j){var c=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;
this._refreshItems(a);var b=null;d(a.target).parents().each(function(){if(d.data(this,c.widgetName+"-item")==c)return b=d(this),!1});d.data(a.target,c.widgetName+"-item")==c&&(b=d(a.target));if(!b)return!1;if(this.options.handle&&!j){var f=!1;d(this.options.handle,b).find("*").andSelf().each(function(){this==a.target&&(f=!0)});if(!f)return!1}this.currentItem=b;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,j,c){j=this.options;this.currentContainer=this;this.refreshPositions();this.helper=
this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=
this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();j.containment&&this._setContainment();j.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",j.cursor));j.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=
this.helper.css("opacity")),this.helper.css("opacity",j.opacity));j.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",j.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",a,this._uiHash(this));
d.ui.ddmanager&&(d.ui.ddmanager.current=this);d.ui.ddmanager&&!j.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return!0},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var j=this.options,c=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?
(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<j.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+j.scrollSpeed:a.pageY-this.overflowOffset.top<j.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-j.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<j.scrollSensitivity)?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+j.scrollSpeed:a.pageX-this.overflowOffset.left<j.scrollSensitivity&&
(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-j.scrollSpeed):(a.pageY-d(document).scrollTop()<j.scrollSensitivity?c=d(document).scrollTop(d(document).scrollTop()-j.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<j.scrollSensitivity&&(c=d(document).scrollTop(d(document).scrollTop()+j.scrollSpeed)),a.pageX-d(document).scrollLeft()<j.scrollSensitivity?c=d(document).scrollLeft(d(document).scrollLeft()-j.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<
j.scrollSensitivity&&(c=d(document).scrollLeft(d(document).scrollLeft()+j.scrollSpeed)));!1!==c&&(d.ui.ddmanager&&!j.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(j=this.items.length-1;0<=j;j--){var c=this.items[j],b=c.item[0],f=this._intersectsWithPointer(c);
if(f&&c.instance===this.currentContainer&&b!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=b&&!d.contains(this.placeholder[0],b)&&("semi-dynamic"==this.options.type?!d.contains(this.element[0],b):1)){this.direction=1==f?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());
this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,j){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this,b=this.placeholder.offset();this.reverting=!0;d(this.helper).animate({left:b.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},
parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,j);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=
0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&(this.helper&&this.helper[0].parentNode)&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var j=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||
{};d(j).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var j=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||{};j.each(function(){c.push(d(a.item||this).attr(a.attribute||"id")||"")});return c},_intersectsWith:function(a){var j=this.positionAbs.left,c=j+this.helperProportions.width,b=this.positionAbs.top,
f=b+this.helperProportions.height,g=a.left,k=g+a.width,l=a.top,e=l+a.height,d=this.offset.click.top,n=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?b+d>l&&b+d<e&&j+n>g&&j+n<k:g<j+this.helperProportions.width/2&&c-this.helperProportions.width/2<k&&l<b+this.helperProportions.height/2&&f-this.helperProportions.height/2<e},
_intersectsWithPointer:function(a){var j="x"===this.options.axis||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),a="y"===this.options.axis||d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),j=j&&a,a=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return!j?!1:this.floating?c&&"right"==c||"down"==a?2:1:a&&("down"==a?2:1)},_intersectsWithSides:function(a){var j=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+
a.height/2,a.height),a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),c=this._getDragVerticalDirection(),b=this._getDragHorizontalDirection();return this.floating&&b?"right"==b&&a||"left"==b&&!a:c&&("down"==c&&j||"up"==c&&!j)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":
"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var j=[],c=[],b=this._connectWith();if(b&&a)for(a=b.length-1;0<=a;a--)for(var f=d(b[a]),g=f.length-1;0<=g;g--){var k=d.data(f[g],this.widgetName);k&&(k!=this&&!k.options.disabled)&&c.push([d.isFunction(k.options.items)?k.options.items.call(k.element):d(k.options.items,
k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;0<=a;a--)c[a][0].each(function(){j.push(this)});return d(j)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),j=0;j<this.items.length;j++)for(var c=
0;c<a.length;c++)a[c]==this.items[j].item[0]&&this.items.splice(j,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var j=this.items,c=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],b=this._connectWith();if(b&&this.ready)for(var f=b.length-1;0<=f;f--)for(var g=d(b[f]),k=g.length-1;0<=k;k--){var l=d.data(g[k],this.widgetName);l&&(l!=this&&!l.options.disabled)&&(c.push([d.isFunction(l.options.items)?
l.options.items.call(l.element[0],a,{item:this.currentItem}):d(l.options.items,l.element),l]),this.containers.push(l))}for(f=c.length-1;0<=f;f--){a=c[f][1];b=c[f][0];k=0;for(g=b.length;k<g;k++)l=d(b[k]),l.data(this.widgetName+"-item",a),j.push({item:l,instance:a,width:0,height:0,left:0,top:0})}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var j=this.items.length-1;0<=j;j--){var c=this.items[j];if(!(c.instance!=this.currentContainer&&
this.currentContainer&&c.item[0]!=this.currentItem[0])){var b=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;a||(c.width=b.outerWidth(),c.height=b.outerHeight());b=b.offset();c.left=b.left;c.top=b.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(j=this.containers.length-1;0<=j;j--)b=this.containers[j].element.offset(),this.containers[j].containerCache.left=b.left,this.containers[j].containerCache.top=
b.top,this.containers[j].containerCache.width=this.containers[j].element.outerWidth(),this.containers[j].containerCache.height=this.containers[j].element.outerHeight();return this},_createPlaceholder:function(a){var a=a||this,j=a.options;if(!j.placeholder||j.placeholder.constructor==String){var c=j.placeholder;j.placeholder={element:function(){var b=d(document.createElement(a.currentItem[0].nodeName)).addClass(c||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
c||(b.style.visibility="hidden");return b},update:function(b,f){if(!c||j.forcePlaceholderSize)f.height()||f.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}}}a.placeholder=d(j.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);j.placeholder.update(a,
a.placeholder)},_contactContainers:function(a){for(var j=null,c=null,b=this.containers.length-1;0<=b;b--)if(!d.contains(this.currentItem[0],this.containers[b].element[0]))if(this._intersectsWith(this.containers[b].containerCache)){if(!j||!d.contains(this.containers[b].element[0],j.element[0]))j=this.containers[b],c=b}else this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",a,this._uiHash(this)),this.containers[b].containerCache.over=0);if(j)if(1===this.containers.length)this.containers[c]._trigger("over",
a,this._uiHash(this)),this.containers[c].containerCache.over=1;else if(this.currentContainer!=this.containers[c]){for(var j=1E4,b=null,f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;0<=g;g--)if(d.contains(this.containers[c].element[0],this.items[g].item[0])){var k=this.containers[c].floating?this.items[g].item.offset().left:this.items[g].item.offset().top;Math.abs(k-f)<j&&(j=Math.abs(k-f),b=this.items[g],this.direction=0<k-f?"down":"up")}if(b||this.options.dropOnEmpty)this.currentContainer=
this.containers[c],b?this._rearrange(a,b,null,!0):this._rearrange(a,null,this.containers[c].element,!0),this._trigger("change",a,this._uiHash()),this.containers[c]._trigger("change",a,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",a,this._uiHash(this)),this.containers[c].containerCache.over=1}},_createHelper:function(a){var j=this.options,a=d.isFunction(j.helper)?d(j.helper.apply(this.element[0],[a,this.currentItem])):
"clone"==j.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||d("parent"!=j.appendTo?j.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==a[0].style.width||j.forceHelperSize)&&a.width(this.currentItem.width());(""==a[0].style.height||
j.forceHelperSize)&&a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.contains(this.scrollParent[0],this.offsetParent[0]))&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d("document"==a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(d("document"==a.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var j=d(a.containment)[0],a=d(a.containment).offset(),c="hidden"!=d(j).css("overflow");this.containment=[a.left+(parseInt(d(j).css("borderLeftWidth"),10)||0)+(parseInt(d(j).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(j).css("borderTopWidth"),10)||0)+(parseInt(d(j).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(j.scrollWidth,
j.offsetWidth):j.offsetWidth)-(parseInt(d(j).css("borderLeftWidth"),10)||0)-(parseInt(d(j).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(j.scrollHeight,j.offsetHeight):j.offsetHeight)-(parseInt(d(j).css("borderTopWidth"),10)||0)-(parseInt(d(j).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,j){j||(j=this.position);var c="absolute"==a?1:-1,b="absolute"==this.cssPosition&&!(this.scrollParent[0]!=
document&&d.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(b[0].tagName);return{top:j.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:b.scrollTop())*c,left:j.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:b.scrollLeft())*c}},_generatePosition:function(a){var j=this.options,c="absolute"==this.cssPosition&&
!(this.scrollParent[0]!=document&&d.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,b=/(html|body)/i.test(c[0].tagName);"relative"==this.cssPosition&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=a.pageX,g=a.pageY;if(this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<
this.containment[1]&&(g=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),j.grid))g=this.originalPageY+Math.round((g-this.originalPageY)/j.grid[1])*j.grid[1],g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?
g-j.grid[1]:g+j.grid[1]:g,f=this.originalPageX+Math.round((f-this.originalPageX)/j.grid[0])*j.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-j.grid[0]:f+j.grid[0]:f;return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():b?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():b?0:c.scrollLeft())}},_rearrange:function(a,j,c,b){c?c[0].appendChild(this.placeholder[0]):j.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?j.item[0]:j.item[0].nextSibling);var f=this.counter=this.counter?++this.counter:1;this._delay(function(){f==this.counter&&this.refreshPositions(!b)})},_clear:function(a,j){this.reverting=!1;var c=[];!this._noFinalSort&&this.currentItem.parent().length&&
this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var b in this._storedCSS)if("auto"==this._storedCSS[b]||"static"==this._storedCSS[b])this._storedCSS[b]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!j&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||
this.domPosition.parent!=this.currentItem.parent()[0])&&!j&&c.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&!j&&(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(b=this.containers.length-1;0<=b;b--)j||c.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[b])),this.containers[b].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[b])),this.containers[b].containerCache.over=0);this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!j){this._trigger("beforeStop",
a,this._uiHash());for(b=0;b<c.length;b++)c[b].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}j||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!j){for(b=0;b<c.length;b++)c[b].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(a){var j=a||this;return{helper:j.helper,placeholder:j.placeholder||d([]),position:j.position,originalPosition:j.originalPosition,offset:j.positionAbs,item:j.currentItem,sender:a?a.element:null}}})})(m);(function(d){var a=0,j={},c={};j.height=j.paddingTop=j.paddingBottom=j.borderTopWidth=j.borderBottomWidth="hide";c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="show";d.widget("ui.accordion",{version:"1.9.0",options:{active:0,animate:{},collapsible:!1,
event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.accordionId="ui-accordion-"+(this.element.attr("id")||++a),c=this.options;this.prevShow=this.prevHide=d();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();!c.collapsible&&!1===c.active&&(c.active=0);0>c.active&&(c.active+=this.headers.length);this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.originalHeight=
this.element[0].style.height;this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(a){var c=d(this),f=c.attr("id"),e=c.next(),j=e.attr("id");if(!f){f=b+"-header-"+a;c.attr("id",f)}if(!j){j=b+"-panel-"+a;e.attr("id",j)}c.attr("aria-controls",j);e.attr("aria-labelledby",f)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?
this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(c.event)},_getCreateEventData:function(){return{header:this.active,content:!this.active.length?d():this.active.next()}},_createIcons:function(){var a=this.options.icons;a&&(d("<span>").addClass("ui-accordion-header-icon ui-icon "+a.header).prependTo(this.headers),
this.active.children(".ui-accordion-header-icon").removeClass(a.header).addClass(a.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&(this.element.css("height",this.originalHeight),a.css("height",
""))},_setOption:function(a,c){"active"===a?this._activate(c):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(c)),this._super(a,c),"collapsible"===a&&(!c&&!1===this.options.active)&&this._activate(0),"icons"===a&&(this._destroyIcons(),c&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!c))},_keydown:function(a){if(!a.altKey&&!a.ctrlKey){var c=d.ui.keyCode,g=this.headers.length,k=this.headers.index(a.target),
l=!1;switch(a.keyCode){case c.RIGHT:case c.DOWN:l=this.headers[(k+1)%g];break;case c.LEFT:case c.UP:l=this.headers[(k-1+g)%g];break;case c.SPACE:case c.ENTER:this._eventHandler(a);break;case c.HOME:l=this.headers[0];break;case c.END:l=this.headers[g-1]}l&&(d(a.target).attr("tabIndex",-1),d(l).attr("tabIndex",0),l.focus(),a.preventDefault())}},_panelKeyDown:function(a){a.keyCode===d.ui.keyCode.UP&&a.ctrlKey&&d(a.currentTarget).prev().focus()},refresh:function(){var a,c,g=this.options.heightStyle,k=
this.element.parent();this.element.css("height",this.originalHeight);"fill"===g?(d.support.minHeight||(c=k.css("overflow"),k.css("overflow","hidden")),a=k.height(),this.element.siblings(":visible").each(function(){var c=d(this),e=c.css("position");e==="absolute"||e==="fixed"||(a=a-c.outerHeight(true))}),c&&k.css("overflow",c),this.headers.each(function(){a=a-d(this).outerHeight(true)}),this.headers.next().each(function(){d(this).height(Math.max(0,a-d(this).innerHeight()+d(this).height()))}).css("overflow",
"auto")):"auto"===g&&(a=0,this.headers.next().each(function(){a=Math.max(a,d(this).height("").height())}).height(a));"content"!==g&&this.element.height(this.element.height())},_activate:function(a){a=this._findActive(a)[0];a!==this.active[0]&&(a=a||this.active[0],this._eventHandler({target:a,currentTarget:a,preventDefault:d.noop}))},_findActive:function(a){return"number"===typeof a?this.headers.eq(a):d()},_setupEvents:function(a){var c={};a&&(d.each(a.split(" "),function(a,b){c[b]="_eventHandler"}),
this._on(this.headers,c))},_eventHandler:function(a){var c=this.options,g=this.active,k=d(a.currentTarget),l=k[0]===g[0],e=l&&c.collapsible,j=e?d():k.next(),n=g.next(),j={oldHeader:g,oldPanel:n,newHeader:e?d():k,newPanel:j};a.preventDefault();l&&!c.collapsible||!1===this._trigger("beforeActivate",a,j)||(c.active=e?!1:this.headers.index(k),this.active=l?d():k,this._toggle(j),g.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&g.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),
l||(k.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&k.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),k.next().addClass("ui-accordion-content-active")))},_toggle:function(a){var c=a.newPanel,g=this.prevShow.length?this.prevShow:a.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=g;this.options.animate?this._animate(c,g,a):(g.hide(),c.show(),this._toggleComplete(a));
g.attr({"aria-expanded":"false","aria-hidden":"true"});g.prev().attr("aria-selected","false");c.length&&g.length?g.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return d(this).attr("tabIndex")===0}).attr("tabIndex",-1);c.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,f,g){var k,l,e,d=this,n=0,p=this.options.animate||{},o=a.length&&(!f.length||a.index()<f.index())&&p.down||p,r=function(){d._toggleComplete(g)};
"number"===typeof o&&(e=o);"string"===typeof o&&(l=o);l=l||o.easing||p.easing;e=e||o.duration||p.duration;if(!f.length)return a.animate(c,e,l,r);if(!a.length)return f.animate(j,e,l,r);k=a.show().outerHeight();f.animate(j,{duration:e,easing:l,step:function(a,b){b.now=Math.round(a)}});a.hide().animate(c,{duration:e,easing:l,complete:r,step:function(a,b){b.now=Math.round(a);"height"!==b.prop?n+=b.now:"content"!==d.options.heightStyle&&(b.now=Math.round(k-f.outerHeight()-n),n=0)}})},_toggleComplete:function(a){var c=
a.oldPanel;c.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");c.length&&(c.parent()[0].className=c.parent()[0].className);this._trigger("activate",null,a)}});!1!==d.uiBackCompat&&(function(a,c){a.extend(c.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var g=c._create;c._create=function(){if(this.options.navigation){var c=this,f=this.element.find(this.options.header),e=f.next(),
j=f.add(e).find("a").filter(this.options.navigationFilter)[0];j&&f.add(e).each(function(e){if(a.contains(this,j))return c.options.active=Math.floor(e/2),!1})}g.call(this)}}(m,m.ui.accordion.prototype),function(a,c){a.extend(c.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var g=c._create,k=c._setOption;a.extend(c,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();g.call(this)},_setOption:function(a,b){if("autoHeight"===a||"clearStyle"===
a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();k.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(m,m.ui.accordion.prototype),function(a,c){a.extend(c.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var g=c._createIcons;c._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);
g.call(this)}}(m,m.ui.accordion.prototype),function(a,c){c.activate=c._activate;var g=c._findActive;c._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));return g.call(this,a)}}(m,m.ui.accordion.prototype),m.ui.accordion.prototype.resize=m.ui.accordion.prototype.refresh,function(a,c){a.extend(c.options,{change:null,changestart:null});var g=c._trigger;c._trigger=function(a,b,c){var f=g.apply(this,arguments);if(!f)return!1;"beforeActivate"===
a?f=g.call(this,"changestart",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,newContent:c.newPanel}):"activate"===a&&(f=g.call(this,"change",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,newContent:c.newPanel}));return f}}(m,m.ui.accordion.prototype),function(a,c){a.extend(c.options,{animate:null,animated:"slide"});var g=c._create;c._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?
{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);g.call(this)}}(m,m.ui.accordion.prototype))})(m);(function(d){var a=0;d.widget("ui.autocomplete",{version:"1.9.0",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var a,c,b;this.isMultiLine=this._isMultiLine();
this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on({keydown:function(f){if(this.element.prop("readOnly"))c=b=a=!0;else{c=b=a=!1;var g=d.ui.keyCode;switch(f.keyCode){case g.PAGE_UP:a=!0;this._move("previousPage",f);break;case g.PAGE_DOWN:a=!0;this._move("nextPage",f);break;case g.UP:a=!0;this._keyEvent("previous",f);break;case g.DOWN:a=!0;this._keyEvent("next",f);break;case g.ENTER:case g.NUMPAD_ENTER:this.menu.active&&
(a=!0,f.preventDefault(),this.menu.select(f));break;case g.TAB:this.menu.active&&this.menu.select(f);break;case g.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(f),f.preventDefault());break;default:c=!0,this._searchTimeout(f)}}},keypress:function(b){if(a)a=!1,b.preventDefault();else if(!c){var g=d.ui.keyCode;switch(b.keyCode){case g.PAGE_UP:this._move("previousPage",b);break;case g.PAGE_DOWN:this._move("nextPage",b);break;case g.UP:this._keyEvent("previous",b);break;case g.DOWN:this._keyEvent("next",
b)}}},input:function(a){b?(b=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=d("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:d(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,
{mousedown:function(a){a.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var b=this.menu.element[0];d(a.target).closest(".ui-menu-item").length||this._delay(function(){var a=this;this.document.one("mousedown",function(c){c.target!==a.element[0]&&(c.target!==b&&!d.contains(b,c.target))&&a.close()})})},menufocus:function(a,b){if(this.isNewMenu&&(this.isNewMenu=!1,a.originalEvent&&/^mouse/.test(a.originalEvent.type))){this.menu.blur();this.document.one("mousemove",
function(){d(a.target).trigger(a.originalEvent)});return}var c=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete");!1!==this._trigger("focus",a,{item:c})?a.originalEvent&&/^key/.test(a.originalEvent.type)&&this._value(c.value):this.liveRegion.text(c.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete"),l=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=l,this._delay(function(){this.previous=
l;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);this.selectedItem=c}});this.liveRegion=d("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);d.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");
this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,c){this._super(a,c);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this.document.find(c||"body")[0]);"disabled"===a&&(c&&this.xhr)&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var a,c,b=this;d.isArray(this.options.source)?(a=this.options.source,this.source=function(b,c){c(d.ui.autocomplete.filter(a,
b.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(a,g){b.xhr&&b.xhr.abort();b.xhr=d.ajax({url:c,data:a,dataType:"json",success:function(a){g(a)},error:function(){g([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,c){a=null!=a?a:this._value();this.term=this._value();
if(a.length<this.options.minLength)return this.close(c);if(!1!==this._trigger("search",c))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var j=this,c=++a;return function(b){c===a&&j.__response(b);j.pending--;j.pending||j.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});
!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:d.map(a,function(a){return"string"===
typeof a?{label:a,value:a}:d.extend({label:a.label||a.value,value:a.value||a.label},a)})},_suggest:function(a){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,a);this.menu.refresh();c.show();this._resizeMenu();c.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,c){var b=
this;d.each(c,function(c,g){b._renderItemData(a,g)})},_renderItemData:function(a,c){return this._renderItem(a,c).data("ui-autocomplete-item",c)},_renderItem:function(a,c){return d("<li>").append(d("<a>").text(c.label)).appendTo(a)},_move:function(a,c){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](c);else this.search(null,c)},widget:function(){return this.menu.element},
_value:function(a){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,c){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,c),c.preventDefault()}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(a,c){var b=RegExp(d.ui.autocomplete.escapeRegex(c),"i");return d.grep(a,function(a){return b.test(a.label||a.value||a)})}});d.widget("ui.autocomplete",d.ui.autocomplete,{options:{messages:{noResults:"No search results.",
results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var c;this._superApply(arguments);!this.options.disabled&&!this.cancelSearch&&(c=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(c))}})})(m);(function(d){var a,j,c,b,f=function(){var a=d(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},g=function(a){var b=a.name,c=a.form,f=d([]);
b&&(f=c?d(c).find("[name='"+b+"']"):d("[name='"+b+"']",a.ownerDocument).filter(function(){return!this.form}));return f};d.widget("ui.button",{version:"1.9.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",
this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var k=this,l=this.options,e="checkbox"===this.type||"radio"===this.type,q="ui-state-hover"+(!e?" ui-state-active":"");null===l.label&&(l.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(!l.disabled){d(this).addClass("ui-state-hover");
this===a&&d(this).addClass("ui-state-active")}}).bind("mouseleave"+this.eventNamespace,function(){l.disabled||d(this).removeClass(q)}).bind("click"+this.eventNamespace,function(a){if(l.disabled){a.preventDefault();a.stopImmediatePropagation()}});this.element.bind("focus"+this.eventNamespace,function(){k.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){k.buttonElement.removeClass("ui-state-focus")});e&&(this.element.bind("change"+this.eventNamespace,function(){b||
k.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){if(!l.disabled){b=false;j=a.pageX;c=a.pageY}}).bind("mouseup"+this.eventNamespace,function(a){if(!l.disabled&&(j!==a.pageX||c!==a.pageY))b=true}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(l.disabled||b)return false;d(this).toggleClass("ui-state-active");k.buttonElement.attr("aria-pressed",k.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,
function(){if(l.disabled||b)return false;d(this).addClass("ui-state-active");k.buttonElement.attr("aria-pressed","true");var a=k.element[0];g(a).not(a).map(function(){return d(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(l.disabled)return false;d(this).addClass("ui-state-active");a=this;k.document.one("mouseup",function(){a=null})}).bind("mouseup"+this.eventNamespace,function(){if(l.disabled)return false;
d(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(l.disabled)return false;(a.keyCode===d.ui.keyCode.SPACE||a.keyCode===d.ui.keyCode.ENTER)&&d(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){d(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===d.ui.keyCode.SPACE&&d(this).click()}));this._setOption("disabled",l.disabled);this._resetButton()},_determineButtonType:function(){var a,
b;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),
(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?g(this.element[0]).each(function(){d(this).is(":checked")?d(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):d(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
b=d("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),c=this.options.icons,f=c.primary&&c.secondary,g=[];c.primary||c.secondary?(this.options.text&&g.push("ui-button-text-icon"+(f?"s":c.primary?"-primary":"-secondary")),c.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+c.primary+"'></span>"),c.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+c.secondary+"'></span>"),this.options.text||(g.push(f?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||a.attr("title",d.trim(b)))):g.push("ui-button-text-only");a.addClass(g.join(" "))}}});d.widget("ui.buttonset",{version:"1.9.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var a=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return d(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return d(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(m);
(function(d,a){function j(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};d.extend(this._defaults,this.regional[""]);this.dpDiv=c(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function c(a){return a.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){d(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&d(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&d(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){if(!d.datepicker._isDisabledDatepicker(g.inline?a.parent()[0]:g.input[0]))d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
d(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&d(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&d(this).addClass("ui-datepicker-next-hover")})}function b(b,c){d.extend(b,c);for(var e in c)if(null==c[e]||c[e]==a)b[e]=c[e];return b}d.extend(d.ui,{datepicker:{version:"1.9.0"}});var f=(new Date).getTime(),g;d.extend(j.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){b(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null,f;for(f in this._defaults){var g=a.getAttribute("date:"+f);if(g){c=c||{};try{c[f]=eval(g)}catch(j){c[f]=g}}}f=a.nodeName.toLowerCase();g="div"==f||"span"==f;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var o=this._newInst(d(a),g);o.settings=d.extend({},b||{},c||{});"input"==f?this._connectDatepicker(a,o):g&&this._inlineDatepicker(a,o)},_newInst:function(a,
b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:c(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,c,e){b.settings[c]=e}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),f=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[f?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");("focus"==
c||"both"==c)&&a.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:g,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==g?c:d("<img/>").attr({src:g,alt:c,title:c})));a[f?"before":"after"](b.trigger);b.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0])d.datepicker._hideDatepicker();
else{d.datepicker._datepickerShowing&&d.datepicker._lastInput!=a[0]&&d.datepicker._hideDatepicker();d.datepicker._showDatepicker(a[0])}return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var f=function(a){for(var b=0,c=0,e=0;e<a.length;e++)a[e].length>b&&(b=a[e].length,c=e);return c};b.setMonth(f(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(f(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,e){b.settings[c]=e}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),
b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,c,e,f,g){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a));b(a.settings,f||{});c=c&&c.constructor==Date?this._formatDate(a,c):c;this._dialogInput.val(c);
this._pos=g?g.length?g:[g.pageX,g.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=e;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);
d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var f=a.nodeName.toLowerCase();d.removeData(a,"datepicker");"input"==f?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==f||"span"==f)&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var f=a.nodeName.toLowerCase();if("input"==f)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==f||"span"==f)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=d.map(this._disabledInputs,
function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var f=a.nodeName.toLowerCase();if("input"==f)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==f||"span"==f)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,f,e){var g=this._getInst(c);if(2==arguments.length&&"string"==typeof f)return"defaults"==
f?d.extend({},d.datepicker._defaults):g?"all"==f?d.extend({},g.settings):this._get(g,f):null;var j=f||{};"string"==typeof f&&(j={},j[f]=e);if(g){this._curInst==g&&this._hideDatepicker();var p=this._getDateDatepicker(c,!0),o=this._getMinMaxDate(g,"min"),r=this._getMinMaxDate(g,"max");b(g.settings,j);null!==o&&(j.dateFormat!==a&&j.minDate===a)&&(g.settings.minDate=this._formatDate(g,o));null!==r&&(j.dateFormat!==a&&j.maxDate===a)&&(g.settings.maxDate=this._formatDate(g,r));this._attachments(d(c),g);
this._autoSize(g);this._setDate(g,p);this._updateAlternate(g);this._updateDatepicker(g)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=
d.datepicker._getInst(a.target),c=!0,f=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),
!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,f?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,f?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,
a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(b){var c=d.datepicker._getInst(b.target);if(d.datepicker._get(c,"constrainInput")){var c=d.datepicker._possibleChars(d.datepicker._get(c,"dateFormat")),e=String.fromCharCode(b.charCode==
a?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||" ">e||!c||-1<c.indexOf(e)}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a)))d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a)}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&
(a=d("input",a.parentNode)[0]);if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var c=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=c&&(d.datepicker._curInst.dpDiv.stop(!0,!0),c&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0]));var e=d.datepicker._get(c,"beforeShow"),e=e?e.apply(a,[a,c]):{};if(!1!==e){b(c.settings,e);c.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(c);d.datepicker._inDialog&&
(a.value="");d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var f=!1;d(a).parents().each(function(){f=f|d(this).css("position")=="fixed";return!f});e={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(c);e=d.datepicker._checkOffset(c,e,f);c.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":f?"fixed":
"absolute",display:"none",left:e.left+"px",top:e.top+"px"});if(!c.inline){var e=d.datepicker._get(c,"showAnim"),g=d.datepicker._get(c,"duration"),j=function(){var a=c.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var b=d.datepicker._getBorders(c.dpDiv);a.css({left:-b[0],top:-b[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=!0;if(d.effects&&(d.effects.effect[e]||d.effects[e]))c.dpDiv.show(e,d.datepicker._get(c,
"showOptions"),g,j);else c.dpDiv[e||"show"](e?g:null,j);(!e||!g)&&j();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();d.datepicker._curInst=c}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);g=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+
" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&(d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=
document.activeElement)&&a.input.focus();if(a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var f=a.dpDiv.outerWidth(),g=a.dpDiv.outerHeight(),j=a.input?a.input.outerWidth():
0,o=a.input?a.input.outerHeight():0,r=document.documentElement.clientWidth+(c?0:d(document).scrollLeft()),m=document.documentElement.clientHeight+(c?0:d(document).scrollTop());b.left-=this._get(a,"isRTL")?f-j:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+o?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+f>r&&r>f?Math.abs(b.left+f-r):0);b.top-=Math.min(b.top,b.top+g>m&&m>g?Math.abs(g+o):0);return b},_findPos:function(a){for(var b=
this._get(this._getInst(a),"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){var a=this._get(b,"showAnim"),c=this._get(b,"duration"),f=function(){d.datepicker._tidyDialog(b)};if(d.effects&&(d.effects.effect[a]||d.effects[a]))b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,f);else b.dpDiv["slideDown"==
a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,f);a||f();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(d.datepicker._curInst){var a=
d(a.target),b=d.datepicker._getInst(a[0]);(a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||a.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=b)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var a=d(a),f=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(f,
b+("M"==c?this._get(f,"showCurrentAtPos"):0),c),this._updateDatepicker(f))},_gotoToday:function(a){var a=d(a),b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){var a=d(a),
f=this._getInst(a[0]);f["selected"+("M"==c?"Month":"Year")]=f["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(a)},_selectDay:function(a,b,c,f){var g=d(a);!d(f).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(g[0])&&(g=this._getInst(g[0]),g.selectedDay=g.currentDay=d("a",f).html(),g.selectedMonth=g.currentMonth=b,g.selectedYear=g.currentYear=c,this._selectDate(a,this._formatDate(g,g.currentDay,g.currentMonth,g.currentYear)))},
_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){var c=this._getInst(d(a)[0]),b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);var f=this._get(c,"onSelect");f?f.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=
this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),f=this._getDate(a),g=this.formatDate(c,f,this._getFormatConfig(a));d(b).each(function(){d(this).val(g)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";
b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var f=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f="string"!=typeof f?f:(new Date).getFullYear()%100+parseInt(f,10),g=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,j=(c?c.dayNames:null)||this._defaults.dayNames,o=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,r=(c?c.monthNames:null)||this._defaults.monthNames,m=c=-1,v=-1,u=-1,t=!1,x=function(b){(b=H+1<a.length&&a.charAt(H+1)==b)&&H++;return b},y=function(a){var c=
x(a),a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(F).match(a);if(!a)throw"Missing number at position "+F;F+=a[0].length;return parseInt(a[0],10)},z=function(a,c,e){var a=d.map(x(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;d.each(a,function(a,c){var e=c[1];if(b.substr(F,e.length).toLowerCase()==e.toLowerCase())return f=c[0],F+=e.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+F;},A=function(){if(b.charAt(F)!=
a.charAt(H))throw"Unexpected literal at position "+F;F++},F=0,H=0;H<a.length;H++)if(t)"'"==a.charAt(H)&&!x("'")?t=!1:A();else switch(a.charAt(H)){case "d":v=y("d");break;case "D":z("D",g,j);break;case "o":u=y("o");break;case "m":m=y("m");break;case "M":m=z("M",o,r);break;case "y":c=y("y");break;case "@":var D=new Date(y("@")),c=D.getFullYear(),m=D.getMonth()+1,v=D.getDate();break;case "!":D=new Date((y("!")-this._ticksTo1970)/1E4);c=D.getFullYear();m=D.getMonth()+1;v=D.getDate();break;case "'":x("'")?
A():t=!0;break;default:A()}if(F<b.length&&(g=b.substr(F),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=f?0:-100));if(-1<u){m=1;v=u;do{f=this._getDaysInMonth(c,m-1);if(v<=f)break;m++;v-=f}while(1)}D=this._daylightSavingAdjust(new Date(c,m-1,v));if(D.getFullYear()!=c||D.getMonth()+1!=m||D.getDate()!=v)throw"Invalid date";return D},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,g=(c?c.dayNames:null)||this._defaults.dayNames,j=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,c=(c?c.monthNames:null)||this._defaults.monthNames,d=
function(b){(b=t+1<a.length&&a.charAt(t+1)==b)&&t++;return b},r=function(a,b,c){b=""+b;if(d(a))for(;b.length<c;)b="0"+b;return b},m=function(a,b,c,e){return d(a)?e[b]:c[b]},v="",u=!1;if(b)for(var t=0;t<a.length;t++)if(u)"'"==a.charAt(t)&&!d("'")?u=!1:v+=a.charAt(t);else switch(a.charAt(t)){case "d":v+=r("d",b.getDate(),2);break;case "D":v+=m("D",b.getDay(),f,g);break;case "o":v+=r("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":v+=r("m",b.getMonth()+1,2);break;case "M":v+=m("M",b.getMonth(),j,c);break;case "y":v+=d("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":v+=b.getTime();break;case "!":v+=1E4*b.getTime()+this._ticksTo1970;break;case "'":d("'")?v+="'":u=!0;break;default:v+=a.charAt(t)}return v},_possibleChars:function(a){for(var b="",c=!1,f=function(b){(b=g+1<a.length&&a.charAt(g+1)==b)&&g++;return b},g=0;g<a.length;g++)if(c)"'"==a.charAt(g)&&!f("'")?c=!1:b+=
a.charAt(g);else switch(a.charAt(g)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":f("'")?b+="'":c=!0;break;default:b+=a.charAt(g)}return b},_get:function(b,c){return b.settings[c]!==a?b.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null,g,d;g=d=this._getDefaultDate(a);var j=this._getFormatConfig(a);try{g=this.parseDate(c,f,j)||d}catch(r){this.log(r),
f=b?"":f}a.selectedDay=g.getDate();a.drawMonth=a.selectedMonth=g.getMonth();a.drawYear=a.selectedYear=g.getFullYear();a.currentDay=f?g.getDate():0;a.currentMonth=f?g.getMonth():0;a.currentYear=f?g.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var f=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},g=function(b){try{return d.datepicker.parseDate(d.datepicker._get(a,
"dateFormat"),b,d.datepicker._getFormatConfig(a))}catch(c){}for(var e=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),l=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=l.exec(b);j;){switch(j[2]||"d"){case "d":case "D":e+=parseInt(j[1],10);break;case "w":case "W":e+=7*parseInt(j[1],10);break;case "m":case "M":g+=parseInt(j[1],10);e=Math.min(e,d.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(j[1],10),e=Math.min(e,d.datepicker._getDaysInMonth(f,
g))}j=l.exec(b)}return new Date(f,g,e)};if(b=(b=null==b||""===b?c:"string"==typeof b?g(b):"number"==typeof b?isNaN(b)?c:f(b):new Date(b.getTime()))&&"Invalid Date"==b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var f=!b,g=a.selectedMonth,j=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,
b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(g!=a.selectedMonth||j!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(f?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,
"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){d(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+f].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+f].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+f].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+f].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+f].datepicker._selectDay(c,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),c=this._get(a,"isRTL"),f=this._get(a,"showButtonPanel"),g=this._get(a,"hideIfNoPrevNext"),j=this._get(a,
"navigationAsDateFormat"),o=this._getNumberOfMonths(a),r=this._get(a,"showCurrentAtPos"),m=this._get(a,"stepMonths"),v=1!=o[0]||1!=o[1],u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),t=this._getMinMaxDate(a,"min"),x=this._getMinMaxDate(a,"max"),r=a.drawMonth-r,y=a.drawYear;0>r&&(r+=12,y--);if(x)for(var z=this._daylightSavingAdjust(new Date(x.getFullYear(),x.getMonth()-o[0]*o[1]+1,x.getDate())),z=t&&z<t?t:z;this._daylightSavingAdjust(new Date(y,
r,1))>z;)r--,0>r&&(r=11,y--);a.drawMonth=r;a.drawYear=y;var z=this._get(a,"prevText"),z=!j?z:this.formatDate(z,this._daylightSavingAdjust(new Date(y,r-m,1)),this._getFormatConfig(a)),z=this._canAdjustMonth(a,-1,y,r)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+z+"</span></a>":g?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+z+"</span></a>",A=this._get(a,"nextText"),A=!j?A:this.formatDate(A,this._daylightSavingAdjust(new Date(y,r+m,1)),this._getFormatConfig(a)),g=this._canAdjustMonth(a,1,y,r)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+A+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+A+"</span></a>":g?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+A+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":
"e")+'">'+A+"</span></a>",m=this._get(a,"currentText"),A=this._get(a,"gotoCurrent")&&a.currentDay?u:b,m=!j?m:this.formatDate(m,A,this._getFormatConfig(a)),j=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>":"",f=f?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?j:"")+(this._isInRange(a,A)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
m+"</button>":"")+(c?"":j)+"</div>":"",j=parseInt(this._get(a,"firstDay"),10),j=isNaN(j)?0:j,m=this._get(a,"showWeek"),A=this._get(a,"dayNames");this._get(a,"dayNamesShort");var F=this._get(a,"dayNamesMin"),H=this._get(a,"monthNames"),D=this._get(a,"monthNamesShort"),Q=this._get(a,"beforeShowDay"),E=this._get(a,"showOtherMonths"),B=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var T=this._getDefaultDate(a),W="",O=0;O<o[0];O++){var U="";this.maxRows=4;for(var G=0;G<o[1];G++){var S=
this._daylightSavingAdjust(new Date(y,r,a.selectedDay)),I=" ui-corner-all",P="";if(v){P+='<div class="ui-datepicker-group';if(1<o[1])switch(G){case 0:P+=" ui-datepicker-group-first";I=" ui-corner-"+(c?"right":"left");break;case o[1]-1:P+=" ui-datepicker-group-last";I=" ui-corner-"+(c?"left":"right");break;default:P+=" ui-datepicker-group-middle",I=""}P+='">'}for(var P=P+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+I+'">'+(/all|left/.test(I)&&0==O?c?g:z:"")+(/all|right/.test(I)&&
0==O?c?z:g:"")+this._generateMonthYearHeader(a,r,y,t,x,0<O||0<G,H,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),Z=m?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",I=0;7>I;I++)var Y=(I+j)%7,Z=Z+("<th"+(5<=(I+j+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+A[Y]+'">'+F[Y]+"</span></th>");P+=Z+"</tr></thead><tbody>";Z=this._getDaysInMonth(y,r);y==a.selectedYear&&r==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,Z));I=(this._getFirstDayOfMonth(y,
r)-j+7)%7;Z=Math.ceil((I+Z)/7);this.maxRows=Z=v?this.maxRows>Z?this.maxRows:Z:Z;for(var Y=this._daylightSavingAdjust(new Date(y,r,1-I)),ba=0;ba<Z;ba++){for(var P=P+"<tr>",ua=!m?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>",I=0;7>I;I++){var X=Q?Q.apply(a.input?a.input[0]:null,[Y]):[!0,""],L=Y.getMonth()!=r,J=L&&!B||!X[0]||t&&Y<t||x&&Y>x,ua=ua+('<td class="'+(5<=(I+j+6)%7?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(Y.getTime()==S.getTime()&&
r==a.selectedMonth&&a._keyEvent||T.getTime()==Y.getTime()&&T.getTime()==S.getTime()?" "+this._dayOverClass:"")+(J?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!E?"":" "+X[1]+(Y.getTime()==u.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!L||E)&&X[2]?' title="'+X[2]+'"':"")+(J?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth()+'" data-year="'+Y.getFullYear()+'"')+">"+(L&&!E?"&#xa0;":J?'<span class="ui-state-default">'+
Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==u.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>");Y.setDate(Y.getDate()+1);Y=this._daylightSavingAdjust(Y)}P+=ua+"</tr>"}r++;11<r&&(r=0,y++);P+="</tbody></table>"+(v?"</div>"+(0<o[0]&&G==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");U+=P}W+=U}W+=f+(d.browser.msie&&7>parseInt(d.browser.version,10)&&!a.inline?
'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=!1;return W},_generateMonthYearHeader:function(a,b,c,f,g,j,d,r){var m=this._get(a,"changeMonth"),v=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),t='<div class="ui-datepicker-title">',x="";if(j||!m)x+='<span class="ui-datepicker-month">'+d[b]+"</span>";else{for(var d=f&&f.getFullYear()==c,y=g&&g.getFullYear()==c,x=x+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
z=0;12>z;z++)if((!d||z>=f.getMonth())&&(!y||z<=g.getMonth()))x+='<option value="'+z+'"'+(z==b?' selected="selected"':"")+">"+r[z]+"</option>";x+="</select>"}u||(t+=x+(j||!m||!v?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",j||!v)t+='<span class="ui-datepicker-year">'+c+"</span>";else{var r=this._get(a,"yearRange").split(":"),A=(new Date).getFullYear(),d=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?A+parseInt(a,10):parseInt(a,10);return isNaN(a)?A:a},b=d(r[0]),
r=Math.max(b,d(r[1]||"")),b=f?Math.max(b,f.getFullYear()):b,r=g?Math.min(r,g.getFullYear()):r;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=r;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";t+=a.yearshtml;a.yearshtml=null}t+=this._get(a,"yearSuffix");u&&(t+=(j||!m||!v?"&#xa0;":"")+x);return t+"</div>"},_adjustInstDate:function(a,b,c){var f=a.drawYear+("Y"==c?b:0),g=a.drawMonth+
("M"==c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(f,g))+("D"==c?b:0),f=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(f,g,b)));a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return f&&c>f?f:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,f){var g=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,
f+(0>b?b:g[0]*g[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!f||b.getTime()<=f.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,f){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(f,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;
d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find(document.body).append(d.datepicker.dpDiv),d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,
[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new j;d.datepicker.initialized=!1;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.9.0";window["DP_jQuery_"+f]=d})(m);(function(d,a){var j={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};d.widget("ui.dialog",{version:"1.9.0",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,
height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var c=d(this).css(a).offset().top;0>c&&d(this).css("top",a.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.options.title=this.options.title||this.originalTitle;var a=this,c=this.options,g=c.title||"&#160;",k=(this.uiDialog=d("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({display:"none",outline:0,zIndex:c.zIndex}).attr("tabIndex",-1).keydown(function(e){if(c.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===d.ui.keyCode.ESCAPE){a.close(e);e.preventDefault()}}).mousedown(function(c){a.moveToTop(false,c)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(k);
var j=(this.uiDialogTitlebar=d("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(k),e=d("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(c){c.preventDefault();a.close(c)}).appendTo(j);(this.uiDialogTitlebarCloseText=d("<span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(e);var g=d("<span>").uniqueId().addClass("ui-dialog-title").html(g).prependTo(j),q=(this.uiDialogButtonPane=
d("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=d("<div>")).addClass("ui-dialog-buttonset").appendTo(q);k.attr({role:"dialog","aria-labelledby":g.attr("id")});j.find("*").add(j).disableSelection();this._hoverable(e);this._focusable(e);c.draggable&&d.fn.draggable&&this._makeDraggable();c.resizable&&d.fn.resizable&&this._makeResizable();this._createButtons(c.buttons);this._isOpen=!1;d.fn.bgiframe&&k.bgiframe();this._on(k,{keydown:function(a){if(c.modal&&
a.keyCode===d.ui.keyCode.TAB){var b=d(":tabbable",k),e=b.filter(":first"),b=b.filter(":last");if(a.target===b[0]&&!a.shiftKey){e.focus(1);return false}if(a.target===e[0]&&a.shiftKey){b.focus(1);return false}}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,c=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",
this.originalTitle);a=c.parent.children().eq(c.index);a.length&&a[0]!==this.element[0]?a.before(this.element):c.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(a){var c=this,g,k;if(this._isOpen&&!1!==this._trigger("beforeClose",a))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this.uiDialog.hide(this.options.hide,function(){c._trigger("close",a)}):(this.uiDialog.hide(),this._trigger("close",a)),d.ui.dialog.overlay.resize(),this.options.modal&&
(g=0,d(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){k=d(this).css("z-index");isNaN(k)||(g=Math.max(g,k))}}),d.ui.dialog.maxZ=g),this},isOpen:function(){return this._isOpen},moveToTop:function(a,c){var g=this.options;if(g.modal&&!a||!g.stack&&!g.modal)return this._trigger("focus",c);g.zIndex>d.ui.dialog.maxZ&&(d.ui.dialog.maxZ=g.zIndex);this.overlay&&(d.ui.dialog.maxZ+=1,d.ui.dialog.overlay.maxZ=d.ui.dialog.maxZ,this.overlay.$el.css("z-index",d.ui.dialog.overlay.maxZ));g={scrollTop:this.element.scrollTop(),
scrollLeft:this.element.scrollLeft()};d.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",d.ui.dialog.maxZ);this.element.attr(g);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var a;a=this.options;var c=this.uiDialog;this._size();this._position(a.position);c.show(a.show);this.overlay=a.modal?new d.ui.dialog.overlay(this):null;this.moveToTop(!0);a=this.element.find(":tabbable");a.length||(a=this.uiDialogButtonPane.find(":tabbable"),a.length||(a=c));a.eq(0).focus();this._isOpen=
!0;this._trigger("open");return this}},_createButtons:function(a){var c=this,g=!1;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();"object"===typeof a&&null!==a&&d.each(a,function(){return!(g=!0)});g?(d.each(a,function(a,b){var b=d.isFunction(b)?{click:b,text:a}:b,e=d("<button type='button'>").attr(b,!0).unbind("click").click(function(){b.click.apply(c.element[0],arguments)}).appendTo(c.uiButtonSet);d.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):
this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function a(b){return{position:b.position,offset:b.offset}}var c=this,g=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(g,j){d(this).addClass("ui-dialog-dragging");c._trigger("dragStart",g,a(j))},drag:function(g,j){c._trigger("drag",g,a(j))},stop:function(k,j){g.position=[j.position.left-c.document.scrollLeft(),j.position.top-
c.document.scrollTop()];d(this).removeClass("ui-dialog-dragging");c._trigger("dragStop",k,a(j));d.ui.dialog.overlay.resize()}})},_makeResizable:function(b){function c(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var b=b===a?this.options.resizable:b,g=this,k=this.options,j=this.uiDialog.css("position"),b="string"===typeof b?b:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,
maxWidth:k.maxWidth,maxHeight:k.maxHeight,minWidth:k.minWidth,minHeight:this._minHeight(),handles:b,start:function(a,b){d(this).addClass("ui-dialog-resizing");g._trigger("resizeStart",a,c(b))},resize:function(a,b){g._trigger("resize",a,c(b))},stop:function(a,b){d(this).removeClass("ui-dialog-resizing");k.height=d(this).height();k.width=d(this).width();g._trigger("resizeStop",a,c(b));d.ui.dialog.overlay.resize()}}).css("position",j).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},
_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var c=[],g=[0,0],k;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)c=a.split?a.split(" "):[a[0],a[1]],1===c.length&&(c[1]=c[0]),d.each(["left","top"],function(a,b){+c[a]===c[a]&&(g[a]=c[a],c[a]=b)}),a={my:c.join(" "),at:c.join(" "),offset:g.join(" ")};a=d.extend({},d.ui.dialog.prototype.options.position,a)}else a=d.ui.dialog.prototype.options.position;(k=this.uiDialog.is(":visible"))||
this.uiDialog.show();this.uiDialog.position(a);k||this.uiDialog.hide()},_setOptions:function(a){var f=this,g={},k=!1;d.each(a,function(a,b){f._setOption(a,b);a in j&&(k=!0);a in c&&(g[a]=b)});k&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,c){var g,k=this.uiDialog;switch(a){case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":k.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
c);break;case "disabled":c?k.addClass("ui-dialog-disabled"):k.removeClass("ui-dialog-disabled");break;case "draggable":(g=k.is(":data(draggable)"))&&!c&&k.draggable("destroy");!g&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(g=k.is(":data(resizable)"))&&!c&&k.resizable("destroy");g&&"string"===typeof c&&k.resizable("option","handles",c);!g&&!1!==c&&this._makeResizable(c);break;case "title":d(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}this._super(a,
c)},_size:function(){var a,c,g=this.options,k=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});g.minWidth>g.width&&(g.width=g.minWidth);a=this.uiDialog.css({height:"auto",width:g.width}).outerHeight();c=Math.max(0,g.minHeight-a);"auto"===g.height?d.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),a=this.element.css("height","auto").height(),k||this.uiDialog.hide(),this.element.height(Math.max(a,c))):this.element.height(Math.max(g.height-
a,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});d.extend(d.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(a){this.$el=d.ui.dialog.overlay.create(a)}});d.extend(d.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:d.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){0===
this.instances.length&&(setTimeout(function(){d.ui.dialog.overlay.instances.length&&d(document).bind(d.ui.dialog.overlay.events,function(a){if(d(a.target).zIndex()<d.ui.dialog.overlay.maxZ)return!1})},1),d(window).bind("resize.dialog-overlay",d.ui.dialog.overlay.resize));var c=this.oldInstances.pop()||d("<div>").addClass("ui-widget-overlay");d(document).bind("keydown.dialog-overlay",function(g){var k=d.ui.dialog.overlay.instances;if(k.length!==0&&k[k.length-1]===c&&a.options.closeOnEscape&&!g.isDefaultPrevented()&&
g.keyCode&&g.keyCode===d.ui.keyCode.ESCAPE){a.close(g);g.preventDefault()}});c.appendTo(document.body).css({width:this.width(),height:this.height()});d.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(a){var c=d.inArray(a,this.instances),g=0;-1!==c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&d([document,window]).unbind(".dialog-overlay");a.height(0).width(0).remove();d.each(this.instances,function(){g=Math.max(g,this.css("z-index"))});
this.maxZ=g},height:function(){var a,c;return d.browser.msie?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<c?d(window).height()+"px":a+"px"):d(document).height()+"px"},width:function(){var a,c;return d.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<c?d(window).width()+"px":
a+"px"):d(document).width()+"px"},resize:function(){var a=d([]);d.each(d.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,height:0}).css({width:d.ui.dialog.overlay.width(),height:d.ui.dialog.overlay.height()})}});d.extend(d.ui.dialog.overlay.prototype,{destroy:function(){d.ui.dialog.overlay.destroy(this.$el)}})})(m);(function(d){var a=!1;d.widget("ui.menu",{version:"1.9.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",
at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,d.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");
this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(j){var c=d(j.target).closest(".ui-menu-item");!a&&c.not(".ui-state-disabled").length&&(a=!0,this.select(j),c.has(".ui-menu").length?this.expand(j):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(a){var c=
d(a.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(a,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,c){var b=this.active||this.element.children(".ui-menu-item").eq(0);c||this.focus(a,b)},blur:function(a){this._delay(function(){d.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(a)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(j){d(j.target).closest(".ui-menu").length||
this.collapseAll(j);a=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var a=
d(this);a.data("ui-menu-submenu-carat")&&a.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(a){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var b,f,g,k,l=!0;switch(a.keyCode){case d.ui.keyCode.PAGE_UP:this.previousPage(a);break;case d.ui.keyCode.PAGE_DOWN:this.nextPage(a);break;case d.ui.keyCode.HOME:this._move("first","first",a);break;case d.ui.keyCode.END:this._move("last","last",a);break;case d.ui.keyCode.UP:this.previous(a);
break;case d.ui.keyCode.DOWN:this.next(a);break;case d.ui.keyCode.LEFT:this.collapse(a);break;case d.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(a);break;case d.ui.keyCode.ENTER:case d.ui.keyCode.SPACE:this._activate(a);break;case d.ui.keyCode.ESCAPE:this.collapse(a);break;default:(l=!1,b=this.previousFilter||"",f=String.fromCharCode(a.keyCode),g=!1,clearTimeout(this.filterTimer),f===b?g=!0:f=b+f,k=RegExp("^"+c(f),"i"),b=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(d(this).children("a").text())}),
b=g&&-1!==b.index(this.active.next())?this.active.nextAll(".ui-menu-item"):b,b.length||(f=String.fromCharCode(a.keyCode),k=RegExp("^"+c(f),"i"),b=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(d(this).children("a").text())})),b.length)?(this.focus(a,b),1<b.length?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}l&&a.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||
(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var a,c=this.options.icons.submenu,b=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});a=b.add(this.element);a.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});a.children(":not(.ui-menu-item)").each(function(){var a=d(this);/[^\-—–\s]/.test(a.text())||a.addClass("ui-widget-content ui-menu-divider")});a.children(".ui-state-disabled").attr("aria-disabled","true");b.each(function(){var a=d(this),b=a.prev("a"),k=d("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);b.attr("aria-haspopup","true").prepend(k);a.attr("aria-labelledby",b.attr("id"))});this.active&&!d.contains(this.element[0],this.active[0])&&this.blur()},
_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(a,c){var b;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(c);this.active=c.first();b=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",b.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);
b=c.children(".ui-menu");b.length&&/^mouse/.test(a.type)&&this._startOpening(b);this.activeMenu=c.parent();this._trigger("focus",a,{item:c})},_scrollIntoView:function(a){var c,b,f;this._hasScroll()&&(c=parseFloat(d.css(this.activeMenu[0],"borderTopWidth"))||0,b=parseFloat(d.css(this.activeMenu[0],"paddingTop"))||0,c=a.offset().top-this.activeMenu.offset().top-c-b,b=this.activeMenu.scrollTop(),f=this.activeMenu.height(),a=a.height(),0>c?this.activeMenu.scrollTop(b+c):c+a>f&&this.activeMenu.scrollTop(b+
c-f+a))},blur:function(a,c){c||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(a){var c=d.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(a.parents(".ui-menu")).hide().attr("aria-hidden",
"true");a.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(a,c){clearTimeout(this.timer);this.timer=this._delay(function(){var b=c?this.element:d(a&&a.target).closest(this.element.find(".ui-menu"));b.length||(b=this.element);this._close(b);this.blur(a);this.activeMenu=b},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},
collapse:function(a){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);c&&c.length&&(this._close(),this.focus(a,c))},expand:function(a){var c=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();c&&c.length&&(this._open(c.parent()),this._delay(function(){this.focus(a,c)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,c,b){var f;this.active&&(f="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));if(!f||!f.length||!this.active)f=this.activeMenu.children(".ui-menu-item")[c]();this.focus(b,f)},nextPage:function(a){var c,b,f;this.active?this.isLastItem()||(this._hasScroll()?(b=this.active.offset().top,f=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=
d(this);return 0>c.offset().top-b-f}),this.focus(a,c)):this.focus(a,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())):this.next(a)},previousPage:function(a){var c,b,f;this.active?this.isFirstItem()||(this._hasScroll()?(b=this.active.offset().top,f=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=d(this);return 0<c.offset().top-b+f}),this.focus(a,c)):this.focus(a,this.activeMenu.children(".ui-menu-item").first())):this.next(a)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(a){this.active=this.active||d(a.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(a,!0);this._trigger("select",a,c)}})})(m);(function(d,a){d.widget("ui.progressbar",{version:"1.9.0",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._value()});this.valueDiv=d("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(d){if(d===a)return this._value();this._setOption("value",
d);return this},_setOption:function(a,c){"value"===a&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(a,c)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),c=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>
this.min).toggleClass("ui-corner-right",a===this.options.max).width(c.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}})})(m);(function(d){d.widget("ui.slider",d.ui.mouse,{version:"1.9.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a,j=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),b=j.values&&j.values.length||1,f=[];this._mouseSliding=
this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(j.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(j.range){if(!0===j.range&&(j.values||(j.values=[this._valueMin(),this._valueMin()]),j.values.length&&2!==j.values.length))j.values=[j.values[0],j.values[0]];this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+
("min"===j.range||"max"===j.range?" ui-slider-range-"+j.range:""))}for(a=c.length;a<b;a++)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=c.add(d(f.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){j.disabled||d(this).addClass("ui-state-hover")}).mouseleave(function(){d(this).removeClass("ui-state-hover")}).focus(function(){j.disabled?
d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(a){d(this).data("ui-slider-handle-index",a)});this._on(this.handles,{keydown:function(a){var b,c,e,f=d(a.target).data("ui-slider-handle-index");switch(a.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(a.preventDefault(),
!this._keySliding&&(this._keySliding=!0,d(a.target).addClass("ui-state-active"),b=this._start(a,f),!1===b))return}e=this.options.step;b=this.options.values&&this.options.values.length?c=this.values(f):c=this.value();switch(a.keyCode){case d.ui.keyCode.HOME:c=this._valueMin();break;case d.ui.keyCode.END:c=this._valueMax();break;case d.ui.keyCode.PAGE_UP:c=this._trimAlignValue(b+(this._valueMax()-this._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:c=this._trimAlignValue(b-(this._valueMax()-this._valueMin())/
5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(b===this._valueMax())return;c=this._trimAlignValue(b+e);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(b===this._valueMin())return;c=this._trimAlignValue(b-e)}this._slide(a,f,c)},keyup:function(a){var b=d(a.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(a,b),this._change(a,b),d(a.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();
this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(a){var j,c,b,f,g,k=this;g=this.options;if(g.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();j=this._normValueFromMouse({x:a.pageX,y:a.pageY});c=this._valueMax()-this._valueMin()+1;this.handles.each(function(a){var e=
Math.abs(j-k.values(a));c>e&&(c=e,b=d(this),f=a)});!0===g.range&&this.values(1)===g.min&&(f+=1,b=d(this.handles[f]));if(!1===this._start(a,f))return!1;this._mouseSliding=!0;this._handleIndex=f;b.addClass("ui-state-active").focus();g=b.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-g.left-b.width()/2,top:a.pageY-g.top-b.height()/2-(parseInt(b.css("borderTopWidth"),10)||0)-(parseInt(b.css("borderBottomWidth"),10)||0)+(parseInt(b.css("marginTop"),
10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,f,j);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var d=this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,d);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation=
"vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var d;"horizontal"===this.orientation?(d=this.elementSize.width,a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(d=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));d=a/d;1<d&&(d=1);0>d&&(d=0);"vertical"===this.orientation&&(d=1-d);a=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+d*a)},_start:function(a,
d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());return this._trigger("start",a,c)},_slide:function(a,d,c){var b;if(this.options.values&&this.options.values.length){b=this.values(d?0:1);if(2===this.options.values.length&&!0===this.options.range&&(0===d&&c>b||1===d&&c<b))c=b;c!==this.values(d)&&(b=this.values(),b[d]=c,a=this._trigger("slide",a,{handle:this.handles[d],value:c,values:b}),this.values(d?
0:1),!1!==a&&this.values(d,c,!0))}else c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[d],value:c}),!1!==a&&this.value(c))},_stop:function(a,d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=
this.values(d),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0);else return this._value()},values:function(a,j){var c,b,f;if(1<arguments.length)this.options.values[a]=this._trimAlignValue(j),this._refreshValue(),this._change(null,a);else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;b=arguments[0];for(f=0;f<c.length;f+=1)c[f]=this._trimAlignValue(b[f]),
this._change(null,f);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):this.value();else return this._values()},_setOption:function(a,j){var c,b=0;d.isArray(this.options.values)&&(b=this.options.values.length);d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":j?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",
!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<b;c+=1)this._change(null,c);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},
_values:function(a){var d,c;if(arguments.length)return d=this.options.values[a],d=this._trimAlignValue(d);d=this.options.values.slice();for(c=0;c<d.length;c+=1)d[c]=this._trimAlignValue(d[c]);return d},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var d=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%d,a=a-c;2*Math.abs(c)>=d&&(a+=0<c?d:-d);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},
_valueMax:function(){return this.options.max},_refreshValue:function(){var a,j,c,b,f,g=this.options.range,k=this.options,l=this,e=!this._animateOff?k.animate:!1,q={};if(this.options.values&&this.options.values.length)this.handles.each(function(b){j=100*((l.values(b)-l._valueMin())/(l._valueMax()-l._valueMin()));q["horizontal"===l.orientation?"left":"bottom"]=j+"%";d(this).stop(1,1)[e?"animate":"css"](q,k.animate);if(!0===l.options.range)if("horizontal"===l.orientation){if(0===b)l.range.stop(1,1)[e?
"animate":"css"]({left:j+"%"},k.animate);if(1===b)l.range[e?"animate":"css"]({width:j-a+"%"},{queue:!1,duration:k.animate})}else{if(0===b)l.range.stop(1,1)[e?"animate":"css"]({bottom:j+"%"},k.animate);if(1===b)l.range[e?"animate":"css"]({height:j-a+"%"},{queue:!1,duration:k.animate})}a=j});else{c=this.value();b=this._valueMin();f=this._valueMax();j=f!==b?100*((c-b)/(f-b)):0;q["horizontal"===this.orientation?"left":"bottom"]=j+"%";this.handle.stop(1,1)[e?"animate":"css"](q,k.animate);if("min"===g&&
"horizontal"===this.orientation)this.range.stop(1,1)[e?"animate":"css"]({width:j+"%"},k.animate);if("max"===g&&"horizontal"===this.orientation)this.range[e?"animate":"css"]({width:100-j+"%"},{queue:!1,duration:k.animate});if("min"===g&&"vertical"===this.orientation)this.range.stop(1,1)[e?"animate":"css"]({height:j+"%"},k.animate);if("max"===g&&"vertical"===this.orientation)this.range[e?"animate":"css"]({height:100-j+"%"},{queue:!1,duration:k.animate})}}})})(m);(function(d){function a(a){return function(){var c=
this.element.val();a.apply(this,arguments);this._refresh();c!==this.element.val()&&this._trigger("change")}}d.widget("ui.spinner",{version:"1.9.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",
this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var a={},c=this.element;d.each(["min","max","step"],function(b,f){var g=c.attr(f);void 0!==g&&g.length&&(a[f]=g)});return a},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");
this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",a))},mousewheel:function(a,c){if(c){if(!this.spinning&&!this._start(a))return!1;this._spin((0<c?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(a){function c(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=b,this._delay(function(){this.previous=b}))}var b;b=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();a.preventDefault();c.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;c.call(this)});!1!==this._start(a)&&this._repeat(null,d(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(a){if(d(a.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(a))return!1;this._repeat(null,d(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(a);this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(0.5*
a.height())&&0<a.height()&&a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(a){var c=this.options,b=d.ui.keyCode;switch(a.keyCode){case b.UP:return this._repeat(null,1,a),!0;case b.DOWN:return this._repeat(null,-1,a),!0;case b.PAGE_UP:return this._repeat(null,c.page,a),!0;case b.PAGE_DOWN:return this._repeat(null,-c.page,a),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&!1===this._trigger("start",a))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(a,c,b){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,c,b)},a);this._spin(c*this.options.step,b)},_spin:function(a,c){var b=this.value()||0;this.counter||
(this.counter=1);b=this._adjustValue(b+a*this._increment(this.counter));if(!this.spinning||!1!==this._trigger("spin",c,{value:b}))this._value(b),this.counter++},_increment:function(a){var c=this.options.incremental;return c?d.isFunction(c)?c(a):Math.floor(a*a*a/5E4-a*a/500+17*a/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){var a=a.toString(),c=a.indexOf(".");
return-1===c?0:a.length-c-1},_adjustValue:function(a){var c,b=this.options;c=null!==b.min?b.min:0;a=Math.round((a-c)/b.step)*b.step;a=parseFloat((c+a).toFixed(this._precision()));return null!==b.max&&a>b.max?b.max:null!==b.min&&a<b.min?b.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,c){if("culture"===a||"numberFormat"===a){var b=this._parse(this.element.val());this.options[a]=
c;this.element.val(this._format(b))}else{if("max"===a||"min"===a||"step"===a)"string"===typeof c&&(c=this._parse(c));this._super(a,c);"disabled"===a&&(c?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))}},_setOptions:a(function(a){this._super(a);this._value(this.element.val())}),_parse:function(a){"string"===typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):
+a);return""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,c){var b;""!==a&&(b=this._parse(a),null!==b&&(c||(b=this._adjustValue(b)),a=this._format(b)));this.element.val(a);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:a(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:a(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:a(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:a(function(a){this._stepDown((a||1)*this.options.page)}),
value:function(d){if(!arguments.length)return this._parse(this.element.val());a(this._value).call(this,d)},widget:function(){return this.uiSpinner}})})(m);(function(d,a){function j(a){a=a.cloneNode(!1);return 1<a.hash.length&&a.href.replace(b,"")===location.href.replace(b,"")}var c=0,b=/#.*$/;d.widget("ui.tabs",{version:"1.9.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var a=
this,b=this.options,c=b.active;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",b.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){d(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){d(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();if(null===c&&(location.hash&&this.anchors.each(function(a,
b){if(b.hash===location.hash)return c=a,!1}),null===c&&(c=this.tabs.filter(".ui-tabs-active").index()),null===c||-1===c))c=this.tabs.length?0:!1;!1!==c&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=b.collapsible?!1:0));b.active=c;!b.collapsible&&(!1===b.active&&this.anchors.length)&&(b.active=0);d.isArray(b.disabled)&&(b.disabled=d.unique(b.disabled.concat(d.map(this.tabs.filter(".ui-state-disabled"),function(b){return a.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?
this._findActive(this.options.active):d();this._refresh();this.active.length&&this.load(b.active)},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?d():this._getPanelForTab(this.active)}},_tabKeydown:function(a){var b=d(this.document[0].activeElement).closest("li"),c=this.tabs.index(b),l=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:c++;break;case d.ui.keyCode.UP:case d.ui.keyCode.LEFT:l=!1;c--;break;case d.ui.keyCode.END:c=
this.anchors.length-1;break;case d.ui.keyCode.HOME:c=0;break;case d.ui.keyCode.SPACE:a.preventDefault();clearTimeout(this.activating);this._activate(c);return;case d.ui.keyCode.ENTER:a.preventDefault();clearTimeout(this.activating);this._activate(c===this.options.active?!1:c);return;default:return}a.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,l);a.ctrlKey||(b.attr("aria-selected","false"),this.tabs.eq(c).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",
c)},this.delay))}},_panelKeydown:function(a){!this._handlePageNav(a)&&(a.ctrlKey&&a.keyCode===d.ui.keyCode.UP)&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){if(a.altKey&&a.keyCode===d.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(a.altKey&&a.keyCode===d.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(a,b){function c(){a>l&&(a=0);0>a&&(a=l);return a}for(var l=this.tabs.length-
1;-1!==d.inArray(c(),this.options.disabled);)a=b?a+1:a-1;return a},_focusNextTab:function(a,b){a=this._findNextTab(a,b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),!b&&!1===this.options.active&&this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||
"ui-tabs-"+ ++c},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var a=this.options,b=this.tablist.children(":has(a[href])");a.disabled=d.map(b.filter(".ui-state-disabled"),function(a){return b.index(a)});this._processTabs();!1===a.active||!this.anchors.length?(a.active=!1,this.active=d()):this.active.length&&!d.contains(this.tablist[0],this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=d()):this._activate(this._findNextTab(Math.max(0,
a.active-1),!1)):a.active=this.tabs.index(this.active);this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",
tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return d("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",
tabIndex:-1});this.panels=d();this.anchors.each(function(b,c){var l,e,q,n=d(c).uniqueId().attr("id"),p=d(c).closest("li"),o=p.attr("aria-controls");j(c)?(l=c.hash,e=a.element.find(a._sanitizeSelector(l))):(q=a._tabId(p),l="#"+q,e=a.element.find(l),e.length||(e=a._createPanel(q),e.insertAfter(a.panels[b-1]||a.tablist)),e.attr("aria-live","polite"));e.length&&(a.panels=a.panels.add(e));o&&p.data("ui-tabs-aria-controls",o);p.attr({"aria-controls":l.substring(1),"aria-labelledby":n});e.attr("aria-labelledby",
n)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(a){return d("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(a){d.isArray(a)&&(a.length?a.length===this.anchors.length&&(a=!0):a=!1);for(var b=0,c;c=this.tabs[b];b++)!0===a||-1!==d.inArray(b,a)?d(c).addClass("ui-state-disabled").attr("aria-disabled",
"true"):d(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=a},_setupEvents:function(a){var b={click:function(a){a.preventDefault()}};a&&d.each(a.split(" "),function(a,c){b[c]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,b);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(a){var b,c,l=this.element.parent();
"fill"===a?(d.support.minHeight||(c=l.css("overflow"),l.css("overflow","hidden")),b=l.height(),this.element.siblings(":visible").each(function(){var a=d(this),c=a.css("position");c==="absolute"||c==="fixed"||(b=b-a.outerHeight(true))}),c&&l.css("overflow",c),this.element.children().not(this.panels).each(function(){b=b-d(this).outerHeight(true)}),this.panels.each(function(){d(this).height(Math.max(0,b-d(this).innerHeight()+d(this).height()))}).css("overflow","auto")):"auto"===a&&(b=0,this.panels.each(function(){b=
Math.max(b,d(this).height("").height())}).height(b))},_eventHandler:function(a){var b=this.options,c=this.active,l=d(a.currentTarget).closest("li"),e=l[0]===c[0],j=e&&b.collapsible,n=j?d():this._getPanelForTab(l),p=!c.length?d():this._getPanelForTab(c),c={oldTab:c,oldPanel:p,newTab:j?d():l,newPanel:n};a.preventDefault();if(!l.hasClass("ui-state-disabled")&&!l.hasClass("ui-tabs-loading")&&!this.running&&!(e&&!b.collapsible||!1===this._trigger("beforeActivate",a,c)))b.active=j?!1:this.tabs.index(l),
this.active=e?d():l,this.xhr&&this.xhr.abort(),!p.length&&!n.length&&d.error("jQuery UI Tabs: Mismatching fragment identifier."),n.length&&this.load(this.tabs.index(l),a),this._toggle(a,c)},_toggle:function(a,b){function c(){e.running=!1;e._trigger("activate",a,b)}function l(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");j.length&&e.options.show?e._show(j,e.options.show,c):(j.show(),c())}var e=this,j=b.newPanel,n=b.oldPanel;this.running=!0;n.length&&this.options.hide?this._hide(n,
this.options.hide,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");l()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n.hide(),l());n.attr({"aria-expanded":"false","aria-hidden":"true"});b.oldTab.attr("aria-selected","false");j.length&&n.length?b.oldTab.attr("tabIndex",-1):j.length&&this.tabs.filter(function(){return d(this).attr("tabIndex")===0}).attr("tabIndex",-1);j.attr({"aria-expanded":"true","aria-hidden":"false"});b.newTab.attr({"aria-selected":"true",
tabIndex:0})},_activate:function(a){a=this._findActive(a);a[0]!==this.active[0]&&(a.length||(a=this.active),a=a.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,currentTarget:a,preventDefault:d.noop}))},_findActive:function(a){return!1===a?d():this.tabs.eq(a)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){d.data(this,"ui-tabs-destroy")?d(this).remove():d(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var a=d(this),b=a.data("ui-tabs-aria-controls");b?a.attr("aria-controls",b):a.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;!1!==c&&(b===a?c=!1:(b=this._getIndex(b),c=d.isArray(c)?d.map(c,function(a){return a!==b?a:null}):d.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c))},disable:function(b){var c=this.options.disabled;if(!0!==c){if(b===a)c=!0;else{b=
this._getIndex(b);if(-1!==d.inArray(b,c))return;c=d.isArray(c)?d.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(a,b){var a=this._getIndex(a),c=this,l=this.tabs.eq(a),e=l.find(".ui-tabs-anchor"),q=this._getPanelForTab(l),n={tab:l,panel:q};if(!j(e[0])&&(this.xhr=d.ajax(this._ajaxSettings(e,b,n)))&&"canceled"!==this.xhr.statusText)l.addClass("ui-tabs-loading"),q.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){q.html(a);c._trigger("load",b,n)},1)}).complete(function(a,
b){setTimeout(function(){"abort"===b&&c.panels.stop(!1,!0);l.removeClass("ui-tabs-loading");q.removeAttr("aria-busy");a===c.xhr&&delete c.xhr},1)})},_ajaxSettings:function(a,b,c){var l=this;return{url:a.attr("href"),beforeSend:function(a,f){return l._trigger("beforeLoad",b,d.extend({jqXHR:a,ajaxSettings:f},c))}}},_getPanelForTab:function(a){return this.element.find(this._sanitizeSelector("#"+d(a).attr("aria-controls")))}});!1!==d.uiBackCompat&&(d.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,
index:this.anchors.index(a)}},d.widget("ui.tabs",d.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",b)}}),d.widget("ui.tabs",d.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var a=this;this._on({tabsbeforeload:function(b,c){d.data(c.tab[0],"cache.tabs")?b.preventDefault():c.jqXHR.success(function(){a.options.cache&&d.data(c.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(a,b,c){var l=this.options.ajaxOptions;return d.extend({},l,{error:function(a,b){try{l.error(a,
b,c.tab.closest("li").index(),c.tab[0])}catch(f){}}},this._superApply(arguments))},_setOption:function(a,b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a,b){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}}),d.widget("ui.tabs",d.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),d.widget("ui.tabs",d.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},
_create:function(){this._super();this._on({tabsbeforeload:function(a,b){if(a.target===this.element[0]&&this.options.spinner){var c=b.tab.find("span"),d=c.html();c.html(this.options.spinner);b.jqXHR.complete(function(){c.html(d)})}}})}}),d.widget("ui.tabs",d.ui.tabs,{options:{enable:null,disable:null},enable:function(a){var b=this.options,c;if(a&&!0===b.disabled||d.isArray(b.disabled)&&-1!==d.inArray(a,b.disabled))c=!0;this._superApply(arguments);c&&this._trigger("enable",null,this._ui(this.anchors[a],
this.panels[a]))},disable:function(a){var b=this.options,c;if(a&&!1===b.disabled||d.isArray(b.disabled)&&-1===d.inArray(a,b.disabled))c=!0;this._superApply(arguments);c&&this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))}}),d.widget("ui.tabs",d.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(b,c,k){k===a&&(k=this.anchors.length);var l,e=this.options,c=d(e.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,
c)),j=!b.indexOf("#")?b.replace("#",""):this._tabId(c);c.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);c.attr("aria-controls",j);b=k>=this.tabs.length;l=this.element.find("#"+j);l.length||(l=this._createPanel(j),b?0<k?l.insertAfter(this.panels.eq(-1)):l.appendTo(this.element):l.insertBefore(this.panels[k]));l.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();b?c.appendTo(this.tablist):c.insertBefore(this.tabs[k]);e.disabled=d.map(e.disabled,function(a){return a>=
k?++a:a});this.refresh();1===this.tabs.length&&!1===e.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[k],this.panels[k]));return this},remove:function(a){var a=this._getIndex(a),b=this.options,c=this.tabs.eq(a).remove(),l=this._getPanelForTab(c).remove();c.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(a+(a+1<this.anchors.length?1:-1));b.disabled=d.map(d.grep(b.disabled,function(b){return b!==a}),function(b){return b>=a?--b:b});this.refresh();this._trigger("remove",
null,this._ui(c.find("a")[0],l[0]));return this}}),d.widget("ui.tabs",d.ui.tabs,{length:function(){return this.anchors.length}}),d.widget("ui.tabs",d.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(a){a=a.is("li")?a.find("a[href]"):a;a=a[0];return d(a).closest("li").attr("aria-controls")||a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++c}}),d.widget("ui.tabs",d.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(a){return d(this.options.panelTemplate).attr("id",
a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),d.widget("ui.tabs",d.ui.tabs,{_create:function(){var b=this.options;null===b.active&&b.selected!==a&&(b.active=-1===b.selected?!1:b.selected);this._super();b.selected=b.active;!1===b.selected&&(b.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var c=this.options;this._super("active",-1===b?!1:b);c.selected=c.active;!1===c.selected&&(c.selected=-1)},_eventHandler:function(a){this._superApply(arguments);
this.options.selected=this.options.active;!1===this.options.selected&&(this.options.selected=-1)}}),d.widget("ui.tabs",d.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,c){var d=this._superApply(arguments);if(!d)return!1;"beforeActivate"===a&&c.newTab.length?d=this._super("select",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],
panel:c.newPanel[0],index:c.newTab.closest("li").index()}):"activate"===a&&c.newTab.length&&(d=this._super("show",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}));return d}}),d.widget("ui.tabs",d.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a)if(this.options.collapsible&&-1!==this.options.selected)a=this.options.selected;else return;this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var a=0;d.widget("ui.tabs",
d.ui.tabs,{options:{cookie:null},_create:function(){var a=this.options,b;null==a.active&&a.cookie&&(b=parseInt(this._cookie(),10),-1===b&&(b=!1),a.active=b);this._super()},_cookie:function(b){var c=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++a)];arguments.length&&(c.push(!1===b?-1:b),c.push(this.options.cookie));return d.cookie.apply(null,c)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(a){this._superApply(arguments);
this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),d.widget("ui.tabs",d.ui.tabs,{_trigger:function(a,b,c){c=d.extend({},c);"load"===a&&(c.panel=c.panel[0],c.tab=c.tab.find(".ui-tabs-anchor")[0]);return this._super(a,b,c)}}),d.widget("ui.tabs",d.ui.tabs,{options:{fx:null},_getFx:function(){var a,b,c=this.options.fx;c&&(d.isArray(c)?(a=c[0],b=c[1]):a=b=c);return c?{show:b,hide:a}:
null},_toggle:function(a,b){function c(){e.running=!1;e._trigger("activate",a,b)}function d(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");j.length&&p.show?j.animate(p.show,p.show.duration,function(){c()}):(j.show(),c())}var e=this,j=b.newPanel,n=b.oldPanel,p=this._getFx();if(!p)return this._super(a,b);e.running=!0;n.length&&p.hide?n.animate(p.hide,p.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
n.hide(),d())}}))})(m);(function(d){function a(a,c){var g=(a.attr("aria-describedby")||"").split(/\s+/);g.push(c);a.data("ui-tooltip-id",c).attr("aria-describedby",d.trim(g.join(" ")))}function j(a){var c=a.data("ui-tooltip-id"),g=(a.attr("aria-describedby")||"").split(/\s+/),c=d.inArray(c,g);-1!==c&&g.splice(c,1);a.removeData("ui-tooltip-id");(g=d.trim(g.join(" ")))?a.attr("aria-describedby",g):a.removeAttr("aria-describedby")}var c=0;d.widget("ui.tooltip",{version:"1.9.0",options:{content:function(){return d(this).attr("title")},
hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={}},_setOption:function(a,c){var g=this;"disabled"===a?(this[c?"_disable":"_enable"](),this.options[a]=c):(this._super(a,c),"content"===a&&d.each(this.tooltips,function(a,b){g._updateContent(b)}))},_disable:function(){var a=this;d.each(this.tooltips,function(c,g){var k=
d.Event("blur");k.target=k.currentTarget=g[0];a.close(k,!0)});this.element.find(this.options.items).andSelf().each(function(){var a=d(this);a.is("[title]")&&a.data("ui-tooltip-title",a.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var a=d(this);a.data("ui-tooltip-title")&&a.attr("title",a.data("ui-tooltip-title"))})},open:function(a){var c=d(a?a.target:this.element).closest(this.options.items);c.length&&(this.options.track&&c.data("ui-tooltip-id")?
(this._find(c).position(d.extend({of:c},this.options.position)),this._off(this.document,"mousemove")):(c.attr("title")&&c.data("ui-tooltip-title",c.attr("title")),c.data("tooltip-open",!0),this._updateContent(c,a)))},_updateContent:function(a,c){var g;g=this.options.content;var d=this;if("string"===typeof g)return this._open(c,a,g);(g=g.call(a[0],function(g){a.data("tooltip-open")&&d._delay(function(){this._open(c,a,g)})}))&&this._open(c,a,g)},_open:function(b,c,g){function k(a){e.of=a;l.position(e)}
var l,e;g&&(l=this._find(c),l.length?l.find(".ui-tooltip-content").html(g):(c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),l=this._tooltip(c),a(c,l.attr("id")),l.find(".ui-tooltip-content").html(g),this.options.track&&b&&/^mouse/.test(b.originalEvent.type)?(e=d.extend({},this.options.position),this._on(this.document,{mousemove:k}),k(b)):l.position(d.extend({of:c},this.options.position)),l.hide(),this._show(l,this.options.show),this._trigger("open",b,{tooltip:l}),
this._on(c,{mouseleave:"close",focusout:"close",keyup:function(a){if(a.keyCode===d.ui.keyCode.ESCAPE){a=d.Event(a);a.currentTarget=c[0];this.close(a,true)}}})))},close:function(a,c){var g=this,k=d(a?a.currentTarget:this.element),l=this._find(k);if(!this.closing&&(c||!a||!("focusout"!==a.type&&this.document[0].activeElement===k[0])))k.data("ui-tooltip-title")&&k.attr("title",k.data("ui-tooltip-title")),j(k),l.stop(!0),this._hide(l,this.options.hide,function(){d(this).remove();delete g.tooltips[this.id]}),
k.removeData("tooltip-open"),this._off(k,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",a,{tooltip:l}),this.closing=!1},_tooltip:function(a){var f="ui-tooltip-"+c++,g=d("<div>").attr({id:f,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));d("<div>").addClass("ui-tooltip-content").appendTo(g);g.appendTo(this.document[0].body);d.fn.bgiframe&&g.bgiframe();this.tooltips[f]=a;return g},
_find:function(a){return(a=a.data("ui-tooltip-id"))?d("#"+a):d()},_destroy:function(){var a=this;d.each(this.tooltips,function(c,g){var k=d.Event("blur");k.target=k.currentTarget=g[0];a.close(k,!0);d("#"+c).remove();g.data("ui-tooltip-title")&&(g.attr("title",g.data("ui-tooltip-title")),g.removeData("ui-tooltip-title"))})}})})(m);m.effects||function(d,a){var j=!1!==d.uiBackCompat;d.effects={effect:{}};(function(a,b){function f(a,b,c){var e=p[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=e.floor?
~~a:parseFloat(a);return isNaN(a)?b.def:e.mod?(a+e.mod)%e.mod:0>a?0:e.max<a?e.max:a}function g(b){var f=j(),g=f._rgba=[],b=b.toLowerCase();v(e,function(a,c){var e,d=c.re.exec(b);e=d&&c.parse(d);d=c.space||"rgba";if(e)return e=f[d](e),f[n[d].cache]=e[n[d].cache],g=f._rgba=e._rgba,!1});return g.length?("0,0,0,0"===g.join()&&a.extend(g,m.transparent),f):m[b]}function k(a,b,c){c=(c+1)%1;return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var l=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,e,f,g){return new a.Color.fn.parse(b,e,f,g)},n={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},o=j.support={},r=a("<p>")[0],m,v=a.each;r.style.cssText="background-color:rgba(1,1,1,.5)";
o.rgba=-1<r.style.backgroundColor.indexOf("rgba");v(n,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});j.fn=a.extend(j.prototype,{parse:function(e,k,l,r){if(e===b)return this._rgba=[null,null,null,null],this;if(e.jquery||e.nodeType)e=a(e).css(k),k=b;var o=this,p=a.type(e),F=this._rgba=[];k!==b&&(e=[e,k,l,r],p="array");if("string"===p)return this.parse(g(e)||m._default);if("array"===p)return v(n.rgba.props,function(a,b){F[b.idx]=f(e[b.idx],b)}),this;if("object"===p)return e instanceof
j?v(n,function(a,b){e[b.cache]&&(o[b.cache]=e[b.cache].slice())}):v(n,function(a,b){var c=b.cache;v(b.props,function(a,g){if(!o[c]&&b.to){if(a==="alpha"||e[a]==null)return;o[c]=b.to(o._rgba)}o[c][g.idx]=f(e[a],g,true)});if(o[c]&&d.inArray(null,o[c].slice(0,3))<0){o[c][3]=1;if(b.from)o._rgba=b.from(o[c])}}),this},is:function(a){var b=j(a),c=!0,e=this;v(n,function(a,f){var g,d=b[f.cache];d&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],v(f.props,function(a,b){if(null!=d[b.idx])return c=d[b.idx]===g[b.idx]}));
return c});return c},_space:function(){var a=[],b=this;v(n,function(c,e){b[e.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=j(a),e=c._space(),g=n[e],d=0===this.alpha()?j("transparent"):this,k=d[g.cache]||g.to(d._rgba),l=k.slice(),c=c[g.cache];v(g.props,function(a,e){var g=e.idx,d=k[g],j=c[g],n=p[e.type]||{};null!==j&&(null===d?l[g]=j:(n.mod&&(j-d>n.mod/2?d+=n.mod:d-j>n.mod/2&&(d-=n.mod)),l[g]=f((j-d)*b+d,e)))});return this[e](l)},blend:function(b){if(1===this._rgba[3])return this;
var e=this._rgba.slice(),f=e.pop(),g=j(b)._rgba;return j(a.map(e,function(a,b){return(1-f)*g[b]+f*a}))},toRgbaString:function(){var b="rgba(",e=a.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===e[3]&&(e.pop(),b="rgb(");return b+e.join()+")"},toHslaString:function(){var b="hsla(",e=a.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===e[3]&&(e.pop(),b="hsl(");return b+e.join()+")"},toHexString:function(b){var e=this._rgba.slice(),f=e.pop();
b&&e.push(~~(255*f));return"#"+a.map(e,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});j.fn.parse.prototype=j.fn;n.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,e=a[2]/255,a=a[3],f=Math.max(b,c,e),g=Math.min(b,c,e),d=f-g,k=f+g,l=0.5*k;return[Math.round(g===f?0:b===f?60*(c-e)/d+360:c===f?60*(e-b)/d+120:60*(b-c)/d+240)%360,0===
l||1===l?l:0.5>=l?d/k:d/(2-k),l,null==a?1:a]};n.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],e=a[2],a=a[3],c=0.5>=e?e*(1+c):e+c-e*c,e=2*e-c;return[Math.round(255*k(e,c,b+1/3)),Math.round(255*k(e,c,b)),Math.round(255*k(e,c,b-1/3)),a]};v(n,function(e,g){var d=g.props,k=g.cache,n=g.to,o=g.from;j.fn[e]=function(e){n&&!this[k]&&(this[k]=n(this._rgba));if(e===b)return this[k].slice();var g,l=a.type(e),r="array"===l||"object"===l?e:arguments,
p=this[k].slice();v(d,function(a,b){var c=r["object"===l?a:b.idx];null==c&&(c=p[b.idx]);p[b.idx]=f(c,b)});return o?(g=j(o(p)),g[k]=p,g):j(p)};v(d,function(b,f){j.fn[b]||(j.fn[b]=function(g){var d=a.type(g),k="alpha"===b?this._hsla?"hsla":"rgba":e,j=this[k](),n=j[f.idx];if("undefined"===d)return n;"function"===d&&(g=g.call(this,n),d=a.type(g));if(null==g&&f.empty)return this;"string"===d&&(d=l.exec(g))&&(g=n+parseFloat(d[2])*("+"===d[1]?1:-1));j[f.idx]=g;return this[k](j)})})});v("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),
function(b,e){a.cssHooks[e]={set:function(b,f){var d,k="";if(a.type(f)!=="string"||(d=g(f))){f=j(d||f);if(!o.rgba&&f._rgba[3]!==1){for(d=e==="backgroundColor"?b.parentNode:b;(k===""||k==="transparent")&&d&&d.style;)try{k=a.css(d,"backgroundColor");d=d.parentNode}catch(l){}f=f.blend(k&&k!=="transparent"?k:"_default")}f=f.toRgbaString()}try{b.style[e]=f}catch(n){}}};a.fx.step[e]=function(b){if(!b.colorInit){b.start=j(b.elem,e);b.end=j(b.end);b.colorInit=true}a.cssHooks[e].set(b.elem,b.start.transition(b.end,
b.pos))}});a.cssHooks.borderColor={expand:function(a){var b={};v(["Top","Right","Bottom","Left"],function(c,e){b["border"+e+"Color"]=a});return b}};m=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(m);(function(){function c(){var a=
this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,e;if(a&&a.length&&a[0]&&a[a[0]])for(e=a.length;e--;)c=a[e],"string"===typeof a[c]&&(b[d.camelCase(c)]=a[c]);else for(c in a)"string"===typeof a[c]&&(b[c]=a[c]);return b}var b=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};d.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(a,b){d.fx.step[b]=function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)m.style(a.elem,b,a.end),a.setAttr=!0}});d.effects.animateClass=function(a,k,l,e){var j=d.speed(k,l,e);return this.queue(function(){var e=d(this),k=e.attr("class")||"",l,r=j.children?e.find("*").andSelf():e,r=r.map(function(){return{el:d(this),start:c.call(this)}});l=function(){d.each(b,function(b,c){if(a[c])e[c+"Class"](a[c])})};l();r=r.map(function(){this.end=c.call(this.el[0]);var a=this.start,b=this.end,
e={},g,k;for(g in b)if(k=b[g],a[g]!==k&&!f[g]&&(d.fx.step[g]||!isNaN(parseFloat(k))))e[g]=k;this.diff=e;return this});e.attr("class",k);r=r.map(function(){var a=this,b=d.Deferred();this.el.animate(this.diff,m.extend({},j,{queue:!1,complete:function(){b.resolve(a)}}));return b.promise()});d.when.apply(d,r.get()).done(function(){l();d.each(arguments,function(){var a=this.el;d.each(this.diff,function(b){a.css(b,"")})});j.complete.call(e[0])})})};d.fn.extend({_addClass:d.fn.addClass,addClass:function(a,
b,c,e){return b?d.effects.animateClass.call(this,{add:a},b,c,e):this._addClass(a)},_removeClass:d.fn.removeClass,removeClass:function(a,b,c,e){return b?d.effects.animateClass.call(this,{remove:a},b,c,e):this._removeClass(a)},_toggleClass:d.fn.toggleClass,toggleClass:function(b,c,f,e,j){return"boolean"===typeof c||c===a?f?d.effects.animateClass.call(this,c?{add:b}:{remove:b},f,e,j):this._toggleClass(b,c):d.effects.animateClass.call(this,{toggle:b},c,f,e)},switchClass:function(a,b,c,e,f){return d.effects.animateClass.call(this,
{add:b,remove:a},c,e,f)}})})();(function(){function c(b,c,k,l){d.isPlainObject(b)&&(c=b,b=b.effect);b={effect:b};c===a&&(c={});d.isFunction(c)&&(l=c,k=null,c={});if("number"===typeof c||d.fx.speeds[c])l=k,k=c,c={};d.isFunction(k)&&(l=k,k=null);c&&d.extend(b,c);k=k||c.duration;b.duration=d.fx.off?0:"number"===typeof k?k:k in d.fx.speeds?d.fx.speeds[k]:d.fx.speeds._default;b.complete=l||c.complete;return b}function b(a){return!a||"number"===typeof a||d.fx.speeds[a]?!0:"string"===typeof a&&!d.effects.effect[a]?
j&&d.effects[a]?!1:!0:!1}d.extend(d.effects,{version:"1.9.0",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(b,c){var d,l;for(l=0;l<c.length;l++)null!==c[l]&&(d=b.data("ui-effects-"+c[l]),d===a&&(d=""),b.css(c[l],d))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/
b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=d("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),l={width:a.width(),height:a.height()},e=document.activeElement;try{e.id}catch(j){e=
document.body}a.wrap(c);(a[0]===e||d.contains(a[0],e))&&d(e).focus();c=a.parent();"static"===a.css("position")?(c.css({position:"relative"}),a.css({position:"relative"})):(d.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),d.each(["top","left","bottom","right"],function(c,e){b[e]=a.css(e);isNaN(parseInt(b[e],10))&&(b[e]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));a.css(l);return c.css(b).show()},removeWrapper:function(a){var b=document.activeElement;
a.parent().is(".ui-effects-wrapper")&&(a.parent().replaceWith(a),(a[0]===b||d.contains(a[0],b))&&d(b).focus());return a},setTransition:function(a,b,c,l){l=l||{};d.each(b,function(b,g){var d=a.cssUnit(g);0<d[0]&&(l[g]=d[0]*c+d[1])});return l}});d.fn.extend({effect:function(a,b,k,l){function e(a){function b(){d.isFunction(e)&&e.call(c[0]);d.isFunction(a)&&a()}var c=d(this),e=q.complete,f=q.mode;(c.is(":hidden")?"hide"===f:"show"===f)?b():o.call(c[0],q,b)}var q=c.apply(this,arguments),n=q.mode,p=q.queue,
o=d.effects.effect[q.effect],r=!o&&j&&d.effects[q.effect];return d.fx.off||!o&&!r?n?this[n](q.duration,q.complete):this.each(function(){q.complete&&q.complete.call(this)}):o?!1===p?this.each(e):this.queue(p||"fx",e):r.call(this,{options:q,duration:q.duration,callback:q.complete,mode:q.mode})},_show:d.fn.show,show:function(a){if(b(a))return this._show.apply(this,arguments);var g=c.apply(this,arguments);g.mode="show";return this.effect.call(this,g)},_hide:d.fn.hide,hide:function(a){if(b(a))return this._hide.apply(this,
arguments);var g=c.apply(this,arguments);g.mode="hide";return this.effect.call(this,g)},__toggle:d.fn.toggle,toggle:function(a){if(b(a)||"boolean"===typeof a||d.isFunction(a))return this.__toggle.apply(this,arguments);var g=c.apply(this,arguments);g.mode="toggle";return this.effect.call(this,g)},cssUnit:function(a){var b=this.css(a),c=[];d.each(["em","px","%","pt"],function(a,e){0<b.indexOf(e)&&(c=[parseFloat(b),e])});return c}})})();(function(){var a={};d.each(["Quad","Cubic","Quart","Quint","Expo"],
function(b,f){a[f]=function(a){return Math.pow(a,b+2)}});d.extend(a,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var c,g=4;a<((c=Math.pow(2,--g))-1)/11;);return 1/Math.pow(4,3-g)-7.5625*Math.pow((3*c-2)/22-a,2)}});d.each(a,function(a,c){d.easing["easeIn"+a]=c;d.easing["easeOut"+a]=function(a){return 1-
c(1-a)};d.easing["easeInOut"+a]=function(a){return 0.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})()}(m);(function(d){var a=/up|down|vertical/,j=/up|left|vertical|horizontal/;d.effects.effect.blind=function(c,b){var f=d(this),g="position top bottom left right height width".split(" "),k=d.effects.setMode(f,c.mode||"hide"),l=c.direction||"up",e=a.test(l),q=e?"height":"width",n=e?"top":"left",l=j.test(l),p={},o="show"===k,r,m,v;f.parent().is(".ui-effects-wrapper")?d.effects.save(f.parent(),g):d.effects.save(f,g);
f.show();r=d.effects.createWrapper(f).css({overflow:"hidden"});m=r[q]();v=parseFloat(r.css(n))||0;p[q]=o?m:0;l||(f.css(e?"bottom":"right",0).css(e?"top":"left","auto").css({position:"absolute"}),p[n]=o?v:m+v);o&&(r.css(q,0),l||r.css(n,v+m));r.animate(p,{duration:c.duration,easing:c.easing,queue:!1,complete:function(){k==="hide"&&f.hide();d.effects.restore(f,g);d.effects.removeWrapper(f);b()}})}})(m);(function(d){d.effects.effect.bounce=function(a,j){var c=d(this),b="position top bottom left right height width".split(" "),
f=d.effects.setMode(c,a.mode||"effect"),g="hide"===f,k="show"===f,l=a.direction||"up",f=a.distance,e=a.times||5,q=2*e+(k||g?1:0),n=a.duration/q,p=a.easing,o="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l,r,m,v=c.queue(),u=v.length;(k||g)&&b.push("opacity");d.effects.save(c,b);c.show();d.effects.createWrapper(c);f||(f=c["top"===o?"outerHeight":"outerWidth"]()/3);k&&(m={opacity:1},m[o]=0,c.css("opacity",0).css(o,l?2*-f:2*f).animate(m,n,p));g&&(f/=Math.pow(2,e-1));m={};for(k=m[o]=0;k<e;k++)r=
{},r[o]=(l?"-=":"+=")+f,c.animate(r,n,p).animate(m,n,p),f=g?2*f:f/2;g&&(r={opacity:0},r[o]=(l?"-=":"+=")+f,c.animate(r,n,p));c.queue(function(){g&&c.hide();d.effects.restore(c,b);d.effects.removeWrapper(c);j()});1<u&&v.splice.apply(v,[1,0].concat(v.splice(u,q+1)));c.dequeue()}})(m);(function(d){d.effects.effect.clip=function(a,j){var c=d(this),b="position top bottom left right height width".split(" "),f="show"===d.effects.setMode(c,a.mode||"hide"),g="vertical"===(a.direction||"vertical"),k=g?"height":
"width",g=g?"top":"left",l={},e,q;d.effects.save(c,b);c.show();e=d.effects.createWrapper(c).css({overflow:"hidden"});e="IMG"===c[0].tagName?e:c;q=e[k]();f&&(e.css(k,0),e.css(g,q/2));l[k]=f?q:0;l[g]=f?0:q/2;e.animate(l,{queue:!1,duration:a.duration,easing:a.easing,complete:function(){f||c.hide();d.effects.restore(c,b);d.effects.removeWrapper(c);j()}})}})(m);(function(d){d.effects.effect.drop=function(a,j){var c=d(this),b="position top bottom left right opacity height width".split(" "),f=d.effects.setMode(c,
a.mode||"hide"),g="show"===f,k=a.direction||"left",l="up"===k||"down"===k?"top":"left",k="up"===k||"left"===k?"pos":"neg",e={opacity:g?1:0},q;d.effects.save(c,b);c.show();d.effects.createWrapper(c);q=a.distance||c["top"===l?"outerHeight":"outerWidth"](!0)/2;g&&c.css("opacity",0).css(l,"pos"===k?-q:q);e[l]=(g?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+q;c.animate(e,{queue:!1,duration:a.duration,easing:a.easing,complete:function(){"hide"===f&&c.hide();d.effects.restore(c,b);d.effects.removeWrapper(c);
j()}})}})(m);(function(d){d.effects.effect.explode=function(a,j){function c(){n.push(this);n.length===b*f&&(g.css({visibility:"visible"}),d(n).remove(),k||g.hide(),j())}var b=a.pieces?Math.round(Math.sqrt(a.pieces)):3,f=b,g=d(this),k="show"===d.effects.setMode(g,a.mode||"hide"),l=g.show().css("visibility","hidden").offset(),e=Math.ceil(g.outerWidth()/f),q=Math.ceil(g.outerHeight()/b),n=[],p,o,r,m,v,u;for(p=0;p<b;p++){m=l.top+p*q;u=p-(b-1)/2;for(o=0;o<f;o++)r=l.left+o*e,v=o-(f-1)/2,g.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-o*e,top:-p*q}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:e,height:q,left:r+(k?v*e:0),top:m+(k?u*q:0),opacity:k?0:1}).animate({left:r+(k?0:v*e),top:m+(k?0:u*q),opacity:k?1:0},a.duration||500,a.easing,c)}}})(m);(function(d){d.effects.effect.fade=function(a,j){var c=d(this),b=d.effects.setMode(c,a.mode||"toggle");c.animate({opacity:b},{queue:!1,duration:a.duration,easing:a.easing,complete:j})}})(m);(function(d){d.effects.effect.fold=
function(a,j){var c=d(this),b="position top bottom left right height width".split(" "),f=d.effects.setMode(c,a.mode||"hide"),g="show"===f,k="hide"===f,f=a.size||15,l=/([0-9]+)%/.exec(f),e=!!a.horizFirst,q=g!==e,n=q?["width","height"]:["height","width"],p=a.duration/2,o,r={},m={};d.effects.save(c,b);c.show();o=d.effects.createWrapper(c).css({overflow:"hidden"});q=q?[o.width(),o.height()]:[o.height(),o.width()];l&&(f=parseInt(l[1],10)/100*q[k?0:1]);g&&o.css(e?{height:0,width:f}:{height:f,width:0});
r[n[0]]=g?q[0]:f;m[n[1]]=g?q[1]:0;o.animate(r,p,a.easing).animate(m,p,a.easing,function(){k&&c.hide();d.effects.restore(c,b);d.effects.removeWrapper(c);j()})}})(m);(function(d){d.effects.effect.highlight=function(a,j){var c=d(this),b=["backgroundImage","backgroundColor","opacity"],f=d.effects.setMode(c,a.mode||"show"),g={backgroundColor:c.css("backgroundColor")};"hide"===f&&(g.opacity=0);d.effects.save(c,b);c.show().css({backgroundImage:"none",backgroundColor:a.color||"#ffff99"}).animate(g,{queue:!1,
duration:a.duration,easing:a.easing,complete:function(){f==="hide"&&c.hide();d.effects.restore(c,b);j()}})}})(m);(function(d){d.effects.effect.pulsate=function(a,j){var c=d(this),b=d.effects.setMode(c,a.mode||"show"),f="show"===b,g="hide"===b,b=2*(a.times||5)+(f||"hide"===b?1:0),k=a.duration/b,l=0,e=c.queue(),q=e.length;if(f||!c.is(":visible"))c.css("opacity",0).show(),l=1;for(f=1;f<b;f++)c.animate({opacity:l},k,a.easing),l=1-l;c.animate({opacity:l},k,a.easing);c.queue(function(){g&&c.hide();j()});
1<q&&e.splice.apply(e,[1,0].concat(e.splice(q,b+1)));c.dequeue()}})(m);(function(d){d.effects.effect.puff=function(a,j){var c=d(this),b=d.effects.setMode(c,a.mode||"hide"),f="hide"===b,g=parseInt(a.percent,10)||150,k=g/100,l={height:c.height(),width:c.width()};d.extend(a,{effect:"scale",queue:!1,fade:!0,mode:b,complete:j,percent:f?g:100,from:f?l:{height:l.height*k,width:l.width*k}});c.effect(a)};d.effects.effect.scale=function(a,j){var c=d(this),b=d.extend(!0,{},a),f=d.effects.setMode(c,a.mode||"effect"),
g=parseInt(a.percent,10)||(0===parseInt(a.percent,10)?0:"hide"===f?0:100),k=a.direction||"both",l=a.origin,e={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()},q="horizontal"!==k?g/100:1,g="vertical"!==k?g/100:1;b.effect="size";b.queue=!1;b.complete=j;"effect"!==f&&(b.origin=l||["middle","center"],b.restore=!0);b.from=a.from||("show"===f?{height:0,width:0}:e);b.to={height:e.height*q,width:e.width*g,outerHeight:e.outerHeight*q,outerWidth:e.outerWidth*g};if(b.fade&&
("show"===f&&(b.from.opacity=0,b.to.opacity=1),"hide"===f))b.from.opacity=1,b.to.opacity=0;c.effect(b)};d.effects.effect.size=function(a,j){var c,b,f,g,k=d(this),l="position top bottom left right width height overflow opacity".split(" "),e="position top bottom left right overflow opacity".split(" "),q=["width","height","overflow"],n=["fontSize"],p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=d.effects.setMode(k,
a.mode||"effect"),m=a.restore||"effect"!==r,v=a.scale||"both",u=a.origin||["middle","center"],t,x=k.css("position");"show"===r&&k.show();t={height:k.height(),width:k.width(),outerHeight:k.outerHeight(),outerWidth:k.outerWidth()};k.from=a.from||t;k.to=a.to||t;f=k.from.height/t.height;g=k.from.width/t.width;c=k.to.height/t.height;b=k.to.width/t.width;if("box"===v||"both"===v)if(f!==c&&(l=l.concat(p),k.from=d.effects.setTransition(k,p,f,k.from),k.to=d.effects.setTransition(k,p,c,k.to)),g!==b)l=l.concat(o),
k.from=d.effects.setTransition(k,o,g,k.from),k.to=d.effects.setTransition(k,o,b,k.to);if(("content"===v||"both"===v)&&f!==c)l=l.concat(n),k.from=d.effects.setTransition(k,n,f,k.from),k.to=d.effects.setTransition(k,n,c,k.to);d.effects.save(k,m?l:e);k.show();d.effects.createWrapper(k);k.css("overflow","hidden").css(k.from);u&&(u=d.effects.getBaseline(u,t),k.from.top=(t.outerHeight-k.outerHeight())*u.y,k.from.left=(t.outerWidth-k.outerWidth())*u.x,k.to.top=(t.outerHeight-k.to.outerHeight)*u.y,k.to.left=
(t.outerWidth-k.to.outerWidth)*u.x);k.css(k.from);if("content"===v||"both"===v)p=p.concat(["marginTop","marginBottom"]).concat(n),o=o.concat(["marginLeft","marginRight"]),q=l.concat(p).concat(o),k.find("*[width]").each(function(){var e=d(this),k=e.height(),l=e.width();m&&d.effects.save(e,q);e.from={height:k*f,width:l*g};e.to={height:k*c,width:l*b};if(f!==c){e.from=d.effects.setTransition(e,p,f,e.from);e.to=d.effects.setTransition(e,p,c,e.to)}if(g!==b){e.from=d.effects.setTransition(e,o,g,e.from);
e.to=d.effects.setTransition(e,o,b,e.to)}e.css(e.from);e.animate(e.to,a.duration,a.easing,function(){m&&d.effects.restore(e,q)})});k.animate(k.to,{queue:!1,duration:a.duration,easing:a.easing,complete:function(){k.to.opacity===0&&k.css("opacity",k.from.opacity);r==="hide"&&k.hide();d.effects.restore(k,m?l:e);m||(x==="static"?k.css({position:"relative",top:k.to.top,left:k.to.left}):d.each(["top","left"],function(a,b){k.css(b,function(b,c){var e=parseInt(c,10),f=a?k.to.left:k.to.top;return c==="auto"?
f+"px":e+f+"px"})}));d.effects.removeWrapper(k);j()}})}})(m);(function(d){d.effects.effect.shake=function(a,j){var c=d(this),b="position top bottom left right height width".split(" "),f=d.effects.setMode(c,a.mode||"effect"),g=a.direction||"left",k=a.distance||20,l=a.times||3,e=2*l+1,q=Math.round(a.duration/e),n="up"===g||"down"===g?"top":"left",p="up"===g||"left"===g,g={},o={},r={},m=c.queue(),v=m.length;d.effects.save(c,b);c.show();d.effects.createWrapper(c);g[n]=(p?"-=":"+=")+k;o[n]=(p?"+=":"-=")+
2*k;r[n]=(p?"-=":"+=")+2*k;c.animate(g,q,a.easing);for(k=1;k<l;k++)c.animate(o,q,a.easing).animate(r,q,a.easing);c.animate(o,q,a.easing).animate(g,q/2,a.easing).queue(function(){"hide"===f&&c.hide();d.effects.restore(c,b);d.effects.removeWrapper(c);j()});1<v&&m.splice.apply(m,[1,0].concat(m.splice(v,e+1)));c.dequeue()}})(m);(function(d){d.effects.effect.slide=function(a,j){var c=d(this),b="position top bottom left right width height".split(" "),f=d.effects.setMode(c,a.mode||"show"),g="show"===f,k=
a.direction||"left",l="up"===k||"down"===k?"top":"left",k="up"===k||"left"===k,e,q={};d.effects.save(c,b);c.show();e=a.distance||c["top"===l?"outerHeight":"outerWidth"](!0);d.effects.createWrapper(c).css({overflow:"hidden"});g&&c.css(l,k?isNaN(e)?"-"+e:-e:e);q[l]=(g?k?"+=":"-=":k?"-=":"+=")+e;c.animate(q,{queue:!1,duration:a.duration,easing:a.easing,complete:function(){"hide"===f&&c.hide();d.effects.restore(c,b);d.effects.removeWrapper(c);j()}})}})(m);(function(d){d.effects.effect.transfer=function(a,
j){var c=d(this),b=d(a.to),f="fixed"===b.css("position"),g=d("body"),k=f?g.scrollTop():0,g=f?g.scrollLeft():0,l=b.offset(),b={top:l.top-k,left:l.left-g,height:b.innerHeight(),width:b.innerWidth()},l=c.offset(),e=d('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.className).css({top:l.top-k,left:l.left-g,height:c.innerHeight(),width:c.innerWidth(),position:f?"fixed":"absolute"}).animate(b,a.duration,a.easing,function(){e.remove();j()})}})(m)});define("ui/tab","aloha/core jquery ui/container ui/component PubSub jqueryui".split(" "),
function(m,d,a,j,c){var b=0,f={},m=a.extend({_elemBySlot:null,_groupBySlot:null,_groupByComponent:null,_constructor:function(a,c,f){var e,j,n,m,o;this._elemBySlot={};this._groupBySlot={};this._groupByComponent={};this._slotsList=[];this._super(a,c);this.container=c.container;this.list=this.container.data("list");this.panels=this.container.data("panels");this.id="tab-ui-container-"+ ++b;this.panel=d("<div>",{id:this.id,unselectable:"on"});this.handle=d('<li><a href="'+location.href.replace(/#.*$/,
"")+"#"+this.id+'">'+c.label+"</a></li>");for(a=0;a<f.length;a++)if(typeof f[a]==="string")if(1===f[a].length&&f[a].charCodeAt(0)===10)this.panel.append("<div>",{unselectable:"on"});else{j=d("<span>",{unselectable:"on"});this._elemBySlot[f[a]]=j;this.panel.append(j)}else{m=d("<div>",{"class":"aloha-ui-component-group aloha-ui-hidden",unselectable:"on"}).appendTo(this.panel);o={element:m,visibleCounter:0};n=f[a];for(e=0;e<n.length;e++){this._groupBySlot[n[e]]=o;if(n[e]&&1===n[e].length&&n[e].charCodeAt(0)===
10)m.append(d("<div>",{unselectable:"on"}));else{j=d("<span>",{unselectable:"on"});this._elemBySlot[n[e]]=j;m.append(j)}}}this.panel.append(d("<div>",{"class":"aloha-ui-clear",unselectable:"on"}));this.handle.appendTo(this.list);this.panel.appendTo(this.panels);this.container.tabs("refresh");c=c.container.data("aloha-tabs");this.index=c.length;c.push(this)},adoptInto:function(a,b){var c=this._elemBySlot[a];if(!c)return false;f[a]=b;b.adoptParent(this);c.append(b.element);c=this._groupBySlot[a];this._slotsList.push(a);
if(c){this._groupByComponent[b.id]=c;if(b.isVisible()){c.visibleCounter||c.element.removeClass("aloha-ui-hidden");c.visibleCounter=c.visibleCounter+1}}return true},foreground:function(){this.container.tabs("select",this.index)},childForeground:function(){this.foreground()},hasVisibleComponents:function(){var a=this._elemBySlot,b;for(b in a)if(a.hasOwnProperty(b)&&f[b]&&f[b].visible)return true;return false},childVisible:function(a,b){b?a.container.show():a.container.hasVisibleComponents()||a.container.hide();
var c=this._groupByComponent[a.id];if(c)if(b){0===c.visibleCounter&&c.element.removeClass("aloha-ui-hidden");c.visibleCounter=c.visibleCounter+1}else{c.visibleCounter=c.visibleCounter-1;0===c.visibleCounter&&c.element.addClass("aloha-ui-hidden")}},show:function(){var a;if(!(a=!this.list.children().length)){a=false;d("button:not(.aloha-multisplit-toggle)",this.panel).length!==0&&(a=true);a=!a}if(!a){this.handle.show();this.visible=true;this.container.show();(!this.container.find(".ui-tabs-active").length||
this.container.tabs("option","selected")===this.index)&&this.foreground()}},hide:function(){var a=this.list.children();if(0!==a.length){this.handle.hide();this.visible=false;if(this.index===this.container.tabs("option","selected")){var a=this.container.data("aloha-tabs"),b;for(b=0;b<a.length;++b)if(a[b].visible){this.container.tabs("select",b);return}this.handle.removeClass("ui-tabs-active");this.container.hide()}}}});d.extend(m,{createContainer:function(){var a=d("<div>",{unselectable:"on"}),b=d("<ul>",
{unselectable:"on"}).appendTo(a),f=d("<div>",{unselectable:"on"}).appendTo(a);a.data("list",b).data("panels",f).data("aloha-tabs",[]).tabs({select:function(b,f){var d=a.data("aloha-tabs");a.data("aloha-active-container",d[f.index]);c.pub("aloha.ui.container.selected",{data:d[f.index]})}});return a}});return m});define("ui/subguarded",["aloha/core","jquery","PubSub"],function(m,d,a){function j(a){a.alohaUid||(a.alohaUid=++g);return a.alohaUid}function c(a,b){k[a.alohaUid]||(k[a.alohaUid]=[]);k[a.alohaUid].push(b);
return k[a.alohaUid]}function b(a,b){l[a]||(l[a]=[]);l[a].push(b);return l[a]}function f(a){var b=l[a]||[],c;for(c=0;c<b.length;c++)b[c].apply(null,[k[b[c].alohaUid]||[]].concat(arguments))}var g=0,k={},l={};return function(){var e=Array.prototype.slice.call(arguments),g=e.shift();"string"===typeof g&&(g=[g]);var d=e.shift();j(d);c(d,e);for(var k,l=function(a,b,c){f(k,a,b,c)},r=function(){f(k)},e=0;e<g.length;e++)k=g[e],b(k,d),m.bind(k,l),a.sub(k,r)}});define("vendor/amplify.store",["util/json2"],
function(){var m={};(function(d,a){function j(f,e){c.addType(f,function(g,d,k){var j,r=d,m=(new Date).getTime();if(!g){r={};k=[];d=0;try{for(g=e.length;g=e.key(d++);)b.test(g)&&(j=ia.parse(e.getItem(g)),j.expires&&j.expires<=m?k.push(g):r[g.replace(b,"")]=j.data);for(;g=k.pop();)e.removeItem(g)}catch(v){}return r}g="__amplify__"+g;if(d===a)if(j=(j=e.getItem(g))?ia.parse(j):{expires:-1},j.expires&&j.expires<=m)e.removeItem(g);else return j.data;else if(null===d)e.removeItem(g);else{j=ia.stringify({data:d,
expires:k.expires?m+k.expires:null});try{e.setItem(g,j)}catch(u){c[f]();try{e.setItem(g,j)}catch(t){throw c.error();}}}return r})}var c=d.store=function(a,b,f,g){g=c.type;f&&(f.type&&f.type in c.types)&&(g=f.type);return c.types[g](a,b,f||{})};c.types={};c.type=null;c.addType=function(a,b){c.type||(c.type=a);c.types[a]=b;c[a]=function(b,e,f){f=f||{};f.type=a;return c(b,e,f)}};c.error=function(){return"amplify.store quota exceeded"};var b=/^__amplify__/,f;for(f in{localStorage:1,sessionStorage:1})try{window[f].getItem&&
j(f,window[f])}catch(g){}if(window.globalStorage)try{j("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===c.type&&(c.type="globalStorage")}catch(k){}(function(){if(!c.types.localStorage){var b=document.createElement("div");b.style.display="none";document.getElementsByTagName("head")[0].appendChild(b);try{b.addBehavior("#default#userdata"),b.load("amplify")}catch(e){b.parentNode.removeChild(b);return}c.addType("userData",function(e,f,g){b.load("amplify");var d,k,j=f,
m=(new Date).getTime();if(!e){j={};k=[];for(e=0;f=b.XMLDocument.documentElement.attributes[e++];)d=ia.parse(f.value),d.expires&&d.expires<=m?k.push(f.name):j[f.name]=d.data;for(;e=k.pop();)b.removeAttribute(e);b.save("amplify");return j}e=e.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(f===a)if(d=(f=b.getAttribute(e))?ia.parse(f):{expires:-1},d.expires&&d.expires<=m)b.removeAttribute(e);else return d.data;else null===f?b.removeAttribute(e):
(k=b.getAttribute(e),d=ia.stringify({data:f,expires:g.expires?m+g.expires:null}),b.setAttribute(e,d));try{b.save("amplify")}catch(u){null===k?b.removeAttribute(e):b.setAttribute(e,k);c.userData();try{b.setAttribute(e,d),b.save("amplify")}catch(t){throw null===k?b.removeAttribute(e):b.setAttribute(e,k),c.error();}}return j})}})();(function(){var b={},e={};c.addType("memory",function(c,f,g){if(!c)return b===a?a:ia.parse(ia.stringify(b));if(f===a)return b[c]===a?a:ia.parse(ia.stringify(b[c]));e[c]&&
(clearTimeout(e[c]),delete e[c]);if(null===f)return delete b[c],null;b[c]=f;g.expires&&(e[c]=setTimeout(function(){delete b[c];delete e[c]},g.expires));return f})})()})(m);return m});define("ui/floating","jquery aloha/core ui/surface ui/subguarded PubSub vendor/amplify.store util/browser".split(" "),function(m,d,a,j,c,b,f){function g(a,b,e,f){if("absolute"===n){b.top=b.top+q.scrollTop();b.left=b.left+q.scrollLeft()}p.offset=b;a.stop().animate(b,e,function(){f(b);c.pub("aloha.floating.changed",{position:m.extend({},
p)})})}function k(a){b.store("Aloha.FloatingMenu.pinned","true");b.store("Aloha.FloatingMenu.top",a.top);b.store("Aloha.FloatingMenu.left",a.left)}function l(a,b,c,e,f){for(b=0;b<a.length;b++)if(a[b][0].isActive())a[b][1](c,e,f)}function e(a){if(m.browser.msie){var b=a.$element.parent();a.$element.appendTo("body");a.$element.css("position",n);b.length?a.$element.appendTo(b):a.$element.detach()}else a.$element.css("position",n)}var q=m(window),n=f.ie7?"absolute":"fixed",p={style:n,offset:{top:0,left:0}};
return{getPinState:function(){return b.store("Aloha.FloatingMenu.pinned")==="true"?{top:parseInt(b.store("Aloha.FloatingMenu.top"),10),left:parseInt(b.store("Aloha.FloatingMenu.left"),10),isPinned:true}:{top:null,left:null,isPinned:false}},makeFloating:function(a,b){j(["aloha-selection-changed","aloha.ui.container.selected"],l,a,function(){a._move()});var c=function(){var c;c=b.pinLeft;var e=b.pinTop;e<0?e=0:e>q.height()&&(e=q.height()/2);c<0?c=0:c>q.width()&&(c=q.width()/2);c={top:e,left:c};b.setFloatingPosition(c);
a.$element.css({top:c.top,left:c.left})};q.scroll(function(){a._move(0)});q.resize(function(){b.isFloatingMode||c()});a.addPin();e(a);b.isFloatingMode||c();a.$element.css("z-index",10100).draggable({distance:20,stop:function(a,c){b.setFloatingPosition(c.position);b.isFloatingMode||k(c.position)}})},floatSurface:function(a,b,c,e){typeof c!=="number"&&(c=500);var f=(parseInt(m("body").css("marginTop"),10)||0)+(parseInt(m("body").css("paddingTop"),10)||0),a=a.$element,d=b.obj.offset(),k=d.top,d=d.left,
j=q.scrollTop(),l=k-j-f,n=d+a.width()-q.width();n>0&&(d=Math.max(0,d-n));if(l>=a.height()){b={top:k-j,left:d};b.top=b.top-(a.height()+10)}else{b=l+a.height()>l+b.obj.height()?{top:k+b.obj.height(),left:d}:{top:f,left:d};b.top=b.top+10}g(a,b,c,e)},togglePinSurface:function(a,c,e){a=a.$element;if(e){b.store("Aloha.FloatingMenu.pinned",null);b.store("Aloha.FloatingMenu.top",null);b.store("Aloha.FloatingMenu.left",null);a.find(".aloha-ui-pin").removeClass("aloha-ui-pin-down")}else{k(c);a.find(".aloha-ui-pin").addClass("aloha-ui-pin-down")}a.css({position:"fixed",
top:c.top})},POSITION_STYLE:n}});(function(){function m(a,b,f,g,d,j){b[a]&&(f.push(a),(!0===b[a]||1===b[a])&&g.push(d+a+"/"+j))}function d(a,b,f,g,d){b=g+b+"/"+d;require._fileExists(a.toUrl(b))&&f.push(b)}function a(c,b,f){for(var g in b)b.hasOwnProperty(g)&&(!c.hasOwnProperty(g)||f)?c[g]=b[g]:"object"===typeof b[g]&&a(c[g],b[g],f)}var j=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(c){var b=c.config();return{version:"2.0.1",load:function(c,g,k,l){l=l||{};l.locale&&(b.locale=
l.locale);var e=j.exec(c),q=e[1],n=e[4],p=e[5],o=n.split("-"),r=[],s={},v,u="";e[5]?(q=e[1],c=q+p):(p=e[4],n=b.locale,n||(n=b.locale="undefined"===typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),o=n.split("-"));if(l.isBuild){r.push(c);d(g,"root",r,q,p);for(v=0;v<o.length;v++)l=o[v],u+=(u?"-":"")+l,d(g,u,r,q,p);g(r,function(){k()})}else g([c],function(b){var c=[],e;m("root",b,c,r,q,p);for(v=0;v<o.length;v++){e=o[v];u=u+((u?"-":"")+e);m(u,b,c,r,q,p)}g(r,function(){var e,
f,d;for(e=c.length-1;e>-1&&c[e];e--){d=c[e];f=b[d];if(f===true||f===1)f=g(q+d+"/"+p);a(s,f)}s.t=function(a,b){return this[a]?this[a]:b?b:a};k(s)})})}}})})();define("ui/nls/i18n",{root:{"button.dismiss.label":"Dismiss","button.bold.label":"Bold","button.italic.label":"Italic","button.strikethrough.label":"Strikethrough","button.subscript.label":"Subscript","button.superscript.label":"Superscript","button.underline.label":"Underline","button.yes.label":"Yes","button.no.label":"No","button.p.label":"Paragraph",
"button.h1.label":"Heading 1","button.h2.label":"Heading 2","button.h3.label":"Heading 3","button.h4.label":"Heading 4","button.h5.label":"Heading 5","button.h6.label":"Heading 6","button.pre.label":"Preformatted text","button.removeFormatting.label":"Remove formatting","button.ol.label":"Insert ordered list","button.ul.label":"Insert unordered list","button.indent.label":"Indent list","button.outdent.label":"Outdent list","button.createLink.label":"Insert link","button.removeLink.label":"Remove link",
"button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.createLink.label":"Insert link","button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.justifyLeft.label":"Align to the left","button.justifyRight.label":"Align to the right","button.justifyCenter.label":"Center","button.justifyFull.label":"Justify","button.horizontalRule.label":"Insert horizontal rule",
"button.createLanguageAnnotation.label":"Insert language annotation","button.metaview.label":"Switch between meta and normal view","button.quote.label":"Format selection as quote","button.blockquote.label":"Format selection as blockquote","tab.format.label":"Format","tab.insert.label":"Insert","tab.abbr.label":"Abbreviation","tab.img.label":"Image","tab.link.label":"Link","tab.list.label":"List","tab.table.label":"Table","tab.col.label":"Table Column","tab.row.label":"Table Row","tab.cell.label":"Table Cell",
"tab.wai-lang.label":"Language annotation"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("ui/toolbar","jquery aloha/core ui/surface ui/tab ui/floating ui/context i18n!ui/nls/i18n jqueryui".split(" "),function(m,d,a,j,c,b,f){function g(){return!d.settings||!d.settings.toolbar||d.settings.toolbar.floating!==false}var k=a.extend({_moveTimeout:null,$_container:null,_tabBySlot:null,_tabs:[],_constructor:function(a,b){var d,n,p,o;this._super(a);this.$element=m("<div>",{"class":"aloha-ui aloha-ui-toolbar",
unselectable:"on"});this.$_container=j.createContainer().appendTo(this.$element);this._tabBySlot={};for(p=0;p<b.length;p++){d=b[p];n=new j(a,{label:f.t(d.label,d.label),showOn:d.showOn,container:this.$_container},d.components);for(o in n._elemBySlot)n._elemBySlot.hasOwnProperty(o)&&(this._tabBySlot[o]=n);this._tabs.push({tab:n,settings:d})}g()&&c.makeFloating(this,k)},adoptInto:function(a,b){var c=this._tabBySlot[a];return c&&c.adoptInto(a,b)},getActiveContainer:function(){return this.$_container.data("aloha-active-container")},
getContainers:function(){return this.$_container.data("aloha-tabs")},_move:function(a){var b=this;b._moveTimeout&&clearTimeout(b._moveTimeout);b._moveTimeout=setTimeout(function(){b._moveTimeout=null;d.activeEditable&&k.isFloatingMode&&c.floatSurface(b,d.activeEditable,a,k.setFloatingPosition)},20)},addPin:function(){var a=m('<div class="aloha-ui-pin">'),b=this.$element;b.find(".ui-tabs").append(a);b.find(".ui-tabs").hover(function(){b.addClass("aloha-ui-hover")},function(){b.removeClass("aloha-ui-hover")});
k.isFloatingMode||a.addClass("aloha-ui-pin-down");var f=this;a.click(function(){k.isFloatingMode=!k.isFloatingMode;var a;if(k.isFloatingMode)a={top:k.pinTop,left:k.pinLeft};else{a=f.$element.offset();a.top=a.top-m(window).scrollTop()}k.setFloatingPosition(a);c.togglePinSurface(f,a,k.isFloatingMode)})},show:function(){k.$surfaceContainer.children().detach();k.$surfaceContainer.append(this.$element);k.$surfaceContainer.stop().fadeTo(200,1);if(g()){var a=k.getFloatingPosition();this.$element.stop().css({top:a.top,
left:a.left});this._move()}},hide:function(){k.$surfaceContainer.stop().fadeOut(200,function(){k.$surfaceContainer.children().detach()})}});m.extend(k,{$surfaceContainer:null,isFloatingMode:true,pinLeft:0,pinTop:0,init:function(){k.$surfaceContainer=m("<div>",{"class":"aloha aloha-surface aloha-toolbar",unselectable:"on"}).hide();m(function(){k.$surfaceContainer.appendTo("body")});a.trackRange(k.$surfaceContainer);var b=c.getPinState();k.pinTop=b.top;k.pinLeft=b.left;k.isFloatingMode=!b.isPinned},
setFloatingPosition:function(a){k.pinTop=a.top;k.pinLeft=a.left},getFloatingPosition:function(){return{top:k.pinTop,left:k.pinLeft}}});k.init();return k});define("ui/settings",["jquery","util/arrays","util/maps","util/trees"],function(m,d,a,j){function c(a,b,c){var e,f,d=[],p;for(e=0;e<a.length;e++)if(f=a[e],!b[f.label]&&(p=j.postprune(f.components,c)))f=m.extend({},f),f.components=p,d.push(f);return d}function b(a,b,c){var e,f,d=[],p,o,r;for(e=0;e<a.length;e++)f=a[e],p=f.components||[],o=b[f.label],
!f.exclusive&&o&&(r=j.postprune(o.components,c))&&(p=p.concat(r)),f=m.extend({},o||{},f),f.components=p,d.push(f);return d}function f(b,c){var f,e=a.fillKeys({},c,!0);for(f=0;f<b.length;f++)e[b[f].label]=!0,a.fillKeys(e,j.flatten(b[f].components),!0);return e}return{defaultToolbarSettings:{tabs:[{label:"tab.format.label",showOn:{scope:"Aloha.continuoustext"},components:["bold strong italic emphasis underline \n subscript superscript strikethrough code quote".split(" "),"formatLink formatAbbr formatNumeratedHeaders toggleDragDrop \n toggleMetaView wailang toggleFormatlessPaste".split(" "),
"alignLeft alignCenter alignRight alignJustify \n orderedList unorderedList indentList outdentList colorPicker".split(" "),["formatBlock"]]},{label:"tab.insert.label",showOn:{scope:"Aloha.continuoustext"},components:["createTable characterPicker insertLink insertImage insertAbbr insertToc insertHorizontalRule insertTag".split(" ")]},{label:"tab.link.label",showOn:{scope:"link"},components:["editLink","removeLink","linkBrowser"]},{label:"tab.img.label",showOn:{scope:"image"},components:[["imageSource",
"\n","imageTitle"],["imageResizeWidth","\n","imageResizeHeight"],"imageAlignLeft imageAlignRight imageAlignNone imageIncPadding \n imageCropButton imageCnrReset imageCnrRatio imageDecPadding".split(" "),["imageBrowser"]]},{label:"tab.abbr.label",showOn:{scope:"abbr"},components:[["abbrText","removeAbbr"]]},{label:"tab.wai-lang.label",showOn:{scope:"wai-lang"},components:[["wailangfield","removewailang"]]},{label:"tab.table.label",showOn:{scope:"table.cell"},components:[["mergecells","splitcells",
"tableCaption","naturalFit","tableSummary"],["formatTable"]]},{label:"tab.col.label",showOn:{scope:"table.column"},components:["addcolumnleft addcolumnright deletecolumns columnheader mergecellsColumn splitcellsColumn formatColumn".split(" ")]},{label:"tab.row.label",showOn:{scope:"table.row"},components:["addrowbefore addrowafter deleterows rowheader mergecellsRow splitcellsRow formatRow".split(" ")]},{label:"tab.cell.label",showOn:{scope:"table.cell"},components:[["alignTop","alignMiddle","alignBottom",
"formatCell"]]}]},combineToolbarSettings:function(g,k,j){function e(a){return"array"===m.type(a)?!a.length:n[a]}var q=a.fillTuples({},d.map(k,function(a){return[a.label,a]})),n=f(g,j),g=b(g,q,e),k=c(k,n,e);return g.concat(k)}}});define("ui/ui-plugin","jquery aloha ui/context ui/container ui/surface ui/toolbar ui/scopes ui/settings PubSub jqueryui".split(" "),function(m,d,a,j,c,b,f,g,k){var l=new a,e=new b(l,function(){var a=d.settings.toolbar,b=g.defaultToolbarSettings;return!a?b.tabs:g.combineToolbarSettings(a.tabs||
[],b.tabs,a.exclude||[])}());d.bind("aloha-editable-activated",function(a){c.show(l);j.showContainersForContext(l,a)});d.bind("aloha-editable-deactivated",function(){c.suppressHide||c.hide(l)});k.sub("aloha.ui.scope.change",function(){j.showContainersForContext(l);f.getPrimaryScope();var a=e._tabs,b=f.getPrimaryScope(),c,g;for(g=0;g<a.length;g++){c=a[g].settings;if("object"===m.type(c.showOn)&&c.showOn.scope===b){a[g].tab.foreground();break}}});return{adoptInto:function(a,b){return e.adoptInto(a,
b)},showToolbar:function(a){c.show(l);j.showContainersForContext(l,a)}}});define("ui/ui",["jquery","ui/ui-plugin"],function(m,d){var a={};return{adopt:function(j,c,b){"string"!==m.type(j)?(b=c,c=j,j=b.name):b=m.extend({name:j},b);c.isInstance||(c=b?c.extend(b):c,c=new c);a[j]=c;d.adoptInto(j,c);return c},getAdoptedComponent:function(d){return a[d]||null}}});define("ui/utils",["jquery","jqueryui"],function(m){function d(a){return a.html||a.text||a.tooltip}function a(a){return'<img class="aloha-ui-inline-icon" src="'+
a+'">'}return{wrapWithLabel:function(a,c){return m("<label>",{"class":"aloha-ui-label"}).append(m("<span>",{"class":"aloha-ui-label-text",text:a})).append(c)},makeButton:function(j,c,b){j.button({label:d(c),text:!(!c.text&&!c.html),icons:{primary:c.icon||c.iconUrl&&"aloha-ui-inline-icon-container"||null,secondary:b&&"aloha-jqueryui-icon ui-icon-triangle-1-s"||null}});c.iconUrl&&j.button("widget").children(".ui-button-icon-primary").append(a(c.iconUrl));return j},makeButtonElement:function(a){return m("<button>",
a).attr("type","button")},makeButtonLabel:d,makeButtonLabelWithIcon:function(j){var c=d(j);j.iconUrl&&(c=a(j.iconUrl)+c);return c},makeButtonIconFromUrl:a}});define("ui/vendor/jquery-ui-autocomplete-html",["jquery","jqueryui"],function(m){(function(d){function a(a,c){var g=RegExp(d.ui.autocomplete.escapeRegex(c),"i");return d.grep(a,function(a){return g.test(d("<div>").html(a.label||a.value||a).text())})}var j=d.ui.autocomplete.prototype,c=j._initSource;d.extend(j,{_initSource:function(){this.options.html&&
d.isArray(this.options.source)?this.source=function(b,c){c(a(this.options.source,b.term))}:c.call(this)},_renderItem:function(a,c){return d("<li></li>").data("item.autocomplete",c).append(d("<a></a>")[this.options.html?"html":"text"](c.label)).appendTo(a)}})})(m)});define("ui/port-helper-attribute-field","jquery ui/ui ui/component ui/scopes ui/context ui/utils aloha/repositorymanager aloha/selection aloha/console ui/vendor/jquery-ui-autocomplete-html".split(" "),function(m,d,a,j,c,b,f,g){return function(k){function j(a,
b){b.item&&t(b.item.obj);q()}function e(){q()}function q(){o();if(O&&G!==m(O).attr(U)){T||f.markObject(O);v()===""&&s()}}function n(a){var b=m(O);a(b);for(var b=0,c=S.length;b<c;b++)a(m(S[b]))}function p(){var a=m(O);D&&n(function(a){a.addClass(D)});if(!H){o();a.context&&(a.context.style&&a.context.style["background-color"])&&n(function(a){a.attr("data-original-background-color",a.context.style["background-color"])});n(function(a){a.css("background-color","#80B5F2")})}}function o(){var a=m(O);D&&
n(function(a){a.removeClass(D)});if(!H){var b=a.attr("data-original-background-color");n(function(a){a.css("background-color",b||"")});a.attr("style")||n(function(a){a.removeAttr("style")});n(function(a){a.removeAttr("data-original-background-color")})}}function r(a,b){return a.replace(/\{([^}]+)\}/g,function(a,c){return c in b?b[c]:""})}function s(){if(null!==F){Q.css("color","#AAA");Q.val(F)}}function v(){return Q.val()}function u(a){Q.val(a);Q.css("color","black")}function t(a){if(T=a){var b=a[z];
u(b);W=b;x(U,a[y]);f.markObject(O,a)}else W=null}function x(a,b,c,e){O&&(typeof e!=="undefined"&&!e.match(RegExp(c))?m(O).removeAttr(a):n(function(c){c.attr(a,b)}))}var y=k.valueField||"id",z=k.displayField||"name",A=k.objectTypeFilter||["all"],F=k.placeholder,H=!!k.noTargetHighlight,D=k.targetHighlightClass,Q=k.element?m(k.element):m('<input id="aloha-attribute-field-'+k.name+'">'),E,B,T,W,O,U,G,S=[];k.cls&&Q.addClass(k.cls);k.width&&Q.width(k.width);E=d.adopt(k.name,a,{scope:k.scope,init:function(){if(k.element)this.element=
Q;else if(k.label){this.element=b.wrapWithLabel(k.label,Q);k.labelClass&&this.element.addClass(k.labelClass)}else this.element=m("<span>").append(Q);Q.autocomplete({html:true,appendTo:c.selector,source:function(a,b){f.query({queryString:a.term,objectTypeFilter:A},function(a){b(m.map(a.items,function(a){return{label:r(B,a),value:a.name,obj:a}}))})},select:j})}});Q.bind("focus",function(a){if(m(a.target).is(":visible")){p();v()===F&&u("")}}).bind("blur",e).bind("keydown",function(a){(a.keyCode==13||
a.keyCode==27)&&a.preventDefault()}).bind("keyup",function(a){if(T&&W!==v())W=T=null;T||x(U,v());if(a.keyCode==13||a.keyCode==27){g.getRangeObject().select();q()}});s();Aloha.bind("aloha-editable-deactivated",e);var I={getInputElem:function(){return Q[0]},hasInputElem:function(){return true},getInputId:function(){return Q.attr("id")},hide:function(){Q.hide()},show:function(){Q.show()},foreground:function(){E.foreground()},focus:function(){E.focus();Q.focus()},getTargetObject:function(){return O},
setTargetObject:function(a,b){O=a;U=b;S=[];t(null);if(a&&b){G=m(a).attr(b);u(m(O).attr(U));f.getObject(a,function(a){a&&a.length>0&&t(a[0])})}else u("")},addAdditionalTargetObject:function(a){S.push(a)},setAttribute:x,getItem:function(){return T},setItem:t,setValue:u,getValue:v,addListener:function(a,b){Q.bind(a,m.proxy(b,I))},setObjectTypeFilter:function(a){A=a},setTemplate:function(a){B=a},setPlaceholder:s,getInputJQuery:function(){return Q}};return I}});define("ui/button",["jquery","ui/component",
"ui/utils","jqueryui"],function(m,d,a){return d.extend({init:function(){this._super();this.createButtonElement();a.makeButton(this.buttonElement,this).button("widget").tooltip({tooltipClass:"aloha aloha-ui-tooltip",position:{my:"left top",at:"right bottom"}}).zIndex(0).click(m.proxy(function(){this.closeTooltip();this._onClick()},this))},closeTooltip:function(){this.buttonElement.tooltip("close",null,!0)},_onClick:function(){this.click()},click:function(){},createButtonElement:function(){var d=a.makeButtonElement();
this["class"]&&d.addClass(this["class"]);this.element=this.buttonElement=d;var c=this;d.bind("mouseleave",function(){c.closeTooltip()});return d},disable:function(){this.element.button("option","disabled",!1)},enable:function(a){this.element.button("option","disabled",!1===a)}})});define("ui/toggleButton",["jquery","ui/button","jqueryui"],function(m,d){return d.extend({_checked:!1,setState:function(a){this._checked!==a&&((this._checked=a)?this.element.addClass("aloha-button-active"):this.element.removeClass("aloha-button-active"))},
getState:function(){return this._checked},_onClick:function(){this.setState(!this._checked);this.click()}})});define("link/nls/i18n",{root:{"button.addlink.tooltip":"Insert Link","button.removelink.tooltip":"Remove Link","newlink.defaulttext":"New Link","floatingmenu.tab.link":"Link","link.target.self":"Self","link.target.blank":"Blank","link.target.parent":"Parent","link.target.top":"Top","link.target.framename":"Framename","link.target.legend":"Target","link.title.legend":"Title",insertLink:"ctrl+k"},
ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("aloha/nls/i18n",{root:{"plugin.abbr.floatingmenu.tab.abbr":"Abbreviation","floatingmenu.tab.format":"Format","floatingmenu.tab.insert":"Insert",yes:"Yes",no:"No",cancel:"Cancel","repository.no_item_found":"No item found.","repository.loading":"Loading","repository.no_items_found_yet":"No items found yet..."},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("util/keys",["jquery"],function(m){var d=function(){var a={};m.each({8:"backspace",
9:"tab",13:"enter",16:"shift control alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",37:"left up right down",45:"insert",46:"delete",48:"0 1 2 3 4 5 6 7 8 9",65:"a b c d e f g h i j k l m n o p q r s t u v w x y z",112:"f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13 f14 f15"},function(d,c){var b=parseInt(d,10);m.each(c.split(" "),function(c,g){a[b+c]=g})});return a}();return{getToken:function(a){return d[a]},keyCodeTokenMap:m.extend({},d)}});define("link/link-plugin","aloha aloha/plugin aloha/ephemera jquery ui/port-helper-attribute-field ui/ui ui/scopes ui/surface ui/button ui/toggleButton i18n!link/nls/i18n i18n!aloha/nls/i18n aloha/console PubSub util/keys".split(" "),
function(m,d,a,j,c,b,f,g,k,l,e,q,n,p,o){function r(){j(document).bind("keydown.aloha-link.pointer-fix",function(a){(a.metaKey||o.getToken(a.keyCode)==="control")&&j("body").addClass("aloha-link-pointer")}).bind("keyup.aloha-link.pointer-fix",function(a){(a.metaKey||o.getToken(a.keyCode)==="control")&&j("body").removeClass("aloha-link-pointer")})}function s(a){a.obj.delegate("a","click.aloha-link.meta-click-link",function(a){if(a.metaKey||a.ctrlKey){m.activeEditable.blur();window.setTimeout(function(){location.href=
a.target},0);a.stopPropagation();return false}})}function v(a,b){for(var c=a.findAllMarkupByTagName("A",a),e=0,f=c.length;e<f;e++)b.addAdditionalTargetObject(c[e])}function u(a,b){var c,e=false;if(!a.ignoreNextSelectionChangedEvent&&m.Selection.isSelectionEditable()&&m.activeEditable!=null)if(c=a.findLinkMarkup(b)){a.toggleLinkScope(true);a.hrefField.setTargetObject(c,"href");v(b,a.hrefField);if(j("#"+a.hrefField.getInputId()).length==0){a.hrefUpdateInt!==null&&clearInterval(a.hrefUpdateInt);a.hrefUpdateInt=
setInterval(function(){if(j("#"+a.hrefField.getInputId()).length>0){a.hrefField.setTargetObject(c,"href");clearInterval(a.hrefUpdateInt)}},200)}m.trigger("aloha-link-selected");e=true;p.pub("aloha.link.selected",{input:a.hrefField.getInputElem(),href:a.hrefField.getValue(),element:a.hrefField.getTargetObject()})}else{a.toggleLinkScope(false);a.hrefField.setTargetObject(null);m.trigger("aloha-link-unselected")}else a.toggleLinkScope(false);a.ignoreNextSelectionChangedEvent=false;return e}var t=window.GENTICS,
x="",y,z={merge:true,mergeable:function(a){return"aloha-new-link"===a.className&&a.nextSibling&&"aloha-new-link"===a.nextSibling.className}};a.classes("aloha-link-pointer","aloha-link-text");return d.create("link",{config:["a"],title:null,titleregex:null,targetregex:"",target:"",cssclassregex:null,cssclass:"",objectTypeFilter:[],onHrefChange:null,ignoreNextSelectionChangedEvent:false,hrefUpdateInt:null,hotKey:{insertLink:e.t("insertLink","ctrl+k")},hrefValue:"http://",init:function(){var a=this;if("undefined"!==
typeof this.settings.title)this.title=this.settings.title;if("undefined"!==typeof this.settings.titleregex)this.titleregex=this.settings.titleregex;if(typeof this.settings.targetregex!="undefined")this.targetregex=this.settings.targetregex;if(typeof this.settings.target!="undefined")this.target=this.settings.target;if(typeof this.settings.cssclassregex!="undefined")this.cssclassregex=this.settings.cssclassregex;if(typeof this.settings.cssclass!="undefined")this.cssclass=this.settings.cssclass;if(typeof this.settings.objectTypeFilter!=
"undefined")this.objectTypeFilter=this.settings.objectTypeFilter;if(typeof this.settings.onHrefChange!="undefined")this.onHrefChange=this.settings.onHrefChange;typeof this.settings.hotKey!="undefined"&&j.extend(true,this.hotKey,this.settings.hotKey);if(typeof this.settings.hrefValue!="undefined")this.hrefValue=this.settings.hrefValue;this.createButtons();this.subscribeEvents();this.bindInteractions();m.bind("aloha-plugins-loaded",function(){a.initSidebar(m.Sidebar.right);p.pub("aloha.link.ready",
{plugin:a})})},nsSel:function(){var a=[];j.each(arguments,function(){a.push("."+(this==""?"aloha-link":"aloha-link-"+this))});return j.trim(a.join(" "))},nsClass:function(){var a=[];j.each(arguments,function(){a.push(this==""?"aloha-link":"aloha-link-"+this)});return j.trim(a.join(" "))},initSidebar:function(a){var b=this;b.sidebar=a;a.addPanel({id:b.nsClass("sidebar-panel-target"),title:e.t("floatingmenu.tab.link"),content:"",expanded:true,activeOn:"a, link",onInit:function(){var a=this;this.setContent('<div class="'+
b.nsClass("target-container")+'"><fieldset><legend>'+e.t("link.target.legend")+'</legend><ul><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_self" /><span>'+e.t("link.target.self")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_blank" /><span>'+e.t("link.target.blank")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_parent" /><span>'+e.t("link.target.parent")+
'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_top" /><span>'+e.t("link.target.top")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="framename" /><span>'+e.t("link.target.framename")+'</span></li><li><input type="text" class="'+b.nsClass("framename")+'" /></li></ul></fieldset></div><div class="'+b.nsClass("title-container")+'" ><fieldset><legend>'+e.t("link.title.legend")+'</legend><input type="text" class="'+
b.nsClass("linkTitle")+'" /></fieldset></div>');j(b.nsSel("framename")).live("keyup",function(){j(a.effective).attr("target",j(this).val().replace('"',"&quot;").replace("'","&#39;"))});j(b.nsSel("radioTarget")).live("change",function(){if(j(this).val()=="framename")j(b.nsSel("framename")).slideDown();else{j(b.nsSel("framename")).slideUp().val("");j(a.effective).attr("target",j(this).val())}});j(b.nsSel("linkTitle")).live("keyup",function(){j(a.effective).attr("title",j(this).val().replace('"',"&quot;").replace("'",
"&#39;"))})},onActivate:function(a){var c=this;c.effective=a;if(j(c.effective).attr("target")!=null){var e=true;j(b.nsSel("framename")).hide().val("");j(b.nsSel("radioTarget")).each(function(){j(this).removeAttr("checked");if(j(this).val()===j(c.effective).attr("target")){e=false;j(this).attr("checked","checked")}});if(e){j(b.nsSel('radioTarget[value="framename"]')).attr("checked","checked");j(b.nsSel("framename")).val(j(c.effective).attr("target")).show()}}else{j(b.nsSel("radioTarget")).first().attr("checked",
"checked");j(c.effective).attr("target",j(b.nsSel("radioTarget")).first().val())}c=this;c.effective=a;j(b.nsSel("linkTitle")).val(j(c.effective).attr("title"))}});a.show()},subscribeEvents:function(){var a=this,b={},c=0;m.bind("aloha-editable-created",function(e,f){var g=a.getEditableConfig(f.obj),g=j.inArray("a",g)!==-1;if(b[f.getId()]=g){f.obj.bind("keydown.aloha-link",a.hotKey.insertLink,function(){if(a.findLinkMarkup()){a.hrefField.foreground();a.hrefField.focus()}else a.insertLink(true);return false});
f.obj.find("a").each(function(){a.addLinkEventHandlers(this)});0===c++&&r()}});m.bind("aloha-editable-destroyed",function(a,b){b.obj.unbind(".aloha-link");0===--c&&j(document).unbind(".aloha-link.pointer-fix")});m.bind("aloha-editable-activated",function(c,e){if(b[m.activeEditable.getId()]){a._formatLinkButton.show();a._insertLinkButton.show()}else{a._formatLinkButton.hide();a._insertLinkButton.hide()}s(e.editable)});var e=false;m.bind("aloha-selection-changed",function(c,f){var g=false;if(m.activeEditable&&
b[m.activeEditable.getId()])(g=u(a,f))&&e!==g&&a.hrefField.foreground();e=g});var f=this;m.bind("aloha-editable-deactivated",function(a,b){if(e){setTimeout(function(){e||f.toggleLinkScope(false)},100);e=false}b.editable.obj.unbind(".aloha-link.meta-click-link")})},toggleLinkScope:function(a){if(!(this._isScopeActive===a&&m.activeEditable&&this._isScopeActive_editableId===m.activeEditable.getId())){this._isScopeActive=a;this._isScopeActive_editableId=m.activeEditable&&m.activeEditable.getId();if(a){this.hrefField.show();
this._insertLinkButton.hide();m.activeEditable&&m.activeEditable.obj[0].nodeName==="A"?this._removeLinkButton.hide():this._removeLinkButton.show();this._formatLinkButton.setState(true);f.enterScope(this.name,"link")}else{this.hrefField.hide();this._insertLinkButton.show();this._removeLinkButton.hide();this._formatLinkButton.setState(false);f.leaveScope(this.name,"link",true)}}},addLinkEventHandlers:function(a){var b=this;j(a).mouseenter(function(){m.Log.debug(b,"mouse over link.");b.mouseOverLink=
a;b.updateMousePointer()});j(a).mouseleave(function(){m.Log.debug(b,"mouse left link.");b.mouseOverLink=null;b.updateMousePointer()});j(a).click(function(a){if(a.metaKey){m.activeEditable.blur();window.setTimeout(function(){location.href=a.target},0);a.stopPropagation();return false}})},createButtons:function(){var a=this;this._formatLinkButton=b.adopt("formatLink",l,{tooltip:e.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",click:function(){a.formatLink()}});
this._insertLinkButton=b.adopt("insertLink",k,{tooltip:e.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",click:function(){a.insertLink(false)}});this.hrefField=c({name:"editLink",width:320,valueField:"url",cls:"aloha-link-href-field",scope:"Aloha.continuoustext",noTargetHighlight:false,targetHighlightClass:"aloha-focus"});this.hrefField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.hrefField.setObjectTypeFilter(this.objectTypeFilter);this._removeLinkButton=
b.adopt("removeLink",k,{tooltip:e.t("button.removelink.tooltip"),icon:"aloha-icon aloha-icon-unlink",scope:"Aloha.continuoustext",click:function(){a.removeLink()}})},bindInteractions:function(){var a=this;this.hrefField.addListener("keyup",function(b){if(o.getToken(b.keyCode)==="escape"){var c=a.hrefField.getValue();if(!(c[0]=="/"||c[0]=="#"||c.match(/^.*\.([a-z]){2,4}$/i)||c.match(/^([a-z]){3,10}:\/\/.+/i)||c.match(/^(mailto|tel):.+/i))){c=a.hrefField.getValue();a.hrefField.setValue(c);(c==a.hrefValue||
c=="")&&a.removeLink(false)}}a.hrefChange();if(o.getToken(b.keyCode)==="enter"){b=m.Selection.getRangeObject();a.ignoreNextSelectionChangedEvent=true;b.startContainer=b.endContainer;b.startOffset=b.endOffset;b.select();c=j(a.hrefField.getInputElem()).attr("value");(c==a.hrefValue||c=="")&&a.removeLink(false);window.setTimeout(function(){f.setScope("Aloha.continuoustext")},100)}else{y=j(a.hrefField.getInputElem()).attr("value");x!=y&&(x=y)}});j(document).keydown(function(b){m.Log.debug(a,"Meta key down.");
a.metaKey=b.metaKey;a.updateMousePointer()}).keyup(function(b){m.Log.debug(a,"Meta key up.");a.metaKey=b.metaKey;a.updateMousePointer()})},updateMousePointer:function(){if(this.metaKey&&this.mouseOverLink){m.Log.debug(this,"set pointer");j(this.mouseOverLink).removeClass("aloha-link-text");j(this.mouseOverLink).addClass("aloha-link-pointer")}else{j(this.mouseOverLink).removeClass("aloha-link-pointer");j(this.mouseOverLink).addClass("aloha-link-text")}},findLinkMarkup:function(a){typeof a=="undefined"&&
(a=m.Selection.getRangeObject());if(m.activeEditable){var b=m.activeEditable.obj;b[0]&&b[0].nodeName==="A"&&(b=b.parent());return a.findMarkup(function(){return this.nodeName=="A"},b)}return null},formatLink:function(){m.activeEditable&&(this.findLinkMarkup(m.Selection.getRangeObject())?this.removeLink():this.insertLink())},insertLink:function(a){var b=this,c=m.Selection.getRangeObject(),f;if(c.startContainer&&c.endContainer&&!this.findLinkMarkup(c)){this.hrefField.foreground();c.isCollapsed()&&a!==
false&&t.Utils.Dom.extendToWord(c);if(c.isCollapsed()){a=e.t("newlink.defaulttext");f=j('<a href="'+b.hrefValue+'" class="aloha-new-link">'+a+"</a>");t.Utils.Dom.insertIntoDOM(f,c,j(m.activeEditable.obj));c.startContainer=c.endContainer=f.contents().get(0);c.startOffset=0;c.endOffset=a.length}else{f=j('<a href="'+b.hrefValue+'" class="aloha-new-link"></a>');t.Utils.Dom.addMarkup(c,f,false);t.Utils.Dom.doCleanup(z,c)}m.activeEditable.obj.find("a.aloha-new-link").each(function(){b.addLinkEventHandlers(this);
j(this).removeClass("aloha-new-link")});c.select();this.hrefField.focus();this.hrefField.hasInputElem()&&j(this.hrefField.getInputElem()).attr("value",b.hrefValue).select();a=m.createRange();a.setStart(c.startContainer,c.startOffset);a.setEnd(c.endContainer,c.endOffset);p.pub("aloha.link.insert",{range:a});this.hrefChange()}},removeLink:function(a){var b=m.Selection.getRangeObject(),c=this.findLinkMarkup(),e;this.hrefField.setItem(null);if(c){e=j(c).text();t.Utils.Dom.removeFromDOM(c,b,true);b.startContainer=
b.endContainer;b.startOffset=b.endOffset;b.select();(typeof a=="undefined"||a===true)&&f.setScope("Aloha.continuoustext");a=m.createRange();a.setStart(b.startContainer,b.startOffset);a.setEnd(b.endContainer,b.endOffset);p.pub("aloha.link.remove",{range:a,text:e})}},automaticallySetTitle:function(a,b,c){var e=j(a.getTargetObject()).attr("title");b&&(!e||b===e)&&a.setAttribute("title",b,c,a.getValue())},hrefChange:function(){this.automaticallySetTitle(this.hrefField,this.title,this.titleregex);this.target!=
""&&this.hrefField.setAttribute("target",this.target,this.targetregex,this.hrefField.getValue());null!=this.cssclassregex&&this.hrefField.setAttribute("class",this.cssclass,this.cssclassregex,this.hrefField.getValue());var a=this.hrefField.getValue(),b=this.hrefField.getTargetObject();m.trigger("aloha-link-href-change",{href:a,obj:b,item:this.hrefField.getItem()});p.pub("aloha.link.changed",{href:a,element:b,input:this.hrefField.getInputElem()});typeof this.onHrefChange=="function"&&this.onHrefChange.call(this,
this.hrefField.getTargetObject(),this.hrefField.getValue(),this.hrefField.getItem())}})});define("ui/dialog",["jquery","ui/component","i18n!ui/nls/i18n"],function(m,d,a){function j(a){var b={};a.text&&(b.text=a.text);a.html&&(b.html=a.html);return m("<div>",b)}function c(a){return function(){a.apply(this);m(this).dialog("destroy").remove()}}function b(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=c(a[b]));return a}function f(a,b){var c="aloha aloha-dialog";a.cls&&(c+=" "+a.cls);return{resizable:!1,
modal:!0,title:a.title||b,dialogClass:c,zIndex:10200}}return{confirm:function(c){var d=c.buttons||{},l=a.t("button.yes.label"),e=a.t("button.no.label");null!==d.Yes&&"Yes"!==l&&(d[l]=d.Yes,delete d.Yes);null!==d.No&&"No"!==e&&(d[e]=d.No,delete d.No);d[l]=d[l]||c.yes||m.noop;d[e]=d[e]||c.no||m.noop;if(c.answer){var q=d[l],n=d[e];d[l]=function(){q();c.answer(true)};d[e]=function(){n();c.answer(false)}}var p=j(c).dialog(m.extend(f(c,"Confirm"),{buttons:b(d)}));return function(){p.dialog("destroy").remove()}},
alert:function(c){var d={};d[a.t("button.dismiss.label")]=m.noop;var l=j(c).dialog(m.extend(f(c,"Alert"),{buttons:b(d)}));return function(){l.dialog("destroy").remove()}},modal:function(a){a=j(a).dialog(m.extend(f(a,""),a));a.parent().find(".ui-dialog-titlebar").remove();return a},progress:function(a){var b=m("<div>").progressbar({value:null!=a.value?a.value:100}),c=j(a).dialog(m.extend(f(a,"Progress"),{open:function(){m(this).append(b)}}));return function(a){null!=a?b.progressbar({value:a}):c.dialog("destroy").remove()}}}});
define("ui/multiSplit",["jquery","ui/component","ui/button","ui/utils"],function(m,d,a,j){return d.extend({_activeButton:null,_isOpen:!1,init:function(){this._super();var a=this,b=this.element=m("<div>",{"class":"aloha-multisplit"});this.contentElement=m("<div>",{"class":"aloha-multisplit-content"}).appendTo(b);this.toggleButton=j.makeButtonElement({"class":"aloha-multisplit-toggle",click:function(){a.toggle()}}).button().appendTo(b);this.buttons=[];var f=this.getButtons();0===f.length&&b.hide();
for(b=0;b<f.length;b++)this.addButton(f[b]);m("body").click(function(b){a._isOpen&&(!a.element.is(b.target)&&0===a.element.find(b.target).length)&&a.close()})},addButton:function(c){var b=this,f=new (a.extend({tooltip:c.tooltip,icon:c.wide?c.icon:"aloha-large-icon "+c.icon,iconOnly:c.wide?!1:!0,init:function(){this._super();c.init&&c.init.call(this)},click:function(){c.click.apply(b,arguments);b.close()}}));c.wide||f.element.addClass("aloha-large-button");b.buttons[c.name]={settings:c,component:f,
element:f.element,visible:!0};var g=this.contentElement.children(".aloha-ui-multisplit-fullwidth");!c.wide&&g.length?g.before(f.element[0]):this.contentElement.append(f.element[0])},setActiveButton:function(a){a||(a=null);null!==this._activeButton&&this.buttons[this._activeButton].element.removeClass("aloha-multisplit-active");this._activeButton=a;null!==a&&this.buttons[a].element.addClass("aloha-multisplit-active")},toggle:function(){this.element.toggleClass("aloha-multisplit-open");this._isOpen=
!this._isOpen},open:function(){this.element.addClass("aloha-multisplit-open");this._isOpen=!0},close:function(){this.element.removeClass("aloha-multisplit-open");this._isOpen=!1},show:function(a){a||(a=null);null!==a&&void 0!==this.buttons[a]&&(this.buttons[a].element.show(),this.buttons[a].visible=!0,this.element.show())},hide:function(a){var b,f=!1;a||(a=null);if(null!==a&&void 0!==this.buttons[a]){this.buttons[a].element.hide();this.buttons[a].visible=!1;for(b in this.buttons)if(this.buttons.hasOwnProperty(b)&&
this.buttons[b].visible){this.element.show();f=!0;break}f||this.element.hide()}}})});define("ui/port-helper-multi-split",["aloha/core","jquery","ui/ui","ui/multiSplit"],function(m,d,a,j){return function(c){var b;b=a.adopt(c.name,j,{scope:c.scope,getButtons:function(){var a=[];d.each(c.items,function(b,c){a.push({tooltip:c.tooltip,text:c.text,name:c.name,icon:c.iconClass,click:c.click,init:function(){c.cls&&this.element.addClass(c.cls);c.init&&c.init.call(this)},wide:c.wide})});return a}});return{pushItem:function(a){b.addButton(a)},
showItem:function(a){b.show(a)},hideItem:function(a){b.hide(a)},setActiveItem:function(a){b.setActiveButton(a)}}}});define("table/nls/i18n",{root:{"floatingmenu.tab.table":"Table","floatingmenu.tab.tablelayout":"Table Layout","deleterows.confirm":"Do you really want to delete the selected rows?","deletecolumns.confirm":"Do you really want to delete the selected columns?","deletetable.confirm":"Do you really want to delete the table?",Table:"Table","button.createtable.tooltip":"Insert Table","button.addcolleft.tooltip":"Add Column left",
"button.addcolright.tooltip":"Add Column right","button.delcols.tooltip":"Delete Columns","button.addrowbefore.tooltip":"Add Row before","button.addrowafter.tooltip":"Add Row after","button.delrows.tooltip":"Delete Rows","button.caption.tooltip":"Table caption","button.naturalfit.tooltip":"Reset table sizing","empty.caption":"Table caption","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting","button.rowheader.tooltip":"Format row as table header","button.columnheader.tooltip":"Format column as table header",
"button.mergecells.tooltip":"Merge Cells","button.splitcells.tooltip":"Split Cells","table.label.target":"Summary","table.sidebar.title":"Table","table.mergeCells.notRectangular":"Only a rectangular selection can be merged","table.addColumns.nonConsecutive":"Please select a single column or a consecutive range of columns","table.createTable.nestedTablesNoSupported":"Sorry, nested tables are not supported"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("table/table-create-layer",["jquery"],
function(m){CreateLayer=function(d){this.TablePlugin=d};CreateLayer.prototype.parameters={elemId:"aloha-table-createLayer",className:"aloha-table-createdialog",numX:10,numY:10,layer:void 0,target:void 0};CreateLayer.prototype.config={};CreateLayer.prototype.visible=!1;CreateLayer.prototype.show=function(){var d=this.get("layer");null==d?this.create():(this.setPosition(d),d.find("td").removeClass("hover"),d.show());this.visible=!0};CreateLayer.prototype.create=function(){var d=this,a=m("<div></div>");
a.id=this.get("elemId");a.addClass(this.get("className"));var j=m("<table></table>");j.css("width",15*(this.get("numX")+6));for(var c,b,f=0;f<this.get("numY");f++){c=m("<tr></tr>");for(var g=0;g<this.get("numX");g++)b=m("<td> </td>"),0==f&&0==g&&b.addClass("hover"),b.bind("mouseover",{rowId:f,colId:g},function(a){d.handleMouseOver(a,j)}),b.bind("click",{rowId:f,colId:g},function(a){d.TablePlugin.createTable(a.data.colId+1,a.data.rowId+1);d.hide()}),c.append(b);j.append(c)}a.append(j);this.set("layer",
a);this.setPosition();a.bind("click",function(a){a.stopPropagation()}).mousedown(function(a){a.stopPropagation()});m("body").append(a).bind("click",function(a){d.visible&&!(a.target===d.get("target")[0]||m.contains(d.get("target")[0],a.target))&&d.hide()})};CreateLayer.prototype.handleMouseOver=function(d,a){for(var j=d.data.rowId,c=d.data.colId,b=a.find("tr"),f=0;f<=b.length;f++)for(var g=m(b[f]).find("td"),k=0;k<=g.length;k++)f<=j&&k<=c?m(g[k]).addClass("hover"):m(g[k]).removeClass("hover")};CreateLayer.prototype.setPosition=
function(){var d=m(this.get("target")),a=d.offset();this.get("layer").css("left",a.left+"px");this.get("layer").css("top",a.top+d.height()+"px")};CreateLayer.prototype.hide=function(){this.get("layer").hide();this.visible=!1};CreateLayer.prototype.get=function(d){if(this.config[d])return this.config[d];if(this.parameters[d])return this.parameters[d]};CreateLayer.prototype.set=function(d,a){this.config[d]?this.config[d]=a:this.parameters[d]=a};return CreateLayer});define("table/table-plugin-utils",
["jquery","aloha/copypaste","util/browser","aloha/console"],function(m,d,a,j){var c={cellIndexToGridColumn:function(a,f,g){var d=null;c.walkCells(a,function(a,b,c){if(a===f&&b===g)return d=c,!1});return d},walkCells:function(a,f){for(var g=[],d=0;d<a.length;d++){for(var j=a[d].cells,e=0,q=0;q<j.length;q++){for(var n=j[q],m=c.colspan(n),n=c.rowspan(n);g[q+e];)g[q+e]-=1,e+=1;if(!1===f(d,q,q+e,m,n))return;for(var o=0;o<m;o++){if(g[q+e+o])throw"an impossible case has occurred";g[q+e+o]=n-1}e+=m-1}for(;q+
e<g.length;e++)g[q+e]&&(g[q+e]-=1)}},makeGrid:function(a){var f=[];c.walkCells(a,function(c,d,j,e,q){for(var d=a[c].cells[d],n=0;n<q;n++){f[c+n]=f[c+n]||[];for(var m=0;m<e;m++)f[c+n][j+m]={cell:d,colspan:e,rowspan:q,spannedX:m,spannedY:n}}});return f},containsDomCell:function(a){return 0===a.spannedX&&0===a.spannedY},leftDomCell:function(a,c,g){do{var d=a[c][g];if(0===d.spannedY)return d.cell;g-=d.spannedX+1}while(0<=g);return null},splitCell:function(a,f){var g=m(a),d=c.colspan(a),j=c.rowspan(a);
if(!(1===d&&1===j)){for(var e=g.parent(),q=e.parent().children(),e=e.index(),n=g.index(),p=c.makeGrid(q),n=c.cellIndexToGridColumn(q,e,n),o=0;o<j;o++)for(var r=0===o?1:0;r<d;r++){var s=c.leftDomCell(p,e+o,n);null==s?q.eq(e+o).prepend(f()):m(s).after(f())}g.removeAttr("colSpan");g.removeAttr("rowSpan")}},rowspan:function(a){return parseInt(m(a).attr("rowspan"))||1},colspan:function(a){return parseInt(m(a).attr("colspan"))||1},walkGrid:function(a,c){for(var g,d=0,j=a.length;d<j;d++){g=a[d];for(var e=
0,q=g.length;e<q;e++)if(!1===c(g[e],e,d))return}},walkGridInsideRect:function(a,f,d){c.walkGrid(a,function(a,b,c){if(c>=f.top&&c<f.bottom&&b>=f.left&&b<f.right)return d(a,b,c)})},leftTrimArray:function(a){for(var c=0;c<a.length;c++)if(null!=a[c])return a.slice(c,a.length);return[]},makeContour:function(a,f){var d=[],j=[],l=[],e=[];c.walkGrid(a,function(a,b,c){if(f(a,b,c)){if(null==d[c]||b<d[c])d[c]=b;if(null==j[c]||b>j[c])j[c]=b;if(null==l[b]||c<l[b])l[b]=c;if(null==e[b]||c>e[b])e[b]=c}});d=c.leftTrimArray(d);
j=c.leftTrimArray(j);l=c.leftTrimArray(l);e=c.leftTrimArray(e);return{left:d,right:j,top:l,bottom:e}},indexOfAnyBut:function(a,c){for(var d=0;d<a.length;d++)if(c!==a[d])return d;return-1},isConsecutive:function(a){for(var c=1;c<a.length;c++)if(1!==Math.abs(a[c]-a[c-1]))return!1;return!0},resizeCellWidth:function(a,c){m(a).css("width",c);m(a).find(".aloha-table-cell-editable").eq(0).css({width:c,"word-wrap":"break-word"})},getMinColWidth:function(a){var f=a.closest("tbody").children("tr"),d=a.closest("tr"),
j=c.cellIndexToGridColumn(f,f.index(d),d.children().index(a)),l="";c.walkCells(f,function(a,b,c,d){if(c===j&&(a=m(m(f[a]).children()[b]),!(1<d))){d=a.text().split(" ");for(a=0;a<d.length;a++)d[a].length>l.length&&(l=d[a])}});d=m("<span></span>");d.css("text-indent",-9999);d.css("display","inline");d.text(l);m(a).append(d);a=d.width();m(d).remove();return a},getCellResizeBoundaries:function(a,f,d){var j,l;c.walkCells(f,function(e,q,n,p){e=m(m(f[e]).children()[q]);if(e.hasClass("aloha-table-selectrow")||
e.closest("tr").hasClass("aloha-table-selectcolumn"))return!0;n===a&&1===p&&(j=e.offset().left+c.getCellBorder(e)+e.width()-c.getMinColWidth(e));n===a-1&&1===p&&(l=e.offset().left+c.getCellBorder(e)+c.getCellPadding(e)+c.getMinColWidth(e));if(j&&l)return d(j,l),!1})},getCellBorder:function(a){return(a.outerWidth()-a.innerWidth())/2},getCellPadding:function(a){return a.innerWidth()-a.width()},selectAnchorContents:function(b){a:if(0===b.length)b=null;else{var c,g;(c=d.getRange())&&(g=m(c.commonAncestorContainer).closest(".aloha-table-cell-editable")[0]);
if(g)for(c=0;c<b.length;c++)if(m(b[c]).find(g).length){b=b[c];break a}b=b[0]}if(b)if(g=m(">.aloha-table-cell-editable",b)[0],a.ie&&8>=b.ownerDocument.documentMode)try{d.selectAllOf(g)}catch(k){j.warn("Table Plugin",k.message)}else d.selectAllOf(g)}};return c});define("table/table-cell",["aloha","aloha/jquery","aloha/ephemera","table/table-plugin-utils","util/browser"],function(m,d,a,j,c){var b=function(a,b){null==a&&(a="<td></td>");a=d(a).get(0);this.obj=d(a);this.tableObj=b;b.cells.push(this)};b.prototype.tableObj=
void 0;b.prototype.obj=void 0;b.prototype.wrapper=void 0;b.prototype.hasFocus=!1;b.prototype.activate=function(){var b=this,c=b.obj;c.wrapInner("<div/>");var k=c.children("div").eq(0);k.contentEditable(!0);k.addClass("aloha-table-cell-editable");a.markWrapper(k);k.bind("focus",function(a){1<j.colspan(b.obj)||1<j.rowspan(b.obj)?b.tableObj.tablePlugin._splitcellsButton.enable(!0):b.tableObj.tablePlugin._splitcellsButton.enable(!1);a.currentTarget&&(a.currentTarget.indexOf=function(){return-1});b._editableFocus(a)});
k.bind("mousedown",function(a){a.currentTarget&&(a.currentTarget.indexOf=function(){return-1});b._editableMouseDown(a);b.tableObj.selection.baseCellPosition=[b._virtualY(),b._virtualX()];if(a.shiftKey){var a=b.tableObj.selection.lastBaseCellPosition[1],c=b.tableObj.selection.lastBaseCellPosition[0],g=b.tableObj.selection.baseCellPosition,k=g[1];k>a&&(k=a,a=g[1]);var m=g[0];m>c&&(m=c,c=g[0]);var o=m,r=a,s=c,v=k,u=b.tableObj,a=u.obj.children().children("tr"),a=j.makeGrid(a);u.selection.selectedCells=
[];var t=u.get("classCellSelected");j.walkGrid(a,function(a,b,c){if(j.containsDomCell(a))if(c>=o&&c<=s&&b>=v&&b<=r){d(a.cell).addClass(t);u.selection.selectedCells.push(a.cell)}else d(a.cell).removeClass(t)});u.selection.notifyCellsSelected()}else b.tableObj.selection.lastBaseCellPosition=b.tableObj.selection.baseCellPosition,b._editableMouseDown(a),b._startCellSelection()});k.bind("blur",function(a){b._editableBlur(a)});k.bind("keyup",function(a){b._editableKeyUp(a)});k.bind("keydown",function(a){b._editableKeyDown(a)});
k.bind("mouseover",function(){b._selectCellRange()});k.contentEditableSelectionChange(function(a){m.Selection.onChange(k,a);return k});c.bind("mousedown",function(a){window.setTimeout(function(){b.wrapper.trigger("focus");b._selectAll(k)},1);a.shiftKey||(b.tableObj.selection.unselectCells(),b._startCellSelection());a.stopPropagation()});c.get(0)&&(c.get(0).onselectstart=function(){return!1});this.wrapper=c.children();this.wrapper.get(0)&&(this.wrapper.get(0).onselectstart=function(){window.event.cancelBubble=
true},this.wrapper.get(0).ondragstart=function(){return false});return this};b.prototype.deactivate=function(){var a=d(this.obj.children(".aloha-table-cell-editable"));a.length&&(a.parent().append(a.contents()),a.remove(),this.obj.unbind("click"),this.obj.unbind("mousedown"),""==d.trim(this.obj.attr("class"))&&this.obj.removeAttr("class"))};b.prototype.toString=function(){return"TableCell"};b.prototype._editableFocus=function(){this.hasFocus||(this.tableObj.focus(),this.obj.addClass("aloha-table-cell_active"),
this.hasFocus=!0,this.tableObj.selection.selectionType="cell")};b.prototype._editableBlur=function(){this.hasFocus=!1;this.obj.removeClass("aloha-table-cell_active")};b.prototype._virtualX=function(){var a=this.tableObj.obj.children().children("tr"),b=this.obj.parent().index(),c=this.obj.index();return j.cellIndexToGridColumn(a,b,c)};b.prototype._virtualY=function(){return this.obj.parent("tr").index()};b.prototype._startCellSelection=function(){if(!this.tableObj.selection.cellSelectionMode){this.tableObj.selection.unselectCells();
this.tableObj.selection.cellSelectionMode=!0;var a=this;d("body").bind("mouseup.cellselection",function(){a._endCellSelection()});this.tableObj.selection.baseCellPosition=[this._virtualY(),this._virtualX()]}};b.prototype._endCellSelection=function(){this.tableObj.selection.cellSelectionMode&&(j.selectAnchorContents(this.tableObj.selection.selectedCells),this.tableObj.selection.cellSelectionMode=!1,this.tableObj.selection.baseCellPosition=null,this.tableObj.selection.lastSelectionRange=null,this.tableObj.selection.selectionType=
"cell",d("body").unbind("mouseup.cellselection"))};b.prototype._getSelectedRect=function(){var a=this._virtualX(),b=this._virtualY(),c=this.tableObj.selection.baseCellPosition,d=c[1];d>a&&(d=a,a=c[1]);var e=c[0];e>b&&(e=b,b=c[0]);return{top:e,right:a,bottom:b,left:d}};b.prototype._selectCellRange=function(){if(!this.tableObj.selection.resizeMode&&this.tableObj.selection.cellSelectionMode){var a=this._getSelectedRect(),b=this.tableObj,c=b.obj.children().children("tr"),c=j.makeGrid(c);b.selection.selectedCells=
[];var l=b.get("classCellSelected");j.walkGrid(c,function(c,k,n){j.containsDomCell(c)&&(n>=a.top&&n<=a.bottom&&k>=a.left&&k<=a.right?(d(c.cell).addClass(l),b.selection.selectedCells.push(c.cell)):d(c.cell).removeClass(l))});b.selection.notifyCellsSelected()}};b.prototype._selectAll=function(a){a=a.jquery?a.get(0):a;if(d.browser.msie)document.getSelection?(b=document.getSelection(),c=document.createRange(),c.selectNodeContents(a),b.removeAllRanges(),b.addRange(c)):document.selection&&(c=document.body.createTextRange(),
c.moveToElementText(a),c.select());else{var b=window.getSelection();if(b.setBaseAndExtent)b.setBaseAndExtent(a,0,a,Math.max(0,a.innerText.length-1));else{window.opera&&"<BR>"==a.innerHTML.substring(a.innerHTML.length-4)&&(a.innerHTML+="&#160;");var c=document.createRange();c.selectNodeContents(a);b.removeAllRanges();b.addRange(c)}}};b.prototype._editableMouseDown=function(a){this.tableObj.selection.unselectCells();this.tableObj.hasFocus&&("function"===typeof a.stopPropagation?a.stopPropagation():
"undefined"!==typeof a.cancelBubble&&(a.cancelBubble=!0))};b.prototype._editableKeyUp=function(){};b.prototype._editableKeyDown=function(a){this._checkForEmptyEvent(a);if(this.obj[0]===this.tableObj.obj.find("tr:last td:last")[0]&&9==a.keyCode&&!a.altKey&&!a.shiftKey&&!a.ctrlKey){var b=this.tableObj.addRow(this.obj.parent().index()+1);c.mozilla&&(a.preventDefault(),$(b).find("td:nth-child(2) .aloha-table-cell-editable").focus())}};b.prototype._checkForEmptyEvent=function(){var a=d(this.wrapper),b=
a.text();!(0<a.children().length)&&""===b&&(this.wrapper.text(""),this.wrapper.get(0).blur(),this.wrapper.get(0).focus())};b.getContainer=function(a){return d(a.firstChild).hasClass("aloha-table-cell-editable")?a.firstChild:a};return b});define("table/table-selection","aloha aloha/jquery table/table-plugin-utils table/table-cell ui/dialog i18n!table/nls/i18n".split(" "),function(m,d,a,j,c,b){function f(a){return{top:a.top[0],right:a.right[0]+1,bottom:a.bottom[0]+1,left:a.left[0]}}function g(b,c,d){var g=
true;if(-1!==a.indexOfAnyBut(c.top,c.top[0])||-1!==a.indexOfAnyBut(c.right,c.right[0])||-1!==a.indexOfAnyBut(c.bottom,c.bottom[0])||-1!==a.indexOfAnyBut(c.left,c.left[0]))g=false;else{c=f(c);a.walkGridInsideRect(b,c,function(a){if(!d(a))return g=false})}return g}var k=function(a){this.table=a};k.prototype.selectionType=void 0;k.prototype.selectedCells=[];k.prototype.selectedColumnIdxs=[];k.prototype.selectedRowIdxs=[];k.prototype.cellSelectionMode=false;k.prototype.baseCellPosition=null;k.prototype.lastSelectionRange=
null;k.prototype.selectColumns=function(b){this.unselectCells();var c=this.table.getRows();c.shift();for(var c=a.makeGrid(c),f=0;f<b.length;f++)if(-1===d.inArray(b[f],this.selectedColumnIdxs)){this.selectedColumnIdxs.push(b[f]);for(var g=0;g<c.length;g++){var j=c[g][b[f]];if(a.containsDomCell(j)){d(j.cell).addClass(this.table.get("classCellSelected"));this.selectedCells.push(j.cell)}}}this.selectionType="column"};k.prototype.selectRows=function(a){this.unselectCells();var b=this.table.getRows();a.sort(function(a,
b){return a-b});for(var c=0;c<a.length;c++)if(b[a[c]]){for(var f=0;f<this.selectedRowIdxs.length;f++)if(a[c]==this.selectedRowIdxs[f])return;this.selectedRowIdxs.push(a[c]);for(f=1;f<b[a[c]].cells.length;f++){this.selectedCells.push(b[a[c]].cells[f]);d(b[a[c]].cells[f]).addClass(this.table.get("classCellSelected"))}}this.selectionType="row"};k.prototype.selectAll=function(){var a=d.map(this.table.getRows(),function(a,b){return b});a.shift();this.selectRows(a);this.selectionType="all"};k.prototype.notifyCellsSelected=
function(){m.trigger("aloha-table-selection-changed")};k.prototype._notifyCellsUnselected=function(){m.trigger("aloha-table-selection-changed")};k.prototype.isHeader=function(){if(this.selectedCells.length==0)return false;for(var a=0;a<this.selectedCells.length;a++)if(!this.selectedCells[a]||this.selectedCells[a].nodeName.toLowerCase()!="th")return false;return true};k.prototype.unselectCells=function(){if(!this.cellSelectionMode&&this.selectedCells.length>0){for(var a=this.selectedCells,b=this.table.get("classCellSelected"),
c=0,f=a.length;c<f;c++)d(a[c]).removeClass(b);this.selectedCells=[];this.selectedColumnIdxs=[];this.selectedRowIdxs=[];this.selectionType="cell";this._notifyCellsUnselected()}};k.prototype.selectionIndex=function(a){for(var b=0;b<this.selectedCells.length;b++)if(this.selectedCells[b]===a)return b;return-1};k.prototype.mergeCells=function(){var k=this.selectedCells;if(0!==k.length){var e=function(a){return-1!=d.inArray(a.cell,k)},q=a.makeGrid(this.table.getRows()),n=a.makeContour(q,e);if(g(q,n,e)){var p=
f(n),e=d(q[p.top][p.left].cell),o=d(j.getContainer(e.get(0)));a.walkGridInsideRect(q,p,function(a,b,c){if(!(b-a.spannedX===p.left&&c-a.spannedY===p.top)){a=a.cell;b=d(j.getContainer(a)).contents();for(c=0;c<b.length;c++)if("string"===typeof b[c]&&""!==d.trim(b[c])||b[c].nodeType&&3===b[c].nodeType&&""!==d.trim(b[c].data)||1===b[c].nodeType){o.append(" ");o.append(b);break}d(a).remove()}});e.attr({rowspan:p.bottom-p.top,colspan:p.right-p.left});this.selectedCells=[e.get(0)];this.cellSelectionMode=
false;this.lastSelectionRange=this.baseCellPosition=null;this.selectionType="cell";m.trigger("aloha-table-selection-changed")}else c.alert({title:b.t("Table"),text:b.t("table.mergeCells.notRectangular")})}};k.prototype.splitCells=function(){var b=this,c=this.selectedCells;if(c.length>0){d(c).each(function(){a.splitCell(this,function(){return b.table.newActiveCell().obj})});this.cellSelectionMode=false;this.lastSelectionRange=this.baseCellPosition=null;this.selectionType="cell";m.trigger("aloha-table-selection-changed")}};
k.prototype.cellsAreMergeable=function(){var b=this.selectedCells;if(b.length<2)return false;var c=function(a){return-1!=d.inArray(a.cell,b)},f=a.makeGrid(this.table.getRows()),j=a.makeContour(f,c);return g(f,j,c)?true:false};k.prototype.cellsAreSplitable=function(){var b=0;if(this.selectedCells.length>0){d(this.selectedCells).each(function(){var c=a.colspan(this),f=a.rowspan(this);(c>1||f>1)&&b++});return b>0?true:false}return false};return k});define("table/table","aloha jquery ui/scopes ui/dialog i18n!table/nls/i18n table/table-cell table/table-selection table/table-plugin-utils aloha/ephemera util/html util/dom2 aloha/console".split(" "),
function(m,d,a,j,c,b,f,g,k,l,e,q){function n(a){a.jquery&&(a=a[0]);var b,c=[],e;for(b=0;b<a.childNodes.length;b++){e=a.childNodes[b];c.push(e);e.nodeType===1&&(c=c.concat(n(e)))}return c}function p(a,b){var c;if("first"===a){c=d("[contenteditable]",b).first()[0].firstChild;if(s===c)c=d("*",b).first()[0].firstChild}else"last"===a&&(c=n(d("td:last",b)).reverse()[0]);return c}function o(a,b,c,e){for(var f,g=false,j=0;j<c.length;j++)e.showItem(c[j].name);e.setActiveItem();for(j=0;j<b.length;j++)if(d(a[0]).hasClass(b[j].cssClass)){g=
true;f=b[j].name;break}d(a).each(function(){d(this).hasClass(f)||(g=false)});g&&e.setActiveItem(f)}function r(a,b){var c=-1,e=null;"before"===a?e=b.selectedCells[0]:"after"===a&&(e=b.selectedCells[b.selectedCells.length-1]);if(e&&e.nodeType==1)c=e.parentNode.rowIndex;return c}var s=void 0,v=window.GENTICS,u=function(a,b){this.obj=d(a);var c,e,j=this.getRows(),l=j.length,n,q=0,m=[l],r;for(c=0;c<l;c++){e=d(j[c]);e=e.children("td, th");n=e.length;n=g.cellIndexToGridColumn(j,c,n-1)+1;r=parseInt(e.last().attr("colspan"),
10);if(r!=0&&!isNaN(r)){r==1&&e.last().removeAttr("colspan");n=n+(r-1)}rowSpan=parseInt(e.last().attr("rowspan"),10);if(rowSpan>1)for(e=1;e<rowSpan-1;e++)m[c+e]=r>1?m[c+e]+r:m[c+e]+1;m[c]=m[c]+n;m[c]>q&&(q=m[c])}for(c=0;c<l;c++){e=q-m[c];e>0&&d(j[c]).append(Array(e+1).join("<td></td>"))}this.obj.attr("id")||this.obj.attr("id",v.Utils.guid());k.markAttr(this.obj,"id");this.tablePlugin=b;this.selection=new f(this);this.refresh()};d.extend(u.prototype,{obj:s,tableWrapper:s,cells:s,numRows:s,numCols:s,
isActive:false,hasFocus:false,parentEditable:s,mousedown:false,clickedColumnId:-1,clickedRowId:-1,columnsToSelect:[],rowsToSelect:[],fmPluginId:s});u.prototype.refresh=function(){this.numCols=this.countVirtualCols();var a=this.getRows();this.numRows=a.length;this.cells=[];for(var b=0;b<a.length;b++)for(var c=d(a[b]).children(),e=0;e<c.length;e++)this.newCell(c[e])};u.prototype.countVirtualCols=function(){var a=this.obj.children().children("tr:first-child").children();return a.length-a.filter("."+
this.get("classLeftUpperCorner")).length};u.prototype.get=function(a){return this.tablePlugin.get(a)};u.prototype.set=function(a,b){this.tablePlugin.set(a,b)};u.prototype.activate=function(){function a(b){return!l.isUnrenderedNode(b)}if(!this.isActive){var b=this,c;this.obj.addClass(this.get("className"));this.obj.contentEditable(false);this.obj.attr("id")==""&&this.obj.attr("id",v.Utils.guid());this.selection.selectionType=s;c=this.obj.children("tbody");if(c.length===0)c=this.obj;c.bind("keydown",
function(a){!a.ctrlKey&&!a.shiftKey&&b.selection.selectedCells.length>0&&b.selection.selectedCells[0].length>0&&b.selection.selectedCells[0][0].firstChild.focus()});m.bind("aloha-command-will-execute",function(c,f){var d=m.getSelection().getRangeAt(0),g;if("forwarddelete"===f.commandId){var j;if(!(j=!d.collapsed)){j=d.startOffset;var k=d.startContainer;j=!(e.nodeLength(k)===j||(1===k.nodeType?!l.findNodeLeft(k.childNodes[j-1],a):3===k.nodeType&&l.isWSPorZWSPText(k.data.substr(j))))}if(!j){d=d.commonAncestorContainer;
3===d.nodeType?g=d.parentNode&&l.findNodeLeft(d.parentNode.nextSibling,a):1===d.nodeType&&(g=l.findNodeLeft(d.nextSibling,a));if(g===b.tableWrapper){f.preventDefault=true;m.getSelection().collapse(p("first",b.obj),0)}}}else if("delete"===f.commandId){if(!(j=!d.collapsed)){j=d.startOffset;k=d.startContainer;j=!(0===j||(1===k.nodeType?!l.findNodeRight(k.childNodes[j-1],a):3===k.nodeType&&l.isWSPorZWSPText(k.data.substr(0,j))))}if(!j){d=d.commonAncestorContainer;3===d.nodeType?g=d.parentNode&&l.findNodeRight(d.parentNode.previousSibling,
a):1===d.nodeType&&(g=l.findNodeRight(d.previousSibling,a));if(g===b.tableWrapper){g=p("last",b.obj);f.preventDefault=true;m.getSelection().collapse(g,e.nodeLength(g))}}}});this.obj.on("keydown",function(a){if(a.keyCode===46){b.selection.selectionType==="row"?b.deleteRows():b.selection.selectionType==="column"&&b.deleteColumns();typeof a.stopPropagation==="function"?a.stopPropagation():a.cancelBubble=true}});c.delegate("th, td","mousemove",function(a){var c=d(this);if(!d(this).hasClass("aloha-table-selectrow")&&
!d(this).closest("tr").hasClass("aloha-table-selectcolumn")){var e=b.tablePlugin.rowResize;if(b.tablePlugin.colResize&&a.pageX-c.offset().left<3){c.css("cursor","col-resize");return b.attachColumnResize(c)}if(e&&a.pageY-c.offset().top<3){c.css("cursor","row-resize");return b.attachRowResize(c)}if(e){e=c.closest("tr");if(e.next("tr").length>0)e=false;else{a=a.pageY-(e.offset().top+e.outerHeight());e=a>-3&&a<3}}if(e){c.css("cursor","row-resize");return b.attachRowResize(c,true)}c.css("cursor","default");
return b.detachRowColResize(c)}});c.bind("mousemove",function(a){var c=d(this).closest("table"),e;if(e=b.tablePlugin.tableResize){a=a.pageX-(c.offset().left+c.outerWidth());e=a>-5&&a<5}if(e)return b.attachTableResizeWidth(c)});c.bind("mousedown",function(a){b.hasFocus||b.focus();a.stopPropagation();a.preventDefault();return false});c=d('<div class="'+this.get("classTableWrapper")+' aloha-block-collection" data-block-skip-scope="true"></div>');c.contentEditable(false);k.markWrapper(c);this.obj.wrap(c);
c=this.obj.parent();c.alohaBlock&&c.alohaBlock();c=this.obj.parents("."+this.get("classTableWrapper"));c.get(0).onresizestart=function(){return false};c.get(0).oncontrolselect=function(){return false};c.get(0).ondragstart=function(){return false};c.get(0).onmovestart=function(){return false};this.tableWrapper=this.obj.parents("."+this.get("classTableWrapper")).get(0);d(this.cells).each(function(){this.activate()});this.attachSelectionColumn();this.attachSelectionRow();this.makeCaptionEditable();this.checkWai();
this.isActive=true;m.trigger("aloha-table-activated")}};u.prototype.makeCaptionEditable=function(){var a=this.obj.find("caption").eq(0);a&&this.tablePlugin.makeCaptionEditable(a)};u.prototype.checkWai=function(){var a=this.wai;if(!a)return false;var b=this.get("waiGreen"),c=this.get("waiRed");a.removeClass(b+" "+c);if(d.trim(this.obj[0].summary)!==""){a.addClass(b);return true}a.addClass(c);return false};u.prototype.attachSelectionColumn=function(){var a=d("<td>"),b,c,e,f;a.html(" ");e=this.obj.context.rows;
for(f=0;f<e.length;f++){c=d(e[f]);b=a.clone();b.addClass(this.get("classSelectionColumn"));b.css("width",this.get("selectionArea")+"px");c.prepend(b);this.attachRowSelectionEventsToCell(b)}};u.prototype.attachRowSelectionEventsToCell=function(a){var b=this;k.markElement(a);a.unbind("mousedown");a.unbind("mouseover");a.get(0).onselectstart=function(){return false};a.bind("mousedown",function(a){return b.rowSelectionMouseDown(a)});a.bind("mouseover",function(a){if(b.mousedown)return b.rowSelectionMouseOver(a)})};
u.prototype.rowSelectionMouseDown=function(a){this.focus();if(this.selection.selectedCells.length==0)this.rowsToSelect=[];this.clickedRowId=a.currentTarget.parentNode.rowIndex;if(a.metaKey){var b=d.inArray(this.clickedRowId,this.rowsToSelect);b>=0?this.rowsToSelect.splice(b,1):this.rowsToSelect.push(this.clickedRowId)}else if(a.shiftKey){this.rowsToSelect.sort(function(a,b){return a-b});var c=this.rowsToSelect[0],b=this.clickedRowId;if(c>b){c=b;b=this.rowsToSelect[0]}for(this.rowsToSelect=[];c<=b;c++)this.rowsToSelect.push(c)}else this.rowsToSelect=
[this.clickedRowId];this.selectRows();a.preventDefault();a.stopPropagation();return false};u.prototype.rowSelectionMouseOver=function(a){var b=a.currentTarget.parentNode.rowIndex,c;if(this.mousedown&&this.clickedRowId>=0){d.inArray(b,this.rowsToSelect);c=b<this.clickedRowId?b:this.clickedRowId;b=b<this.clickedRowId?this.clickedRowId:b;for(this.rowsToSelect=[];c<=b;c++)this.rowsToSelect.push(c);this.selectRows();a.preventDefault();a.stopPropagation();return false}};u.prototype.attachSelectionRow=function(){var a=
this,b=d("<td>");b.html(" ");for(var c=0,e=0;e<this.obj.context.rows.length;e++){for(var f=0,j=0;j<this.obj.context.rows[e].cells.length;j++)var l=g.colspan(this.obj.context.rows[e].cells[j]),f=f+l;c<f&&(c=f)}f=d("<tr>");f.addClass(this.get("classSelectionRow"));f.css("height",this.get("selectionArea")+"px");k.markElement(f);for(e=0;e<c;e++){j=b.clone();if(e>0)this.attachColumnSelectEventsToCell(j);else{j=d("<td>").clone();j.addClass(this.get("classLeftUpperCorner"));this.wai=d("<div/>").width(25).height(12).click(function(b){a.focus();
a.selection.selectAll();a.tablePlugin.activeTable.selection.selectionType="cell";a.tablePlugin.updateFloatingMenuScope();a._removeCursorSelection();if(a.tablePlugin.settings.summaryinsidebar){a.tablePlugin.sidebar.open();a.tablePlugin.sidebarPanel.activate(a.obj);a.tablePlugin.sidebar.correctHeight()}try{a.tablePlugin.summary.focus();b.stopPropagation();b.preventDefault()}catch(c){q.error("Table",c.message)}return false});j.append(this.wai)}f.append(j)}d(document).bind("mouseup",function(b){a.columnSelectionMouseUp(b)});
this.obj.find("tr:first").before(f)};u.prototype.attachColumnSelectEventsToCell=function(a){var b=this;a.unbind("mousedown");a.unbind("mouseover");a.get(0).onselectstart=function(){return false};a.bind("mousedown",function(a){b.columnSelectionMouseDown(a)});a.bind("mouseover",function(a){b.columnSelectionMouseOver(a)})};u.prototype.columnSelectionMouseDown=function(a){this.focus();if(this.selection.selectedCells.length==0)this.columnsToSelect=[];this.clickedColumnId=d(a.currentTarget.parentNode).children().index(a.currentTarget);
if(a.metaKey){var b=d.inArray(this.clickedColumnId,this.columnsToSelect);b>=0?this.columnsToSelect.splice(b,1):this.columnsToSelect.push(this.clickedColumnId)}else if(a.shiftKey){this.columnsToSelect.sort(function(a,b){return a-b});var c=this.columnsToSelect[0],b=this.clickedColumnId;if(c>b){c=b;b=this.columnsToSelect[0]}for(this.columnsToSelect=[];c<=b;c++)this.columnsToSelect.push(c)}else this.columnsToSelect=[this.clickedColumnId];this.selectColumns();a.preventDefault();a.stopPropagation();return false};
u.prototype.columnSelectionMouseOver=function(a){var b=a.currentTarget.cellIndex,a=[],c;if(this.mouseDownColIdx){c=b<this.mouseDownColIdx?b:this.mouseDownColIdx;for(b=b<this.mouseDownColIdx?this.mouseDownColIdx:b;c<=b;c++)a.push(c);this.selectColumns(a)}};u.prototype.columnSelectionMouseUp=function(){this.mouseDownColIdx=false};u.prototype.deleteRows=function(){var a=[],b={},e=this;if(0!==this.selection.selectedCells.length){for(var f=0;f<this.selection.selectedCells.length;f++)b[this.selection.selectedCells[f].parentNode.rowIndex]=
true;for(rowId in b)a.push(rowId);b=false;a.length==this.numRows&&(b=true);if(b){var k=this;j.confirm({title:c.t("Table"),text:c.t("deletetable.confirm"),yes:function(){k.deleteTable()}})}else{a.sort(function(a,b){return a-b});var l=a[0];l>this.numRows-a.length&&l--;var n=this.getRows();d.each(a,function(a,b){for(var c=n[b],f=0;f<c.cells.length;f++)g.splitCell(c.cells[f],function(){return e.newActiveCell().obj})});var q=g.makeGrid(n);d.each(a,function(a,b){for(var c=q[b],e=0;e<c.length;){var f=c[e],
j=g.rowspan(f.cell);1<j&&d(f.cell).attr("rowspan",j-1);e=e+f.colspan}d(n[b]).remove()});this.numRows=this.numRows-a.length;window.setTimeout(function(){d(n[1].cells[l+1]).focus()},5);this.selection.unselectCells()}}};u.prototype.deleteColumns=function(){var a=[],b=this.getRows(),e=this,f,k=g.makeGrid(b);if(this.selection.selectedColumnIdxs.length==k[0].length-1)j.confirm({title:c.t("Table"),text:c.t("deletetable.confirm"),yes:function(){e.deleteTable()}});else{a.sort(function(a,b){return a-b});for(var l=
this.selection.selectedColumnIdxs.sort(function(a,b){return b-a}),n=0;n<l.length;n++){for(var q=l[n],m=0;m<b.length;m++)if(f=k[m][q]){if(0===f.spannedX){if(1<f.colspan){var r=this.newActiveCell().obj;d(f.cell).after(r);r.attr("rowspan",f.rowspan);r.attr("colspan",f.colspan-1)}d(f.cell).remove()}else d(f.cell).attr("colspan",f.colspan-1);m=m+(f.rowspan-1)}k=g.makeGrid(b)}this.numCols=this.numCols-a.length;window.setTimeout(function(){d(b[1].cells[1]).focus()},5);this.selection.unselectCells()}};u.prototype.deleteTable=
function(){for(var a=-1,b=0;b<this.tablePlugin.TableRegistry.length;b++)if(this.tablePlugin.TableRegistry[b].obj.attr("id")==this.obj.attr("id")){a=b;break}if(a>=0){this.deactivate();this.selection.selectionType=s;this.tablePlugin.TableRegistry.splice(b,1);a=m.Selection.rangeObject;a.endContainer=this.obj.get(0).parentNode;a.startContainer=a.endContainer;a.endOffset=v.Utils.Dom.getIndexInParent(this.obj.get(0));a.startOffset=a.endOffset;a.clearCaches();this.obj.remove();this.parentEditable.obj.focus();
a.correctRange();a.select()}};u.prototype.addRowBeforeSelection=function(){var a=r("before",this.selection);-1!==a&&this.addRow(a)};u.prototype.addRowAfterSelection=function(){var a=r("after",this.selection);-1!==a&&this.addRow(a+1)};u.prototype.addRow=function(a){for(var b,c=this.get("classSelectionColumn"),e=this.obj.children().children("tr"),f=0;f<1;f++){b=d("<tr>");var j=d("<td>");j.addClass(c);this.attachRowSelectionEventsToCell(j);b.append(j);var k=g.makeGrid(e);if(a>=k.length)for(j=1;j<k[0].length;j++)b.append(this.newActiveCell().obj);
else for(var k=k[a],j=1,l=k.length;j<l;){var n=k[j];if(g.containsDomCell(n))for(var q=n.colspan;q--;)b.append(this.newActiveCell().obj);else d(n.cell).attr("rowspan",n.rowspan+1);j=j+n.colspan}a>=e.length?e.eq(e.length-1).after(b):e.eq(a).before(b)}this.numRows=this.numRows+1;return b[0]};u.prototype.addColumnsRight=function(){this.addColumns("right")};u.prototype.addColumnsLeft=function(){this.addColumns("left")};u.prototype.addColumns=function(a){var b=d("<td>"),e=this.getRows(),f,k;f=this.selection.selectedColumnIdxs;
if(0!==f.length){f.sort(function(a,b){return a-b});if(g.isConsecutive(f)){if("left"===a){k=f[0];for(var l=0;l<this.selection.selectedColumnIdxs.length;l++)this.selection.selectedColumnIdxs[l]=this.selection.selectedColumnIdxs[l]+1}else k=f[f.length-1];for(var n=g.makeGrid(e),l=0;l<e.length;l++){f=b.clone();f.html(" ");if(l==0)this.attachColumnSelectEventsToCell(f);else{cellObj=this.newActiveCell(f.get(0));f=cellObj.obj}var q=g.leftDomCell(n,l,k);null==q?d(e[l]).prepend(f):"left"===a&&g.containsDomCell(n[l][k])?
d(q).before(f):d(q).after(f);this.numCols++}}else j.alert({title:c.t("Table"),text:c.t("table.addColumns.nonConsecutive")})}};u.prototype.focus=function(){if(!this.hasFocus){this.parentEditable.isActive||this.parentEditable.obj.focus();this.tablePlugin.setFocusedTable(this)}};u.prototype.focusOut=function(){if(this.hasFocus){this.tablePlugin.setFocusedTable(s);this.selection.selectionType=s}};u.prototype._removeCursorSelection=function(){var a=m.getSelection();if(a&&a._nativeSelection&&a._nativeSelection._ranges.length!=
0){a=a.getRangeAt(0);if(null!=a.startContainer&&0===d(a.startContainer).closest("table").length&&0!==this.selection.selectedCells.length){a=b.getContainer(this.selection.selectedCells[0]);d(a).focus()}}};u.prototype.selectColumns=function(b){this.selection.selectColumns(b?b:this.columnsToSelect);this.tablePlugin._columnheaderButton.setState(this.selection.isHeader());o(this.selection.selectedCells,this.tablePlugin.columnConfig,this.tablePlugin.columnMSItems,this.tablePlugin.columnMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();
g.selectAnchorContents(this.selection.selectedCells);this.selection.notifyCellsSelected();this._removeCursorSelection();a.setScope(this.tablePlugin.name+".column")};u.prototype.selectRows=function(){this.selection.selectRows(this.rowsToSelect);this.tablePlugin._rowheaderButton.setState(this.selection.isHeader());o(this.selection.selectedCells,this.tablePlugin.rowConfig,this.tablePlugin.rowMSItems,this.tablePlugin.rowMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();g.selectAnchorContents(this.selection.selectedCells);
this.selection.notifyCellsSelected();this._removeCursorSelection();a.setScope(this.tablePlugin.name+".row")};u.prototype.deactivate=function(){var a=this.obj.parent();a.mahaloBlock&&a.mahaloBlock();this.obj.removeClass(this.get("className"));d.trim(this.obj.attr("class"))==""&&this.obj.removeAttr("class");this.obj.removeAttr("contenteditable");this.obj.parents("."+this.get("classTableWrapper")).length&&this.obj.unwrap();this.obj.find("tr."+this.get("classSelectionRow")+":first").remove();var b=this;
d.each(this.obj.context.rows,function(){d(this).children("td."+b.get("classSelectionColumn")).remove()});this.obj.find("td, th").removeClass(this.get("classCellSelected"));this.obj.find("td, th").removeClass("aloha-table-cell_active");this.obj.find("td, th").css("cursor","");this.obj.unbind();this.obj.children("tbody").unbind();for(a=0;a<this.cells.length;a++)this.cells[a].deactivate();this.obj.find("caption div").each(function(){d(this).contents().unwrap()});this.isActive=false};u.prototype.attachColumnResize=
function(a){var b=this;b.detachRowColResize(a);var c=a.closest("tbody").children("tr"),e=a.closest("tr"),f=g.cellIndexToGridColumn(c,c.index(e),e.children().index(a)),j=function(a){var b,e;g.walkCells(c,function(j,k,l,n){j=d(d(c[j]).children()[k]);if(j.hasClass("aloha-table-selectrow")||j.closest("tr").hasClass("aloha-table-selectcolumn")||n>1)return true;if(l===f){e||(e=j.width()-a);g.resizeCellWidth(j,e)}else if(l===f-1){b||(b=j.width()+a);g.resizeCellWidth(j,b)}return true})};a.bind("mousedown.resize",
function(){var e=d("<div></div>"),k=d(a),l=k.outerWidth()-k.innerWidth(),n=k.closest("tbody").innerHeight();e.css({height:n<1?1:n,width:l<1?1:l,top:k.closest("tbody").offset().top,left:k.offset().left,position:"absolute","background-color":"#80B5F2"});d("body").append(e);g.getCellResizeBoundaries(f,c,function(c,f){b.selection.resizeMode=true;d("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>f&&a.pageX<c&&e.css("left",a.pageX)});d("body").bind("mouseup.dnd_col_resize",function(g){var k=
0;g.pageX<f?k=f-a.offset().left:g.pageX>f&&g.pageX<c?k=g.pageX-a.offset().left:g.pageX>c&&(k=c-a.offset().left);k!==0&&j(k);d("body").unbind("mousemove.dnd_col_resize");d("body").unbind("mouseup.dnd_col_resize");b.selection.resizeMode=false;e.remove()})})})};u.prototype.attachRowResize=function(a,b){var c=this;c.detachRowColResize(a);a.bind("mousedown.resize",function(){var e=d("<div></div>"),f=a.closest("tbody").innerWidth(),g=a.outerHeight()-a.innerHeight();e.css({width:f<1?1:f,height:g<1?1:g,top:b?
a.offset().top+a.outerHeight():a.offset().top,left:a.closest("tbody").offset().left,position:"absolute","background-color":"#80B5F2"});d("body").append(e);c.selection.resizeMode=true;d("body").bind("mousemove.dnd_row_resize",function(c){var f=c.pageY,d;d=b?a.closest("tr").offset().top:a.closest("tr").prev("tr").offset().top;f>d&&e.css("top",c.pageY)});d("body").bind("mouseup.dnd_row_resize",function(f){var g=0,g=b?f.pageY-(a.offset().top+a.outerHeight()):f.pageY-a.offset().top,f=b?a.closest("tr"):
a.closest("tr").prev("tr"),g=f.height()+g;g<0&&(g=1);f.css("height",g);d("body").unbind("mousemove.dnd_row_resize");d("body").unbind("mouseup.dnd_row_resize");c.selection.resizeMode=false;e.remove()})})};u.prototype.attachTableResizeWidth=function(a){var b=this,c=a.closest(".aloha-table-wrapper"),e=a.find("tr:not(.aloha-table-selectcolumn) th:last-child, tr:not(.aloha-table-selectcolumn) td:last-child"),f;d.each(e,function(){if(!d(this).attr("colspan")||d(this).attr("colspan")<2){f=d(this);return false}});
e.css("cursor","col-resize");var j=function(b){var c=a.find("tr"),e=f.closest("tr"),j=g.cellIndexToGridColumn(c,c.index(e),e.children().index(f)),k=b-g.getCellBorder(f)-g.getCellPadding(f);g.walkCells(c,function(a,b,e,f){a=d(d(c[a]).children()[b]);if(a.hasClass("aloha-table-selectrow")||a.closest("tr").hasClass("aloha-table-selectcolumn")||f>1)return true;e===j?g.resizeCellWidth(a,k):g.resizeCellWidth(a,a.width());return true})};e.bind("mousedown.resize",function(){var k=d("<div></div>"),l=a.children("tbody").innerHeight(),
n=f.outerWidth()-f.innerWidth();k.css({height:l<1?1:l,width:n<1?1:n,top:a.find("tbody").offset().top,left:a.offset().left+a.outerWidth(),position:"absolute","background-color":"#80B5F2"});d("body").append(k);var q=c.offset().left+c.width(),m=f.offset().left+(f.innerWidth()-f.width())+g.getMinColWidth(f);b.selection.resizeMode=true;d("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>m&&a.pageX<q&&k.css("left",a.pageX)});d("body").bind("mouseup.dnd_col_resize",function(a){var c=0;a.pageX<=
m?c=m-f.offset().left:a.pageX>m&&a.pageX<q?c=a.pageX-f.offset().left:a.pageX>q&&(c=q-f.offset().left);j(c);d("body").unbind("mousemove.dnd_col_resize");d("body").unbind("mouseup.dnd_col_resize");e.unbind("mousedown.resize");e.css("cursor","default");b.selection.resizeMode=false;k.remove()})})};u.prototype.detachRowColResize=function(a){return a.unbind("mousedown.resize")};u.prototype.toString=function(){return"Table"};u.prototype.newCell=function(a){return new b(a,this)};u.prototype.newActiveCell=
function(a){a=new b(a,this);a.activate();return a};u.prototype.getRows=function(){var a=this.obj.get(0).rows;return d.makeArray(a)};return u});define("table/table-plugin","aloha jquery aloha/plugin aloha/pluginmanager ui/ui ui/scopes ui/button ui/toggleButton ui/dialog ui/port-helper-attribute-field ui/port-helper-multi-split i18n!table/nls/i18n i18n!aloha/nls/i18n table/table-create-layer table/table table/table-plugin-utils util/dom aloha/ephemera aloha/console".split(" "),function(m,d,a,j,c,b,
f,g,k,l,e,q,n,p,o,r,s,v,u){function t(a){var b=Q(a.summary.getInputElem()),c=a.activeTable.get("waiRed"),e=a.activeTable.get("waiGreen");b.removeClass(c+" "+e);a.activeTable.checkWai()?b.addClass(e):b.addClass(c)}function x(a){var b=Q(a),c;if(c=E.Utils.Dom.isEditable(a))if(c=!(0<b.parents(".aloha-editable table").length)){a:{var e,f=b.parents();for(c=0;c<f.length;c++){e=f.eq(c);if(e.is(".aloha-editable")){c=false;break a}if(e.is(".aloha-block")){c=true;break a}}c=false}c=!c}if(c){c=new o(a,B);a=Q(s.getEditingHostOf(a));
c.parentEditable=m.getEditableById(a.attr("id"));B.TableRegistry.push(c);a=b.is("table")?"table":"table table";b.find(a).length&&u.warn("Table Plugin","Nested tables found. They will not be initialized.");m.activeEditable===c.parentEditable&&c.activate();return c}return null}function y(a,b){var c,e,f=a.selection.isHeader(),g;for(c=0;c<a.selection.selectedCells.length;c++){g=a.selection.selectedCells[c];for(e=0;e<a.cells.length;e++)if(g===a.cells[e].obj[0]){cell=a.cells[e];break}e=f?m.Markup.transformDomObject(g,
"td").removeAttr("scope").get(0):m.Markup.transformDomObject(g,"th").attr("scope",b).get(0);if(cell!=null){cell.obj[0]=e;cell.deactivate();cell.activate()}d(a.selection.selectedCells[c]).bind("mousedown",function(){var a=d(this).children("div").eq(0);window.setTimeout(function(){a.trigger("focus")},1)})}}function z(a,b,c){for(var e=true,f=0;f<c.length;f++)if(d(c[f]).attr("class").indexOf(b)<0){e=false;break}if(e)for(f=0;f<c.length;f++)d(c[f]).removeClass(b);else for(f=0;f<c.length;f++){d(c[f]).addClass(b);
for(e=0;e<a.length;e++)a[e].cssClass!=b&&d(c[f]).removeClass(a[e].cssClass)}}function A(){var a=[],b=T;d.each(arguments,function(){a.push("."+(this==""?b:b+"-"+this))});return d.trim(a.join(" "))}function F(){var a=[],b=T;d.each(arguments,function(){a.push(this==""?b:b+"-"+this)});return d.trim(a.join(" "))}function H(a,b){var c=a.endContainer,e=a.startContainer,f=c.nodeType==3?c.length:c.childNodes.length;if(e.nodeType==3&&e.parentNode.tagName=="P"&&e.parentNode.childNodes.length==1&&/^(\s|%A0)$/.test(escape(e.data))){e.data=
"";a.startOffset=0;if(c==e)a.endOffset=0}if(!E.Utils.Dom.allowsNesting(e.nodeType==3?e.parentNode:e,b)){a.startOffset==0&&d(e.nodeType==3?e.parentNode:e).addClass("aloha-table-cleanme");a.endOffset==f&&d(c.nodeType==3?c.parentNode:c).addClass("aloha-table-cleanme")}}function D(){for(var a=d(".aloha-table-cleanme").removeClass("aloha-table-cleanme"),b=0;b<a.length;b++)d.trim(d(a[b]).html())==""&&!E.Utils.Dom.isEditingHost(a[b])&&d(a[b]).remove()}var Q=d,E=window.GENTICS,B=new a("table");B.createLayer=
void 0;B.config=["table"];B.TableRegistry=[];B.activeTable=void 0;B.parameters={className:"aloha-table",classSelectionRow:"aloha-table-selectcolumn",classSelectionColumn:"aloha-table-selectrow",classLeftUpperCorner:"aloha-table-leftuppercorner",classTableWrapper:"aloha-table-wrapper",classCellSelected:"aloha-cell-selected",waiRed:"aloha-wai-red",waiGreen:"aloha-wai-green",selectionArea:10};B.checkConfig=function(a){if(typeof a=="object"&&a.length){for(var b=[],c=0;c<a.length;c++)a[c]&&b.push({name:a[c].name,
text:a[c].text?a[c].text:a[c].name,tooltip:a[c].tooltip?a[c].tooltip:a[c].text,iconClass:a[c].iconClass?a[c].iconClass:"aloha-icon-"+a[c].name,cssClass:a[c].cssClass?a[c].cssClass:a[c].name});a=b}else a=[];return a};B.init=function(){var a=this,b={};v.classes(this.get("className"),this.get("classCellSelected"));this.tableConfig=this.checkConfig(this.tableConfig||this.settings.tableConfig);this.columnConfig=this.checkConfig(this.columnConfig||this.settings.columnConfig);this.rowConfig=this.checkConfig(this.rowConfig||
this.settings.rowConfig);this.cellConfig=this.checkConfig(this.cellConfig||this.settings.cellConfig);this.tableResize=this.settings.tableResize===void 0?false:this.settings.tableResize;this.colResize=this.settings.colResize===void 0?false:this.settings.colResize;this.rowResize=this.settings.rowResize===void 0?false:this.settings.rowResize;if(d.browser.msie&&parseInt(d.browser.version,10)<8)this.rowResize=this.colResize=this.tableResize=false;this.createLayer=new p(this);m.bind("aloha-editable-created",
function(c,e){var f=a.getEditableConfig(e.obj);b[e.getId()]=-1!==d.inArray("table",f);e.obj.bind("mousedown",function(){B.setFocusedTable(void 0)});e.obj.find("table").each(function(a,b){x(b)})});this.initTableButtons();m.bind("aloha-table-selection-changed",function(){if(typeof B.activeTable!=="undefined"&&B.activeTable.selection){B.updateFloatingMenuScope();if(B.activeTable.selection.cellsAreSplitable()){a._splitcellsButton.enable(true);a._splitcellsRowButton.enable(true);a._splitcellsColumnButton.enable(true)}else{a._splitcellsButton.enable(false);
a._splitcellsRowButton.enable(false);a._splitcellsColumnButton.enable(false)}if(B.activeTable.selection.cellsAreMergeable()){a._mergecellsButton.enable(true);a._mergecellsRowButton.enable(true);a._mergecellsColumnButton.enable(true)}else{a._mergecellsButton.enable(false);a._mergecellsRowButton.enable(false);a._mergecellsColumnButton.enable(false)}}});m.bind("aloha-selection-changed",function(c,e){if(e.startContainer&&m.activeEditable){b[m.activeEditable.getId()]&&m.Selection.mayInsertTag("table")?
a._createTableButton.show():a._createTableButton.hide();if(a.activeTable)if(e.findMarkup(function(){return this.nodeName==="TABLE"},m.activeEditable.obj)){B.updateFloatingMenuScope();B.setActiveCellStyle()}else{a.activeTable.selection.cellSelectionMode=false;a.activeTable.selection.baseCellPosition=null;a.activeTable.selection.lastSelectionRange=null;a.activeTable.focusOut()}}});m.bind("aloha-editable-activated",function(b,c){a._splitcellsButton.enable(false);a._mergecellsButton.enable(false);a._splitcellsRowButton.enable(false);
a._mergecellsRowButton.enable(false);a._splitcellsColumnButton.enable(false);a._mergecellsColumnButton.enable(false);c.editable.obj.find("table").each(function(){for(var a=B.TableRegistry,b=0;b<a.length;b++)if(a[b].obj.attr("id")===d(this).attr("id")){a[b].activate();return true}x(this)})});m.bind("aloha-editable-deactivated",function(){B.activeTable&&B.activeTable.selection.unselectCells();B.setFocusedTable(void 0);for(var a=B.TableRegistry,b=0;b<a.length;b++)a[b].deactivate()});m.bind("aloha-smart-content-changed",
function(){m.activeEditable&&m.activeEditable.obj.find("table").each(function(){if(B.indexOfTableInRegistry(this)==-1&&x(this))this.id=E.Utils.guid()})});this.settings.summaryinsidebar&&m.bind("aloha-plugins-loaded",function(){a.initSidebar(m.Sidebar.right.show())})};var T="aloha-table";B.initSidebar=function(a){var b=this;b.sidebar=a;b.sidebarPanel=a.addPanel({id:F("sidebar-panel"),title:q.t("table.sidebar.title"),content:"",expanded:true,activeOn:"table",onInit:function(){var a=this;this.setContent('<label class="'+
F("label")+'" for="'+F("textarea")+'" >'+q.t("table.label.target")+'</label><textarea id="'+F("textarea")+'" class="'+F("textarea")+'" />');d(A("textarea")).live("keyup",function(){d(a.effective).attr("summary",d(A("textarea")).val());var c=d('div[class*="wai"]',"table#"+d(a.effective).attr("id"));c.removeClass(b.get("waiGreen"));c.removeClass(b.get("waiRed"));d(A("textarea")).val().trim()!=""?c.addClass(b.get("waiGreen")):c.addClass(b.get("waiRed"))})},onActivate:function(a){this.effective=a;d(A("textarea")).val(d(this.effective).attr("summary"))}});
a.show()};B.isEditableTable=function(a){return E.Utils.Dom.isEditable(a)};B.indexOfTableInRegistry=function(a){for(var b=this.TableRegistry,c=0;c<b.length;c++)if(b[c].obj[0].id==a.id)return c;return-1};B.getTableFromRegistry=function(a){a=this.indexOfTableInRegistry(a);return a>-1?this.TableRegistry[a]:null};B.isSelectionInTable=function(){var a=m.Selection.getRangeObject(),a=d(a.commonAncestorContainer);return a.length==0?false:a.parents(".aloha-editable table").length?true:false};B.preventNestedTables=
function(){if(this.isSelectionInTable()){k.alert({title:q.t("Table"),text:q.t("table.createTable.nestedTablesNoSupported")});return true}return false};B.initMergeSplitCellsBtns=function(){this._mergecellsButton=c.adopt("mergecells",f,{tooltip:q.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".cell",click:function(){B.activeTable&&B.activeTable.selection.mergeCells()}});this._splitcellsButton=c.adopt("splitcells",f,{tooltip:q.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",
scope:this.name+".cell",click:function(){var a;if(B.activeTable)if(B.activeTable.selection.selectedCells.length>0)B.activeTable.selection.splitCells();else{a=B.selectedOrActiveCells();if(a.length>0){r.splitCell(a,function(){return B.activeTable.newActiveCell().obj});m.trigger("aloha-table-selection-changed")}}}});this._mergecellsRowButton=c.adopt("mergecellsRow",f,{tooltip:q.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".row",click:function(){B.activeTable&&
B.activeTable.selection.mergeCells()}});this._splitcellsRowButton=c.adopt("splitcellsRow",f,{tooltip:q.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".row",click:function(){B.activeTable&&B.activeTable.selection.splitCells()}});this._mergecellsColumnButton=c.adopt("mergecellsColumn",f,{tooltip:q.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".column",click:function(){B.activeTable&&B.activeTable.selection.mergeCells()}});
this._splitcellsColumnButton=c.adopt("splitcellsColumn",f,{tooltip:q.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".column",click:function(){B.activeTable&&B.activeTable.selection.splitCells()}})};B.initNaturalFitBtn=function(){var a=this;if(this.colResize||this.rowResize)this._tableNaturalFitButton=c.adopt("naturalFit",f,{tooltip:q.t("button.naturalfit.tooltip"),icon:"aloha-icon aloha-icon-table-naturalfit",scope:this.name+".cell",click:function(){if(a.activeTable){var b=
a.activeTable.obj;b.find("td, th").each(function(){d(this).find("div").css("width","");d(this).css("width","")});b.find("tr").each(function(){d(this).css("height","")})}}})};B.initRowsBtns=function(){var a=this;this._addrowbeforeButton=c.adopt("addrowbefore",f,{tooltip:q.t("button.addrowbefore.tooltip"),icon:"aloha-icon aloha-icon-addrowbefore",scope:this.name+".row",click:function(){a.activeTable&&a.activeTable.addRowBeforeSelection()}});this._addrowafterButton=c.adopt("addrowafter",f,{tooltip:q.t("button.addrowafter.tooltip"),
icon:"aloha-icon aloha-icon-addrowafter",scope:this.name+".row",click:function(){a.activeTable&&a.activeTable.addRowAfterSelection()}});this._deleterowsButton=c.adopt("deleterows",f,{tooltip:q.t("button.delrows.tooltip"),icon:"aloha-icon aloha-icon-deleterows",scope:this.name+".row",click:function(){if(a.activeTable){var b=a.activeTable;k.confirm({title:q.t("Table"),text:q.t("deleterows.confirm"),yes:function(){b.deleteRows()}})}}});this._rowheaderButton=c.adopt("rowheader",g,{tooltip:q.t("button.rowheader.tooltip"),
icon:"aloha-icon aloha-icon-rowheader",scope:this.name+".row",click:function(){if(a.activeTable){a.activeTable.refresh();y(a.activeTable,"col");a.activeTable.selection.selectRows(a.activeTable.selection.selectedRowIdxs);a.activeTable.selection.unselectCells()}}});this.rowMSItems=[];d.each(this.rowConfig,function(b,c){a.rowMSItems.push({name:c.name,text:q.t(c.text),tooltip:q.t(c.tooltip),iconClass:"aloha-icon aloha-row-layout "+c.iconClass,click:function(){if(a.activeTable){z(a.rowConfig,c.cssClass,
a.activeTable.selection.selectedCells);a.activeTable.selectRows()}}})});this.rowMSItems.length>0&&this.rowMSItems.push({name:"removeFormat",text:q.t("button.removeFormat.text"),tooltip:q.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:true,click:function(){if(a.activeTable){for(var b=a.activeTable.selection.selectedCells,c=0;c<b.length;c++)for(var e=0;e<a.rowConfig.length;e++)d(b[c]).removeClass(a.rowConfig[e].cssClass);a.activeTable.selectRows()}}});this.rowMSButton=e({items:this.rowMSItems,
name:"formatRow",hideIfEmpty:true,scope:this.name+".row"})};B.initColumnBtns=function(){var a=this;this._addcolumnleftButton=c.adopt("addcolumnleft",f,{tooltip:q.t("button.addcolleft.tooltip"),icon:"aloha-icon aloha-icon-addcolumnleft",scope:this.name+".column",click:function(){a.activeTable&&a.activeTable.addColumnsLeft()}});this._addcolumnrightButton=c.adopt("addcolumnright",f,{tooltip:q.t("button.addcolright.tooltip"),icon:"aloha-icon aloha-icon-addcolumnright",scope:this.name+".column",click:function(){a.activeTable&&
a.activeTable.addColumnsRight()}});this._deletecolumnsButton=c.adopt("deletecolumns",f,{tooltip:q.t("button.delcols.tooltip"),icon:"aloha-icon aloha-icon-deletecolumns",scope:this.name+".column",click:function(){if(a.activeTable){var b=a.activeTable;k.confirm({title:q.t("Table"),text:q.t("deletecolumns.confirm"),yes:function(){b.deleteColumns()}})}}});this._columnheaderButton=c.adopt("columnheader",g,{tooltip:q.t("button.columnheader.tooltip"),icon:"aloha-icon aloha-icon-columnheader",scope:this.name+
".column",click:function(){if(a.activeTable){a.activeTable.refresh();y(a.activeTable,"row");a.activeTable.selection.selectColumns(a.activeTable.selection.selectedColumnIdxs);a.activeTable.selection.unselectCells()}}});this.columnMSItems=[];d.each(this.columnConfig,function(b,c){var e={name:c.name,text:q.t(c.text),tooltip:q.t(c.tooltip),iconClass:"aloha-icon aloha-column-layout "+c.iconClass,click:function(){if(a.activeTable){z(a.columnConfig,c.cssClass,a.activeTable.selection.selectedCells);a.activeTable.selectColumns()}}};
a.columnMSItems.push(e)});this.columnMSItems.length>0&&this.columnMSItems.push({name:"removeFormat",text:q.t("button.removeFormat.text"),tooltip:q.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:true,click:function(){if(a.activeTable){for(var b=a.activeTable.selection.selectedCells,c=0;c<b.length;c++)for(var e=0;e<a.columnConfig.length;e++)d(b[c]).removeClass(a.columnConfig[e].cssClass);a.activeTable.selectColumns()}}});this.columnMSButton=e({items:this.columnMSItems,name:"formatColumn",
hideIfEmpty:true,scope:this.name+".column"})};B.initCellBtns=function(){var a=this;this.cellMSItems=[];d.each(this.cellConfig,function(b,c){var e={name:c.name,text:q.t(c.text),tooltip:q.t(c.tooltip),iconClass:"aloha-icon aloha-column-layout "+c.iconClass,click:function(){if(a.activeTable){z(a.cellConfig,c.cssClass,a.selectedOrActiveCells());a.setActiveCellStyle()}}};a.cellMSItems.push(e)});this.cellMSItems.length>0&&this.cellMSItems.push({name:"removeFormat",text:q.t("button.removeFormat.text"),tooltip:q.t("button.removeFormat.tooltip"),
cls:"aloha-ui-multisplit-fullwidth",wide:true,click:function(){if(a.activeTable){for(var b=a.selectedOrActiveCells(),c=0;c<b.length;c++)for(var e=0;e<a.cellConfig.length;e++)d(b[c]).removeClass(a.cellConfig[e].cssClass);a.setActiveCellStyle()}}});this.cellMSButton=e({items:this.cellMSItems,name:"formatCell",hideIfEmpty:true,scope:this.name+".cell"})};B.initTableButtons=function(){var a=this;b.createScope(this.name+".row","Aloha.continuoustext");b.createScope(this.name+".column","Aloha.continuoustext");
b.createScope(this.name+".cell","Aloha.continuoustext");this._createTableButton=c.adopt("createTable",f,{tooltip:q.t("button.createtable.tooltip"),icon:"aloha-icon aloha-icon-createTable",scope:"Aloha.continuoustext",click:function(){B.createDialog(this.element)}});this.initColumnBtns();this.initRowsBtns();this.initCellBtns();this.initMergeSplitCellsBtns();this.initNaturalFitBtn();this.tableMSItems=[];var j=this.tableConfig;d.each(j,function(b,c){a.tableMSItems.push({name:c.name,text:q.t(c.text),
tooltip:q.t(c.tooltip),iconClass:"aloha-icon aloha-table-layout "+c.iconClass,click:function(){if(a.activeTable)if(a.activeTable.obj.hasClass(c.cssClass)){for(b=0;b<j.length;b++)a.activeTable.obj.removeClass(j[b].cssClass);a.tableMSButton.setActiveItem()}else{for(var b=0;b<j.length;b++)a.activeTable.obj.removeClass(j[b].cssClass);a.activeTable.obj.addClass(c.cssClass);a.tableMSButton.setActiveItem(c.cssClass)}}})});this.tableMSItems.length>0&&this.tableMSItems.push({name:"removeFormat",text:q.t("button.removeFormat.text"),
tooltip:q.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:true,click:function(){if(a.activeTable){for(var b=0;b<j.length;b++)a.activeTable.obj.removeClass(a.tableConfig[b].cssClass);a.tableMSButton.setActiveItem()}}});this.tableMSButton=e({items:this.tableMSItems,name:"formatTable",hideIfEmpty:true,scope:this.name+".cell"});this._tableCaptionButton=c.adopt("tableCaption",g,{tooltip:q.t("button.caption.tooltip"),icon:"aloha-icon aloha-icon-table-caption",scope:this.name+".cell",
click:function(){if(a.activeTable){var b=a.activeTable.obj.children("caption");if(b.is("caption")&&b.is(":visible"))b.hide();else{if(!b.is("caption")){b=d("<caption></caption>");a.activeTable.obj.prepend(b)}b.show();d.trim(b.text()).length===0&&b.text(q.t("empty.caption"));a.makeCaptionEditable(b,b.text());var b=b.find("div").eq(0),c=b.contents().eq(0);if(c.length>0){var e=new E.Utils.RangeObject;e.startContainer=e.endContainer=c.get(0);e.startOffset=0;e.endOffset=c.text().length;a.activeTable.obj.find("div.aloha-table-cell-editable").blur();
b.focus();e.select();m.Selection.updateSelection()}}}}});this.summary=l({width:275,name:"tableSummary",noTargetHighlight:true,scope:this.name+".cell",element:d('<input id="aloha-attribute-field-tableSummary" class="aloha-wai-red" style="color: black; padding-left: 32px; background-color: white"/>')});this.summary.addListener("keyup",function(){a.activeTable&&t(a)})};B.makeCaptionEditable=function(a,b){var c=a.children("div");if(c.length===0){c=d("<div></div>");c.addClass("aloha-ui aloha-editable-caption aloha-block");
v.markWrapper(c);a.contents().length>0?c.append(a.contents()):b&&c.text(b);a.append(c)}else if(c.length>1){a.children("div:not(:first-child)").each(function(){$this=d(this);c.eq(0).append($this.contents());$this.remove()});c=c.eq(0)}c.contentEditable(true)};B.createDialog=function(a){this.createLayer.set("target",a);this.createLayer.show()};B.createTable=function(a,b){if(!this.preventNestedTables())if(m.activeEditable&&typeof m.activeEditable.obj!=="undefined"){for(var c=document.createElement("table"),
e=c.id=E.Utils.guid(),f=document.createElement("tbody"),g=0;g<b;g++){for(var j=document.createElement("tr"),k=0;k<a;k++){var l=document.createTextNode(""),n=document.createElement("td");n.appendChild(l);j.appendChild(n)}f.appendChild(j)}c.appendChild(f);H(m.Selection.getRangeObject(),c);E.Utils.Dom.insertIntoDOM(d(c),m.Selection.getRangeObject(),m.activeEditable.obj);D();var c=document.getElementById(e),q=x(c);q&&(Q.browser.msie?window.setTimeout(function(){q.cells[0].wrapper.get(0).focus()},20):
q.cells[0].wrapper.get(0).focus());q.focus();B.activeTable.selection.selectionType="cell";B.updateFloatingMenuScope()}else this.error("There is no active Editable where the table can be\t\t\t\tinserted!")};B.setFocusedTable=function(a){null!=this.activeTable&&this.activeTable.selection.unselectCells();for(var b=0;b<B.TableRegistry.length;b++)B.TableRegistry[b].hasFocus=false;if(typeof a!="undefined"){this.summary.setTargetObject(a.obj,"summary");if(a.obj.children("caption").is("caption")){this._tableCaptionButton.setState(true);
this.makeCaptionEditable(a.obj.children("caption"))}a.hasFocus=true}B.activeTable=a;B.activeTable&&t(B);for(b=0;b<this.tableMSItems.length;b++)this.tableMSButton.showItem(this.tableMSItems[b].name);this.tableMSButton.setActiveItem();if(this.activeTable)for(b=0;b<this.tableConfig.length;b++)this.activeTable.obj.hasClass(this.tableConfig[b].cssClass)&&this.tableMSButton.setActiveItem(this.tableConfig[b].name)};B.error=function(a){m.Log.error(this,a)};B.debug=function(a){m.Log.debug(this,a)};B.info=
function(a){m.Log.info(this,a)};B.log=function(a){m.log("log",this,a)};B.get=function(a){if(this.config[a])return this.config[a];if(this.parameters[a])return this.parameters[a]};B.set=function(a,b){this.config[a]?this.config[a]=b:this.parameters[a]=b};B.makeClean=function(a){a.find("td, th").css("cursor","")};B.toString=function(){return this.prefix};B.updateFloatingMenuScope=function(){null!=B.activeTable&&null!=B.activeTable.selection.selectionType&&b.setScope(B.name+"."+B.activeTable.selection.selectionType)};
B.setActiveCellStyle=function(){var a=false,b;this.cellMSButton.setActiveItem();for(var c=this.selectedOrActiveCells(),e=0;e<this.cellConfig.length;e++)if(d(c[0]).hasClass(this.cellConfig[e].cssClass)){b=this.cellConfig[e].name;a=true;break}d(c).each(function(){d(this).hasClass(b)||(a=false)});a&&this.cellMSButton.setActiveItem(b)};B.selectedOrActiveCells=function(){var a=this.activeTable.selection.selectedCells;if(!a||a.length<1)return(a=function(){var a=m.Selection.getRangeObject();return m.activeEditable?
a.findMarkup(function(){return this.nodeName.toLowerCase()==="td"},m.activeEditable.obj):null}())?[a]:[];return a};j.register(B);return B});define("format/nls/i18n",{root:{"button.strong.tooltip":"Strong","button.em.tooltip":"Emphasize","button.b.tooltip":"Bold","button.i.tooltip":"Italic","button.u.tooltip":"Underline","button.cite.tooltip":"Cite","button.q.tooltip":"Tooltip","button.code.tooltip":"Code","button.abbr.tooltip":"Abbreviation","button.del.tooltip":"Strikethrough","button.s.tooltip":"Strikethrough",
"button.sub.tooltip":"Subscript","button.sup.tooltip":"Superscript","button.p.tooltip":"Paragraph","button.h1.tooltip":"Heading 1","button.h2.tooltip":"Heading 2","button.h3.tooltip":"Heading 3","button.h4.tooltip":"Heading 4","button.h5.tooltip":"Heading 5","button.h6.tooltip":"Heading 6","button.pre.tooltip":"Preformatted text","button.title.tooltip":"Title","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",GENTICS_button_p:"GENTICS_button_p",GENTICS_button_h1:"GENTICS_button_h1",
GENTICS_button_h2:"GENTICS_button_h2",GENTICS_button_h3:"GENTICS_button_h3",GENTICS_button_h4:"GENTICS_button_h4",GENTICS_button_h5:"GENTICS_button_h5",GENTICS_button_h6:"GENTICS_button_h6",GENTICS_button_pre:"GENTICS_button_pre",GENTICS_button_title:"GENTICS_button_title",formatBold:"Ctrl+b",formatItalic:"Ctrl+i",formatUnderline:"Ctrl+u",formatParagraph:"Alt+Ctrl+0",formatH1:"Alt+Ctrl+1",formatH2:"Alt+Ctrl+2",formatH3:"Alt+Ctrl+3",formatH4:"Alt+Ctrl+4",formatH5:"Alt+Ctrl+5",formatH6:"Alt+Ctrl+6",
formatPre:"Alt+Ctrl+P",formatDel:"Ctrl+\\",formatSub:"Ctrl+,",formatSup:"Ctrl+.","floatingmenu.tab.format":"Format","format.class.legend":"CSS class","format.class.none":"none"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("format/format-plugin","aloha aloha/plugin aloha/state-override jquery util/arrays util/maps ui/ui ui/toggleButton ui/port-helper-multi-split PubSub i18n!format/nls/i18n i18n!aloha/nls/i18n aloha/selection".split(" "),function(m,d,a,j,c,b,f,g,k,l,e){function q(a){var b=
j(".aloha-cell-selected");if(b.length>0){var c=0;b.each(function(){var b=j(this).find("div"),e=b.find(a);if(e.length>0){e.contents().unwrap();c++}b.contents().wrap("<"+a+"></"+a+">")});c===b.length&&b.find(a).contents().unwrap();return true}return false}function n(a,b){var c=x[b];y.hasOwnProperty(b)&&(c=y[b]);return f.adopt(c,g,{tooltip:e.t("button."+b+".tooltip"),icon:"aloha-icon aloha-icon-"+c,scope:"Aloha.continuoustext",click:function(){q(b)||a.addMarkup(b);return false}})}function p(a,b){return{name:b,
tooltip:e.t("button."+b+".tooltip"),iconClass:"aloha-icon "+e.t("aloha-large-icon-"+b),markup:j("<"+b+">"),click:function(){var c;if(q(b))c=false;else{a.changeMarkup(b);m.activeEditable&&j.browser.mozilla&&m.activeEditable.obj.focus();m.activeEditable&&m.trigger("aloha-format-block")}return c}}}function o(a,b){return{name:b,text:e.t("button."+b+".text"),tooltip:e.t("button."+b+".tooltip"),wide:true,cls:"aloha-ui-multisplit-fullwidth",click:function(){a.removeFormat()}}}function r(a,b){b.select();
u(a,m.Selection.getRangeObject())}function s(a,b,c){t.Utils.Dom.addMarkup(b,c);r(a,b)}function v(a,b,c){b=b.getEditableConfig(c.obj);return j.inArray(a,b)>-1}function u(a,b){var c,e,f,d,g;j.each(a.buttons,function(a,e){var g=false,k=F[e.markup[0].nodeName]||[e.markup[0].nodeName];for(f=0;f<b.markupEffectiveAtStart.length;f++){c=b.markupEffectiveAtStart[f];for(d=0;d<k.length;d++)if(m.Selection.standardTextLevelSemanticsComparator(c,j("<"+k[d]+">"))){e.handle.setState(true);g=true}}g||e.handle.setState(false)});
if(a.multiSplitItems.length>0){e=false;for(f=0;f<b.markupEffectiveAtStart.length&&!e;f++){c=b.markupEffectiveAtStart[f];for(d=0;d<a.multiSplitItems.length&&!e;d++){g=a.multiSplitItems[d];if(g.markup&&m.Selection.standardTextLevelSemanticsComparator(c,g.markup)){a.multiSplitButton.setActiveItem(g.name);e=true}}}e||a.multiSplitButton.setActiveItem(null)}}var t=window.GENTICS,x={b:"bold",strong:"bold",i:"italic",em:"italic",del:"strikethrough",sub:"subscript",sup:"superscript",u:"underline",s:"strikethrough",
code:"code"},y={strong:"strong",em:"emphasis",s:"strikethrough2"},z={u:true,em:true,strong:true,b:true,i:true,cite:true,q:true,code:true,abbr:true,del:true,s:true,sub:true,sup:true},A={p:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,pre:true},F={B:["STRONG","B"],I:["EM","I"],STRONG:["STRONG","B"],EM:["EM","I"]};return d.create("format",{config:["b","i","sub","sup","p","h1","h2","h3","h4","h5","h6","pre","removeFormat"],availableButtons:["code","u","strong","del","em","b","i","s","sub","sup",
"p","h1","h2","h3","h4","h5","h6","pre","removeFormat"],hotKey:{formatBold:"ctrl+b",formatItalic:"ctrl+i",formatParagraph:"alt+ctrl+0",formatH1:"alt+ctrl+1",formatH2:"alt+ctrl+2",formatH3:"alt+ctrl+3",formatH4:"alt+ctrl+4",formatH5:"alt+ctrl+5",formatH6:"alt+ctrl+6",formatPre:"ctrl+p",formatDel:"ctrl+d",formatSub:"alt+shift+s",formatSup:"ctrl+shift+s"},init:function(){var a=this;typeof this.settings.hotKey!=="undefined"&&j.extend(true,this.hotKey,this.settings.hotKey);this.initButtons();m.bind("aloha-plugins-loaded",
function(){a.initSidebar(m.Sidebar.right)});m.bind("aloha-editable-activated",function(b,c){a.applyButtonConfig(c.editable.obj);var e=function(b){return function(){v(b,a,c.editable)&&a.addMarkup(b);return false}},f=function(b){return function(){v(b,a,c.editable)&&a.changeMarkup(b);return false}};c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatBold,e("b"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatItalic,e("i"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatDel,
e("del"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSub,e("sub"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSup,e("sup"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatParagraph,f("p"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH1,f("h1"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH2,f("h2"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH3,f("h3"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH4,
f("h4"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH5,f("h5"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH6,f("h6"));c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatPre,f("pre"))});m.bind("aloha-editable-deactivated",function(a,b){b.editable.obj.unbind("keydown.aloha.format")})},applyButtonConfig:function(a){var a=this.getEditableConfig(a),b,c;if(typeof a==="object"){var e=[];j.each(a,function(a,b){typeof a==="number"&&typeof b==="string"||e.push(a)});e.length>
0&&(a=e)}this.formatOptions=a;for(b in this.buttons)this.buttons.hasOwnProperty(b)&&(j.inArray(b,a)!==-1?this.buttons[b].handle.show():this.buttons[b].handle.hide());c=this.multiSplitItems.length;for(b=0;b<c;b++)j.inArray(this.multiSplitItems[b].name,a)!==-1?this.multiSplitButton.showItem(this.multiSplitItems[b].name):this.multiSplitButton.hideItem(this.multiSplitItems[b].name)},initButtons:function(){var a=this;this.buttons={};this.multiSplitItems=[];j.each(this.availableButtons,function(b,c){var e=
false;if(typeof b!=="number"&&typeof c!=="string"){e=c;c=b}z[c]?a.buttons[c]={handle:n(a,c),markup:j("<"+c+">",{"class":e||""})}:A[c]?a.multiSplitItems.push(p(a,c)):"removeFormat"===c?a.multiSplitItems.push(o(a,c)):m.log("warn",a,'Button "'+c+'" is not defined')});this.multiSplitButton=k({name:"formatBlock",items:this.multiSplitItems,hideIfEmpty:true,scope:"Aloha.continuoustext"});l.sub("aloha.selection.context-change",function(b){u(a,b.range)})},initSidebar:function(a){var b=this;b.sidebar=a;a.addPanel({id:b.nsClass("sidebar-panel-class"),
title:e.t("floatingmenu.tab.format"),content:"",expanded:true,activeOn:this.formatOptions||false,onInit:function(){},onActivate:function(a){var c=this;c.effective=a;if(a[0]){c.format=a[0].nodeName.toLowerCase();var f=j("<div>").attr("class",b.nsClass("target-container")),d=j("<fieldset>");d.append(j("<legend>"+c.format+" "+e.t("format.class.legend")).append(j("<select>")));f.append(d);var g='<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+e.t("format.class.legend")+'</legend><select name="targetGroup" class="'+
b.nsClass("radioTarget")+'"><option value="">'+e.t("format.class.none")+"</option>";b.config[c.format]&&b.config[c.format]["class"]&&j.each(b.config[c.format]["class"],function(a,b){g=g+('<option value="'+a+'" >'+b+"</option>")});g=g+"</select></fieldset></div>";c=this;this.setContent(g);j(b.nsSel("framename")).live("keyup",function(){j(c.effective).attr("target",j(this).val().replace('"',"&quot;").replace("'","&#39;"))});c=this;c.effective=a;j(b.nsSel("linkTitle")).val(j(c.effective).attr("title"))}}});
a.show()},nsClass:function(){var a=[];j.each(arguments,function(){a.push(this==""?"aloha-format":"aloha-format-"+this)});return j.trim(a.join(" "))},nsSel:function(){var a=[];j.each(arguments,function(){a.push("."+(this==""?"aloha-format":"aloha-format-"+this))});return j.trim(a.join(" "))},addMarkup:function(b){var e=this,f=j("<"+b+">"),d=m.Selection.rangeObject;if(!(typeof b==="undefined"||b=="")){var g=F[f[0].nodeName]||[f[0].nodeName],k=d.findMarkup(function(){return-1!==c.indexOf(g,this.nodeName)},
m.activeEditable.obj);if(k){d.isCollapsed()?t.Utils.Dom.removeFromDOM(k,d,true):t.Utils.Dom.removeMarkup(d,j(k),m.activeEditable.obj);r(e,d)}else{if(d.isCollapsed()){t.Utils.Dom.extendToWord(d);if(d.isCollapsed()&&a.enabled()){a.setWithRangeObject(x[b],d,function(a,b){s(e,b,f)});return}}s(e,d,f)}}},changeMarkup:function(a){m.Selection.changeMarkupOnSelection(j("<"+a+">"))},removeFormat:function(){var a=["u","strong","em","b","i","q","del","s","code","sub","sup","p","h1","h2","h3","h4","h5","h6","pre",
"quote","blockquote"],b=m.Selection.rangeObject,c;if(this.settings.removeFormats)a=this.settings.removeFormats;if(!b.isCollapsed()){for(c=0;c<a.length;c++)t.Utils.Dom.removeMarkup(b,j("<"+a[c]+">"),m.activeEditable.obj);b.select();m.activeEditable.smartContentChange({type:"block-change"})}},toString:function(){return"format"}})});define("list/nls/i18n",{root:{"button.createulist.tooltip":"Insert Unordered List","button.createolist.tooltip":"Insert Ordered List","button.indentlist.tooltip":"Indent List",
"button.outdentlist.tooltip":"Outdent List","floatingmenu.tab.list":"Lists"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("list/list-plugin","aloha jquery aloha/plugin ui/ui ui/scopes ui/button ui/toggleButton i18n!list/nls/i18n i18n!aloha/nls/i18n aloha/engine PubSub".split(" "),function(m,d,a,j,c,b,f,g,k,l,e){function q(a,b){d(a).find(a.nodeName).each(function(){var a=m.Selection.getSelectionTree();n(a,this)&&m.Markup.transformDomObject(this,b,m.Selection.rangeObject)});m.Markup.transformDomObject(a,
b,m.Selection.rangeObject)}function n(a,b){var c=false;d.each(a,function(a,e){if(e.domobj===b&&e.selection!=="none"||n(e.children,b))c=true});return c}var p=window.GENTICS,o=a.create("list",{config:["ul","ol"],transformableElements:{p:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,ul:true,ol:true},init:function(){var a=this;this._orderedListButton=j.adopt("orderedList",f,{tooltip:g.t("button.createolist.tooltip"),icon:"aloha-icon aloha-icon-orderedlist",scope:"Aloha.continuoustext",click:function(){a.transformList(true)}});
this._unorderedListButton=j.adopt("unorderedList",f,{tooltip:g.t("button.createulist.tooltip"),icon:"aloha-icon aloha-icon-unorderedlist",scope:"Aloha.continuoustext",click:function(){a.transformList(false)}});this._indentListButton=j.adopt("indentList",b,{tooltip:g.t("button.indentlist.tooltip"),icon:"aloha-icon aloha-icon-indent",scope:"Aloha.continuoustext",click:function(){a.indentList()}});this._outdentListButton=j.adopt("outdentList",b,{tooltip:g.t("button.outdentlist.tooltip"),icon:"aloha-icon aloha-icon-outdent",
scope:"Aloha.continuoustext",click:function(){a.outdentList()}});c.createScope("Aloha.List","Aloha.continuoustext");e.sub("aloha.selection.context-change",function(b){var c,e=b.range;a._outdentListButton.show(false);a._indentListButton.show(false);a._unorderedListButton.setState(false);a._orderedListButton.setState(false);for(b=0;b<e.markupEffectiveAtStart.length;b++){c=e.markupEffectiveAtStart[b];if(m.Selection.standardTagNameComparator(c,d("<ul></ul>"))){a._unorderedListButton.setState(true);a._outdentListButton.show(true);
a._indentListButton.show(true);break}if(m.Selection.standardTagNameComparator(c,d("<ol></ol>"))){a._orderedListButton.setState(true);a._outdentListButton.show(true);a._indentListButton.show(true);break}}m.activeEditable&&a.applyButtonConfig(m.activeEditable.obj)});m.Markup.addKeyHandler(9,function(b){return a.processTab(b)})},applyButtonConfig:function(a){a=this.getEditableConfig(a);if(m.Selection.rangeObject.unmodifiableMarkupAtStart[0]){d.inArray("ul",a)!=-1&&m.Selection.canTag1WrapTag2(m.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,
"ul")!=-1?this._unorderedListButton.show(true):this._unorderedListButton.show(false);d.inArray("ol",a)!=-1&&m.Selection.canTag1WrapTag2(m.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ol")!=-1?this._orderedListButton.show(true):this._orderedListButton.show(false)}},processTab:function(a){return a.keyCode===9?a.shiftKey?this.outdentList():this.indentList():true},getStartingDomObjectToTransform:function(){var a=m.Selection.rangeObject,b,c;for(b=0;b<a.markupEffectiveAtStart.length;b++){c=
a.markupEffectiveAtStart[b];if(this.transformableElements[c.nodeName.toLowerCase()])return c}return false},getNearestSelectedListItem:function(){var a=m.Selection.rangeObject,b,c;for(b=0;b<a.markupEffectiveAtStart.length;b++){c=a.markupEffectiveAtStart[b];if(p.Utils.Dom.isListElement(c))return c}return false},transformList:function(a){var b=this.getStartingDomObjectToTransform(),c,e,f,g;this._outdentListButton.show(true);this._indentListButton.show(true);if(!b){m.Selection.changeMarkupOnSelection(d("<p></p>"));
b=this.getStartingDomObjectToTransform();if(!b){if(m.Selection.rangeObject.startContainer.contentEditable){a=a?d("<ol></ol>"):d("<ul></ul>");e=d("<li></li>");a.append(e);f=e.get(0);b=m.getActiveEditable().obj;f.appendChild(document.createTextNode(""));b.append(a);b.focus();a=m.createRange();b=m.getSelection();a.setStart(f.firstChild,0);a.setEnd(f.firstChild,0);b.removeAllRanges();b.addRange(a);m.Selection.updateSelection()}else m.Log.error(this,"Could not transform selection into a list");return}}f=
b.nodeName.toLowerCase();if(f=="ul"&&!a){a=d(b);f=a.parent();if(f.length>0&&p.Utils.Dom.isListElement(f.get(0)))if(f.get(0).nodeName.toLowerCase()==="li"){f.after(a.children());a.remove()}else a.children().unwrap();else{a=d(b);d.each(a.children("li"),function(a,b){g=m.Markup.transformDomObject(b,"p",m.Selection.rangeObject);g.after(g.children("ol,ul"));l.ensureContainerEditable(g.get(0))});a.children().unwrap()}}else if(f=="ul"&&a){q(b,"ol");this.mergeAdjacentLists(d(b))}else if(f=="ol"&&!a){q(b,
"ul");this.mergeAdjacentLists(d(b))}else if(f=="ol"&&a){a=d(b);f=a.parent();if(f.length>0&&p.Utils.Dom.isListElement(f.get(0)))if(f.get(0).nodeName.toLowerCase()==="li"){f.after(a.children());a.remove()}else a.children().unwrap();else{a=d(b);d.each(a.children("li"),function(a,b){g=m.Markup.transformDomObject(b,"p",m.Selection.rangeObject);g.after(g.children("ol,ul"));l.ensureContainerEditable(g.get(0))});a.children().unwrap()}}else{f=m.Selection.rangeObject.getSelectedSiblings(b);a=a?d("<ol></ol>"):
d("<ul></ul>");e=d("<li></li>");a.append(e);d(b).contents().appendTo(e);d(b).replaceWith(a);if(m.Selection.rangeObject.startContainer==b)m.Selection.rangeObject.startContainer=e.get(0);if(m.Selection.rangeObject.endContainer==b)m.Selection.rangeObject.endContainer=e.get(0);if(f){b=false;for(c=0;c<f.length;++c)if(p.Utils.Dom.isBlockLevelElement(f[c])){b&&(b=false);e=m.Markup.transformDomObject(f[c],"li",m.Selection.rangeObject);a.append(e)}else if(!(f[c].nodeType==3&&d.trim(f[c].data).length===0)){if(!b){b=
d("<li></li>");a.append(b);e=b}b.append(f[c])}}this.mergeAdjacentLists(a);f=e.get(0);if(p.Utils.Dom.isEmpty(f)){a=m.createRange();b=m.getSelection();f.appendChild(document.createTextNode(""));a.selectNodeContents(f.lastChild);b.removeAllRanges();b.addRange(a);m.Selection.updateSelection()}}this.refreshSelection()},indentList:function(){var a=this.getNearestSelectedListItem(),b,c,e;if(a){e=d(a).prev("li");if(e.length===0)return false;d(a).parent();c=m.Selection.rangeObject.getSelectedSiblings(a);b=
d(a).parent().clone(false).empty();b.append(a);e.append(b);if(c)for(a=0;a<c.length;++a)b.append(d(c[a]));this.mergeAdjacentLists(b,true);this.refreshSelection();return false}return true},outdentList:function(){var a=this.getNearestSelectedListItem(),b,c,e,f,g;if(a){c=d(a);e=c.parent();b=e.parents("ul,ol");f=e.parent("li");if(b.length>0&&p.Utils.Dom.isListElement(b.get(0))){g=(a=m.Selection.rangeObject.getSelectedSiblings(a))&&a.length>0?d(a[a.length-1]):c;if(g.nextAll("li").length>0){b=e.clone(false).empty();
b.append(g.nextAll());g.append(b)}f.length>0?f.after(c):e.before(c);if(a&&a.length>0)for(b=a.length-1;b>=0;--b)c.after(d(a[b]));e.contents("li").length===0&&e.remove();f.length>0&&f.contents().length===0&&f.remove();this.refreshSelection()}return false}return true},refreshSelection:function(){m.Selection.rangeObject.update();m.Selection.rangeObject.select();m.Selection.updateSelection()},mergeAdjacentLists:function(a,b){for(var c=a.get(0),e;c.previousSibling&&c.previousSibling.nodeType===1&&this.isMergable(c.previousSibling,
c,b);)c=c.previousSibling;for(a=d(c);c.nextSibling&&(c.nextSibling.nodeType===1&&this.isMergable(c.nextSibling,c,b)||c.nextSibling.nodeType===3&&d.trim(c.nextSibling.data).length===0);){e=d(c.nextSibling);c.nextSibling.nodeType==1&&e.contents().appendTo(a);e.remove()}},isMergable:function(a,b,c){return c?a.nodeName.toLowerCase()=="ul"||a.nodeName.toLowerCase()=="ol":a.nodeName==b.nodeName}});l.commands.insertorderedlist={action:function(a,b){o.transformList(true);if(b&&m.Selection.rangeObject){b.startContainer=
m.Selection.rangeObject.startContainer;b.startOffset=m.Selection.rangeObject.startOffset;b.endContainer=m.Selection.rangeObject.endContainer;b.endOffset=m.Selection.rangeObject.endOffset}},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(m.Selection.standardTagNameComparator(effectiveMarkup,d("<ul></ul>")))break;if(m.Selection.standardTagNameComparator(effectiveMarkup,d("<ol></ol>")))return true}return false}};
l.commands.insertunorderedlist={action:function(a,b){o.transformList(false);if(b&&m.Selection.rangeObject){b.startContainer=m.Selection.rangeObject.startContainer;b.startOffset=m.Selection.rangeObject.startOffset;b.endContainer=m.Selection.rangeObject.endContainer;b.endOffset=m.Selection.rangeObject.endOffset}},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(m.Selection.standardTagNameComparator(effectiveMarkup,
d("<ul></ul>")))return true;if(m.Selection.standardTagNameComparator(effectiveMarkup,d("<ol></ol>")))break}return false}};l.commands.indent={action:function(a,b){o.indentList();if(b&&m.Selection.rangeObject){b.startContainer=m.Selection.rangeObject.startContainer;b.startOffset=m.Selection.rangeObject.startOffset;b.endContainer=m.Selection.rangeObject.endContainer;b.endOffset=m.Selection.rangeObject.endOffset}},indeterm:function(){},state:function(){return false}};l.commands.outdent={action:function(a,
b){o.outdentList();if(b&&m.Selection.rangeObject){b.startContainer=m.Selection.rangeObject.startContainer;b.startOffset=m.Selection.rangeObject.startOffset;b.endContainer=m.Selection.rangeObject.endContainer;b.endOffset=m.Selection.rangeObject.endOffset}},indeterm:function(){},state:function(){return false}};return o});define("image/nls/i18n",{root:{"size.natural":"Original size","button.addimg.tooltip":"add image ref","floatingmenu.tab.img":"Image","floatingmenu.tab.formatting":"Formatting","floatingmenu.tab.resize":"Resize",
"floatingmenu.tab.crop":"Crop","button.uploadimg.tooltip":"Upload img","button.uploadimg.label":"Upload","button.img.align.left.tooltip":"Left align","button.img.align.right.tooltip":"Right Align","button.img.align.none.tooltip":"No alignment","field.img.title.label":"Title","field.img.title.tooltip":"Title","field.img.label":"URL","field.img.tooltip":"Source","border ":"Add Border to Image","padding.increase ":"Increase Padding","padding.decrease ":"Decrease Padding","size.increase ":"Increase Size",
"size.decrease ":"Decrease Size",Resize:"Resize",Crop:"Crop",Reset:"Reset",Accept:"Accept",Cancel:"Cancel",height:"Height",width:"Width","button.toggle.tooltip":"Toggle keep aspect ratio","field.img.src.label":"Source","field.img.src.tooltip":"Source"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("image/image-floatingMenu","jquery util/class i18n!image/nls/i18n i18n!aloha/nls/i18n ui/ui ui/scopes ui/button ui/toggleButton ui/port-helper-attribute-field".split(" "),function(m,d,a,
j,c,b,f,g,k){return d.extend({_constructor:function(){},init:function(a){a.floatingMenuControl=this;this.plugin=a;b.createScope(a.name,"Aloha.empty");this._addUIInsertButton();this._addUIMetaButtons();this._addUIResetButton();this._addUIAlignButtons();this._addUIMarginButtons();this._addUICropButtons();this._addUIResizeButtons();this._addUIAspectRatioToggleButton()},_addUIAspectRatioToggleButton:function(){var b=this.plugin;this._imageCnrRatioButton=c.adopt("imageCnrRatio",g,{tooltip:a.t("button.toggle.tooltip"),
icon:"aloha-icon-cnr-ratio",scope:b.name,click:function(){b.toggleKeepAspectRatio()}});if(b.settings.fixedAspectRatio!==false){this._imageCnrRatioButton.setState(true);b.keepAspectRatio=true}},_addUIResetButton:function(){var b=this.plugin;this._imageCnrResetButton=c.adopt("imageCnrReset",f,{tooltip:a.t("Reset"),icon:"aloha-icon-cnr-reset",scope:b.name,click:function(){b.reset()}})},_addUIInsertButton:function(){var b=this.plugin;this._insertImageButton=c.adopt("insertImage",f,{tooltip:a.t("button.addimg.tooltip"),
icon:"aloha-button aloha-image-insert",scope:"Aloha.continuoustext",click:function(){b.insertImg()}})},_addUIMetaButtons:function(){var b=this.plugin;this.imgSrcField=k({label:a.t("field.img.src.label"),labelClass:"aloha-image-input-label",tooltip:a.t("field.img.src.tooltip"),name:"imageSource",scope:b.name});this.imgSrcField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.imgSrcField.setObjectTypeFilter(b.objectTypeFilter);this.imgTitleField=k({label:a.t("field.img.title.label"),labelClass:"aloha-image-input-label",
tooltip:a.t("field.img.title.tooltip"),name:"imageTitle",scope:b.name});this.imgTitleField.setObjectTypeFilter()},_addUIAlignButtons:function(){var b=this.plugin;this._imageAlignLeftButton=c.adopt("imageAlignLeft",f,{tooltip:a.t("button.img.align.left.tooltip"),icon:"aloha-img aloha-image-align-left",scope:b.name,click:function(){var a=m(b.getPluginFocus());a.add(a.parent()).css("float","left")}});this._imageAlignRightButton=c.adopt("imageAlignRight",f,{tooltip:a.t("button.img.align.right.tooltip"),
icon:"aloha-img aloha-image-align-right",scope:b.name,click:function(){var a=m(b.getPluginFocus());a.add(a.parent()).css("float","right")}});this._imageAlignNoneButton=c.adopt("imageAlignNone",f,{tooltip:a.t("button.img.align.none.tooltip"),icon:"aloha-img aloha-image-align-none",scope:b.name,click:function(){var a=m(b.getPluginFocus());a.add(a.parent()).css({"float":"none",display:"inline-block"})}})},_addUIMarginButtons:function(){var b=this.plugin;this._imageIncPaddingButton=c.adopt("imageIncPadding",
f,{tooltip:a.t("padding.increase"),icon:"aloha-img aloha-image-padding-increase",scope:b.name,click:function(){m(b.getPluginFocus()).increase("padding")}});this._imageDecPaddingButton=c.adopt("imageDecPadding",f,{tooltip:a.t("padding.decrease"),icon:"aloha-img aloha-image-padding-decrease",scope:b.name,click:function(){m(b.getPluginFocus()).decrease("padding")}})},_addUICropButtons:function(){var f=this.plugin;b.createScope("Aloha.img",["Aloha.global"]);this._imageCropButton=c.adopt("imageCropButton",
g,{tooltip:a.t("Crop"),icon:"aloha-icon-cnr-crop",scope:f.name,click:function(){this.getState()?f.crop():f.endCrop()}})},_addUIResizeButtons:function(){var b=this.plugin;this.imgResizeHeightField=k({label:a.t("height"),labelClass:"aloha-image-input-label",name:"imageResizeHeight",width:50,scope:b.name});this.imgResizeHeightField.maxValue=b.settings.maxHeight;this.imgResizeHeightField.minValue=b.settings.minHeight;this.imgResizeWidthField=k({label:a.t("width"),labelClass:"aloha-image-input-label",
name:"imageResizeWidth",width:50,scope:b.name});this.imgResizeWidthField.maxValue=b.settings.maxWidth;this.imgResizeWidthField.minValue=b.settings.minWidth},setScope:function(){b.setScope(this.plugin.name)},doLayout:function(){}})});define("image/vendor/jcrop/jquery.jcrop.min",["jquery"],function(m){(function(d){d.Jcrop=function(a,j){function c(a){return""+parseInt(a)+"px"}function b(a){a=d(a).offset();return[a.left,a.top]}function f(a){return[a.pageX-P[0],a.pageY-P[1]]}function g(a,b){return function(c){if(t.aspectRatio)switch(a){case "e":c[1]=
b.y+1;break;case "w":c[1]=b.y+1;break;case "n":c[0]=b.x+1;break;case "s":c[0]=b.x+1}else switch(a){case "e":c[1]=b.y2;break;case "w":c[1]=b.y2;break;case "n":c[0]=b.x2;break;case "s":c[0]=b.x2}X.setCurrent(c);L.update()}}function k(a){var b=a;da.watchKeys();return function(a){X.moveOffset([a[0]-b[0],a[1]-b[1]]);b=a;L.update()}}function l(a){switch(a){case "n":return"sw";case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}
function e(a){return function(c){if(t.disabled||"move"==a&&!t.allowMove)return!1;Z=!0;var e=f(c);P=b(y);J.setCursor("move"==a?a:a+"-resize");if("move"==a)J.activateHandlers(k(e),n);else{var e=X.getFixed(),d=l(a),j=X.getCorner(l(d));X.setPressed(X.getCorner(d));X.setCurrent(j);J.activateHandlers(g(a,e),n)}c.stopPropagation();c.preventDefault();return!1}}function q(a){return{x:parseInt(a.x*S),y:parseInt(a.y*I),x2:parseInt(a.x2*S),y2:parseInt(a.y2*I),w:parseInt(a.w*S),h:parseInt(a.h*I)}}function n(){var a=
X.getFixed();a.w>t.minSelect[0]&&a.h>t.minSelect[1]?(L.enableHandles(),L.done()):L.release();J.setCursor(t.allowSelect?"crosshair":"default")}function m(a){X.setCurrent(a);L.update()}function o(){var a=d("<div></div>").addClass(t.baseClass+"-tracker");d.browser.msie&&a.css({opacity:0,backgroundColor:"white"});return a}function r(a){s([a[0]/S,a[1]/I,a[2]/S,a[3]/I])}function s(a){X.setPressed([a[0],a[1]]);X.setCurrent([a[2],a[3]]);L.update()}function v(a){"object"!=typeof a&&(a={});t=d.extend(t,a);
"function"!==typeof t.onChange&&(t.onChange=function(){});"function"!==typeof t.onSelect&&(t.onSelect=function(){})}function u(a){t.allowResize?a?L.enableOnly():L.enableHandles():L.disableHandles();J.setCursor(t.allowSelect?"crosshair":"default");L.setCursor(t.allowMove?"move":"default");F.css("backgroundColor",t.bgColor);"setSelect"in t&&(r(j.setSelect),L.done(),delete t.setSelect);"trueSize"in t&&(S=t.trueSize[0]/z,I=t.trueSize[1]/A);W=t.maxSize[0]||0;O=t.maxSize[1]||0;U=t.minSize[0]||0;G=t.minSize[1]||
0;"outerImage"in t&&(y.attr("src",t.outerImage),delete t.outerImage);L.refresh()}"object"!==typeof a&&(a=d(a)[0]);"object"!==typeof j&&(j={});"trackDocument"in j||(j.trackDocument=d.browser.msie?!1:!0,d.browser.msie&&"8"==d.browser.version.split(".")[0]&&(j.trackDocument=!0));"keySupport"in j||(j.keySupport=d.browser.msie?!1:!0);var t={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,borderOpacity:0.4,handleOpacity:0.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,
aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}};v(j);var x=d(a),y=x.clone().removeAttr("id").css({position:"absolute"});y.width(x.width());y.height(x.height());x.after(y).hide();(function(a,b,c){var e=a.width(),f=a.height();if(e>b&&b>0){e=b;f=b/a.width()*a.height()}if(f>
c&&c>0){f=c;e=c/a.height()*a.width()}S=a.width()/e;I=a.height()/f;a.width(e).height(f)})(y,t.boxWidth,t.boxHeight);var z=y.width(),A=y.height(),F=d("<div />").width(z).height(A).addClass(t.baseClass+"-holder").css({position:"relative",backgroundColor:t.bgColor}).insertAfter(x).append(y);t.addClass&&F.addClass(t.addClass);var H=d("<img />").attr("src",y.attr("src")).css("position","absolute").width(z).height(A),D=d("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}).append(H),
Q=d("<div />").width("100%").height("100%").css("zIndex",320),E=d("<div />").css({position:"absolute",zIndex:300}).insertBefore(y).append(D,Q),B=t.boundary,T=o().width(z+2*B).height(A+2*B).css({position:"absolute",top:c(-B),left:c(-B),zIndex:290}).mousedown(function(a){if(t.disabled||!t.allowSelect)return false;Z=true;P=b(y);L.disableHandles();if("crosshair"!=Y){J.setCursor("crosshair");Y="crosshair"}var c=f(a);X.setPressed(c);J.activateHandlers(m,n);da.watchKeys();L.update();a.stopPropagation();
a.preventDefault();return false}),W,O,U,G,S,I,P=b(y),Z,Y,ba,ua,X=function(){function a(){if(!t.aspectRatio){var b=g-f,k=j-d;W&&Math.abs(b)>W&&(g=b>0?f+W:f-W);O&&Math.abs(k)>O&&(j=k>0?d+O:d-O);G&&Math.abs(k)<G&&(j=k>0?d+G:d-G);U&&Math.abs(b)<U&&(g=b>0?f+U:f-U);if(f<0){g=g-f;f=f-f}if(d<0){j=j-d;d=d-d}if(g<0){f=f-g;g=g-g}if(j<0){d=d-j;j=j-j}if(g>z){b=g-z;f=f-b;g=g-b}if(j>A){b=j-A;d=d-b;j=j-b}if(f>z){b=f-A;j=j-b;d=d-b}if(d>A){b=d-A;j=j-b;d=d-b}return e(c(f,d,g,j))}var b=t.aspectRatio,k=t.minSize[0]/S,
l=t.maxSize[0]/S,n=g-f,q=j-d,m=Math.abs(n),o=Math.abs(q);l==0&&(l=z*10);if(m/o<b){m=j;w=o*b;o=n<0?f-w:w+f;if(o<0){o=0;h=Math.abs((o-f)/b);m=q<0?d-h:h+d}else if(o>z){o=z;h=Math.abs((o-f)/b);m=q<0?d-h:h+d}}else{o=g;h=m/b;m=q<0?d-h:d+h;if(m<0){m=0;w=Math.abs((m-d)*b);o=n<0?f-w:w+f}else if(m>A){m=A;w=Math.abs(m-d)*b;o=n<0?f-w:w+f}}if(o>f){o-f<k?o=f+k:o-f>l&&(o=f+l);m=m>d?d+(o-f)/b:d-(o-f)/b}else if(o<f){f-o<k?o=f-k:f-o>l&&(o=f-l);m=m>d?d+(f-o)/b:d-(f-o)/b}if(o<0){f=f-o;o=0}else if(o>z){f=f-(o-z);o=z}if(m<
0){d=d-m;m=0}else if(m>A){d=d-(m-A);m=A}return last=e(c(f,d,o,m))}function b(a){a[0]<0&&(a[0]=0);a[1]<0&&(a[1]=0);a[0]>z&&(a[0]=z);a[1]>A&&(a[1]=A);return[a[0],a[1]]}function c(a,b,e,f){var d=a,g=e,j=b,k=f;if(e<a){d=e;g=a}if(f<b){j=f;k=b}return[Math.round(d),Math.round(j),Math.round(g),Math.round(k)]}function e(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var f=0,d=0,g=0,j=0,k,l;return{flipCoords:c,setPressed:function(a){a=b(a);g=f=a[0];j=d=a[1]},setCurrent:function(a){a=b(a);
k=a[0]-g;l=a[1]-j;g=a[0];j=a[1]},getOffset:function(){return[k,l]},moveOffset:function(a){var b=a[0],a=a[1];0>f+b&&(b=b-(b+f));0>d+a&&(a=a-(a+d));A<j+a&&(a=a+(A-(j+a)));z<g+b&&(b=b+(z-(g+b)));f=f+b;g=g+b;d=d+a;j=j+a},getCorner:function(b){var c=a();switch(b){case "ne":return[c.x2,c.y];case "nw":return[c.x,c.y];case "se":return[c.x2,c.y2];case "sw":return[c.x,c.y2]}},getFixed:a}}(),L=function(){function a(b){b=d("<div />").css({position:"absolute",opacity:t.borderOpacity}).addClass(t.baseClass+"-"+
b);D.append(b);return b}function b(a,c){var f=d("<div />").mousedown(e(a)).css({cursor:a+"-resize",position:"absolute",zIndex:c});Q.append(f);return f}function f(a){var e=t.handleSize,d=A,g=e;switch(a){case "n":case "s":e="100%";break;case "e":case "w":g="100%"}return b(a,v++).width(e).height(g).css({top:c(-d+1),left:c(-d+1)})}function g(a){for(i in a)x[a[i]]=b(a[i],v++).css({top:c(-A+1),left:c(-A+1),opacity:t.handleOpacity}).addClass(t.baseClass+"-handle")}function j(a){var b=Math.round(a.h/2-A),
e=Math.round(a.w/2-A);west=-A+1;var f=a.w-A,a=a.h-A;"e"in x&&x.e.css({top:c(b),left:c(f)})&&x.w.css({top:c(b)})&&x.s.css({top:c(a),left:c(e)})&&x.n.css({left:c(e)});"ne"in x&&x.ne.css({left:c(f)})&&x.se.css({top:c(a),left:c(f)})&&x.sw.css({top:c(a)});"b"in x&&x.b.css({top:c(a)})&&x.r.css({left:c(f)})}function k(){var a=X.getFixed();X.setPressed([a.x,a.y]);X.setCurrent([a.x2,a.y2]);l()}function l(){if(s)return n()}function n(){var a=X.getFixed(),b=a.h;E.width(a.w).height(b);var b=a.x,e=a.y;H.css({top:c(-e),
left:c(-b)});E.css({top:c(e),left:c(b)});t.drawBorders&&u.right.css({left:c(a.w-1)})&&u.bottom.css({top:c(a.h-1)});z&&j(a);if(!s){E.show();y.css("opacity",t.bgOpacity);s=true}t.onChange(q(a))}function m(){z=true;if(t.allowResize){j(X.getFixed());Q.show();return true}}function p(){z=false;Q.hide()}function r(a){(ba=a)?p():m()}var s,v=370,u={},x={},z=false,A=t.handleOffset;t.drawBorders&&(u={top:a("hline").css("top",d.browser.msie?c(-1):c(0)),bottom:a("hline"),left:a("vline"),right:a("vline")});if(t.dragEdges){x.t=
f("n");x.b=f("s");x.r=f("e");x.l=f("w")}t.sideHandles&&g(["n","s","e","w"]);t.cornerHandles&&g(["sw","nw","ne","se"]);var F=o().mousedown(e("move")).css({cursor:"move",position:"absolute",zIndex:360});D.append(F);p();return{updateVisible:l,update:n,release:function(){p();E.hide();y.css("opacity",1);s=false},refresh:k,setCursor:function(a){F.css("cursor",a)},enableHandles:m,enableOnly:function(){z=true},showHandles:function(){if(z){j(X.getFixed());Q.show()}},disableHandles:p,animMode:r,done:function(){r(false);
k()}}}(),J=function(){function a(b){c(f(b))}function b(j){j.preventDefault();j.stopPropagation();if(Z){Z=false;e(f(j));t.onSelect(q(X.getFixed()));T.css({zIndex:290});g&&d(document).unbind("mousemove",a).unbind("mouseup",b);c=function(){};e=function(){}}return false}var c=function(){},e=function(){},g=t.trackDocument;g||T.mousemove(a).mouseup(b).mouseout(b);y.before(T);return{activateHandlers:function(f,j){Z=true;c=f;e=j;T.css({zIndex:450});g&&d(document).mousemove(a).mouseup(b);return false},setCursor:function(a){T.css("cursor",
a)}}}(),da=function(){function a(b,c,e){if(t.allowMove){X.moveOffset([c,e]);L.updateVisible()}b.preventDefault();b.stopPropagation()}var b=d('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(function(b){if(b.ctrlKey)return true;var c=(ua=b.shiftKey?true:false)?10:1;switch(b.keyCode){case 37:a(b,-c,0);break;case 39:a(b,c,0);break;case 38:a(b,0,-c);break;case 40:a(b,0,c);break;case 27:L.release();break;case 9:return true}return nothing(b)}).blur(function(){b.hide()}),c=d("<div />").css({position:"absolute",
overflow:"hidden"}).append(b);t.keySupport&&c.insertBefore(y);return{watchKeys:function(){if(t.keySupport){b.show();b.focus()}}}}();Q.hide();u(!0);B={animateTo:function(a){var b=a[0]/S,c=a[1]/I,e=a[2]/S,f=a[3]/I;if(!ba){var a=X.flipCoords(b,c,e,f),b=X.getFixed(),d=initcr=[b.x,b.y,b.x2,b.y2],g=t.animationDelay,j=d[0],k=d[1],e=d[2],f=d[3],l=a[0]-initcr[0],n=a[1]-initcr[1],q=a[2]-initcr[2],m=a[3]-initcr[3],o=0,p=t.swingSpeed;L.animMode(true);var r=function(){return function(){o=o+(100-o)/p;d[0]=j+o/
100*l;d[1]=k+o/100*n;d[2]=e+o/100*q;d[3]=f+o/100*m;o<100?window.setTimeout(r,g):L.done();o>=99.8&&(o=100);s(d)}}();window.setTimeout(r,g)}},setSelect:r,setOptions:function(a){v(a);u()},tellSelect:function(){return q(X.getFixed())},tellScaled:function(){return X.getFixed()},disable:function(){t.disabled=true;L.disableHandles();L.setCursor("default");J.setCursor("default")},enable:function(){t.disabled=false;u()},cancel:function(){L.done();J.activateHandlers(null,null)},focus:da.watchKeys,getBounds:function(){return[z*
S,A*I]},getWidgetSize:function(){return[z,A]},release:L.release,destroy:function(){F.remove();x.show()}};x.data("Jcrop",B);return B};d.fn.Jcrop=function(a){function j(c){var b=a.useImg||c.src,f=new Image;f.onload=function(){d.Jcrop(c,a)};f.src=b}"object"!==typeof a&&(a={});this.each(function(){if(d(this).data("Jcrop")){if("api"==a)return d(this).data("Jcrop");d(this).data("Jcrop").setOptions(a)}else j(this)});return this}})(m)});define("image/vendor/mousewheel/mousewheel",["jquery"],function(m){(function(d){function a(a){var c=
a||window.event,g=[].slice.call(arguments,1),j=0,l=0,e=0,a=d.event.fix(c);a.type="mousewheel";c.wheelDelta&&(j=c.wheelDelta/120);c.detail&&(j=-c.detail/3);e=j;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(e=0,l=-1*j);void 0!==c.wheelDeltaY&&(e=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(l=-1*c.wheelDeltaX/120);g.unshift(a,j,l,e);return(d.event.dispatch||d.event.handle).apply(this,g)}var j=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var c=j.length;c;)d.event.fixHooks[j[--c]]=d.event.mouseHooks;
d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=j.length;b;)this.addEventListener(j[--b],a,!1);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var b=j.length;b;)this.removeEventListener(j[--b],a,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(m)});define("image/image-plugin","jquery aloha/plugin image/image-floatingMenu i18n!aloha/nls/i18n i18n!image/nls/i18n jqueryui image/vendor/jcrop/jquery.jcrop.min image/vendor/mousewheel/mousewheel".split(" "),
function(m,d,a,j,c){var b=m,f=window.GENTICS,g=window.Aloha,k=false,l=false,e=false;String.prototype.toInteger=String.prototype.toInteger||function(){return parseInt((""+this).replace(/px$/,"")||0,10)};String.prototype.toFloat=String.prototype.toInteger||function(){return parseFloat((""+this).replace(/px$/,"")||0,10)};Number.prototype.toInteger=Number.prototype.toInteger||String.prototype.toInteger;Number.prototype.toFloat=Number.prototype.toFloat||String.prototype.toFloat;m.extend(true,m.fn,{increase:m.fn.increase||
function(a){var b=m(this),c,e;if(!b.length)return b;c=b.css(a).toFloat();e=Math.round((c||1)*1.2);c===e&&e++;b.css(a,e);return b},decrease:m.fn.decrease||function(a){var b=m(this),c,e;if(!b.length)return b;c=b.css(a).toFloat();e=Math.round((c||0)*0.8);c===e&&e>0&&e--;b.css(a,e);return b}});return d.create("image",{defaultSettings:{maxWidth:1600,minWidth:3,maxHeight:1200,minHeight:3,autoCorrectManualInput:true,fixedAspectRatio:false,autoResize:false,ui:{meta:true,crop:true,resizable:true},handles:"ne, se, sw, nw",
onCropped:function(a,b){g.Log.info("Default onCropped invoked",a,b)},onReset:function(a){g.Log.info("Default onReset invoked",a);return false},onResize:function(a){g.Log.info("Default onResize invoked",a)},onResized:function(a){g.Log.info("Default onResized invoked",a)}},_onCropped:function(a,c){b("body").trigger("aloha-image-cropped",[a,c]);this.keepAspectRatio&&(l=this.imageObj.width()/this.imageObj.height());this.onCropped(a,c)},_onReset:function(a){b("body").trigger("aloha-image-reset",a);return this.onReset(a)},
_onResize:function(a){b("body").trigger("aloha-image-resize",a);this._applyValuesToFields(a.width(),a.height());this.onResize(a)},_onResized:function(a){b("body").trigger("aloha-image-resized",a);this._applyValuesToFields(a.width(),a.height());this.onResized(a)},imageObj:null,jcAPI:null,keepAspectRatio:false,restoreProps:[],objectTypeFilter:[],init:function(){g.getPluginUrl("image");if(typeof this.settings.objectTypeFilter!="undefined")this.objectTypeFilter=this.settings.objectTypeFilter;this.config=
this.defaultSettings;this.settings=m.extend(true,this.defaultSettings,this.settings);if(typeof this.settings.fixedAspectRatio==="number"){l=e=this.settings.fixedAspectRatio;this.keepAspectRatio=true}else this.keepAspectRatio=this.settings.fixedAspectRatio===true?true:false;this.initializeUI();this.bindInteractions();this.subscribeEvents()},initializeUI:function(){this.ui=new a;this.ui.init(this)},bindInteractions:function(){var a=this;if(a.settings.ui.resizable)try{document.execCommand("enableObjectResizing",
false,false)}catch(b){g.Log.info(b,"Could not disable enableObjectResizing")}if(a.settings.ui.meta){a.ui.imgSrcField.addListener("keyup",function(){a.srcChange()});a.ui.imgSrcField.addListener("blur",function(){var b=m(a.ui.imgSrcField.getTargetObject());b.attr("src")===""&&b.remove()})}if(a.settings.onCropped&&typeof a.settings.onCropped==="function")a.onCropped=a.settings.onCropped;if(a.settings.onReset&&typeof a.settings.onReset==="function")a.onReset=a.settings.onReset;if(a.settings.onResized&&
typeof a.settings.onResized==="function")a.onResized=a.settings.onResized;if(a.settings.onResize&&typeof a.settings.onResize==="function")a.onResize=this.settings.onResize},subscribeEvents:function(){var a=this,b=this.settings;m("img").filter(b.globalselector).unbind();m("img").filter(b.globalselector).click(function(b){a.clickImage(b)});g.bind("aloha-drop-files-in-editable",function(b,c){for(var e,d=c.filesObjs.length,j;--d>=0;){j=c.filesObjs[d];if(j.file.type.match(/image\//)){a.getEditableConfig(c.editable);
e=m("<img/>");e.css({"max-width":that.maxWidth,"max-height":that.maxHeight});e.attr("id",j.id);typeof j.src==="undefined"?e.attr("src",j.data):e.attr("src",j.src);f.Utils.Dom.insertIntoDOM(e,c.range,m(g.activeEditable.obj))}}});g.bind("aloha-selection-changed",function(b,c,e){if(e&&e.target&&a.settings.ui.resizable&&!m(e.target).hasClass("ui-resizable-handle")){a.endResize();a.imageObj=null;g.trigger("aloha-image-unselected")}if(g.activeEditable!==null){c=a.findImgMarkup(c);b=a.getEditableConfig(g.activeEditable.obj);
if(typeof b!=="undefined"){a.ui._insertImageButton.show();if(c){a.ui._insertImageButton.show();a.ui.setScope();if(a.settings.ui.meta){a.ui.imgSrcField.setTargetObject(c,"src");a.ui.imgTitleField.setTargetObject(c,"title")}a.ui.imgSrcField.foreground();a.ui.imgSrcField.focus()}else a.settings.ui.meta&&a.ui.imgSrcField.setTargetObject(null);a.ui.doLayout()}else a.ui._insertImageButton.hide()}});g.bind("aloha-editable-created",function(b,c){try{document.execCommand("enableObjectResizing",false,false)}catch(e){g.Log.info(e,
"Could not disable enableObjectResizing")}c.obj.delegate("img","mouseup",function(b){if(!k){a.clickImage(b);b.stopPropagation()}})});a._subscribeToResizeFieldEvents()},autoResize:function(a){m("#"+this.ui.imgResizeWidthField.getInputId());m("#"+this.ui.imgResizeHeightField.getInputId());var b=this.imageObj.width(),c=this.imageObj.height(),e=false;if(b<this.settings.minWidth||b>this.settings.maxWidth||c<this.settings.minHeight||c>this.settings.maxHeight)e=true;var f=b/c;if(e){if(b>this.settings.maxWidth){b=
this.settings.maxWidth;c=b/f}if(c>this.settings.maxHeight){c=this.settings.maxHeight;b=c*f}if(b<this.settings.minWidth&&a){b=this.settings.minWidth;c=b/f}if(c<this.settings.minHeight&&a){c=this.settings.minHeight;b=b*f}this._applyValuesToFields(b,c);this.setSizeByFieldValue();return true}return false},toggleKeepAspectRatio:function(){this.keepAspectRatio=!this.keepAspectRatio;if(typeof this.jcAPI!=="undefined"&&this.jcAPI!==null){var a=this.jcAPI.tellSelect();e=this.keepAspectRatio?typeof this.settings.fixedAspectRatio!==
"number"?a.w/a.h>0?a.w/a.h:this.imageObj.width()/this.imageObj.height():this.settings.fixedAspectRatio:false;this.jcAPI.setOptions(this.keepAspectRatio?{aspectRatio:e}:{aspectRatio:0});this.jcAPI.focus()}else{this.endResize();l=this.keepAspectRatio?typeof this.settings.fixedAspectRatio!=="number"?this.imageObj.width()/this.imageObj.height():this.settings.fixedAspectRatio:false;this.startResize()}},_subscribeToResizeFieldEvents:function(){function a(c){var f=c.data.fieldName;if(c.keyCode===8||c.keyCode===
46)e._updateFields(f,b(this).val(),false)&&(typeof e.jcAPI!=="undefined"&&e.jcAPI!==null?e.setCropAreaByFieldValue():e.setSizeByFieldValue());else if(c.keyCode<=57&&c.keyCode>=48||c.keyCode<=105&&c.keyCode>=96)e._updateFields(f,b(this).val(),false)&&(typeof e.jcAPI!=="undefined"&&e.jcAPI!==null?e.setCropAreaByFieldValue():e.setSizeByFieldValue());else{var d=0;if(c.keyCode===38||c.keyCode===107)d=1;else if(c.keyCode===40||c.keyCode===109)d=-1;if(c.shiftKey||c.metaKey||c.ctrlKey)d=d*10;var g=false;
d<0&&(g=true);d=parseInt(b(this).val(),10)+d;e._updateFields(f,d,g)&&(typeof e.jcAPI!=="undefined"&&e.jcAPI!==null?e.setCropAreaByFieldValue():e.setSizeByFieldValue())}c.preventDefault();return false}function c(a,f){var d=a.data.fieldName;if(a.shiftKey||a.metaKey||a.ctrlKey)f=f*10;var g=parseInt(b(this).val(),10)+f,j=false;f<0&&(j=true);e._updateFields(d,g,j)&&(typeof e.jcAPI!=="undefined"&&e.jcAPI!==null?e.setCropAreaByFieldValue():e.setSizeByFieldValue());return false}var e=this,f=b("#"+e.ui.imgResizeHeightField.getInputId()),
d={fieldName:"height",maxValue:e.ui.imgResizeHeightField.maxValue,minValue:e.ui.imgResizeHeightField.minValue};f.live("keyup",d,a);f.live("mousewheel",d,c);f=b("#"+e.ui.imgResizeWidthField.getInputId());d={fieldName:"width",maxValue:e.ui.imgResizeWidthField.maxValue,minValue:e.ui.imgResizeWidthField.minValue};f.live("keyup",d,a);f.live("mousewheel",d,c)},setSize:function(a,b){this.imageObj.width(a);this.imageObj.height(b);var c=this.imageObj.closest(".Aloha_Image_Resize");c.height(b);c.width(a);this._onResize(this.imageObj);
this._onResized(this.imageObj)},clickImage:function(a){this.endResize();a=this.imageObj=m(a.target);if(!a.hasClass("aloha-ui")){this.ui.setScope();a.closest(".aloha-editable");this.ui._imageCnrRatioButton.setState(this.keepAspectRatio);this.restoreProps.push({obj:this.imageObj,src:this.imageObj.attr("src"),width:this.imageObj.width(),height:this.imageObj.height()});this._applyValuesToFields(this.imageObj.width(),this.imageObj.height());if(this.settings.ui.meta){this.ui.imgSrcField.setTargetObject(this.imageObj,
"src");this.ui.imgTitleField.setTargetObject(this.imageObj,"title")}g.Selection.preventSelectionChanged();try{this.ui.imgSrcField.focus()}catch(b){}e=l=this.imageObj.width()/this.imageObj.height();this.settings.ui.resizable&&this.startResize();this.settings.autoResize&&this.autoResize(true);g.Selection.preventSelectionChangedFlag=false;g.trigger("aloha-image-selected")}},findImgMarkup:function(a){var b,c;typeof a==="undefined"&&(a=g.Selection.getRangeObject());c=m(a.startContainer);try{if(g.activeEditable&&
(typeof a.startContainer!=="undefined"&&typeof a.startContainer.childNodes!=="undefined"&&typeof a.startOffset!=="undefined"&&typeof a.startContainer.childNodes[a.startOffset]!=="undefined"&&a.startContainer.childNodes[a.startOffset].nodeName.toLowerCase()==="img"&&a.startOffset+1===a.endOffset||c.hasClass("Aloha_Image_Resize"))){b=c.find("img")[0];if(!b.css)b.css="";if(!b.title)b.title="";if(!b.src)b.src="";return b}}catch(e){g.Log.debug(e,"Error finding img markup.")}return null},getPluginFocus:function(){return this.imageObj},
_updateFields:function(a,c,f){var d=null,g=null,j=null,k=null,m=null,t=null,x=null,j=typeof this.jcAPI!=="undefined"&&this.jcAPI!==null?e?e:l:l;if(a=="width"){d=b("#"+this.ui.imgResizeWidthField.getInputId());g=b("#"+this.ui.imgResizeHeightField.getInputId());j=1/j;k=this.settings.minWidth;m=this.settings.maxWidth;t=this.settings.minHeight;x=this.settings.maxHeight}else if(a=="height"){d=b("#"+this.ui.imgResizeHeightField.getInputId());g=b("#"+this.ui.imgResizeWidthField.getInputId());k=this.settings.minHeight;
m=this.settings.maxHeight;t=this.settings.minWidth;x=this.settings.maxWidth}else return false;if(isNaN(c)){d.css("background-color","red");return false}d.val(c);a=true;if(c>m)if(this.settings.autoCorrectManualInput){d.val(m);c=d.val();d.css("background-color","");a=true}else{d.css("background-color","red");a=false}else if(c<k)if(f){d.val(k);c=d.val();a=true}else{this.settings.autoCorrectManualInput?d.css("background-color","wheat"):d.css("background-color","red");a=false}else{d.css("background-color",
"");a=true}k=true;if(this.keepAspectRatio){c=Math.round(c*j);if(c>x)if(this.settings.autoCorrectManualInput){g.val(x);d.val(g.val()/j);d.val();d.css("background-color","");g.css("background-color","");k=true}else{c.css("background-color","red");k=false}else if(c<t)if(f){g.val(t);d.val(g.val()/j);d.val();a=true}else{if(this.settings.autoCorrectManualInput){g.val(c);g.css("background-color","wheat")}else g.css("background-color","red");k=false}else{g.val(c);g.css("background-color","");k=true}}g.val()<
t&&(k=false);return a&&k?true:false},setSizeByFieldValue:function(){var a=this.ui.imgResizeWidthField.getValue(),b=this.ui.imgResizeHeightField.getValue();this.setSize(a,b)},_applyValuesToFields:function(a,b){this.ui.imgResizeWidthField.setValue(a);this.ui.imgResizeHeightField.setValue(b);this.ui.imgResizeWidthField.getInputJQuery().css("background-color","");this.ui.imgResizeHeightField.getInputJQuery().css("background-color","")},setCropAreaByFieldValue:function(){var a=this.jcAPI.tellSelect(),
b=parseInt(this.ui.imgResizeWidthField.getValue(),10),c=parseInt(this.ui.imgResizeHeightField.getValue(),10);this.jcAPI.setSelect([a.x,a.y,a.x+b,a.y+c]);this._onCropSelect();this.jcAPI.enable()},insertImg:function(){var a=g.Selection.getRangeObject(),b=this.getEditableConfig(g.activeEditable.obj),c=g.getPluginUrl("image");if(a.isCollapsed()){b="max-width: "+b.maxWidth+"; max-height: "+b.maxHeight;c=m('<img style="'+b+'" src="'+c+'/img/blank.jpg" title="" />');f.Utils.Dom.insertIntoDOM(c,a,m(g.activeEditable.obj))}else g.Log.error("img cannot markup a selection")},
srcChange:function(){this.imageObj.attr("src",this.ui.imgSrcField.getValue())},positionCropButtons:function(){var a=m(".jcrop-tracker:first"),b=a.offset(),c=b.top,b=b.left,e=a.height(),a=a.width(),f=m("#aloha-CropNResize-btns");c===0&&b===0&&f.hide();c=parseInt(c+e+3,10);b=parseInt(b+a/2-f.width()/2+10,10);(0!=b||0!=c)&&f.offset({top:c,left:b})},initCropButtons:function(){var a=this,b;m("body").append('<div id="aloha-CropNResize-btns" display="none"><button class="cnr-crop-apply" title="'+c.t("Accept")+
'"></button><button class="cnr-crop-cancel" title="'+c.t("Cancel")+'"></button></div>');b=m("#aloha-CropNResize-btns");b.find(".cnr-crop-apply").click(function(){a.acceptCrop()});b.find(".cnr-crop-cancel").click(function(){a.endCrop()});this.interval=setInterval(function(){a.positionCropButtons()},10)},destroyCropButtons:function(){m("#aloha-CropNResize-btns").remove();clearInterval(this.interval)},_disableSelection:function(a){a.find("*").attr("unselectable","on").css({"-moz-user-select":"none",
"-webkit-user-select":"none","user-select":"none"})},crop:function(){var a=this,c=a.keepAspectRatio?l:false;this.ui._imageCropButton.setState(true);a.initCropButtons();a.settings.ui.resizable&&a.endResize();a.jcAPI=m.Jcrop(a.imageObj,{onSelect:function(){a._onCropSelect();window.setTimeout(function(){a.ui.setScope()},10)},aspectRatio:c,minSize:[a.settings.minWidth,a.settings.minHeight]});a._disableSelection(b(".jcrop-holder"));a._disableSelection(b("#imageContainer"));a._disableSelection(b("#aloha-CropNResize-btns"));
b("body").trigger("aloha-image-crop-start",[a.imageObj])},_onCropSelect:function(){m(".jcrop-handle").mousedown(function(){m("#aloha-CropNResize-btns").hide()});m(".jcrop-tracker").mousedown(function(){m("#aloha-CropNResize-btns").hide()});if(typeof this.jcAPI!=="undefined"&&this.jcAPI!==null){this.positionCropButtons();var a=this.jcAPI.tellSelect();a.h>0&&a.w>0&&m("#aloha-CropNResize-btns").fadeIn("slow");this._applyValuesToFields(a.w,a.h)}},endCrop:function(){if(this.jcAPI){this.jcAPI.destroy();
this.jcAPI=null}this.destroyCropButtons();this.ui._imageCropButton.setState(false);this.settings.ui.resizable&&this.startResize();b("body").trigger("aloha-image-crop-stop",[this.imageObj]);this._applyValuesToFields(this.imageObj.width(),this.imageObj.height())},acceptCrop:function(){this._onCropped(this.imageObj,this.jcAPI.tellSelect());this.endCrop()},startResize:function(){var a=this,b=this.imageObj,c=a.keepAspectRatio?l:false,b=this.imageObj.css({height:this.imageObj.height(),width:this.imageObj.width(),
position:"relative","max-height":"","max-width":""});b.resizable({maxHeight:a.settings.maxHeight,minHeight:a.settings.minHeight,maxWidth:a.settings.maxWidth,minWidth:a.settings.minWidth,aspectRatio:c,handles:a.settings.handles,grid:a.settings.grid,resize:function(){k=true;a._onResize(a.imageObj)},stop:function(b){k=false;a._onResized(a.imageObj);this.enableCrop&&window.setTimeout(function(){a.ui.setScope();that.done(b)},10)}});b.css("display","inline-block");m(".ui-wrapper").attr("contentEditable",
false).addClass("aloha-image-box-active Aloha_Image_Resize aloha").css({position:"relative",display:"inline-block","float":a.imageObj.css("float")}).bind("resizestart",function(a){a.preventDefault()}).bind("mouseup",function(a){a.originalEvent.stopSelectionUpdate=true})},endResize:function(){this.imageObj&&this.imageObj.closest(".aloha-editable");this.imageObj&&this.imageObj.is(":ui-resizable")&&this.imageObj.resizable("destroy").css({top:0,left:0})},resetSize:function(){var a=this,b=new Image;b.onload=
function(){var c=a.getPluginFocus();a.settings.ui.resizable&&a.endResize();m(c).add(c.parent()).css({width:b.width+"px",height:b.height+"px","max-width":"","max-height":""});a.settings.ui.resizable&&a.resize()};b.src=a.getPluginFocus().attr("src")},reset:function(){this.settings.ui.crop&&this.endCrop();this.settings.ui.resizable&&this.endResize();if(!this._onReset(this.imageObj))for(var a=0;a<this.restoreProps.length;a++)if(this.imageObj.get(0)===this.restoreProps[a].obj.get(0)){this.imageObj.attr("src",
this.restoreProps[a].src);this.imageObj.width(this.restoreProps[a].width);this.imageObj.height(this.restoreProps[a].height);break}this._applyValuesToFields(this.imageObj.width(),this.imageObj.height())}})});define("highlighteditables/highlighteditables-plugin",["aloha","jquery","aloha/plugin","aloha/ephemera"],function(m,d,a,j){var c=window.GENTICS;return a.create("highlighteditables",{config:["highlight"],init:function(){var a=this,f;j.classes("aloha-editable-highlight");c.Utils.Position.addMouseMoveCallback(function(){var c,
d;for(c=0;c<m.editables.length;c++)d=m.editables[c],f=a.getEditableConfig(d.obj),!m.activeEditable&&(!d.isDisabled()&&"highlight"==f)&&d.obj.addClass("aloha-editable-highlight")});c.Utils.Position.addMouseStopCallback(function(){a.fade()});m.bind("aloha-editable-activated",function(){a.fade()})},fade:function(){var a,c,g=function(){d(this).css("outline","")};for(a=0;a<m.editables.length;a++)c=m.editables[a].obj,c.hasClass("aloha-editable-highlight")&&c.css("outline",c.css("outlineColor")+" "+c.css("outlineStyle")+
" 5px").removeClass("aloha-editable-highlight").animate({outlineWidth:"0px"},300,"swing",g)}})});define("dom-to-xhtml/dom-to-xhtml","jquery util/dom2 util/misc util/browser aloha/ephemera aloha/console".split(" "),function(m,d,a,j,c,b){function f(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(a,b){var e=d.attrs(a),g="",k,l;if(j.ie7)for(var n in p)if(p.hasOwnProperty(n)&&a[n]){k=0;for(l=e.length;k<l;k++)if(n===e[k][0].toLowerCase()){e.splice(k,1);break}e.push([n,
n])}k=0;for(l=e.length;k<l;k++){var m=e[k];n=m[0].toLowerCase();m=m[1];if(!b||!c.isAttrEphemeral(a,n,b.attrMap||{},b.attrRxs||{})){var q=p[n];if(q||""!==m)g=g+(" "+n+'="'+f(q?n:m).replace(/"/g,"&quot;")+'"')}}return g}function k(a){var b=a.nodeName,c=o[b];if(null!=c)return c;for(var e="/"+a.nodeName,a=a.nextSibling,c=false;null!=a;){if(e==a.nodeName){c=true;break}a=a.nextSibling}return o[b]=c}function l(a,b,c,f,d){for(;null!=b;)if(1===b.nodeType&&c&&"/"+a.nodeName==b.nodeName){b=b.nextSibling;break}else if(1===
b.nodeType&&k(b))b=e(b,b.nextSibling,true,f,d);else{q(b,f,d);b=b.nextSibling}return b}function e(a,b,c,e,f){var d=a.nodeName.toLowerCase();a.scopeName&&("HTML"!=a.scopeName&&-1===d.indexOf(":"))&&(d=a.scopeName.toLowerCase()+":"+d);if(!c&&null==b&&n[d])f.push("<"+d+g(a,e)+"/>");else{f.push("<"+d+g(a,e)+">");b=l(a,b,c,e,f);f.push("</"+d+">")}return b}function q(a,c,d){1===a.nodeType?e(a,a.firstChild,k(a),c,d):3===a.nodeType?d.push(f(a.nodeValue)):8===a.nodeType?d.push("<\!--"+a.nodeValue+"--\>"):b.warn("Unknown node type encountered during serialization, ignoring it: type="+
a.nodeType+" name="+a.nodeName+" value="+a.nodeValue)}var n={area:true,base:true,basefont:true,br:true,col:true,frame:true,hr:true,img:true,input:true,isindex:true,link:true,meta:true,param:true,embed:true},p={checked:true,compact:true,declare:true,defer:true,disabled:true,ismap:true,multiple:true,nohref:true,noresize:true,noshade:true,nowrap:true,readonly:true,selected:true},o={DIV:false,SPAN:false,UL:false,OL:false,LI:false,TABLE:false,TR:false,TD:false,TH:false,I:false,B:false,EM:false,STRONG:false,
A:false,P:false};return{contentsToXhtml:function(a,b){var c=[];l(a,a.firstChild,false,b,c);return c.join("")},nodeToXhtml:function(a,b){var c=[];q(a,b,c);return c.join("")}}});define("dom-to-xhtml/dom-to-xhtml-plugin",["aloha","jquery","aloha/plugin","aloha/ephemera","dom-to-xhtml/dom-to-xhtml"],function(m,d,a,j,c){return a.create("dom-to-xhtml",{init:function(){var a=this;m.Editable.setContentSerializer(function(f){return!a.settings.editables&&!a.settings.config?c.contentsToXhtml(f):a.settings.editables&&
"dom-to-xhtml"==a.settings.editables["#"+d(f).attr("id")]?c.contentsToXhtml(f,j.ephemera()):a.settings.config&&"dom-to-xhtml"==a.settings.config&&!a.settings.editables["#"+d(f).attr("id")]?c.contentsToXhtml(f,j.ephemera()):d(f).html()})}})});define("contenthandler/contenthandler-utils",["jquery","util/html"],function(m,d){return{wrapContent:function(a){return"string"===typeof a?m("<div>"+a+"</div>"):a instanceof m?m("<div>").append(a):null},isProppedParagraph:function(a){a=m.trim(a);if(!a)return!1;
var a=m("<div>"+a+"</div>")[0],j=a.firstChild;if(!(j===a.lastChild&&"P"===j.nodeName))return!1;a=m(j.childNodes).filter(function(a,b){return d.isRenderedNode(b)});return 1===a.length&&"BR"===a[0].nodeName}}});define("contenthandler/wordcontenthandler","jquery aloha aloha/contenthandlermanager contenthandler/contenthandler-utils util/dom2 util/html".split(" "),function(m,d,a,j,c,b){function f(a){switch(a[0].nodeName.toLowerCase()){case "table":return 0===a.find("tbody,tr").length;case "tbody":return 0===
a.find("tr").length;case "tr":return 0===a.find("td,th").length;default:return""===m.trim(a.text())}}function g(a){if(0===a.length||!e.test(a[0].outerHTML))return false;var a=a.find("*"),b,c;for(b=0;b<a.length;b++){if((c=a.eq(b).attr("style"))&&c.toLowerCase().indexOf("mso")>=0)return true;if((c=a.eq(b).attr("class"))&&c.toLowerCase().indexOf("mso")>=0)return true}return false}function k(a){a.find("p.MsoTitle").each(function(){d.Markup.transformDomObject(m(this),"h1")});a.find("p.MsoSubtitle").each(function(){d.Markup.transformDomObject(m(this),
"h2")})}var l=m,e=/mso/,q=/^#(.*)/;return a.createHandler({handleContent:function(a){var b=j.wrapContent(a);if(!b)return a;g(b)&&this.transformWordContent(b);return b.html()},isOrderedList:function(a){return a.css("fontFamily")=="Wingdings"||a.css("fontFamily")=="Symbol"?false:m.trim(a.text()).match(/^([0-9]{1,3}\.)|([0-9]{1,3}\)|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\)))$/)?true:false},transformListsFromWord:function(a){var b=this,c,e;e=a.find("p.MsoListParagraphCxSpFirst,p.MsoListParagraphCxSpMiddle,p.MsoListParagraphCxSpLast,p.MsoListParagraph,p span");
e.each(function(){var a=l(this),b=a.css("font-family")||"",c=a.css("mso-list")||"",e=a.attr("style")||"";a.hasClass("MsoListParagraphCxSpFirst")||a.hasClass("MsoListParagraph")?a.addClass("aloha-list-element"):b.indexOf("Symbol")>=0?a.closest("p").addClass("aloha-list-element"):b.indexOf("Wingdings")>=0?a.closest("p").addClass("aloha-list-element"):c!==""?a.closest("p").addClass("aloha-list-element"):e.indexOf("mso-list")>=0&&a.closest("p").addClass("aloha-list-element")});a.find("p span span span").each(function(){var a=
l(this),b;if(l.trim(a.text()).replace(/&nbsp;/g,"").length===0){b=l.trim(a.parent().parent().text()).replace(/&nbsp;/g,"");if(b.match(/^([0-9]{1,3}\.)|([0-9]{1,3}\))|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\))|(.)$/)){a.closest("p").addClass("aloha-list-element");a.parent().parent().addClass("aloha-list-bullet")}}});e="p.aloha-list-element";c=":not("+e+", font)";e=a.find(e);e.length>0&&e.each(function(){var a=l(this),e,f,d,g,j,k,n,m;a.removeClass("aloha-list-element");a.find("font").each(function(){l(this).contents().unwrap()});
m=[];n=parseFloat(a.css("marginLeft"));isNaN(n)&&(n=0);k=[];j=a.nextUntil(c);g=l(a.find("span.aloha-list-bullet"));g.length===0&&(g=a.find("span").eq(0));d=b.isOrderedList(g);g.remove();f=l(d?"<ol></ol>":"<ul></ul>");k.push(f);e=l("<li></li>");f.append(e);a.contents().appendTo(e);a.replaceWith(f);j.each(function(){var a=l(this),c,j;if(!a.is("font")){a.find("font").each(function(){l(this).contents().unwrap()});c=parseFloat(a.css("marginLeft"));isNaN(c)&&(c=0);g=l(a.find("span.aloha-list-bullet"));
g.length===0&&(g=a.find("span").eq(0));d=b.isOrderedList(g);g.remove();if(c>n){j=l(d?"<ol></ol>":"<ul></ul>");f.children(":last").append(j);f=j;k.push(f);m.push(c);n=c}else if(c<n&&m.length>0){for(;m.length>0&&m[m.length-1]>c;){m.pop();k.pop()}f=k[k.length-1];n=c}e=l("<li></li>");f.append(e);a.contents().appendTo(e);a.remove()}})})},removeParagraphNumbering:function(a){a=a.find("h1,h2,h3,h4,h5,h6");a.length>0&&a.each(function(){var a=l(this),b=a.find("span"),a=a.find("a");b.each(function(){l.trim(l(this).text()).match(/^([\.\(]?[\d\D][\.\(]?){1,4}$/)&&
l(this).remove()});a.each(function(){typeof l(this).attr("href")==="undefined"&&l(this).contents().unwrap()})})},transformToc:function(a){a.find("[class*=MsoToc]").each(function(){var a=l(this),b=a.find("span"),a=a.find("a");b.each(function(){l(this).attr("style")&&l(this).attr("style").search("mso-hide")>-1&&l(this).remove();l(this).contents().unwrap()});a.each(function(){l(this).contents().unwrap()})})},transformWordContent:function(a){this.transformToc(a);this.removeParagraphNumbering(a);this.transformListsFromWord(a);
k(a);var c=a.find("*"),e,d,g,j;g=0;for(j=c.length;g<j;g++){d=c.eq(g);e=d[0].nodeName.toLowerCase();if("a"===e)(e=d.attr("href"))&&q.test(m.trim(e))&&d.contents().unwrap();else"div"===e||"span"===e?d.contents().unwrap():"td"!==e&&f(d)&&d.contents().unwrap()}c=a[0].childNodes;d=0;for(g=c.length;d<g;d++)c[d]&&b.isUnrenderedNode(c[d])&&a[0].removeChild(c[d])}})});define("contenthandler/genericcontenthandler",["jquery","aloha","aloha/contenthandlermanager","contenthandler/contenthandler-utils"],function(m,
d,a,j){function c(a){a.find("table").removeAttr("cellpadding").removeAttr("cellspacing").removeAttr("border").removeAttr("border-top").removeAttr("border-bottom").removeAttr("border-left").removeAttr("border-right");a.find("td").each(function(){j.isProppedParagraph(this.innerHTML)&&(this.innerHTML="&nbsp;");var a=m(">p",this);1===a.length&&a.contents().unwrap()});a.find("table,th,td,tr").removeAttr("width").removeAttr("height").removeAttr("valign");a.find("colgroup").remove()}var b=["strong","em",
"s","u","strike"];return a.createHandler({handleContent:function(a){var b=j.wrapContent(a);if(!b)return a;if(b.find(".aloha-block").length)return b.html();c(b);this.cleanLists(b);this.removeComments(b);this.unwrapTags(b);this.removeStyles(b);this.removeNamespacedElements(b);a=!0;d.settings.contentHandler&&(d.settings.contentHandler.handler&&d.settings.contentHandler.handler.generic&&"undefinded"!==typeof d.settings.contentHandler.handler.generic.transformFormattings&&!d.settings.contentHandler.handler.generic.transformFormattings)&&
(a=!1);a&&this.transformFormattings(b);return b.html()},cleanLists:function(a){a.find("ul,ol").find(">:not(li)").remove()},transformFormattings:function(a){var c=[],j;for(j=0;j<b.length;j++)(!d.settings.contentHandler||!d.settings.contentHandler.allows||!(d.settings.contentHandler.allows.elements&&-1!==m.inArray(b[j].toLowerCase(),d.settings.contentHandler.allows.elements)))&&c.push(b[j]);a.find(c.join(",")).each(function(){"STRONG"===this.nodeName?d.Markup.transformDomObject(m(this),"b"):"EM"===
this.nodeName?d.Markup.transformDomObject(m(this),"i"):"S"===this.nodeName||"STRIKE"==this.nodeName?d.Markup.transformDomObject(m(this),"del"):"U"===this.nodeName&&m(this).contents().unwrap()})},transformLinks:function(a){a.find("a").each(function(){"undefined"===typeof m(this).attr("href")&&m(this).contents().unwrap()})},removeComments:function(a){var b=this;a.contents().each(function(){8===this.nodeType?m(this).remove():b.removeComments(m(this))})},unwrapTags:function(a){a.find("span,font,div").not(".aloha-wai-lang").each(function(){"DIV"==
this.nodeName?"<br>"===this.innerHTML?m(this).contents().unwrap():m(d.Markup.transformDomObject(m(this),"p").append("<br>")).contents().unwrap():m(this).contents().unwrap()})},removeStyles:function(a){var b=this;a.children("style").filter(function(){return"false"!==this.contentEditable}).remove();a.children().filter(function(){return"false"!==this.contentEditable}).each(function(){m(this).removeAttr("style").removeClass();b.removeStyles(m(this))})},removeNamespacedElements:function(a){a.find("*").each(function(){var a=
this.prefix?this.prefix:this.scopeName?this.scopeName:void 0;if(a&&"HTML"!==a||0<=this.nodeName.indexOf(":")){var a=m(this),b=a.contents();b.length?b.unwrap():a.remove()}})}})});Ha.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i;Ha.RELATIVE="__relative__";Ha.prototype.clean_node=function(m){function d(a,b){var c,d=b.length;for(c=0;c<d;c++)if(b[c]===a)return c;return-1}function a(){var a=[],b={},c,d=arguments.length,e;for(c=0;c<d;c++)if((e=arguments[c])&&e.length)for(var j=0,
n=e.length;j<n;j++)b[e[j]]||(b[e[j]]=!0,a.push(e[j]));return a}function j(b){var c,k,l=this.filters.length;for(k=0;k<l;k++)if(!this.filters[k](b)){c=b.cloneNode(!0);this.current_element.appendChild(c);return}switch(b.nodeType){case 1:var e,m,n,p,o,r;k=b;e=[];b=k;m=!1;var s;n=this.transformers.length;for(s=0;s<n;s++)if(l=this.transformers[s]({allowed_elements:this.allowed_elements,config:this.config,node:k,node_name:k.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=
l)if("object"==typeof l){if(l.whitelist_nodes&&l.whitelist_nodes instanceof Array){p=l.whitelist_nodes.length;for(m=0;m<p;m++)-1==d(l.whitelist_nodes[m],this.whitelist_nodes)&&this.whitelist_nodes.push(l.whitelist_nodes[m])}m=l.whitelist?!0:!1;l.attr_whitelist&&(e=a(e,l.attr_whitelist));b=l.node?l.node:b}else throw Error("transformer output must be an object or null");k=this.jQuery;s=k.browser.msie&&"7.0"===k.browser.version;k=b;l=k.nodeName.toLowerCase();b=this.current_element;if(this.allowed_elements[l]||
m){this.current_element=this.dom.createElement(k.nodeName);b.appendChild(this.current_element);n=a(this.config.attributes[l],this.config.attributes.__ALL__,e);m=n.length;for(e=0;e<m;e++)if(c=n[e],p=k.attributes[c])o=!0,this.config.protocols[l]&&this.config.protocols[l][c]&&(o=this.config.protocols[l][c],o=(r=p.nodeValue.toLowerCase().match(Ha.REGEX_PROTOCOL))?-1!=d(r[1],o):-1!=d(Ha.RELATIVE,o)),o&&(!s||s&&"style"!==c)&&this.current_element.setAttribute(c,p.nodeValue);if(this.config.add_attributes[l])for(c in this.config.add_attributes[l])(!s||
s&&"style"!==c)&&this.current_element.setAttribute(c,this.config.add_attributes[l][c])}else if(-1!=d(k,this.whitelist_nodes)){this.current_element=k.cloneNode(!0);for(c=this.current_element.childNodes.length;0<c;)this.current_element.removeChild(this.current_element.firstChild);b.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[l]){c=k.childNodes;m=c.length;for(e=0;e<m;e++)j.call(this,c[e])}this.current_element.normalize&&this.current_element.normalize();
this.current_element=b;break;case 3:c=b.cloneNode(!1);this.current_element.appendChild(c);break;case 5:c=b.cloneNode(!1);this.current_element.appendChild(c);break;case 8:this.config.allow_comments&&(c=b.cloneNode(!1),this.current_element.appendChild(c))}}var c=this.dom.createDocumentFragment();this.current_element=c;this.whitelist_nodes=[];var m=m.childNodes,b;b=0;for(len=m.length;b<len;b++)j.call(this,m[b]);c.normalize&&c.normalize();return c};define("vendor/sanitize",function(){});define("contenthandler/sanitizecontenthandler",
"aloha/core jquery aloha/contenthandlermanager aloha/plugin aloha/console vendor/sanitize".split(" "),function(m,d,a){function j(a){var f=["restricted","basic","relaxed"],g=m.defaults.supports;if(m.settings.contentHandler.allows)g=m.settings.contentHandler.allows;if(typeof m.settings.contentHandler.sanitize==="string"&&d.inArray(m.settings.contentHandler.sanitize,f)>-1)g=m.defaults.sanitize[m.settings.contentHandler.sanitize];else if(typeof m.settings.contentHandler.sanitize==="object")g=m.settings.contentHandler.sanitize;
else if(!g)g=m.defaults.sanitize.relaxed;a&&(g=a);g.filters=[function(a){return a.contentEditable!="false"}];c=new Ha(g,d)}var c;if(!m.defaults.sanitize)m.defaults.sanitize={};m.defaults.sanitize.restricted={elements:["b","em","i","strong","u","del","p","span","div","br"]};m.defaults.sanitize.basic={elements:["a","abbr","b","blockquote","br","cite","code","dd","del","dl","dt","em","i","li","ol","p","pre","q","small","strike","strong","sub","sup","u","ul"],attributes:{a:["href"],blockquote:["cite"],
q:["cite"],abbr:["title"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};m.defaults.sanitize.relaxed={elements:["a","abbr","b","blockquote","br","caption","cite","code","col","colgroup","dd","del","dl","dt","em","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","span","hr","object",
"div"],attributes:{a:["href","title","id","class","target","data-gentics-aloha-repository","data-gentics-aloha-object-id"],div:["id","class","style"],abbr:["title"],blockquote:["cite"],br:["class"],col:["span","width"],colgroup:["span","width"],img:["align","alt","height","src","title","width","class","data-caption","data-align","data-width","data-original-image"],ol:["start","type"],p:["class","style","id"],q:["cite"],table:["summary","width"],td:["abbr","axis","colSpan","rowSpan","colspan","rowspan",
"width"],th:["abbr","axis","colSpan","rowSpan","colspan","rowspan","scope","width"],ul:["type"],span:["class","style","lang","xml:lang","role"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},img:{src:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};return a.createHandler({handleContent:function(a,f,g){if(!g)return a;var k,l;if(m.settings.contentHandler&&m.settings.contentHandler.handler&&m.settings.contentHandler.handler.sanitize){if(m.settings.contentHandler.handler.sanitize)l=
m.settings.contentHandler.handler.sanitize;f=l["#"+g.getId()];g=g.obj.attr("class");if(typeof f!=="undefined")k=l;else if(typeof g!=="undefined"){g=g.split(" ");for(f=0;f<g.length;f++)typeof l["."+g[f]]!=="undefined"&&(k=l["."+g[f]])}}(typeof c==="undefined"||typeof k!=="undefined")&&j(k);typeof a==="string"?a=d("<div>"+a+"</div>").get(0):a instanceof d&&(a=d("<div>").append(a).get(0));return d("<div>").append(c.clean_node(a)).html()}})});define("contenthandler/blockelementcontenthandler","jquery aloha/core aloha/contenthandlermanager contenthandler/contenthandler-utils util/functions util/html util/arrays".split(" "),
function(m,d,a,j,c,b,f){function g(a,c){var e=b.findNodeRight(c.lastChild,o);e&&"br"===e.nodeName.toLowerCase()&&m(e).remove()}function k(a,b){var c=m(b);c.filter(n).remove();if(m.browser.msie){c.filter("br.aloha-end-br").remove();c.filter(q).each(g)}c.children(p).each(k)}function l(a,b){var c=m(b);c.filter(n).append("​");c.children(p).each(l)}function e(a,b){var c=m(b);c.filter(n).filter(":empty").append("<br/>");c.children(p).each(e)}var q=b.BLOCKLEVEL_ELEMENTS.join(),n=f.subtract(b.BLOCKLEVEL_ELEMENTS,
b.VOID_ELEMENTS),p=":not(.aloha-block)",o=c.complement(b.isIgnorableWhitespace);return a.createHandler({handleContent:function(a,b){if(!b)return a;var c=j.wrapContent(a);if(!c)return a;switch(b.command){case "initEditable":c.children(p).each(k);m.browser.msie&&m.browser.version<=7&&c.children(p).each(l);break;case "getContents":c.children(p).each(e)}return c.html()}})});define("contenthandler/contenthandler-plugin","jquery aloha/plugin aloha/contenthandlermanager contenthandler/wordcontenthandler contenthandler/genericcontenthandler contenthandler/sanitizecontenthandler contenthandler/blockelementcontenthandler".split(" "),
function(m,d,a,j,c,b,f){var g={word:j,generic:c,sanitize:b,blockelement:f};return d.create("contenthandler",{init:function(){for(var b in g)g.hasOwnProperty(b)&&a.register(b,g[b])}})});define("characterpicker/nls/i18n",{root:{"button.addcharacter.tooltip":"pick special characters"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("characterpicker/characterpicker-plugin","aloha jquery aloha/plugin ui/ui ui/button ui/floating PubSub i18n!characterpicker/nls/i18n".split(" "),function(m,
d,a,j,c,b,f,g){function k(a){a.$element.click(function(a){a.stopPropagation()});d("body").click(function(b){a._overlayActive&&!(b.target===a.$element[0]||d(b.target).is(".aloha-icon-characterpicker")||d(b.target).find(".aloha-icon-characterpicker").length)&&a.hide()})}function l(a){v.keyup(function(b){27===b.keyCode&&a.$element.css("display")==="table"&&a.hide()})}function e(a,b,c){var e=function(a){return a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()})};(a=a.currentStyle?a.currentStyle[e(c)]:
document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(c):a.style[e(c)])&&b.css(c,a)}function q(a,b){var c={13:function(c){a.hide();b(c.text())},37:function(a){var b=a.prev();if(b.length){b.addClass("focused");a.removeClass("focused")}},38:function(a){var b=a.parent().prev();b.length&&d(b.children()[a.index()]).addClass("focused").length&&a.removeClass("focused")},39:function(a){a.next().addClass("focused").length&&a.removeClass("focused")},
40:function(a){var b=a.parent().next();b.length&&d(b.children()[a.index()]).addClass("focused").length&&a.removeClass("focused")}};v.keydown(function(b){b.stopPropagation();if(c[b.keyCode]&&a.$element.css("display")==="table"){c[b.keyCode](a.$element.find(".focused"));return false}})}function n(a,b){var c=document.createElement("textarea");c.innerHTML=b;for(var c=d.grep(c.value.split(" "),function(a){return""!==a}),e=["<tr>"],f=0,g;g=c[f];){0!==f&&0===f%15&&e.push("</tr><tr>");e.push('<td unselectable="on">'+
g+"</td>");f++}e.push("</tr>");a.$tbody.empty().append(e.join(""));a.$element.delegate("td","mouseover",function(){a.$element.find(".focused").removeClass("focused");d(this).addClass("focused")}).delegate("td","mouseout",function(){d(this).removeClass("focused")}).delegate("td","click",function(){a.$element.hide();a.onSelect(d(this).text())})}function p(a,c){var e=a.offset();if("fixed"===b.POSITION_STYLE){e.top=e.top-u.scrollTop();e.left=e.left-u.scrollLeft()}var f=u.width(),d=u.height()-y;if(f<e.left+
c.width())e.left=f-c.width();if(d<e.top+c.height())e.top=d-c.height();return e}function o(a){if(m.activeEditable){t.select();m.execCommand("insertHTML",false,a);t.endContainer=t.startContainer;t.endOffset=++t.startOffset;t.select()}}function r(a){var b=this;b.$element=d('<table class="aloha-character-picker-overlay" unselectable="on" role="dialog"><tbody></tbody></table>');b.$element.mousedown(function(){return false});b.onSelect=a;b.$tbody=b.$element.find("tbody");b.$element.appendTo(d("body"));
k(b);l(b);q(b,a);m.bind("aloha-editable-deactivated",function(){b.hide()})}function s(a,b){var c=a.getEditableConfig(b.obj);if(!c)return null;var c=d.isArray(c)?c.join(" "):c,e=x[c];if(!e){e=new r(o);n(e,c);x[c]=e}return e}var v=d(document),u=d(window),t,x={},y=function(){var a=d("<div>").css({visibility:"hidden",height:100,overflow:"scroll"}).appendTo("body"),b=d("<div>").css({height:"100%"}).appendTo(a).outerHeight();a.remove();return 100-b}();r.prototype={show:function(a){this.$element.css(p(a,
this.$element)).css("position",b.POSITION_STYLE).show().find(".focused").removeClass("focused");this.$element.find("td").eq(0).addClass("focused");this._overlayActive=true},hide:function(){this.$element.hide();this._overlayActive=false}};return a.create("characterpicker",{settings:{},config:"&#38; &#34; &#162; &#8364; &#163; &#165; &#169; &#174; &#8482; &#8240; &#181; &#183; &#8226; &#8230; &#8242; &#8243; &#167; &#182; &#223; &#8249; &#8250; &#171; &#187; &#8216; &#8217; &#8220; &#8221; &#8218; &#8222; &#60; &#62; &#8804; &#8805; &#8211; &#8212; &#175; &#8254; &#164; &#166; &#168; &#161; &#191; &#710; &#732; &#176; &#8722; &#177; &#247; &#8260; &#215; &#185; &#178; &#179; &#188; &#189; &#190; &#402; &#8747; &#8721; &#8734; &#8730; &#8764; &#8773; &#8776; &#8800; &#8801; &#8712; &#8713; &#8715; &#8719; &#8743; &#8744; &#172; &#8745; &#8746; &#8706; &#8704; &#8707; &#8709; &#8711; &#8727; &#8733; &#8736; &#180; &#184; &#170; &#186; &#8224; &#8225; &#192; &#193; &#194; &#195; &#196; &#197; &#198; &#199; &#200; &#201; &#202; &#203; &#204; &#205; &#206; &#207; &#208; &#209; &#210; &#211; &#212; &#213; &#214; &#216; &#338; &#352; &#217; &#218; &#219; &#220; &#221; &#376; &#222; &#224; &#225; &#226; &#227; &#228; &#229; &#230; &#231; &#232; &#233; &#234; &#235; &#236; &#237; &#238; &#239; &#240; &#241; &#242; &#243; &#244; &#245; &#246; &#248; &#339; &#353; &#249; &#250; &#251; &#252; &#253; &#254; &#255; &#913; &#914; &#915; &#916; &#917; &#918; &#919; &#920; &#921; &#922; &#923; &#924; &#925; &#926; &#927; &#928; &#929; &#931; &#932; &#933; &#934; &#935; &#936; &#937; &#945; &#946; &#947; &#948; &#949; &#950; &#951; &#952; &#953; &#954; &#955; &#956; &#957; &#958; &#959; &#960; &#961; &#962; &#963; &#964; &#965; &#966; &#967; &#968; &#969; &#8501; &#982; &#8476; &#977; &#978; &#8472; &#8465; &#8592; &#8593; &#8594; &#8595; &#8596; &#8629; &#8656; &#8657; &#8658; &#8659; &#8660; &#8756; &#8834; &#8835; &#8836; &#8838; &#8839; &#8853; &#8855; &#8869; &#8901; &#8968; &#8969; &#8970; &#8971; &#9001; &#9002; &#9674; &#9824; &#9827; &#9829; &#9830;",
_constructor:function(){this._super("characterpicker")},init:function(){function a(c){if(c<m.editables.length){s(b,m.editables[c]);setTimeout(function(){a(c+1)},100)}}var b=this;if(m.settings.plugins&&m.settings.plugins.characterpicker)b.settings=m.settings.plugins.characterpicker;var d=j.adopt("characterPicker",c,{tooltip:g.t("button.addcharacter.tooltip"),icon:"aloha-icon-characterpicker",scope:"Aloha.continuoustext",click:function(){if(b.overlay){t=m.Selection.rangeObject;var a=t.startContainer.parentNode,
c=b.overlay.$element;e(a,c,"font-family");e(a,c,"font-weight");e(a,c,"font-style");b.overlay.show(this.element)}}});setTimeout(function(){a(0)},100);m.bind("aloha-editable-activated",function(a,c){b.overlay=s(b,c.editable);b.overlay?d.show():d.hide()});f.sub("aloha.floating.changed",function(){b.overlay&&b.overlay.$element.css(p(d.element,b.overlay.$element))})}})});define("commands/inserthtml","aloha/core jquery aloha/command aloha/selection util/dom aloha/contenthandlermanager aloha/console".split(" "),
function(m,d,a,j,c,b,f){a.register("inserthtml",{action:function(a,j){function l(a){var b=d(a);if(!c.insertIntoDOM(b,j,e,false)){b=b.contents();(c.isBlockLevelElement(a)||c.isListElement(a))&&l(d("<br/>").get(0));for(n=b.length-1;n>=0;--n)l(b[n])}}var e=d(c.getEditingHostOf(j.startContainer)),q=j.commonAncestorContainer,n,p=[],a=b.handleContent(a,{contenthandler:m.settings.contentHandler.insertHtml});if(typeof a==="string")a=d("<div>"+a+"</div>");else if(a instanceof d)a=d("<div>").append(a);else throw"INVALID_VALUE_ERR";
p=a.contents();c.removeRange(j);for(n=p.length-1;n>=0;--n)l(p[n]);p.length>0?j=c.setCursorAfter(p.get(p.length-1)):j.select();c.doCleanup({merge:true,removeempty:true},j,q);try{j.select()}catch(o){f.warn("Error:",o)}}})});define("commands/commands-plugin",["aloha/command","./inserthtml"],function(){});define("block/block-utils",["jquery","util/dom","util/dom2","util/html","aloha/ephemera"],function(m,d,a,j,c){function b(a){var b=document.createElement("span");b.className=k+"_"+a.attr("id");b.appendChild(document.createTextNode(" "));
c.markWhiteSpaceWrapper(b);return b}function f(b){return(j.isBlock(b)||a.isTextNode(b))&&!j.isUnrenderedNode(b)}function g(a){return a.hasClass("aloha-table-wrapper")}var k="aloha-caret-landing";return{pad:function(c){a.findBackward(a.backward(c[0]),f,function(a){return j.isBlock(a)||d.isEditingHost(a)})||c.before(b(c));a.findForward(a.forward(c[0].lastChild||c[0]),f,function(a){return j.isBlock(a)||d.isEditingHost(a)||a.previousSibling&&d.isEditingHost(a.previousSibling)})||c.after(b(c))},unpad:function(a){a=
k+"_"+a.attr("id");m("."+a).each(function(a,b){j.hasOnlyWhiteSpaceChildren(b)?b.parentNode.removeChild(b):m(b.childNodes).unwrap()})},isDragdropEnabledForElement:function(a){a=a.closest(".aloha-editable");return a.length?!!a.data("block-dragdrop"):!0},isTable:g,getEditableByBlock:function(a){return a.parents(".aloha-editable").filter(":first")},getTableByBlock:function(a){return g(a)?a.find("table").filter(":first"):null}}});define("block/blockmanager","aloha jquery ui/scopes aloha/observable aloha/registry util/class util/strings util/maps block/block-utils".split(" "),
function(m,d,a,j,c,b,f,g,k){function l(a){a.$element.attr("data-aloha-block-copy-only-block","true");e.Utils.Dom.selectDomNode(a.$element[0])}var e=window.GENTICS,q=new (b.extend(j,{defaults:{"aloha-block-type":"DefaultBlock"},blockTypes:null,blocks:null,_highlightedBlocks:null,_activeBlock:null,_dragdropEnabled:true,_constructor:function(){a.createScope("Aloha.Block");this.blockTypes=new c;this.blocks=new c;this._highlightedBlocks={}},registerEventHandlers:function(){var a=this;this._registerEventHandlersForDeactivatingAlohaBlock();
this._registerEventHandlersForDeterminingCurrentlyActiveBlock();this._registerEventHandlersForBlockDeletion();this._registerEventHandlersForCutCopyPaste();this._registerEventHandlersForEditableActivated();m.bind("aloha-selection-changed",function(b,c){c&&d(c.getCommonAncestorContainer()).parents(".aloha-block").length>0||a._deactivateHighlightedBlocks()})},_registerEventHandlersForDeactivatingAlohaBlock:function(){var a=this;d(document).bind("click",function(b){g.isEmpty(a._highlightedBlocks)||d(b.target).closest(".aloha-ui,.aloha-block-do-not-deactivate,.aloha-block").length>
0||a._deactivateHighlightedBlocks()})},_registerEventHandlersForDeterminingCurrentlyActiveBlock:function(){var a=this;this.bind("block-selection-change",function(b){a._activeBlock=b.length>0?b[0]:null})},_registerEventHandlersForBlockDeletion:function(){var a=this;m.bind("aloha-command-will-execute",function(b,c){var e=c.commandId,f=m.getSelection(),g=f.getRangeCount(),f=f.getRangeAt(0),j=f.endContainer,k=f.startContainer,j=g===0||g===1&&j===k&&j===d("body")[0]||g===1&&j===k&&f.startOffset+1===f.endOffset;
if(a._activeBlock&&(e==="delete"||e==="forwarddelete")&&j){c.preventDefault=true;a._activeBlock.destroy()}else if(!a._activeBlock&&(e==="delete"||e==="forwarddelete")&&g===1&&f.collapsed===false){var l;l=function(a){for(var b,c=0,e=a.length;c<e;c++){b=a[c];if(b.domobj.nodeType===1){var f=d(b.domobj);b.selection==="full"&&f.is(".aloha-block")?f.remove():l(b.children)}}};l(m.Selection.getSelectionTree())}});d(window.document).keydown(function(b){if(d(b.target).closest(".aloha-ui").length>0)return true;
if(a._activeBlock&&(b.which===46||b.which===8)&&a._activeBlock._isInsideNestedEditable===false){if(d.browser.msie&&parseInt(d.browser.version,10)<=8&&a._activeBlock.$element.parents(".aloha-editable,.aloha-block").first().hasClass("aloha-editable")){a._activeBlock.destroy();b.preventDefault();return false}if(a._activeBlock.shouldDestroy()){a._activeBlock.destroy();b.preventDefault();return false}}})},_registerEventHandlersForCutCopyPaste:function(){var a=this,b=false,c=false,e=null;d(window.document).keydown(function(e){if(!m.activeEditable||
!a._activeBlock||!d.contains(a._activeBlock.$element.get(0),m.activeEditable.obj.get(0))){var f;if(f=a._activeBlock)if(f=e.ctrlKey||e.metaKey){f=m.getSelection().getRangeCount()?!m.getSelection().getRangeAt(0).collapsed:false;f=!f&&!k.isTable(a._activeBlock.$element)}if(f)if(e.which===67){b=true;l(a._activeBlock)}else if(e.which===88){c=true;l(a._activeBlock)}}});d(window.document).keyup(function(f){if(!c&&b&&(f.which===67||f.which===18||f.which===91)){b=false;a._activeBlock.$element.removeAttr("data-aloha-block-copy-only-block");
e&&(e=null)}if(c&&(f.which===67||f.which===18||f.which===88))c=false})},_registerEventHandlersForEditableActivated:function(){var a=this;m.bind("aloha-editable-activated",function(b,c){if(c.editable){var e=a.getBlock(c.editable.obj.closest(".aloha-block"));e&&e.activate()}})},initializeBlockLevelDragDrop:function(){var a=this;d.each(m.editables,function(b,c){c.obj.data("block-dragdrop",a._dragdropEnabled)});m.bind("aloha-editable-created",function(b,c){c.obj.data("block-dragdrop",a._dragdropEnabled)})},
setDragDropState:function(a){this._dragdropEnabled=a},getDragDropState:function(){return this._dragdropEnabled},registerBlockType:function(b,c){a.createScope("Aloha.Block."+b,"Aloha.Block");this.blockTypes.register(b,c)},_blockify:function(a,b){var c=d(a),e=m.require("block/block-plugin"),f=c[0].tagName.toLowerCase();if(d.inArray(f,e.settings.rootTags)===-1)m.Log.error("block/blockmanager","Blocks can only be created from ["+e.settings.rootTags.join(", ")+"] element. You passed "+f+".");else{e=this.getConfig(c,
b);if(this.blockTypes.has(e["aloha-block-type"])){c=new (this.blockTypes.get(e["aloha-block-type"]))(c,e);c.$element.addClass("aloha-block-"+e["aloha-block-type"]);this.blocks.register(c.getId(),c)}else m.Log.error("block/blockmanager","Block Type "+e["aloha-block-type"]+" not found!")}},_unblockify:function(a){(a=this.getBlock(a))&&a.unblock()},getConfig:function(a,b){var c={},e=null,g=null;if(a.length>0){g=d(a[0].cloneNode(false));e=d.extend({},d.data(a[0]),g.data());g.removeData();for(var j in e)e.hasOwnProperty(j)&&
(c[f.camelCaseToDashes(j)]=e[j])}return d.extend({},this.defaults,b,c)},getBlock:function(a){if(typeof a==="object"){a=d(a);a.hasClass("aloha-block-inner")&&(a=a.parent());a=a.attr("id")}return this.blocks.get(a)},_unregisterBlock:function(a){this.blocks.unregister(typeof a==="object"?a.getId():a)},_deactivateHighlightedBlocks:function(){d.each(d.extend({},this._highlightedBlocks),function(a){(a=q.getBlock(a))&&a.deactivate()})},_getHighlightedBlocks:function(){var a={};d.each(this.blocks.getEntries(),
function(b,c){c.isActive()&&(a[b]=c)});return a},_setHighlighted:function(a){this._highlightedBlocks[a.id]=true},_setUnhighlighted:function(a){delete this._highlightedBlocks[a.id]}}));m.Block=m.Block||{};return m.Block.BlockManager=q});define("block/editormanager",["aloha/registry"],function(m){return new (m.extend({createEditor:function(d){if(!this.has(d.type))throw'Editor for type "'+d.type+'" not found.';return new (this.get(d.type))(d)}}))});define("block/sidebarattributeeditor",["jquery","block/blockmanager",
"aloha/sidebar","block/editormanager","util/class"],function(m,d,a,j,c){return new (c.extend({_sidebar:null,_blockPanels:[],init:function(){this._sidebar=a.right.show();d.bind("block-selection-change",this._onBlockSelectionChange,this)},_onBlockSelectionChange:function(a){var c=this,d;if(this._sidebar){for(d in c._blockPanels)c._blockPanels.hasOwnProperty(d)&&(d=c._blockPanels[d],m(d.element).remove(),delete this._sidebar.panels[d.id]);this._blockPanels=[];m.each(a,function(){var a=this.getSchema(),
b=this,e=[];a&&c._blockPanels.push(c._sidebar.addPanel({title:b.getTitle(),expanded:!0,onInit:function(){var c=m("<form />");c.submit(function(){return!1});m.each(a,function(a,f){var d=j.createEditor(f);d.bind("change",function(c){b.attr(a,c)});b.bind("change",function(){d.setValue(b.attr(a))});c.append(d.render());d.setValue(b.attr(a));e.push(d)});this.setContent(c)},deactivate:function(){m.each(e,function(a,b){b._deactivate()});this.isActive=!1;this.effectiveElement=null}}))})}}}))});define("block/block",
"aloha jquery block/blockmanager aloha/observable ui/scopes util/class PubSub block/block-utils util/html util/functions".split(" "),function(m,d,a,j,c,b,f,g,k,l){var e=window.GENTICS,j=b.extend(j,{title:null,id:null,$element:null,_currentlyRendering:false,_initialized:false,_isInsideNestedEditable:false,_constructor:function(a,b){var c=this;this.$element=a;if(a.attr("id"))this.id=a.attr("id");else{this.id=e.Utils.guid();a.attr("id",this.id)}a.contentEditable(false);a.addClass("aloha-block");if(this.isDraggable()){a.find("img").attr("draggable",
"false");try{a.find("a").attr("draggable","false")}catch(j){a.find("a").each(function(){this.setAttribute("draggable","false")})}}d.each(b,function(a,b){c._setAttribute(a,b)});this._onElementClickHandler=function(a){if(d(a.target).closest(".aloha-block").get(0)===c.$element.get(0)){c._fixScrollPositionBugsInIE();c.activate(a.target,a)}};this._connectThisBlockToDomElement(a,function(){f.pub("aloha.block.initialized",{block:c})});if(k.isInlineFormattable(a[0])){a.closest(".aloha-editable-active").length>
0&&g.pad(c.$element);m.bind("aloha-editable-activated",function(a,b){b.editable&&b.editable.obj.find("#"+c.id).length!==0&&g.pad(c.$element)});m.bind("aloha-editable-deactivated",function(a,b){b.editable&&b.editable.obj.find("#"+c.id).length!==0&&g.unpad(c.$element)})}this._initialized=true},_onElementClickHandler:null,_preventSelectionChangedEventHandler:function(a){"dblclick"!==a.type&&!d(a.target).is(".aloha-editable")&&m.Selection.preventSelectionChanged()},_connectThisBlockToDomElement:function(a,
b){var c=this,e=d(a);this._disconnectFromDomElement();this.$element=e;this.$element.bind("click",this._onElementClickHandler);this.$element.bind("mousedown",this._preventSelectionChangedEventHandler);this.$element.bind("focus",this._preventSelectionChangedEventHandler);this.$element.bind("dblclick",this._preventSelectionChangedEventHandler);this.init(this.$element,function(){window.setTimeout(function(){c._postProcessElementIfNeeded();b&&b()},5)})},_disconnectFromDomElement:function(){if(this.$element){this.$element.unbind("click",
this._onElementClickHandler);this.$element.unbind("mousedown",this._preventSelectionChangedEventHandler);this.$element.unbind("focus",this._preventSelectionChangedEventHandler);this.$element.unbind("dblclick",this._preventSelectionChangedEventHandler)}},_fixScrollPositionBugsInIE:function(){var a=d(window).scrollTop();window.setTimeout(function(){d(window).scrollTop()!==a&&d(window).scrollTop(a)},10)},init:function(a,b){b()},shouldDestroy:function(){var a=this.$element.parent().closest(".aloha-block,.aloha-editable,.aloha-block-collection");
return a.hasClass("aloha-block-collection")&&this.$element[0].tagName.toLowerCase()==="div"?true:a.hasClass("aloha-editable")},destroy:function(b){if(this.shouldDestroy()||b===true){var c=this,f=new e.Utils.RangeObject;f.startContainer=f.endContainer=this.$element.parent()[0];f.startOffset=f.endOffset=e.Utils.Dom.getIndexInParent(this.$element[0]);g.unpad(this.$element);a.trigger("block-delete",this);this.free();var d=this.$element[0].tagName.toLowerCase()==="span";this.$element.fadeOut("fast",function(){c.$element.remove();
a.trigger("block-selection-change",[]);window.setTimeout(function(){d&&f.select()},5)})}},unblock:function(){g.unpad(this.$element);this.deactivate();this._disconnectFromDomElement();this.$element.removeClass("aloha-block");this.$element.children(".aloha-block-handle").remove();this.free()},free:function(){a._unregisterBlock(this);this.unbindAll()},getId:function(){return this.id},getSchema:function(){return null},getTitle:function(){return this.title},isDraggable:function(){return this.$element[0].nodeName===
"DIV"&&this.$element.parents(".aloha-editable,.aloha-block:not(.aloha-table-wrapper),.aloha-block-collection").first().hasClass("aloha-block-collection")?true:this.$element.parents(".aloha-block:not(.aloha-table-wrapper),.aloha-editable").first().hasClass("aloha-editable")},activate:function(b,e){var f=[];d.each(a._getHighlightedBlocks(),function(){this.deactivate()});this.$element.attr("data-block-skip-scope")!=="true"&&c.setScope("Aloha.Block."+this.attr("aloha-block-type"));this.$element.addClass("aloha-block-active");
this._highlight();f.push(this);this.$element.parents(".aloha-block").each(function(){var b=a.getBlock(this);if(b){b._highlight();f.push(b)}});if(d(b).closest(".aloha-editable,.aloha-block,.aloha-table-cell-editable,.aloha-table-cell_active").first().hasClass("aloha-block"))this._isInsideNestedEditable=false;else{this._isInsideNestedEditable=true;e&&m.Selection.updateSelection(e)}a.trigger("block-activate",f);a.trigger("block-selection-change",f)},deactivate:function(){var b=this,c=[this];this._unhighlight();
this.$element.parents(".aloha-block").each(function(){c.push(this);b._unhighlight()});this.$element.removeClass("aloha-block-active");a.trigger("block-deactivate",c);a.trigger("block-selection-change",[])},isActive:function(){return this.$element.hasClass("aloha-block-active")},_highlight:function(){this.$element.addClass("aloha-block-highlighted");a._setHighlighted(this)},_unhighlight:function(){this.$element.removeClass("aloha-block-highlighted");a._setUnhighlighted(this)},_update:function(){var a=
this;if(!this._currentlyRendering&&this._initialized){this._currentlyRendering=true;this.update(this.$element,function(){a._postProcessElementIfNeeded()});this._currentlyRendering=false}},update:function(a,b){b()},_postProcessElementIfNeeded:function(){this.createEditablesIfNeeded();this._checkThatNestedBlocksAreStillConsistent();this._makeNestedBlockCollectionsSortable();this.renderBlockHandlesIfNeeded();if(this.isDraggable()){var a=this.$element[0].nodeName;if(a==="SPAN"){this._setupDragDropForInlineElements();
this._disableUglyInternetExplorerDragHandles()}else if(a==="DIV"){this._setupDragDropForBlockElements();this._disableUglyInternetExplorerDragHandles()}}this._hideDragHandlesIfDragDropDisabled();this._attachDropzoneHighlightEvents()},_checkThatNestedBlocksAreStillConsistent:function(){this.$element.find(".aloha-block").each(function(){var b=a.getBlock(this);b&&b.$element[0]!==this&&b._connectThisBlockToDomElement(this)})},_makeNestedBlockCollectionsSortable:function(){var b=this;this.$element.find(".aloha-block-collection").each(function(){var c=
d(this);c.closest(".aloha-block").get(0)===b.$element.get(0)&&a.createBlockLevelSortableForEditableOrBlockCollection(c)})},_disableUglyInternetExplorerDragHandles:function(){if(d.browser.msie){var a=this.$element.get(0);a.onresizestart=l.returnFalse;a.oncontrolselect=l.returnFalse;a.onmovestart=l.returnFalse}},_hideDragHandlesIfDragDropDisabled:function(){this._dd_isDragdropEnabled()||this.$element.find(".aloha-block-draghandle").each(function(){var a=d(this);g.isDragdropEnabledForElement(a)||a.removeClass("aloha-block-draghandle")})},
_attachDropzoneHighlightEvents:function(){var a=this;this.$element.delegate(".aloha-block-draghandle","mousedown",function(){var b=a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];d.each(b,function(a,b){var c=d(b);d(c).each(function(){d(this).data("block-dragdrop")&&d(this).addClass("aloha-block-dropzone")})});d(document).one("mouseup.aloha-block-dropzone",function(){var b=a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];d.each(b,function(a,b){d(b).removeClass("aloha-block-dropzone")})})})},
_setupDragDropForInlineElements:function(){var a=this,b=null,c=false,e=null,f=null,g=function(){if(b){var g=d(b);if(g.is(".aloha-block-dropInlineElementIntoEmptyBlock")){g.children().remove();g.append(e)}else if(g.is(".aloha-block-droppable-right")){g.html(g.html()+" ");g.after(e)}else{g.prev("[data-i]").length>0&&g.prev("[data-i]").html(g.prev("[data-i]").html()+" ");g.html(" "+g.html());g.before(e)}e.removeClass("ui-draggable").css({left:0,top:0});a._fixScrollPositionBugsInIE()}d(".aloha-block-dropInlineElementIntoEmptyBlock").removeClass("aloha-block-dropInlineElementIntoEmptyBlock");
f.droppable("destroy");f=null;c=true},j=[];this.$element.draggable({handle:".aloha-block-draghandle",scope:"aloha-block-inlinedragdrop",disabled:!this._dd_isDragdropEnabled(),revert:function(){return b===null||!c},revertDuration:250,stop:function(){d.browser.msie&&7===parseInt(d.browser.version,10)&&g();d.each(j,function(){a._dd_traverseDomTreeAndRemoveSpans(this)});e=null;j=[]},start:function(){c=false;j=[];d(".aloha-editable").children("p:empty").html("&nbsp;");var k={tolerance:"pointer",addClasses:false,
scope:"aloha-block-inlinedragdrop",over:function(c,f){d.inArray(this,j)===-1&&j.push(this);var g=1===d(this).contents().length&&1===d(this).children("br").length;e=f.draggable;if(d(this).is(":empty")||g||d(this).html()==="&nbsp;"){d(this).addClass("aloha-block-dropInlineElementIntoEmptyBlock");b=this}else{a._dd_traverseDomTreeAndWrapCharactersWithSpans(this);d("span[data-i]",this).droppable({tolerance:"pointer",addClasses:false,scope:"aloha-block-inlinedragdrop",over:function(){b&&d(b).removeClass("aloha-block-droppable");
b=this;d(this).addClass("aloha-block-droppable")},out:function(){d(this).removeClass("aloha-block-droppable");b===this&&(b=null)}});d.ui.ddmanager.prepareOffsets(f.draggable.data("draggable"),c)}},out:function(){d(this).removeClass("aloha-block-dropInlineElementIntoEmptyBlock")},drop:function(){d.browser.msie&&7===parseInt(d.browser.version,10)||g()}};f=d(".aloha-editable.aloha-block-dropzone").children(":not(.aloha-block)");f.droppable(k);d(".aloha-table-cell-editable").droppable(k)}})},_dd_traverseDomTreeAndWrapCharactersWithSpans:function(a){for(var b,
c=0,e=a.childNodes.length;c<e;c++){b=a.childNodes[c];if(b.nodeType===1)if(!~b.className.indexOf("aloha-block")&&b.attributes["data-i"]===void 0)this._dd_traverseDomTreeAndWrapCharactersWithSpans(b);else{if(b.attributes["data-i"])break}else if(b.nodeType===3){b=this._dd_insertSpans(b);c=c+b;e=e+b}}},_dd_splitText:function(a){for(var a=a.split(/(?=\b)/),b=[],c=false,e=0,f=a.length;e<f;e++)if(/[^\t\n\r ]/.test(a[e]))if(c){b.push(" "+a[e]);c=false}else b.push(a[e]);else c=true;c&&(b[b.length-1]=b[b.length-
1]+" ");return b},_dd_insertSpans:function(a){var b=a.nodeValue;if(!/[^\t\n\r ]/.test(b))return 0;for(var c=document.createDocumentFragment(),b=this._dd_splitText(b),e=b.length,f,g,j,k=0,l=0;l<e;l++){g=b[l];if(g.length!==0){j=Math.floor(g.length/2);f=parseInt(d.browser.version,10);if(d.browser.msie&&(7===f||8===f))j=0;if(j>0){f=document.createElement("span");f.appendChild(document.createTextNode(g.substr(0,j)));f.setAttribute("data-i",l);c.appendChild(f);k++}f=document.createElement("span");g=g.substr(j);
f.appendChild(document.createTextNode(g));f.setAttribute("data-i",l);f.setAttribute("class","aloha-block-droppable-right");c.appendChild(f);k++}}a.parentNode.replaceChild(c,a);return k-1},_dd_traverseDomTreeAndRemoveSpans:function(a){var b=[],c;c=function(a){for(var e=false,f,d,g,j=0,k=a.childNodes.length;j<k;j++){g=a.childNodes[j];if(g.nodeType===1)if(g.attributes["data-i"]!==void 0){if(!e){e=true;f="";d=void 0}if(e){f=f+g.firstChild.nodeValue;d&&b.push(d);d=g}}else{if(e){e=false;d.parentNode.replaceChild(document.createTextNode(f),
d)}~g.className.indexOf("aloha-block")||c(g)}}e&&d.parentNode.replaceChild(document.createTextNode(f),d)};c(a);for(var a=0,e=b.length;a<e;a++)b[a].parentNode.removeChild(b[a])},_dd_isDragdropEnabled:function(){return g.isDragdropEnabledForElement(this.$element.parent())},_setupDragDropForBlockElements:function(){this.$element.find(".aloha-block-draghandle").addClass("aloha-block-draghandle-blocklevel")},createEditablesIfNeeded:function(){this.$element.find(".aloha-editable").aloha()},renderBlockHandlesIfNeeded:function(){this.isDraggable()&&
this.$element.children(".aloha-block-draghandle").length===0&&this.$element.prepend('<span class="aloha-block-handle aloha-block-draghandle aloha-cleanme"></span>')},attr:function(a,b,c){var e=this,f=false;if(arguments.length>=2){if(a.substr(0,12)==="aloha-block-"){m.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")");return}this._getAttribute(a)!==b&&(f=true);this._setAttribute(a,b)}else if(typeof a===
"object")d.each(a,function(a,b){if(a.substr(0,12)==="aloha-block-")m.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")");else{e._getAttribute(a)!==b&&(f=true);e._setAttribute(a,b)}});else return typeof a==="string"?this._getAttribute(a):this._getAttributes();if(f&&!c){this._update();this.trigger("change");m.activeEditable&&m.activeEditable.smartContentChange({type:"block-change"})}return null},_setAttribute:function(a,
b){this.$element.attr("data-"+a.toLowerCase(),b)},_getAttribute:function(a){return this.$element.attr("data-"+a.toLowerCase())},_getAttributes:function(){var a={};d.each(this.$element[0].attributes,function(b,c){if(c.name.substr(0,5)==="data-")a[c.name.substr(5).toLowerCase()]=c.value});return a}}),b=j.extend({update:function(a,b){b()}}),q=j.extend({title:"Debugging",init:function(a,b){this.update(a,b)},update:function(a,b){a.css({display:"block"});var c='<table class="debug-block">';d.each(this.attr(),
function(a,b){c=c+("<tr><th>"+a+"</th><td>"+b+"</td></tr>")});c=c+"</table>";a.html(c);b()}}),n=j.extend({title:"EmptyBlock",init:function(){},activate:function(){},deactivate:function(){},renderBlockHandlesIfNeeded:function(){},_preventSelectionChangedEventHandler:function(){}});return{AbstractBlock:j,DefaultBlock:b,DebugBlock:q,EmptyBlock:n}});define("block/blockcontenthandler",["jquery","aloha/contenthandlermanager","block/blockmanager"],function(m,d,a){return d.createHandler({handleContent:function(d){"string"===
typeof d?d=m("<div>"+d+"</div>"):d instanceof m&&(d=m("<div>").append(d));0<d.find('.aloha-block[data-aloha-block-copy-only-block="true"]').length&&(d.find(".aloha-block:not([id])").remove(),d.find(".aloha-block + span:empty").remove(),d.find("div:empty").remove(),d.find("br.Apple-interchange-newline").remove(),d.find(".aloha-block").prev("br").remove(),d.find("div > br:only-child").parent().remove());d.find(".aloha-block").each(function(){var c=m(this),b={},f={};m.each(c[0].attributes,function(a,
c){if(c.nodeName!=="id")c.nodeName.match(/^data-/)?f[c.nodeName.substr(5)]=c.nodeValue:b[c.nodeName]=c.nodeValue});var d=GENTICS.Utils.guid(),j=m("<"+this.tagName+"/>").attr(b).attr("id",d).removeClass("aloha-block-active").removeClass("aloha-block").html(c.html());c.replaceWith(j);window.setTimeout(function(){a._blockify(m("#"+d),f)},50)});return d.html()}})});define("block/editor",["jquery","aloha/observable","util/class"],function(m,d,a){var d=a.extend(d,{schema:null,_constructor:function(a){this.schema=
a},render:function(){},getValue:function(){},setValue:function(){},destroy:function(){},_deactivate:function(){this.trigger("change",this.getValue());this.destroy()}}),a=d.extend({formInputElementDefinition:null,_$formInputElement:null,render:function(){var a=m('<div class="aloha-block-editor" />'),b=GENTICS.Utils.guid();a.append(this.renderLabel().attr("id",b));a.append(this.renderFormElement().attr("id",b));return a},renderLabel:function(){var a=m("<label />");a.html(this.schema.label);return a},
renderFormElement:function(){var a=this;this._$formInputElement=m(this.formInputElementDefinition);this.afterRenderFormElement(this._$formInputElement);this._$formInputElement.change(function(){a.trigger("change",a.getValue())});return this._$formInputElement},afterRenderFormElement:function(){},getValue:function(){return this._$formInputElement.val()},setValue:function(a){this._$formInputElement.val(a)},destroy:function(){this._$formInputElement.remove()}}),j=a.extend({formInputElementDefinition:'<input type="text" />'}),
c=a.extend({formInputElementDefinition:'<input type="range" />',afterRenderFormElement:function(a){this.schema.range&&(this.schema.range.min&&a.attr("min",this.schema.range.min),this.schema.range.max&&a.attr("max",this.schema.range.max),this.schema.range.step&&a.attr("step",this.schema.range.step))}}),b=a.extend({formInputElementDefinition:'<input type="url" />'}),f=a.extend({formInputElementDefinition:'<input type="email" />'}),g=a.extend({formInputElementDefinition:"<select />",afterRenderFormElement:function(a){m.each(this.schema.values,
function(){a.append(m("<option />").attr("value",this.key).html(this.label))})}}),k=a.extend({formInputElementDefinition:"<button />",afterRenderFormElement:function(a){var b=this;a.html(this.schema.buttonLabel);a.click(function(){b.schema.callback()})}});return{AbstractEditor:d,AbstractFormElementEditor:a,StringEditor:j,NumberEditor:c,UrlEditor:b,EmailEditor:f,SelectEditor:g,ButtonEditor:k}});define("block/dragbehavior",["aloha/jquery","aloha","PubSub","aloha/copypaste","block/block-utils"],function(m,
d,a,j,c){function b(a,b){return!a||!(a.is(".ui-draggable-dragging")||0<a.closest(b).length)}function f(a){this.blockObject=a;this.$element=a.$element;this.insertBeforeOrAfterMode=!1;this.setDraggable()}var g="TABLE TR HR TBODY UL OL DL B STRONG A EM I PRE CODE SUP SUB".split(" "),k=".aloha-block .aloha-block-handle .aloha-table-selectrow p span h1 h2 h3 h4 h5 h6 br".split(" "),l=[".aloha-table-selectcolumn",".aloha-ui",".ui-draggable-dragging"];a.sub("aloha.block.initialized",function(a){f.follow(a.block)});
f.follow=function(a){0<m(">.aloha-block-draghandle",a.$element).length&&new f(a)};var e=function(){var a=null,b=0,c=0;return m.browser.msie?{save:function(){b=window.scrollX||document.documentElement.scrollLeft;c=window.scrollY||document.documentElement.scrollTop;a=j.getRange()},restore:function(){if(a){var e=j.getEditableAt(a);e&&e.obj.focus();try{j.setSelectionAt(a)}catch(f){Console.warn(f)}window.scrollTo(b,c)}}}:{save:function(){},restore:function(){}}}();f.prototype.setDraggable=function(){var a=
this,b=m(">.aloha-block-draghandle",this.$element),c=this.$element.get(0);c.onselectstart=function(){window.event.cancelBubble=!0};c.ondragstart=function(a){a?"function"===typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0:window.event.cancelBubble=!0};b.on("mousedown",function(){e.save()}).on("mouseup",function(){a._getHiglightElement().hide();a.stopListenMouseOver()});this.$element.draggable({handle:">.aloha-block-draghandle",helper:"clone",cursorAt:{left:-10,top:-10},start:function(b,
c){c.helper.css("zIndex",1E5);a.listenMouseOver();b.stopImmediatePropagation()},drag:function(a){a.stopImmediatePropagation()},stop:function(b,c){a._getHiglightElement().hide();a.stopListenMouseOver();a.onDragStop();c.helper.remove();e.restore();return!0}})};f.prototype._getEditableChilds=function(){var a,b,c=[];for(a=0;a<d.editables.length;a++)b=d.editables[a],c=c.concat(m("*:not("+g.join(",")+")",b.obj).toArray());return m(c)};f.prototype.listenMouseOver=function(){var a=this;this._getEditableChilds().bind("mouseover.blockbehavior",
function(b){return a.onMouseover(this,b)})};f.prototype.stopListenMouseOver=function(){this._getEditableChilds().unbind(".blockbehavior")};f.prototype.onMouseover=function(a,b){this.disableInsertBeforeOrAfter(this.$overElement);this.$overElement=m(a);if(this._isAllowedOverElement(a))return this.highlightElement(a),b.stopImmediatePropagation(),!1;this.enableInsertBeforeOrAfter(a);return!0};f.prototype.highlightElement=function(a){"DIV"===a.nodeName&&("TD"===a.parentNode.nodeName&&a.parentNode.firstChild===
a&&a.parentNode.lastChild===a)&&(a=a.parentNode);a=m(a);this._getHiglightElement().show().css("zIndex",parseInt(a.zIndex(),10)+1).offset(a.offset()).width(a.outerWidth()).height(a.outerHeight())};f.prototype.enableInsertBeforeOrAfter=function(a){var a=m(a),c=this,e=a.offset().top,f=a.outerHeight()/2;b(a,this.$element)&&a.bind("mousemove.brIBOA",function(a){c.insertBeforeOrAfterMode=a.pageY-e>=f?"AFTER":"BEFORE";c.highlightEdge(this)})};f.prototype.disableInsertBeforeOrAfter=function(a){this.insertBeforeOrAfterMode=
!1;a&&a.unbind(".brIBOA")};f.prototype.highlightEdge=function(a){var a=m(a),b=this._getHiglightElement().show(),c;"BEFORE"===this.insertBeforeOrAfterMode?b.css("zIndex",parseInt(a.zIndex(),10)+1).offset(a.offset()).width(a.outerWidth()).height(10):(c=a.offset(),c.top=c.top+a.outerHeight()-10,b.css("zIndex",parseInt(a.zIndex(),10)+1).offset(c).width(a.outerWidth()).height(10))};f.prototype._isAllowedOverElement=function(a){if(0>m.inArray(a.nodeName,g)){var b;b=a;if(1===b.nodeType){if("inherit"===b.contentEditable)for(;"inherit"===
b.contentEditable;)b=b.parentNode;b="true"===b.contentEditable}else b=!1;if(!b)return!1;a=m(a);return 0<a.parents(l.join(",")).length||a.is(k.join(","))||a&&this.$element&&0!==a.parents("table").length&&c.isTable(this.$element)?!1:!0}return!1};f.prototype.onDragStop=function(){b(this.$overElement,this.$element)&&(this.$overElement&&!this._isAllowedOverElement(this.$overElement[0])&&this.enableInsertBeforeOrAfter(this.$overElement[0]),!1!==this.insertBeforeOrAfterMode?"BEFORE"===this.insertBeforeOrAfterMode?
this.$overElement.before(this.$element):this.$overElement.after(this.$element):this.$element.appendTo(this.$overElement));this.disableInsertBeforeOrAfter(this.$overElement)};f.prototype._getHiglightElement=function(){void 0===this.$hElm&&(this.$hElm=0===m("#aloha-highlight-element").length?m("<div>").attr("id","aloha-highlight-element").appendTo("body").css({position:"absolute",opacity:0.5,background:"blue"}).hide():m("#aloha-highlight-element"));return this.$hElm}});define("block/nls/i18n",{root:{"button.toggledragdrop.tooltip":"Toggle Drag & Drop"},
ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("block/block-plugin","aloha aloha/plugin jquery aloha/contenthandlermanager block/blockmanager block/sidebarattributeeditor block/block block/editormanager block/blockcontenthandler block/editor block/dragbehavior ui/ui ui/toggleButton i18n!block/nls/i18n i18n!aloha/nls/i18n jqueryui".split(" "),function(m,d,a,j,c,b,f,g,k,l,e,q,n,p){var o=["div","span"],d=d.create("block",{config:[],settings:{},init:function(){var a=this;if(!this.settings.rootTags)this.settings.rootTags=
o;c.registerBlockType("DebugBlock",f.DebugBlock);c.registerBlockType("DefaultBlock",f.DefaultBlock);c.registerBlockType("EmptyBlock",f.EmptyBlock);g.register("string",l.StringEditor);g.register("number",l.NumberEditor);g.register("url",l.UrlEditor);g.register("email",l.EmailEditor);g.register("select",l.SelectEditor);g.register("button",l.ButtonEditor);j.register("block",k);c.setDragDropState(a.isDragDropEnabled());c.registerEventHandlers();c.initializeBlockLevelDragDrop();m.bind("aloha-plugins-loaded",
function(){a._createBlocks();false!==a.settings.sidebarAttributeEditor&&b.init()});this.createButtons();m.bind("aloha-editable-created",function(b,c){a.setDropzones(c.obj)});m.bind("aloha-editable-activated",function(b,c){a.applyButtonConfig(c.editable)})},applyButtonConfig:function(a){if(this._isDragdropToggleEnabled(a)){this._toggleDragDropButton.show();this._toggleDragDropButton.setState(this._getDragdropState(a))}else this._toggleDragDropButton.hide()},_isDragdropToggleEnabled:function(a){a=this.getEditableConfig(a.obj);
return(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal||a[0]==="toggleDragdrop"||a.toggleDragdrop==true||a.toggleDragdrop=="true"||a.toggleDragdrop==1||a.toggleDragdrop=="1")&&this.isDragDropEnabled()},_getDragdropState:function(a){return this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal?c.getDragDropState():a.obj.data("block-dragdrop")},_toggleDragdropState:function(a){if(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal){var b=
!c.getDragDropState();c.setDragDropState(b);for(var e=0;e<m.editables.length;e++){a=m.editables[e];this._setDragDropStateForEditable(a.obj,b)}}else{b=!a.obj.data("block-dragdrop");this._setDragDropStateForEditable(a.obj,b)}},createButtons:function(){var a=this;this._toggleDragDropButton=q.adopt("toggleDragDrop",n,{tooltip:p.t("button.toggledragdrop.tooltip"),icon:"aloha-icon aloha-icon-toggledragdrop",scope:"Aloha.continuoustext",click:function(){a._toggleDragdropState(m.activeEditable)}})},setDropzones:function(a){var b=
this.getEditableConfig(a);(b=b&&b.dropzones||this.settings.dropzones)?a.data("block-dropzones",b):a.data("block-dropzones",[".aloha-editable"])},isDragDropEnabled:function(){return this.settings&&typeof this.settings.dragdrop!=="undefined"?this.settings.dragdrop===true||this.settings.dragdrop==="true"||this.settings.dragdrop===1||this.settings.dragdrop==="1":true},_createBlocks:function(){if(!this.settings.defaults)this.settings.defaults={};a.each(this.settings.defaults,function(b,c){a(b).alohaBlock(c)})},
_setDragDropStateForEditable:function(b,c){b.data("block-dragdrop",c);b.hasClass("ui-sortable")&&b.sortable("option","disabled",!c);b.find(".aloha-block.ui-draggable").each(function(){a(this).draggable("option","disabled",!c)});b.find(".aloha-block-handle").each(function(){c?a(this).addClass("aloha-block-draghandle"):a(this).removeClass("aloha-block-draghandle")})}});a.fn.alohaBlock=function(b){b=b||{};a(this).each(function(a,e){c._blockify(e,b)});return a(this)};a.fn.mahaloBlock=function(){a(this).each(function(a,
b){c._unblockify(b)})};return d});define("align/align-table-utils",["util/arrays","util/dom","jquery"],function(m,d,a){function j(a){for(;a&&!(d.isEditingHost(a)&&null==a.className.match("aloha-table-cell-editable"));){if("TD"===a.nodeName||"TH"===a.nodeName)return a;a=a.parentNode}return null}return{isInsideTable:function(a){return null!=j(a)},getSelectedTableCells:function(c,b){var f=j(c),d;a:{for(d=f;d;){if("TABLE"===d.nodeName)break a;d=d.parentNode}d=null}return 0!==a(d).find(".aloha-cell-selected").length?
m.coerce(a(d).find(".aloha-cell-selected")):m.isEmpty(b)?[f]:b}}});define("align/nls/i18n",{root:{"button.alignright.tooltip":"Align to the right","button.alignleft.tooltip":"Align to the left","button.aligncenter.tooltip":"Center","button.alignjustify.tooltip":"Justify","button.aligntop.tooltip":"Align to the top","button.alignmiddle.tooltip":"Align to the middle","button.alignbottom.tooltip":"Align to the bottom"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("align/align-plugin",
"aloha aloha/plugin align/align-table-utils util/arrays util/html util/dom ui/ui ui/toggleButton i18n!align/nls/i18n i18n!aloha/nls/i18n jquery PubSub".split(" "),function(m,d,a,j,c,b,f,g,k,l,e,q){function n(){var f=m.Selection.getRangeObject(),d=f.getRangeTree(),g=f.getCommonAncestorContainer(),j=[];e.each(d,function(){var a=this.domobj;if(this.type!=="none"&&a)if(c.isBlock(a))j.push(a);else{for(;a&&!c.isBlock(a);){if(c.isBlock(g)&&g===a.parentNode||b.isEditingHost(a.parentNode))break;a=a.parentNode}c.isBlock(a)&&
j.push(a)}});j.length===0&&(d.length>0&&c.isBlock(g)&&!b.isEditingHost(g))&&j.push(g);a.isInsideTable(g)&&(j=a.getSelectedTableCells(g,j));return j}return d.create("align",{_constructor:function(){this._super("align")},config:{alignment:["right","left","center","justify","top","middle","bottom"]},alignment:"",verticalAlignment:"",lastAlignment:"",lastVerticalAlignment:"",init:function(){this.createButtons();var a=this;m.bind("aloha-editable-activated",function(b,c){a.applyButtonConfig(c.editable.obj)});
q.sub("aloha.selection.context-change",function(b){b=b.range;m.activeEditable&&a.buttonPressed(b)})},buttonPressed:function(a){this.horizontalButtonPressed(a);this.verticalButtonPressed(a)},horizontalButtonPressed:function(a){var b=this;this.lastAlignment=this.alignment;this.alignment="";a.findMarkup(function(){if(this.style.textAlign!==""){b.alignment=this.style.textAlign;return true}b.alignment=e(this).css("text-align")},m.activeEditable.obj);if(this.alignment!=this.lastAlignment){this._alignRightButton.setState(false);
this._alignLeftButton.setState(false);this._alignCenterButton.setState(false);this._alignJustifyButton.setState(false);switch(this.alignment){case "right":this._alignRightButton.setState(true);break;case "center":this._alignCenterButton.setState(true);break;case "justify":this._alignJustifyButton.setState(true);break;default:this._alignLeftButton.setState(true);this.alignment="left"}}},verticalButtonPressed:function(a){var b=this;this.lastVerticalAlignment=this.verticalAlignment;this.verticalAlignment=
"";a.findMarkup(function(){if(this.style.verticalAlign!==""){b.verticalAlignment=this.style.verticalAlign;return true}b.verticalAlignment=e(this).css("vertical-align")},m.activeEditable.obj);if(this.verticalAlignment!=this.lastVerticalAlignment){this._alignTopButton.setState(false);this._alignMiddleButton.setState(false);this._alignBottomButton.setState(false);switch(this.verticalAlignment){case "top":this._alignTopButton.setState(true);break;case "middle":this._alignMiddleButton.setState(true);break;
case "bottom":this._alignBottomButton.setState(true);break;default:this._alignTopButton.setState(true);this.verticalAlignment="top"}}},applyButtonConfig:function(a){a=this.getEditableConfig(a);if(!a||!a.alignment||this.settings.alignment)if(a[0]&&a[0].alignment)a=a[0];else if(this.settings.alignment)a.alignment=this.settings.alignment;if(typeof a.alignment==="undefined")a=this.config;e.inArray("right",a.alignment)!=-1?this._alignRightButton.show(true):this._alignRightButton.show(false);e.inArray("left",
a.alignment)!=-1?this._alignLeftButton.show(true):this._alignLeftButton.show(false);e.inArray("center",a.alignment)!=-1?this._alignCenterButton.show(true):this._alignCenterButton.show(false);e.inArray("justify",a.alignment)!=-1?this._alignJustifyButton.show(true):this._alignJustifyButton.show(false);e.inArray("top",a.alignment)!=-1?this._alignTopButton.show(true):this._alignTopButton.show(false);e.inArray("middle",a.alignment)!=-1?this._alignMiddleButton.show(true):this._alignMiddleButton.show(false);
e.inArray("bottom",a.alignment)!=-1?this._alignBottomButton.show(true):this._alignBottomButton.show(false)},createButtons:function(){var a=this;this._alignLeftButton=f.adopt("alignLeft",g,{tooltip:k.t("button.alignleft.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-left",scope:"Aloha.continuoustext",click:function(){a.align("left")}});this._alignCenterButton=f.adopt("alignCenter",g,{tooltip:k.t("button.aligncenter.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-center",
scope:"Aloha.continuoustext",click:function(){a.align("center")}});this._alignRightButton=f.adopt("alignRight",g,{tooltip:k.t("button.alignright.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-right",scope:"Aloha.continuoustext",click:function(){a.align("right")}});this._alignJustifyButton=f.adopt("alignJustify",g,{tooltip:k.t("button.alignjustify.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-justify",scope:"Aloha.continuoustext",click:function(){a.align("justify")}});
this._alignTopButton=f.adopt("alignTop",g,{tooltip:k.t("button.aligntop.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-top",scope:"table.cell",click:function(){a.verticalAlign("top")}});this._alignMiddleButton=f.adopt("alignMiddle",g,{tooltip:k.t("button.alignmiddle.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-middle",scope:"table.cell",click:function(){a.verticalAlign("middle")}});this._alignBottomButton=f.adopt("alignBottom",g,{tooltip:k.t("button.alignbottom.tooltip"),
icon:"aloha-icon aloha-icon-align aloha-icon-align-bottom",scope:"table.cell",click:function(){a.verticalAlign("bottom")}})},verticalAlign:function(a){var b=m.Selection.getRangeObject();this.lastVerticalAlignment=this.verticalAlignment;this.verticalAlignment=a;(a=this.getSelectedCells(b))&&this.toggleAlign(a,"vertical-align");if(this.verticalAlignment!=this.lastVerticalAlignment)switch(this.lastVerticalAlignment){case "top":this._alignTopButton.setState(false);break;case "middle":this._alignMiddleButton.setState(false);
break;case "bottom":this._alignBottomButton.setState(false)}b.select()},align:function(a){this.lastAlignment=this.alignment;this.alignment=a;this.toggleAlign(n());if(this.alignment!==this.lastAlignment)switch(this.lastAlignment){case "right":this._alignRightButton.setState(false);break;case "left":this._alignLeftButton.setState(false);break;case "center":this._alignCenterButton.setState(false);break;case "justify":this._alignJustifyButton.setState(false)}},getSelectedCells:function(a){var b,a=a.findMarkup(function(){e(this).is("td,th")&&
(b=this);return e(this).is("table.aloha-table")},m.activeEditable.obj),a=e(a).find(".aloha-cell-selected");return a.length?a:b},toggleAlign:function(a,b){var b=b||"text-align",c=b==="vertical-align"?this.verticalAlignment:this.alignment,f=true;e(a).each(function(){if(e(this).css(b)!=c)return f=false});e(a).each(function(){e(this).css(b)==c&&f?e(this).css(b,""):e(this).css(b,c)})}})});define("abbr/nls/i18n",{root:{"floatingmenu.tab.abbr":"Abbreviation","button.addabbr.tooltip":"insert abbreviation",
"button.remabbr.tooltip":"remove abbreviation","button.abbr.tooltip":"format as abbreviation","newabbr.defaulttext":"Abbr"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("abbr/abbr-plugin","aloha jquery aloha/plugin ui/ui ui/toggleButton ui/button ui/scopes ui/port-helper-attribute-field i18n!abbr/nls/i18n i18n!aloha/nls/i18n".split(" "),function(m,d,a,j,c,b,f,g,k){var l=window.GENTICS;return a.create("abbr",{config:["abbr"],init:function(){this.createButtons();this.subscribeEvents();
this.bindInteractions()},createButtons:function(){var a=this;this._formatAbbrButton=j.adopt("formatAbbr",c,{tooltip:k.t("button.abbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",click:function(){a.formatAbbr()}});this._insertAbbrButton=j.adopt("insertAbbr",b,{tooltip:k.t("button.addabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",click:function(){a.insertAbbr(false)}});this.abbrField=g({width:320,name:"abbrText",scope:"Aloha.continuoustext"});
this.remAbbrButton=j.adopt("removeAbbr",b,{tooltip:k.t("button.remabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr-rem",scope:"Aloha.continuoustext",click:function(){a.removeAbbr()}})},bindInteractions:function(){var a=this;this.abbrField.addListener("blur",function(){this.getValue()==""&&a.removeAbbr()});for(var b=0;b<m.editables.length;b++)m.editables[b].obj.keydown(function(b){if(b.metaKey&&b.which==71){if(a.findAbbrMarkup()){a.abbrField.foreground();a.abbrField.focus()}else a.insertAbbr();b.stopPropagation();
b.preventDefault();return false}})},subscribeEvents:function(){var a=this,b={};m.bind("aloha-editable-activated",function(){if(m.activeEditable&&m.activeEditable.obj){var c=a.getEditableConfig(m.activeEditable.obj);b[m.activeEditable.getId()]=d.inArray("abbr",c)!==-1}});m.bind("aloha-editable-destroyed",function(){m.activeEditable&&m.activeEditable.obj&&delete b[m.activeEditable.getId()]});m.bind("aloha-selection-changed",function(c,d){if(m.activeEditable)if(b[m.activeEditable.getId()]){a._formatAbbrButton.show();
a._insertAbbrButton.show();var g=a.findAbbrMarkup(d);if(g){a._insertAbbrButton.hide();a._formatAbbrButton.setState(true);a.abbrField.show();a.remAbbrButton.show();f.enterScope(a.name,"abbr");a.abbrField.setTargetObject(g,"title");for(var g=a.abbrField,j=d.findAllMarkupByTagName("ABBR",d),k=0,l=j.length;k<l;k++)g.addAdditionalTargetObject(j[k])}else{a.abbrField.hide();a.remAbbrButton.hide();f.leaveScope(a.name,"abbr",true);a._formatAbbrButton.setState(false);a.abbrField.setTargetObject(null)}}else{a._formatAbbrButton.hide();
a._insertAbbrButton.hide()}})},findAbbrMarkup:function(a){typeof a=="undefined"&&(a=m.Selection.getRangeObject());return m.activeEditable?a.findMarkup(function(){return this.nodeName.toLowerCase()=="abbr"},m.activeEditable.obj):null},formatAbbr:function(){var a=m.Selection.getRangeObject();m.activeEditable&&(this.findAbbrMarkup(a)?this.removeAbbr():this.insertAbbr())},insertAbbr:function(a){var b=m.Selection.getRangeObject();if(!this.findAbbrMarkup(b)){b.isCollapsed()&&a!=false&&l.Utils.Dom.extendToWord(b);
if(b.isCollapsed()){var a=k.t("newabbr.defaulttext"),c=d('<abbr title="">'+a+"</abbr>");l.Utils.Dom.insertIntoDOM(c,b,d(m.activeEditable.obj));b.startContainer=b.endContainer=c.contents().get(0);b.startOffset=0;b.endOffset=a.length}else{c=d('<abbr title=""></abbr>');l.Utils.Dom.addMarkup(b,c,false)}b.select();this.abbrField.foreground();this.abbrField.focus()}},removeAbbr:function(){var a=m.Selection.getRangeObject(),b=this.findAbbrMarkup();if(b){l.Utils.Dom.removeFromDOM(b,a,true);a.select()}},makeClean:function(){},
toString:function(){return"abbr"}})});define("horizontalruler/nls/i18n",{root:{"button.addhr.tooltip":"Add a horizontal ruler"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("horizontalruler/horizontalruler-plugin","aloha jquery aloha/plugin ui/ui ui/button i18n!horizontalruler/nls/i18n i18n!aloha/nls/i18n".split(" "),function(m,d,a,j,c,b){var f=window.GENTICS;return a.create("horizontalruler",{_constructor:function(){this._super("horizontalruler")},config:["hr"],init:function(){var a=
this;this._insertHorizontalRuleButton=j.adopt("insertHorizontalRule",c,{tooltip:b.t("button.addhr.tooltip"),iconOnly:true,icon:"aloha-icon-horizontalruler",scope:"Aloha.continuoustext",click:function(){a.insertHR()}});m.bind("aloha-editable-activated",function(){if(m.activeEditable){a.cfg=a.getEditableConfig(m.activeEditable.obj);d.inArray("hr",a.cfg)!=-1?a._insertHorizontalRuleButton.show(true):a._insertHorizontalRuleButton.show(false)}})},insertHR:function(){var a=m.Selection.getRangeObject();if(m.activeEditable){var b=
d("<hr>");f.Utils.Dom.insertIntoDOM(b,a,d(m.activeEditable.obj),true);a.select()}}})});define("paste/paste-plugin","jquery aloha/core aloha/plugin aloha/command contenthandler/contenthandler-utils aloha/console aloha/copypaste aloha/contenthandlermanager util/browser".split(" "),function(m,d,a,j,c,b,f,g,k){var l,e;function q(a,b){b.css({top:o.scrollTop(),left:o.scrollLeft()-200,width:200,overflow:"hidden"}).contents().remove();var c=f.getEditableAt(a);c&&c.obj.blur();f.setSelectionAt({startContainer:b[0],
endContainer:b[0],startOffset:0,endOffset:0});b.focus()}function n(a,j,k){a.metaKey=null;a.stopPropagation();window.setTimeout(function(){if(j){var n;n=v.html();var m=/^<h\d+.*?>/i.exec(n),q;if(m!==null){m=m[0];q="</"+m.substr(1);n=n.replace(m,"").replace(q,"")}n=(m=g.get("formatless"))?m.handleContent(n):n;r&&/^&nbsp;/.test(n)&&(n=n.substring(6));(m=f.getEditableAt(j))&&m.obj.focus();f.setSelectionAt(j);window.scrollTo(l,e);m=j.startContainer;if(1===m.nodeType?"p"===m.nodeName.toLowerCase()&&c.isProppedParagraph(m.outerHTML):
3===m.nodeType&&"p"===m.parentNode.nodeName.toLowerCase()&&1===m.parentNode.childNodes.length&&s.test(window.escape(m.data))){3===j.startContainer.nodeType?j.startContainer.data="":j.startContainer.innerHTML=" ";j.startOffset=0;if(j.endContainer===j.startContainer)j.endOffset=0}d.queryCommandSupported("insertHTML")?d.execCommand("insertHTML",false,n):b.error("Common.Paste",'Command "insertHTML" not available. Enable the plugin "common/commands".');v.contents().remove();typeof k==="function"&&k()}d.activeEditable.smartContentChange(a)},
10)}function p(a){var b=a[0].ownerDocument;k.ie&&b.documentMode>=9?a.bind("beforepaste",function(a){l=window.scrollX||document.documentElement.scrollLeft;e=window.scrollY||document.documentElement.scrollTop;u=f.getRange();q(u,v);a.stopPropagation()}):a.bind("paste",function(a){l=window.scrollX||document.documentElement.scrollLeft;e=window.scrollY||document.documentElement.scrollTop;var b=f.getRange();q(b,v);if(r){a.preventDefault();document.selection.createRange().execCommand("paste")}n(a,b)})}var o=
m(window),r=!!m.browser.msie,s=/^(\s|%A0)$/,v=m('<div style="position:absolute; clip:rect(0px,0px,0px,0px); width:1px; height:1px;"></div>').contentEditable(true),u=null;e=l=0;return a.create("paste",{settings:{},init:function(){m("body").append(v);d.bind("aloha-editable-created",function(a,b){p(b.obj)});k.ie&&v[0].ownerDocument.documentMode>=9&&v.bind("paste",function(a){n(a,u,function(){u=null})})},register:function(){b.deprecated("Plugins.Paste","register() for pasteHandler is deprecated.  Use the ContentHandler Plugin instead.")}})});
define("autoparagraph/autoparagraph-plugin",["jquery","aloha/plugin","aloha/core","util/html","util/dom"],function(m,d,a,j,c){function b(b){if(b){var f=b.obj;if(f){var e=f[0],d,g=a.Selection.rangeObject,p=!1;if(c.allowsNesting(e,m("<p></p>")[0])){var o=[],r;f.contents().each(function(){j.isBlock(this)?r=null:(r||(r={objs:[]},o.push(r)),r.objs.push(this))});for(f=0;f<o.length;f++){p=o[f];d=c.getIndexInParent(p.objs[0]);var s=c.getIndexInParent(p.objs[p.objs.length-1]),v=m("<p></p>");g.startContainer===
e&&(g.startOffset>d&&g.startOffset<=s?(g.startContainer=v[0],g.startOffset-=d):g.startOffset>s&&(g.startOffset-=s-d));g.endContainer===e&&(g.endOffset>d&&g.endOffset<=s?(g.endContainer=v[0],g.endOffset-=d):g.endOffset>s&&(g.endOffset-=s-d));m(p.objs[0]).before(v);for(d=0;d<p.objs.length;d++)v[0].appendChild(p.objs[d]);p=!0}p&&b.isActive&&g.select()}}}}function f(a){return"array"===m.type(a)&&-1!==m.inArray(g,a)}var g="autoparagraph";return d.create(g,{config:[g],init:function(){var c=this;a.bind("aloha-editable-created",
function(a,e){var d=c.getEditableConfig(e.obj);f(d)&&b(e)});a.bind("aloha-smart-content-changed",function(a,e){var d=c.getEditableConfig(e.editable.obj);f(d)&&b(e.editable)})}})});define("toc/nls/i18n",{root:{"button.addtoc.tooltip":"Table of contents"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("toc/toc-plugin","aloha aloha/plugin jquery ui/ui ui/button i18n!toc/nls/i18n i18n!aloha/nls/i18n aloha/console".split(" "),function(m,d,a,j,c,b){function f(a,b){return g(a,function(a){return a===
b})}function g(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c];return null}function k(a,b){for(var c=[],e=0;e<a.length;e++)c.push(b(a[e]));return c}function l(a,b){k(a,b)}function e(){return a(k(m.editables,function(a){return document.getElementById(a.getId())}))}function q(b){var c;typeof b=="object"?c=a(b).text().replace(/[^a-zA-Z-]+/g,"-").replace(/^[^a-zA-Z]+/,""):b&&(c=b);for(var e=0;;e++){var f=c;e&&(f=f+("-"+e));var d=document.getElementById(f);if(!d||typeof b=="object"&&d===b)return f}}
var n=window.GENTICS,p=null,o=[];return d.create("toc",{minEntries:0,updateInterval:5E3,config:["toc"],init:function(){var b=this;if(typeof this.settings.minEntries==="undefined")this.settings.minEntries=this.minEntries;if(typeof this.settings.updateInterval==="undefined")this.settings.updateInterval=this.updateInterval;m.bind("aloha-editable-activated",function(){if(m.activeEditable){b.cfg=b.getEditableConfig(m.activeEditable.obj);a.inArray("toc",b.cfg)!=-1?b._insertTocButton.show(true):b._insertTocButton.show(false)}});
this.initButtons();a(document).ready(function(){b.spawn()})},initButtons:function(){var a=this;this._insertTocButton=j.adopt("insertToc",c,{tooltip:b.t("button.addtoc.tooltip"),icon:"aloha-icon aloha-icon-orderedlist",scope:"Aloha.continuoustext",click:function(){a.insertAtSelection(p)}})},register:function(a){p=a},insertAtSelection:function(b){var b=b||e(),c=q("toc"),f=a("<ol class='toc_root'></ol>").attr("id",c).attr("contentEditable","false"),d=m.Selection.getRangeObject(),g=a(document.getElementById(m.activeEditable.getId()));
n.Utils.Dom.insertIntoDOM(f,d,g);this.create(c).register(b).update().tickTock()},spawn:function(b,c){b=b||a("body");c=c||e();b.find("ol.toc_root").each(function(){var b=a(this).attr("id");if(!b){b=q("toc");a(this).attr("id",b)}that.create(b).register(c).tickTock()})},create:function(b){o.push(this);return{id:b,$containers:a(),settings:this.settings,root:function(){return a(document.getElementById(this.id))},register:function(b){var c=this;c.$containers=c.$containers.add(b);c.$containers.filter(function(){return!a(this).data("toc."+
c.id+".listening")}).each(function(){var b=a(this);b.data("toc."+c.id+".listening",true);b.bind("blur",function(){c.cleanupIds(b.get(0));c.update(b)})});return c},tickTock:function(a){var b=this;if(a=a||this.settings.updateInterval){window.setInterval(function(){b.register(e());b.update()},a);return b}},cleanupIds:function(b){var c=[];this.headings(this.$containers).each(function(){var e=a(this).attr("id");(e&&-1!=a.inArray(e,c)||b&&(a.contains(b,this)||b===this))&&a(this).attr("id",q(this));c.push(e)});
return this},update:function(){var a=this,b=this.outline(a.$containers),c=[a.root()];c[c.length-1].empty();(function x(b){var e=[];l(b,function(b){var f=a.linkSection(b[0],c,e);c.push(f);x(b.slice(1));c.pop();e.push(f)})})(b.slice(1));b=a.root().attr("data-TOC-minEntries")||this.settings.minEntries;a.root().find("li").length>=b?a.root().show():a.root().hide();return this},linkSection:function(b,c,e){var f=b.eq(0).attr("id");if(!f){f=q(b.get(0));b.eq(0).attr("id",f)}var d=this.root(),g=f?d.find('a[href $= "#'+
f+'"]'):a();g.length||(g=a("<li><a/></li>"));g.find("a").attr("href","#"+f).text(b.eq(0).text());if(e[e.length-1])e[e.length-1].after(g);else if(c[c.length-1].get(0)==d.get(0))d.append(g);else{b=a("<ol/>").append(g);c[c.length-1].append(b)}return g},outline:function(b){var c=[a()],e=[c];this.headings(b).each(function(){var b=a(this),c=this.nodeName.toLowerCase(),d=["h6","h5","h4","h3","h2","h1"],c=a.inArray(c,d),d=d.slice(c).join(","),d=[b.nextUntil(d).andSelf()],c=g(e,function(c){c=c[0];return!c.length||
g(c,function(c){return b.get(0)===c||a.contains(c,b.get(0))})});c.push(d);e.splice(0,f(e,c),d)});return c},headings:function(a){return a.find(":header").add(a.filter(":header"))}}}})});define("cite/nls/i18n",{root:{"cite.button.add.quote":"Format selection as quote","cite.button.add.blockquote":"Format selection as blockquote"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("cite/cite-plugin","aloha jquery aloha/plugin ui/ui ui/toggleButton format/format-plugin util/dom PubSub i18n!cite/nls/i18n i18n!aloha/nls/i18n".split(" "),
function(m,d,a,j,c,b,f,g,k){function l(a,b){return a.replace(/\{([a-z0-9\-\_]+)\}/ig,function(a,c){var e=b[c]||a;return typeof e==="function"?e():e})}function e(){var a=[],b=n;d.each(arguments,function(){a.push("."+(""===this?b:b+"-"+this))});return d.trim(a.join(" "))}function q(){var a=[],b=n;d.each(arguments,function(){a.push(""===this?b:b+"-"+this)});return d.trim(a.join(" "))}var n="aloha-cite",p=(new Date).getTime(),o={quote:q("quote"),blockquote:q("blockquote"),"panel-label":q("panel-label"),
"panel-field":q("panel-field"),"panel-btns":q("panel-btns"),"link-field":q("link-field"),"note-field":q("note-field"),references:q("references")};return a.create("cite",{citations:[],referenceContainer:null,settings:null,sidebar:null,config:["quote","blockquote"],init:function(){var a=this;if(m.settings&&m.settings.plugins&&m.settings.plugins.cite){var f=d(m.settings.plugins.cite.referenceContainer);if(f.length)a.referenceContainer=f;if(typeof m.settings.plugins.cite!=="undefined")a.settings=m.settings.plugins.cite;
if(typeof a.settings.sidebar==="undefined")a.settings.sidebar={};if(typeof a.settings.sidebar.open==="undefined")a.settings.sidebar.open=true;if(typeof a.settings.sidebar.open==="string"){a.settings.sidebar.open=a.settings.sidebar.open.toLowerCase();a.settings.sidebar.open=a.settings.sidebar.open==="false"||a.settings.sidebar.open==="0"?false:true}}this._quoteButton=j.adopt("quote",c,{tooltip:k.t("cite.button.add.quote"),icon:q("button","inline-button"),scope:"Aloha.continuoustext",click:function(){a.addInlineQuote()}});
b.multiSplitButton.pushItem({name:"blockquote",tooltip:k.t("cite.button.add.blockquote"),icon:q("button","block-button"),click:function(){a.addBlockQuote()}});var n=this;m.ready(function(){n.sidebar=m.Sidebar.right.show();n.sidebar.addPanel({id:q("sidebar-panel"),title:"Citation",content:"",expanded:true,activeOn:"q, blockquote",onInit:function(){var a=this,b="";n.referenceContainer&&(b='<label class="{panel-label}" for="{note-field}-textarea">Note</label> <div class="{panel-field} {note-field}" style="margin: 5px;"><textarea id="{note-field}-textarea"></textarea></div>');
this.setContent(typeof('<label class="{panel-label}" for="{link-field}-input">Link</label><div class="{panel-field} {link-field}" style="margin: 5px;"><input type="text" id="{link-field}-input" /></div>'+b)==="string"?l('<label class="{panel-label}" for="{link-field}-input">Link</label><div class="{panel-field} {link-field}" style="margin: 5px;"><input type="text" id="{link-field}-input" /></div>'+b,o):'<label class="{panel-label}" for="{link-field}-input">Link</label><div class="{panel-field} {link-field}" style="margin: 5px;"><input type="text" id="{link-field}-input" /></div>'+
b).content.find("input, textarea").bind("keypress change",function(){n.addCiteDetails(a.content.attr("data-cite-id"),a.content.find(e("link-field input")).val(),a.content.find(e("note-field textarea")).val())})},onActivate:function(b){var c=b.attr("data-cite-id");if(!c){var c=++p,f=""+q("wrapper");b.addClass(f);b.attr("data-cite-id",c)}f=a.getIndexOfCitation(c);-1===f&&(f=a.citations.push({uid:c,link:null,notes:null})-1);this.content.attr("data-cite-id",c);this.content.find(e("link-field input")).val(b.attr("cite"));
this.content.find(e("note-field textarea")).val(a.citations[f].note)}})});m.bind("aloha-editable-activated",function(c,e){var f=a.getEditableConfig(e.editable.obj);if(f){d.inArray("quote",f)!==-1?a._quoteButton.show(true):a._quoteButton.show(false);d.inArray("blockquote",f)!==-1?b.multiSplitButton.showItem("blockquote"):b.multiSplitButton.hideItem("blockquote")}});g.sub("aloha.selection.context-change",function(c){for(var e=false,f=false,g=c.range.markupEffectiveAtStart,j=g.length;j;){c=g[--j].nodeName;
c==="Q"?e=true:c==="BLOCKQUOTE"&&(f=true)}a._quoteButton.setState(e);f&&b.multiSplitButton.setActiveItem("blockquote");e=[];m.activeEditable&&(e=a.getEditableConfig(m.activeEditable.obj));d.inArray("quote",e)!==-1?a._quoteButton.show(true):a._quoteButton.show(false);d.inArray("blockquote",e)!==-1?b.multiSplitButton.showItem("blockquote"):b.multiSplitButton.hideItem("blockquote")})},getIndexOfCitation:function(a){for(var b=this.citations,c=b.length,e=0,f,d;e<c;){f=e+c>>1;d=b[f].uid;if(d==a)return f;
d>a?c=f:d<a&&(e=f+1)}return-1},addBlockQuote:function(){var a=[q("wrapper"),q(++p)].join(" "),a=d(l('<blockquote class="{classes}" data-cite-id="{uid}"></blockquote>',{uid:p,classes:a}));m.activeEditable&&d(m.activeEditable.obj[0]).click();m.Selection.changeMarkupOnSelection(a);this.referenceContainer&&this.addCiteToReferences(p);this.sidebar&&(this.settings&&this.settings.sidebar&&this.settings.sidebar.open)&&this.sidebar.open()},addInlineQuote:function(){var a=[q("wrapper"),q(++p)].join(" "),b=
d(l('<q class="{classes}" data-cite-id="{uid}"></q>',{uid:p,classes:a})),a=m.Selection.rangeObject,c;m.activeEditable&&d(m.activeEditable.obj[0]).click();if(c=a.findMarkup(function(){return this.nodeName&&b.length&&typeof this.nodeName==="string"&&typeof b[0].nodeName==="string"?this.nodeName.toLowerCase()===b[0].nodeName.toLowerCase():false},m.activeEditable.obj))a.isCollapsed()?f.removeFromDOM(c,a,true):f.removeMarkup(a,b,m.activeEditable.obj);else{a.isCollapsed()&&f.extendToWord(a);f.addMarkup(a,
b)}a.select();this.referenceContainer&&this.addCiteToReferences(p);this.sidebar&&(this.settings&&this.settings.sidebar&&this.settings.sidebar.open)&&this.sidebar.open();return false},addCiteToReferences:function(a){var b=this.getIndexOfCitation(a);if(-1!==b){var c=d(".aloha-editable-active "+e(a)),f="cite-note-"+a,a="cite-ref-"+a;c.append(l('<sup id="{ref}" contenteditable="false"><a href="#{note}">[{count}]</a></sup>',{ref:a,note:f,count:b+1}));0===this.referenceContainer.find("ol.references").length&&
this.referenceContainer.append("<h2>References</h2>").append('<ol class="references"></ol>');this.referenceContainer.find("ol.references").append(l('<li id="{note}"><a href="#{ref}">^</a> &nbsp; <span></span></li>',{ref:a,note:f}))}},addCiteDetails:function(a,b,c){this.citations[this.getIndexOfCitation(a)]={uid:a,link:b,note:c};b&&d(e(a)).attr("cite",b);this.referenceContainer&&d("li#cite-note-"+a+" span").html(l(b?'<a class="external" target="_blank" href="{url}">{url}</a>':"",{url:b})+(c?". "+c:
""))},toString:function(){return"aloha-citiation-plugin"},makeClean:function(a){a.find("q, blockquote").each(function(){d.trim(d(this).attr("class"))===""&&d(this).removeAttr("class");if(!this.referenceContainer){d(this).removeClass("aloha-cite-"+d(this).attr("data-cite-id"));d(this).attr("data-cite-id")!=null&&d(this).removeAttr("data-cite-id")}d(this).removeClass("aloha-cite-wrapper")})}})});define("flag-icons/flag-icons-plugin",[],function(){return{path:Aloha.getPluginUrl("flag-icons")}});define("numerated-headers/nls/i18n",
{root:{"headerids.label.target":"Target","headerids.button.reset":"Reset","headerids.button.set":"Set","button.numeratedHeaders.tooltip":"Toggle header numeration"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("numerated-headers/numerated-headers-plugin","aloha/core jquery aloha/plugin ui/ui ui/toggleButton i18n!numerated-headers/nls/i18n i18n!aloha/nls/i18n".split(" "),function(m,d,a,j,c,b){var f={};m.bind("aloha-editable-destroyed",function(a,b){delete f[b.getId()]});return a.create("numerated-headers",
{config:{numeratedactive:true,headingselector:"h1, h2, h3, h4, h5, h6",trailingdot:false},init:function(){var a=this;this._formatNumeratedHeadersButton=j.adopt("formatNumeratedHeaders",c,{tooltip:b.t("button.numeratedHeaders.tooltip"),icon:"aloha-icon aloha-icon-numerated-headers",scope:"Aloha.continuoustext",click:function(){a._formatNumeratedHeadersButton.getState()?a.createNumeratedHeaders():a.removeNumerations()}});m.bind("aloha-smart-content-changed",function(){a.cleanNumerations();a.showNumbers()&&
a.createNumeratedHeaders()});m.bind("aloha-format-block",function(){a.cleanNumerations();a.showNumbers()&&a.createNumeratedHeaders()});m.bind("aloha-editable-activated",function(){if(a.isNumeratingOn()){a._formatNumeratedHeadersButton.show();a.initForEditable(m.activeEditable.obj)}else a._formatNumeratedHeadersButton.hide()})},initForEditable:function(a){var b=a.attr("aloha-numerated-headers");if(b!=="true"&&b!=="false"){b=true===this.getCurrentConfig().numeratedactive?"true":"false";a.attr("aloha-numerated-headers",
b)}if(b==="true"){this.createNumeratedHeaders();this._formatNumeratedHeadersButton.setState(true)}else this._formatNumeratedHeadersButton.setState(false)},getCurrentConfig:function(){var a=this.getEditableConfig(m.activeEditable.obj);a.numeratedactive=a.numeratedactive===true||a.numeratedactive==="true"||a.numeratedactive==="1"?true:false;if(typeof a.headingselector!=="string")a.headingselector="h1, h2, h3, h4, h5, h6";a.headingselector=d.trim(a.headingselector);a.trailingdot=a.trailingdot===true||
a.trailingdot==="true"||a.trailingdot==="1"?true:false;return a},isNumeratingOn:function(){return this.getCurrentConfig().headingselector!==""},showNumbers:function(){return m.activeEditable&&this.isNumeratingOn()&&m.activeEditable.obj.attr("aloha-numerated-headers")==="true"},cleanNumerations:function(){var a=this.getBaseElement();a&&this._saveRemoveAnnotations(d(a).find("span[role=annotation]"))},_saveRemoveAnnotations:function(a){var b=this,c=m.Selection.getRangeObject(),e=false;a.each(function(){if(c.startContainer===
this||d.inArray(this,d(c.startContainer).parents())>-1){c.startContainer=b._prevNode(this);c.startOffset=0;e=true}if(c.startContainer===this.parentNode&&c.startOffset>=d(this).index()&&c.startOffset>0){c.startOffset--;e=true}if(c.endContainer===this||d.inArray(this,d(c.endContainer).parents())>-1){c.endContainer=b._prevNode(this);c.endOffset=0;e=true}if(c.endContainer===this.parentNode&&c.endOffset>=d(this).index()&&c.endOffset>0){c.endOffset--;e=true}d(this).remove()});if(e===true){c.update();c.select()}},
_prependAnnotation:function(a,b){var c=m.Selection.getRangeObject(),e=false;if(c.startContainer===b){c.startOffset++;e=true}if(c.endContainer===b){c.endOffset++;e=true}d(b).prepend('<span role="annotation">'+a+"</span>");if(e===true){c.update();c.select()}},_prevNode:function(a){var b=a.previousSibling;if(!b)return a.parentNode;for(;b.lastChild;)b=b.lastChild;return b},removeNumerations:function(){d(m.activeEditable.obj).attr("aloha-numerated-headers","false");this.cleanNumerations()},getBaseElement:function(){return typeof this.baseobjectSelector!==
"undefined"?d(this.baseobjectSelector).length>0?d(this.baseobjectSelector):null:m.activeEditable?m.activeEditable.obj:null},hasNote:function(a){return!a||d(a).length<=0?false:d(a).find("span[role=annotation]").length>0},hasContent:function(a){if(!a||0===d(a).length)return false;a=d(a).clone().find("span[role=annotation]").remove().end();return d.trim(a.text()).length>0},createNumeratedHeaders:function(){var a=this.getBaseElement();if(a){var b=this.getCurrentConfig(),a=a.find(b.headingselector);m.activeEditable.obj.attr("aloha-numerated-headers",
"true");if(!(typeof a==="undefined"||a.length===0)){var c=7,e=this;a.each(function(){if(e.hasContent(this)){var a=parseInt(this.nodeName.substr(1),10);a<c&&(c=a)}});if(!(c>6)){var f=null,j=[],p=0,o;for(o=0;o<6-c+1;o++)j[o]=0;a.each(function(){if(e.hasContent(this)){var a=parseInt(this.nodeName.substr(1),10);if(f===null&&a!==c)e._saveRemoveAnnotations(d(this).find("span[role=annotation]"));else{if(f===null)j[p]++;else if(a>f)j[++p]++;else if(a===f)j[p]++;else if(a<f){var g=a-c,m;for(m=p;m>g;m--)j[m]=
0;p=g;j[p]++}f=a;a="";if(b.trailingdot===true){a="";for(g=0;g<j.length;g++)j[g]!==0&&(a=a+(j[g]+"."))}else{a=j[0];for(g=1;g<j.length;g++)j[g]!==0&&(a=a+("."+j[g]))}a=a+"&nbsp;";e.hasNote(this)?d(this).find("span[role=annotation]").html(a):e._prependAnnotation(a,this)}}else e.hasNote(this)&&e._saveRemoveAnnotations(d(this).find("span[role=annotation]"))})}}}}})});define("formatlesspaste/formatlesshandler",["aloha","jquery","aloha/contenthandlermanager"],function(m,d,a){function j(a,b){a.find(b.join(",")).each(function(){0===
d(this).contents().length?d(this).remove():d(this).contents().unwrap()})}return a.createHandler({enabled:!1,handleContent:function(a){var b;"string"===typeof a?b=d("<div>"+a+"</div>"):a instanceof d&&(b=d("<div>").append(a));if(!b.find(".aloha-block").length)return this.enabled&&j(b,this.strippedElements),b.html()}})});define("formatlesspaste/nls/i18n",{root:{"button.formatlessPaste.tooltip":"Toggle Formatless Pasting"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("formatlesspaste/formatlesspaste-plugin",
"aloha/core aloha/plugin jquery ui/ui ui/toggleButton formatlesspaste/formatlesshandler aloha/contenthandlermanager i18n!formatlesspaste/nls/i18n util/html".split(" "),function(m,d,a,j,c,b,f,g,k){function l(a){return!a?false:typeof a==="string"?"0"!==a&&"false"!==a.toLowerCase():true}function e(a){var b={};if(typeof a.formatlessPasteOption!=="undefined")b.formatlessPasteOption=l(a.formatlessPasteOption);if(typeof a.strippedElements!=="undefined")b.strippedElements=a.strippedElements;if(typeof a.button!==
"undefined")b.button=l(a.button);return b}function q(a,e){f.register("formatless",b);b.strippedElements=e.strippedElements||k.TEXT_LEVEL_SEMANTIC_ELEMENTS;a._toggleFormatlessPasteButton=j.adopt("toggleFormatlessPaste",c,{tooltip:g.t("button.formatlessPaste.tooltip"),icon:"aloha-icon aloha-icon-formatless-paste",scope:"Aloha.continuoustext",click:function(){b.enabled=!b.enabled}});a._toggleFormatlessPasteButton.show(a.button);if(true===a.formatlessPasteOption){a._toggleFormatlessPasteButton.setState(true);
b.enabled=true}else if(false===a.formatlessPasteOption){a._toggleFormatlessPasteButton.setState(false);b.enabled=false}}function n(a,b){var c=b.getId();if(!c)return null;if(p[c])return p[c];var f=a.getEditableConfig(b.obj);if(!f)return null;p[c]=e(f);return p[c]}var p={};m.bind("aloha-editable-destroyed",function(a,b){var c=b.getId();c&&p[c]&&delete p[c]});return d.create("formatlesspaste",{formatlessPasteOption:false,button:true,init:function(){var c=this,f=e(c.settings.config||c.settings);a.extend(c,
f);q(c,f);m.bind("aloha-editable-activated",function(a,e){var f=n(c,e.editable);if(f){var d=c._toggleFormatlessPasteButton;if(true===f.formatlessPasteOption){d.setState(true);b.enabled=true}else if(false===f.formatlessPasteOption){d.setState(false);b.enabled=false}d.show(false!==f.button)}})}})});(function(){var m=!1,d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){function a(){!m&&this.init&&this.init.apply(this,arguments)}var j=this.prototype;m=!0;
var c=new this;m=!1;for(var b=0;b<arguments.length;b++){var f=arguments[b],g;for(g in f)c[g]="function"==typeof f[g]&&"function"==typeof j[g]&&d.test(f[g])?function(a,b){return function(){var c=this._super;this._super=j[a];var f=b.apply(this,arguments);this._super=c;return f}}(g,f[g]):f[g]}a.prototype=c;a.constructor=a;a.extend=arguments.callee;return a}})();"function"===typeof define&&define("Class",[],function(){return Class});define("jstree",["jquery"],function(m){(function(){if(!m||!m.jstree){var d=
!1,a=!1,j=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(a,b,c){var a=a.toLowerCase(),f=c.cssRules||c.rules,d=0;do{if(f.length&&d>f.length+5)break;if(f[d].selectorText&&f[d].selectorText.toLowerCase()==a)return!0===b?(c.removeRule&&c.removeRule(d),c.deleteRule&&c.deleteRule(d),!0):f[d]}while(f[++d]);return!1},add_css:function(a,b){if(c.jstree.css.get_css(a,!1,b))return!1;b.insertRule?b.insertRule(a+" { }",0):b.addRule(a,null,0);return c.vakata.css.get_css(a)},remove_css:function(a,b){return c.vakata.css.get_css(a,
!0,b)},add_sheet:function(a){var b=!1,f=!0;if(a.str)return a.title&&(b=c("style[id='"+a.title+"-stylesheet']")[0]),b?f=!1:(b=document.createElement("style"),b.setAttribute("type","text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?f?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.str):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.str:(b.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(b)),b.sheet||
b.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(d){}else return b=document.createElement("link"),b.rel="stylesheet",b.type="text/css",b.media="all",b.href=a.url,document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet}};var b=[],f=-1,g={},k={};c.fn.jstree=function(a){var e="string"==typeof a,f=Array.prototype.slice.call(arguments,1),d=this;if(e){if("_"==a.substring(0,1))return d;this.each(function(){var e=b[c.data(this,"jstree-instance-id")],
e=e&&c.isFunction(e[a])?e[a].apply(e,f):e;if("undefined"!==typeof e&&(0===a.indexOf("is_")||!0!==e&&!1!==e))return d=e,!1})}else this.each(function(){var e=c.data(this,"jstree-instance-id"),d=[],j=a?c.extend({},!0,a):{},k=c(this),m=!1,n=[],d=d.concat(f);k.data("jstree")&&d.push(k.data("jstree"));j=d.length?c.extend.apply(null,[!0,j].concat(d)):j;"undefined"!==typeof e&&b[e]&&b[e].destroy();e=parseInt(b.push({}),10)-1;c.data(this,"jstree-instance-id",e);j.plugins=c.isArray(j.plugins)?j.plugins:c.jstree.defaults.plugins.slice();
j.plugins.unshift("core");j.plugins=j.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");m=c.extend(!0,{},c.jstree.defaults,j);m.plugins=j.plugins;c.each(g,function(a){-1===c.inArray(a,m.plugins)?(m[a]=null,delete m[a]):n.push(a)});m.plugins=n;b[e]=new c.jstree._instance(e,c(this).addClass("jstree jstree-"+e),m);c.each(b[e]._get_settings().plugins,function(a,c){b[e].data[c]={}});c.each(b[e]._get_settings().plugins,function(a,c){g[c]&&
g[c].__init.apply(b[e])});setTimeout(function(){b[e].init()},0)});return d};c.jstree={defaults:{plugins:[]},_focused:function(){return b[f]||null},_reference:function(a){if(b[a])return b[a];var e=c(a);!e.length&&"string"===typeof a&&(e=c("#"+a));return!e.length?null:b[e.closest(".jstree").data("jstree-instance-id")]||null},_instance:function(a,b,f){this.data={core:{}};this.get_settings=function(){return c.extend(!0,{},f)};this._get_settings=function(){return f};this.get_index=function(){return a};
this.get_container=function(){return b};this.get_container_ul=function(){return b.children("ul:eq(0)")};this._set_settings=function(a){f=c.extend(!0,{},f,a)}},_fn:{},plugin:function(a,b){b=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},b);g[a]=b;c.jstree.defaults[a]=b.defaults;c.each(b._fn,function(b,e){e.plugin=a;e.old=c.jstree._fn[b];c.jstree._fn[b]=function(){var a,f=e,d=Array.prototype.slice.call(arguments);a=new c.Event("before.jstree");var g=!1;if(!(!0===this.data.core.locked&&
"unlock"!==b&&"is_locked"!==b)){do{if(f&&f.plugin&&-1!==c.inArray(f.plugin,this._get_settings().plugins))break;f=f.old}while(f);if(f){if(0===b.indexOf("_"))a=f.apply(this,d);else{a=this.get_container().triggerHandler(a,{func:b,inst:this,args:d,plugin:f.plugin});if(!1===a)return;"undefined"!==typeof a&&(d=a);a=f.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(b+".jstree",{inst:this,args:d,rslt:a,rlbk:g})},__rollback:function(){return g=this.get_rollback()},__call_old:function(a){return f.old.apply(this,
a?Array.prototype.slice.call(arguments,1):d)}}),d)}return a}}};c.jstree._fn[b].old=e.old;c.jstree._fn[b].plugin=a})},rollback:function(a){a&&(c.isArray(a)||(a=[a]),c.each(a,function(a,c){b[c.i].set_rollback(c.h,c.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var b=navigator.userAgent.toLowerCase(),e=(b.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],f=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(b)&&6==parseInt(e,10)){d=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}f+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(b)&&
7==parseInt(e,10)&&(a=!0,f+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(b)&&(/mozilla/.test(b)&&1.9>parseFloat(e,10))&&(j=!0,f+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:f,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(a){var b=c(a.target);b.is("ins")&&a.pageY-b.offset().top<this.data.core.li_height&&this.toggle_node(b)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var a;if(document.selection&&document.selection.empty)document.selection.empty();
else if(window.getSelection){a=window.getSelection();try{a.removeAllRanges(),a.collapse()}catch(b){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,b){var f=this._get_node(b.rslt.obj),d=this;-1===f&&(f=this.get_container_ul());f.length&&f.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(b,e){d.data[b]&&c.isFunction(d["_"+b+"_notify"])&&d["_"+b+"_notify"].call(d,a,e)})})},this));this._get_settings().core.load_open&&
this.get_container().bind("load_node.jstree",c.proxy(function(a,b){var f=this._get_node(b.rslt.obj),d=this;-1===f&&(f=this.get_container_ul());f.length&&f.find("li.jstree-open:not(:has(ul))").each(function(){d.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var a,e=this.get_index(),d=this._get_settings(),j=this;c.each(d.plugins,function(a,b){try{g[b].__destroy.apply(j)}catch(c){}});this.__callback();if(this.is_focused())for(a in b)if(b.hasOwnProperty(a)&&
a!=e){b[a].set_focus();break}e===f&&(f=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree-instance-id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+e).undelegate(".jstree-"+e);b[e]=null;delete b[e]},_core_notify:function(a,b){b.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var b=this,f=!0,d=[],g=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,b){if(b=="#")return true;c(b).length?d.push(b):g.push(b)}),d.length&&(this.data.core.to_load=g,c.each(d,function(a,c){if(!b._is_loaded(c)){b.load_node(c,function(){b.reload_nodes(true)},
function(){b.reload_nodes(true)});f=false}})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){b.open_node(c,false,true)});f&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){b.__callback({},b)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(b,c){a.open_node(c,!1,!0)});this.__callback({})},refresh:function(a){var b=this;
this.save_opened();a||(a=-1);(a=this._get_node(a))||(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){b.__callback({obj:a});b.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");f=this.get_index();this.__callback()}},is_focused:function(){return f==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),
f=-1);this.__callback()},_get_node:function(a){var b=c(a,this.get_container());if(b.is(".jstree")||-1==a)return-1;b=b.closest("li",this.get_container());return b.length?b:!1},_get_next:function(a,b){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):!a.length?!1:b?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(a,
b){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var c=a.parentsUntil(".jstree","li:eq(0)");return c.length?c:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):!a.length?!1:a.children("ul:eq(0)").children("li")},get_path:function(a,b){var c=[],f=this,a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){c.push(b?this.id:f.get_text(this))});c.reverse();c.push(b?a.attr("id"):this.get_text(a));return c},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,b,c){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return b&&
b.call(),!1;var f=c||d?0:this._get_settings().core.animation,g=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){g.open_node(this,!1,!0)}),f&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),f?a.children("ul").stop(!0,!0).slideDown(f,function(){this.style.display="";g.after_open(a)}):g.after_open(a),this.__callback({obj:a}),b&&b.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){g.open_node(a,b,c)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,b){var a=this._get_node(a),c=b||d?0:this._get_settings().core.animation,f=this;if(!a.length||!a.hasClass("jstree-open"))return!1;c&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");c?a.children("ul").stop(!0,!0).slideUp(c,function(){this.style.display="";f.after_close(a)}):
f.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,b,c){a=a?this._get_node(a):-1;if(!a||-1===a)a=this.get_container_ul();c?a=a.find("li.jstree-closed"):(c=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var f=this;a.each(function(){var a=this;
f._is_loaded(this)?f.open_node(this,false,!b):f.open_node(this,function(){f.open_all(a,b,c)},!b)});0===c.find("li.jstree-closed").length&&this.__callback({obj:c})},close_all:function(a,b){var c=this,a=a?this._get_node(a):this.get_container();if(!a||-1===a)a=this.get_container_ul();a.find("li.jstree-open").andSelf().each(function(){c.close_node(this,!b)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,b){this.get_container().empty().append(a);this.data=b;this.__callback()},load_node:function(a){this.__callback({obj:a})},_is_loaded:function(){return!0},create_node:function(a,b,f,d,g){var a=this._get_node(a),b="undefined"===typeof b?"last":
b,j=c("<li />"),k=this._get_settings().core,m;if(-1!==a&&!a.length)return!1;if(!g&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,f,d,!0)}),!1;this.__rollback();"string"===typeof f&&(f={data:f});f||(f={});f.attr&&j.attr(f.attr);f.metadata&&j.data(f.metadata);f.state&&j.addClass("jstree-"+f.state);f.data||(f.data=this._get_string("new_node"));c.isArray(f.data)||(m=f.data,f.data=[],f.data.push(m));c.each(f.data,function(a,b){m=c("<a />");c.isFunction(b)&&(b=b.call(this,
f));if(typeof b=="string")m.attr("href","#")[k.html_titles?"html":"text"](b);else{if(!b.attr)b.attr={};if(!b.attr.href)b.attr.href="#";m.attr(b.attr)[k.html_titles?"html":"text"](b.title);b.language&&m.addClass(b.language)}m.prepend("<ins class='jstree-icon'>&#160;</ins>");b.icon&&(b.icon.indexOf("/")===-1?m.children("ins").addClass(b.icon):m.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));j.append(m)});j.prepend("<ins class='jstree-icon'>&#160;</ins>");-1===a&&(a=this.get_container(),
"before"===b&&(b="first"),"after"===b&&(b="last"));switch(b){case "before":a.before(j);m=this._get_parent(a);break;case "after":a.after(j);m=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(j);m=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(j);m=a;break;default:a.children("ul").length||a.append("<ul />"),b||(b=0),m=a.children("ul").children("li").eq(b),m.length?m.before(j):a.children("ul").append(j),
m=a}if(-1===m||m.get(0)===this.get_container().get(0))m=-1;this.clean_node(m);this.__callback({obj:j,parent:m});d&&d.call(this,j);return j},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles,a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b){a=this._get_node(a);if(!a.length)return!1;a=a.children("a:eq(0)");
if(this._get_settings().core.html_titles){var c=a.children("INS").clone();a.html(b).prepend(c);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.__rollback();
var b=this._get_parent(a),f=c([]),d=this;a.each(function(){f=f.add(d._get_prev(this))});a=a.detach();-1!==b&&0===b.find("> ul > li").length&&b.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(b);this.__callback({obj:a,prev:f,parent:b});return a},prepare_move:function(a,b,f,d,g){var j={};j.ot=c.jstree._reference(a)||this;j.o=j.ot._get_node(a);j.r=-1===b?-1:this._get_node(b);j.p="undefined"===typeof f||!1===f?"last":f;if(g||!k.o||!(k.o[0]===j.o[0]&&k.r[0]===j.r[0]&&k.p===
j.p)){j.ot=c.jstree._reference(j.o)||this;j.rt=c.jstree._reference(j.r)||this;if(-1===j.r||!j.r)switch(j.cr=-1,j.p){case "first":case "before":case "inside":j.cp=0;break;case "after":case "last":j.cp=j.rt.get_container().find(" > ul > li").length;break;default:j.cp=j.p}else{if(!/^(before|after)$/.test(j.p)&&!this._is_loaded(j.r))return this.load_node(j.r,function(){this.prepare_move(a,b,f,d,!0)});switch(j.p){case "before":j.cp=j.r.index();j.cr=j.rt._get_parent(j.r);break;case "after":j.cp=j.r.index()+
1;j.cr=j.rt._get_parent(j.r);break;case "inside":case "first":j.cp=0;j.cr=j.r;break;case "last":j.cp=j.r.find(" > ul > li").length;j.cr=j.r;break;default:j.cp=j.p,j.cr=j.r}}j.np=-1==j.cr?j.rt.get_container():j.cr;j.op=j.ot._get_parent(j.o);j.cop=j.o.index();-1===j.op&&(j.op=j.ot?j.ot.get_container():this.get_container());!/^(before|after)$/.test(j.p)&&(j.op&&j.np&&j.op[0]===j.np[0]&&j.o.index()<j.cp)&&j.cp++;j.or=j.np.find(" > ul > li:nth-child("+(j.cp+1)+")");k=j}this.__callback(k);d&&d.call(this,
k)},check_move:function(){var a=k,b=!0,c=-1===a.r?this.get_container():a.r;if(!a||(!a.o||a.or[0]===a.o[0])||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==c.parentsUntil(".jstree","li").andSelf().index(this))return b=!1});return b},move_node:function(a,b,f,d,g,j){if(!g)return this.prepare_move(a,b,f,function(a){this.move_node(a,!1,!1,d,!0,j)});d&&(k.cy=!0);if(!j&&!this.check_move())return!1;this.__rollback();b=!1;d?(b=a.o.clone(!0),b.find("*[id]").andSelf().each(function(){if(this.id)this.id=
"copy_"+this.id})):b=a.o;a.or.length?a.or.before(b):(a.np.children("ul").length||c("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(b));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(m){}d&&(k.cy=!0,k.oc=b);this.__callback(k);return k},_get_move:function(){return k}}})})(m);(function(a){var b,f,d;a(function(){/msie/.test(navigator.userAgent.toLowerCase())?(f=
a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),d=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),b=f.width()-d.width(),f.add(d).remove()):(f=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),b=100-f.width(),f.parent().remove())});a.jstree.plugin("ui",
{__init:function(){this.data.ui.selected=a();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",a.proxy(function(b){b.preventDefault();b.currentTarget.blur();a(b.currentTarget).hasClass("jstree-loading")||this.select_node(b.currentTarget,!0,b)},this)).delegate("a","mouseenter.jstree",a.proxy(function(b){a(b.currentTarget).hasClass("jstree-loading")||this.hover_node(b.target)},this)).delegate("a",
"mouseleave.jstree",a.proxy(function(b){a(b.currentTarget).hasClass("jstree-loading")||this.dehover_node(b.target)},this)).bind("reopen.jstree",a.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",a.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",a.proxy(function(){this.reselect()},this)).bind("close_node.jstree",a.proxy(function(b,f){var e=this._get_settings().ui,d=this._get_node(f.rslt.obj),g=d&&d.length?d.children("ul").find("a.jstree-clicked"):
a(),j=this;!1!==e.selected_parent_close&&g.length&&g.each(function(){j.deselect_node(this);"select_parent"===e.selected_parent_close&&j.select_node(d)})},this)).bind("delete_node.jstree",a.proxy(function(a,b){var c=this._get_settings().ui.select_prev_on_delete,f=this._get_node(b.rslt.obj),f=f&&f.length?f.find("a.jstree-clicked"):[],d=this;f.each(function(){d.deselect_node(this)});c&&f.length&&b.rslt.prev.each(function(){if(this.parentNode)return d.select_node(this),!1})},this)).bind("move_node.jstree",
a.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(b,f){if("undefined"===typeof b||null===b)return f?this.data.ui.selected:this.data.ui.last_selected;var e=a(b,this.get_container());if(e.is(".jstree")||
-1==b)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_ui_notify:function(a,b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var b=this,f=this.data.ui.to_select,
f=a.map(a.makeArray(f),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});a.each(f,function(a,c){c&&"#"!==c&&b.select_node(c)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||
this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered;if(!a||!a.length)return!1;this.data.ui.hovered[0]===a.children("a").removeClass("jstree-hovered").parent()[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,b,c){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var f=this._get_settings().ui,d="on"==f.select_multiple_modifier||
!1!==f.select_multiple_modifier&&c&&c[f.select_multiple_modifier+"Key"],g=!1!==f.select_range_modifier&&c&&c[f.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],j=this.is_selected(a),m=!0,s=this;if(b){if(f.disable_selecting_children&&d&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;m=!1;switch(!0){case g:this.data.ui.last_selected.addClass("jstree-last-selected");
a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();-1==f.select_limit||a.length<f.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==s.data.ui.last_selected[0]&&s.deselect_node(this)}),j=!1,m=!0):m=!1;break;case j&&!d:this.deselect_all();j=!1;m=!0;break;case !j&&!d:if(-1==f.select_limit||0<f.select_limit)this.deselect_all(),m=!0;break;case j&&d:this.deselect_node(a);break;
case !j&&d:if(-1==f.select_limit||this.data.ui.selected.length+1<=f.select_limit)m=!0}}m&&!j&&(g||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),f.selected_parent_open&&a.parents(".jstree-closed").each(function(){s.open_node(this,false,true)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:c}))},_fix_scroll:function(a){var c=this.get_container()[0];if(c.scrollHeight>c.offsetHeight&&(a=this._get_node(a))&&!(-1===a||!a.length||
!a.is(":visible")))if(a=a.offset().top-this.get_container().offset().top,0>a&&(c.scrollTop=c.scrollTop+a-1),a+this.data.core.li_height+(c.scrollWidth>c.offsetWidth?b:0)>c.offsetHeight)c.scrollTop+=a-c.offsetHeight+this.data.core.li_height+1+(c.scrollWidth>c.offsetWidth?b:0)},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&
(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(b){return b?a(b).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(b){b=b?a(b).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();
b.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=a([]);this.data.ui.last_selected=!1;this.__callback({obj:b})}}});a.jstree.defaults.plugins.push("ui")})(m);(function(a){a.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",a.proxy(function(a,c){if(this._get_settings().crrm.move.open_onmove){var d=this;c.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){d.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,
move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(b,f){var b=this._get_node(b),d=this._get_settings().core.rtl,j=this._get_settings().crrm.input_width_limit,l=b.children("ins").width(),e=b.find("> a:visible > ins").width()*b.find("> a:visible > ins").length,m=this.get_text(b),n=a("<div />",{css:{position:"absolute",top:"-200px",left:d?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),p=b.css("position","relative").append(a("<input />",
{value:m,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:d?"auto":l+e+4+"px",right:d?l+e+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:a.proxy(function(){var a=b.children(".jstree-rename-input"),c=a.val();""===c&&(c=m);n.remove();a.remove();this.set_text(b,m);this.rename_node(b,c);f.call(this,b,c,m);b.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;27==
a?(this.value=m,this.blur()):13==a?this.blur():p.width(Math.min(n.text("pW"+this.value).width(),j))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(b,"");n.css({fontFamily:p.css("fontFamily")||"",fontSize:p.css("fontSize")||"",fontWeight:p.css("fontWeight")||"",fontStyle:p.css("fontStyle")||"",fontStretch:p.css("fontStretch")||"",fontVariant:p.css("fontVariant")||"",letterSpacing:p.css("letterSpacing")||"",wordSpacing:p.css("wordSpacing")||
""});p.width(Math.min(n.text("pW"+p[0].value).width(),j))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var c=this.__callback;this._show_input(a,function(a,b,d){c.call(this,{obj:a,new_name:b,old_name:d})})},create:function(b,f,d,j,l){var e=this;(b=this._get_node(b))||(b=-1);this.__rollback();return this.create_node(b,f,d,function(b){var f=this._get_parent(b),d=a(b).index();j&&j.call(this,b);f.length&&f.hasClass("jstree-closed")&&this.open_node(f,!1,!0);l?e.__callback({obj:b,
name:this.get_text(b),parent:f,position:d}):this._show_input(b,function(a,b){e.__callback({obj:a,name:b,parent:f,position:d})})})},remove:function(a){var a=this._get_node(a,!0),c=this._get_parent(a),d=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:d,parent:c})},check_move:function(){return!this.__call_old()||!this._get_settings().crrm.move.check_move.call(this,this._get_move())?!1:!0},move_node:function(a,c,d,j,l,e){var m=this._get_settings().crrm.move;
if(!l)return"undefined"===typeof d&&(d=m.default_position),"inside"===d&&!m.default_position.match(/^(before|after)$/)&&(d=m.default_position),this.__call_old(!0,a,c,d,j,!1,e);if(!0===m.always_copy||"multitree"===m.always_copy&&a.rt.get_index()!==a.ot.get_index())j=!0;this.__call_old(!0,a,c,d,j,!0,e)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;
this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var c=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:c})}}})})(m);(function(a){var b=
[];a.jstree._themes=!1;a.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",a.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",a.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(f,d){if(!f)return!1;
d||(d=a.jstree._themes+f+"/style.css");-1==a.inArray(d,b)&&(a.vakata.css.add_sheet({url:d}),b.push(d));this.data.themes.theme!=f&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=f);this.get_container().addClass("jstree-"+f);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},
hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});
a(function(){!1===a.jstree._themes&&a("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return a.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===a.jstree._themes&&(a.jstree._themes="themes/")});a.jstree.defaults.plugins.push("themes")})(m);(function(a){var b=[];a.jstree.plugin("hotkeys",{__init:function(){if("undefined"===typeof a.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";
a.each(this._get_settings().hotkeys,function(f,d){!1!==d&&-1==a.inArray(f,b)&&(a(document).bind("keydown",f,function(b){var d;var e=a.jstree._focused(),g;e&&e.data&&e.data.hotkeys&&e.data.hotkeys.enabled&&(g=e._get_settings().hotkeys[f])&&(d=g.call(e,b));return d}),b.push(f))});this.get_container().bind("lock.jstree",a.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",a.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=
!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},
"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?
this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&
(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},
"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})})(m);(function(a){a.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&
this.get_container().bind("after_close.jstree",function(a,c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,c,d){var j=this;this.load_node_json(a,function(){j.__callback({obj:j._get_node(a)});c.call(this)},d)},_is_loaded:function(b){var f=this._get_settings().json_data,b=this._get_node(b);return-1==b||!b||!f.ajax&&!f.progressive_render&&!a.isFunction(f.data)||b.is(".jstree-open, .jstree-leaf")||
0<b.children("ul").children("li").length},refresh:function(b){var b=this._get_node(b),f=this._get_settings().json_data;b&&(-1!==b&&f.progressive_unload&&(a.isFunction(f.data)||f.ajax))&&b.removeData("jstree-children");return this.__call_old()},load_node_json:function(b,f,d){var j=this.get_settings().json_data,l,e=function(){};l=function(){};if((b=this._get_node(b))&&-1!==b&&(j.progressive_render||j.progressive_unload)&&!b.is(".jstree-open, .jstree-leaf")&&0===b.children("ul").children("li").length&&
b.data("jstree-children")){if(l=this._parse_json(b.data("jstree-children"),b))b.append(l),j.progressive_unload||b.removeData("jstree-children");this.clean_node(b);f&&f.call(this)}else{if(b&&-1!==b){if(b.data("jstree-is-loading"))return;b.data("jstree-is-loading",!0)}switch(!0){case !j.data&&!j.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(j.data):j.data.call(this,b,a.proxy(function(a){if(a=this._parse_json(a,b)){if(b===-1||!b)this.get_container().children("ul").empty().append(a.children());
else{b.append(a).children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading")}this.clean_node(b);f&&f.call(this)}else{if(b===-1||!b)j.correct_state&&this.get_container().children("ul").empty();else{b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");j.correct_state&&this.correct_state(b)}d&&d.call(this)}},this));break;case !!j.data&&!j.ajax||!!j.data&&!!j.ajax&&(!b||-1===b):if(!b||-1==b)(l=this._parse_json(j.data,b))?(this.get_container().children("ul").empty().append(l.children()),
this.clean_node()):j.correct_state&&this.get_container().children("ul").empty();f&&f.call(this);break;case !j.data&&!!j.ajax||!!j.data&&!!j.ajax&&b&&-1!==b:e=function(a,c,e){var f=this.get_settings().json_data.ajax.error;f&&f.call(this,a,c,e);if(b!=-1&&b.length){b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");c==="success"&&j.correct_state&&this.correct_state(b)}else c==="success"&&j.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},
l=function(d,g,l){var m=this.get_settings().json_data.ajax.success;m&&(d=m.call(this,d,g,l)||d);if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")===""||!a.isArray(d)&&!a.isPlainObject(d))return e.call(this,l,g,"");if(d=this._parse_json(d,b)){if(b===-1||!b)this.get_container().children("ul").empty().append(d.children());else{b.append(d).children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading")}this.clean_node(b);f&&f.call(this)}else if(b===-1||!b){if(j.correct_state){this.get_container().children("ul").empty();
f&&f.call(this)}}else{b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");if(j.correct_state){this.correct_state(b);f&&f.call(this)}}},j.ajax.context=this,j.ajax.error=e,j.ajax.success=l,j.ajax.dataType||(j.ajax.dataType="json"),a.isFunction(j.ajax.url)&&(j.ajax.url=j.ajax.url.call(this,b)),a.isFunction(j.ajax.data)&&(j.ajax.data=j.ajax.data.call(this,b)),a.ajax(j.ajax)}}},_parse_json:function(b,f,d){var j=!1,l=this._get_settings(),e=l.json_data,m=l.core.html_titles,
n;if(!b)return j;e.progressive_unload&&(f&&-1!==f)&&f.data("jstree-children",j);if(a.isArray(b)){j=a();if(!b.length)return!1;l=0;for(e=b.length;l<e;l++)n=this._parse_json(b[l],f,!0),n.length&&(j=j.add(n))}else{"string"==typeof b&&(b={data:b});if(!b.data&&""!==b.data)return j;j=a("<li />");b.attr&&j.attr(b.attr);b.metadata&&j.data(b.metadata);b.state&&j.addClass("jstree-"+b.state);a.isArray(b.data)||(n=b.data,b.data=[],b.data.push(n));a.each(b.data,function(e,f){n=a("<a />");a.isFunction(f)&&(f=f.call(this,
b));if(typeof f=="string")n.attr("href","#")[m?"html":"text"](f);else{if(!f.attr)f.attr={};if(!f.attr.href)f.attr.href="#";n.attr(f.attr)[m?"html":"text"](f.title);f.language&&n.addClass(f.language)}n.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!f.icon&&b.icon)f.icon=b.icon;f.icon&&(f.icon.indexOf("/")===-1?n.children("ins").addClass(f.icon):n.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));j.append(n)});j.prepend("<ins class='jstree-icon'>&#160;</ins>");b.children&&
(e.progressive_render&&"open"!==b.state?j.addClass("jstree-closed").data("jstree-children",b.children):(e.progressive_unload&&j.data("jstree-children",b.children),a.isArray(b.children)&&b.children.length&&(n=this._parse_json(b.children,f,!0),n.length&&(f=a("<ul />"),f.append(n),j.append(f)))))}d||(d=a("<ul />"),d.append(j),j=d);return j},get_json:function(b,f,d,j){var l=[],e=this._get_settings(),m=this,n,p,o,r,s,v,b=this._get_node(b);if(!b||-1===b)b=this.get_container().find("> ul > li");f=a.isArray(f)?
f:["id","class"];!j&&this.data.types&&f.push(e.types.type_attr);d=a.isArray(d)?d:[];b.each(function(){o=a(this);n={data:[]};f.length&&(n.attr={});a.each(f,function(a,b){(p=o.attr(b))&&(p.length&&p.replace(/jstree[^ ]*/ig,"").length)&&(n.attr[b]=(" "+p).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});o.hasClass("jstree-open")&&(n.state="open");o.hasClass("jstree-closed")&&(n.state="closed");o.data()&&(n.metadata=o.data());r=o.children("a");r.each(function(){s=
a(this);if(d.length||a.inArray("languages",e.plugins)!==-1||s.children("ins").get(0).style.backgroundImage.length||s.children("ins").get(0).className&&s.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){v=false;a.inArray("languages",e.plugins)!==-1&&(a.isArray(e.languages)&&e.languages.length)&&a.each(e.languages,function(a,b){if(s.hasClass(b)){v=b;return false}});p={attr:{},title:m.get_text(s,v)};a.each(d,function(a,b){p.attr[b]=(" "+(s.attr(b)||"")).replace(/ jstree[^ ]*/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});a.inArray("languages",e.plugins)!==-1&&(a.isArray(e.languages)&&e.languages.length)&&a.each(e.languages,function(a,b){if(s.hasClass(b)){p.language=b;return true}});if(s.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)p.icon=s.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");if(s.children("ins").get(0).style.backgroundImage.length)p.icon=
s.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}else p=m.get_text(s);r.length>1?n.data.push(p):n.data=p});o=o.find("> ul > li");o.length&&(n.children=m.get_json(o,f,d,!0));l.push(n)});return l}}})})(m);(function(a){a.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(b){var f=this._get_settings().languages,d=!1,j=".jstree-"+this.get_index()+" a";if(!a.isArray(f)||0===f.length)return!1;if(-1==a.inArray(b,f))if(f[b])b=
f[b];else return!1;if(b==this.data.languages.current_language)return!0;d=a.vakata.css.get_css(j+"."+this.data.languages.current_language,!1,this.data.languages.language_css);!1!==d&&(d.style.display="none");d=a.vakata.css.get_css(j+"."+b,!1,this.data.languages.language_css);!1!==d&&(d.style.display="");this.data.languages.current_language=b;this.__callback(b);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(b,f){var d=this._get_settings().languages,j=
this._get_settings().core.strings;a.isArray(d)&&d.length&&(f=f&&-1!=a.inArray(f,d)?f:this.data.languages.current_language);return j[f]&&j[f][b]?j[f][b]:j[b]?j[b]:b},get_text:function(b,f){b=this._get_node(b)||this.data.ui.last_selected;if(!b.size())return!1;var d=this._get_settings().languages,j=this._get_settings().core.html_titles;a.isArray(d)&&d.length?(f=f&&-1!=a.inArray(f,d)?f:this.data.languages.current_language,b=b.children("a."+f)):b=b.children("a:eq(0)");if(j)return b=b.clone(),b.children("INS").remove(),
b.html();b=b.contents().filter(function(){return this.nodeType==3})[0];return b.nodeValue},set_text:function(b,f,d){b=this._get_node(b)||this.data.ui.last_selected;if(!b.size())return!1;var j=this._get_settings().languages,l=this._get_settings().core.html_titles;a.isArray(j)&&j.length?(d=d&&-1!=a.inArray(d,j)?d:this.data.languages.current_language,b=b.children("a."+d)):b=b.children("a:eq(0)");if(l)return j=b.children("INS").clone(),b.html(f).prepend(j),this.__callback({obj:b,name:f,lang:d}),!0;b=
b.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:b,name:f,lang:d});return b.nodeValue=f},_load_css:function(){var b=this._get_settings().languages,f="/* languages css */",d=".jstree-"+this.get_index()+" a",j;if(a.isArray(b)&&b.length){this.data.languages.current_language=b[0];for(j=0;j<b.length;j++)f+=d+"."+b[j]+" {",b[j]!=this.data.languages.current_language&&(f+=" display:none; "),f+=" } ";this.data.languages.language_css=a.vakata.css.add_sheet({str:f,title:"jstree-languages"})}},
create_node:function(b,f,d,j){return this.__call_old(!0,b,f,d,function(b){var e=this._get_settings().languages,f=b.children("a"),d;if(a.isArray(e)&&e.length){for(d=0;d<e.length;d++)f.is("."+e[d])||b.append(f.eq(0).clone().removeClass(e.join(" ")).addClass(e[d]));f.not("."+e.join(", .")).remove()}j&&j.call(this,b)})}}})})(m);(function(a){a.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof a.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var b=this._get_settings().cookies,
f;if(b.save_loaded&&(f=a.cookie(b.save_loaded))&&f.length)this.data.core.to_load=f.split(",");if(b.save_opened&&(f=a.cookie(b.save_opened))&&f.length)this.data.core.to_open=f.split(",");if(b.save_selected&&(f=a.cookie(b.save_selected))&&f.length&&this.data.ui)this.data.ui.to_select=f.split(",");this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",a.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",a.proxy(function(a){this._get_settings().cookies.auto_save&&
this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(b){if(!this.data.core.refreshing){var f=this._get_settings().cookies;if(b)switch(b){case "open_node":case "close_node":f.save_opened&&(this.save_opened(),a.cookie(f.save_opened,this.data.core.to_open.join(","),f.cookie_options));f.save_loaded&&(this.save_loaded(),
a.cookie(f.save_loaded,this.data.core.to_load.join(","),f.cookie_options));break;case "select_node":case "deselect_node":f.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(f.save_selected,this.data.ui.to_select.join(","),f.cookie_options))}else if(f.save_loaded&&(this.save_loaded(),a.cookie(f.save_loaded,this.data.core.to_load.join(","),f.cookie_options)),f.save_opened&&(this.save_opened(),a.cookie(f.save_opened,this.data.core.to_open.join(","),f.cookie_options)),f.save_selected&&this.data.ui)this.save_selected(),
a.cookie(f.save_selected,this.data.ui.to_select.join(","),f.cookie_options)}}}})})(m);(function(a){a.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",a.proxy(function(a,c){var d=this._get_node(c.rslt.obj),d=-1===d?this.get_container().children("ul"):d.children("ul");this.sort(d)},this)).bind("rename_node.jstree create_node.jstree create.jstree",a.proxy(function(a,c){this.sort(c.rslt.obj.parent())},this)).bind("move_node.jstree",a.proxy(function(a,c){this.sort((-1==
c.rslt.np?this.get_container():c.rslt.np).children("ul"))},this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(b){var f=this._get_settings().sort,d=this;b.append(a.makeArray(b.children("li")).sort(a.proxy(f,d)));b.find("> li > ul").each(function(){d.sort(a(this))});this.clean_node(b)}}})})(m);(function(a){var b=!1,f=!1,d=!1,j=!1,l=!1,e=!1,m=!1,n=!1,p=!1;a.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,
helper_top:10,user_data:{},drag_start:function(b,e,f){a.vakata.dnd.is_drag&&a.vakata.drag_stop({});try{b.currentTarget.unselectable="on",b.currentTarget.onselectstart=function(){return!1},b.currentTarget.style&&(b.currentTarget.style.MozUserSelect="none")}catch(d){}a.vakata.dnd.init_x=b.pageX;a.vakata.dnd.init_y=b.pageY;a.vakata.dnd.user_data=e;a.vakata.dnd.is_down=!0;a.vakata.dnd.helper=a("<div id='vakata-dragged' />").html(f);a(document).bind("mousemove",a.vakata.dnd.drag);a(document).bind("mouseup",
a.vakata.dnd.drag_stop);return!1},drag:function(b){if(a.vakata.dnd.is_down){if(!a.vakata.dnd.is_drag)if(5<Math.abs(b.pageX-a.vakata.dnd.init_x)||5<Math.abs(b.pageY-a.vakata.dnd.init_y))a.vakata.dnd.helper.appendTo("body"),a.vakata.dnd.is_drag=!0,a(document).triggerHandler("drag_start.vakata",{event:b,data:a.vakata.dnd.user_data});else return;if("mousemove"===b.type){var f=a(document),d=f.scrollTop(),f=f.scrollLeft();if(20>b.pageY-d){if(e&&"down"===m&&(clearInterval(e),e=!1),!e)m="up",e=setInterval(function(){a(document).scrollTop(a(document).scrollTop()-
a.vakata.dnd.scroll_spd)},150)}else e&&"up"===m&&(clearInterval(e),e=!1);if(20>a(window).height()-(b.pageY-d)){if(e&&"up"===m&&(clearInterval(e),e=!1),!e)m="down",e=setInterval(function(){a(document).scrollTop(a(document).scrollTop()+a.vakata.dnd.scroll_spd)},150)}else e&&"down"===m&&(clearInterval(e),e=!1);if(20>b.pageX-f){if(l&&"right"===n&&(clearInterval(l),l=!1),!l)n="left",l=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()-a.vakata.dnd.scroll_spd)},150)}else l&&"left"===
n&&(clearInterval(l),l=!1);if(20>a(window).width()-(b.pageX-f)){if(l&&"left"===n&&(clearInterval(l),l=!1),!l)n="right",l=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()+a.vakata.dnd.scroll_spd)},150)}else l&&"right"===n&&(clearInterval(l),l=!1)}a.vakata.dnd.helper.css({left:b.pageX+a.vakata.dnd.helper_left+"px",top:b.pageY+a.vakata.dnd.helper_top+"px"});a(document).triggerHandler("drag.vakata",{event:b,data:a.vakata.dnd.user_data})}},drag_stop:function(b){l&&clearInterval(l);
e&&clearInterval(e);a(document).unbind("mousemove",a.vakata.dnd.drag);a(document).unbind("mouseup",a.vakata.dnd.drag_stop);a(document).triggerHandler("drag_stop.vakata",{event:b,data:a.vakata.dnd.user_data});a.vakata.dnd.helper.remove();a.vakata.dnd.init_x=0;a.vakata.dnd.init_y=0;a.vakata.dnd.user_data={};a.vakata.dnd.is_down=!1;a.vakata.dnd.is_drag=!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});a.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",a.proxy(function(e){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.themes&&(d.attr("class","jstree-"+this.data.themes.theme),j&&j.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
e.currentTarget===e.target&&a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target))e=a.jstree._reference(e.target),e.data.dnd.foreign?(e=e._get_settings().dnd.drag_check.call(this,{o:b,r:e.get_container(),is_root:!0}),(!0===e||!0===e.inside||!0===e.before||!0===e.after)&&a.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(e.prepare_move(b,e.get_container(),"last"),e.check_move()&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))},this)).bind("mouseup.jstree",a.proxy(function(e){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var f=a.jstree._reference(e.currentTarget);f.data.dnd.foreign?(e=f._get_settings().dnd.drag_check.call(this,{o:b,r:f.get_container(),is_root:!0}),(!0===e||!0===e.inside||!0===e.before||!0===e.after)&&f._get_settings().dnd.drag_finish.call(this,
{o:b,r:f.get_container(),is_root:!0})):f.move_node(b,f.get_container(),"last",e[f._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",a.proxy(function(b){if(b.relatedTarget&&b.relatedTarget.id&&"jstree-marker-line"===b.relatedTarget.id)return!1;a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",a.proxy(function(b){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree){var e=this.get_container()[0];b.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft+=a.vakata.dnd.scroll_spd},e),100)):b.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft-=a.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);b.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop=this.scrollTop+a.vakata.dnd.scroll_spd},e),100)):b.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop=
this.scrollTop-a.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",a.proxy(function(){a.vakata.dnd.is_drag&&(a.vakata.dnd.user_data.jstree&&d&&j)&&(d.hide(),j.hide())},this)).delegate("a","mousedown.jstree",a.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",a.proxy(function(b){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_enter(b.currentTarget)},this)).delegate("a",
"mousemove.jstree",a.proxy(function(b){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&((!f||!f.length||f.children("a")[0]!==b.currentTarget)&&this.dnd_enter(b.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=a(b.target).offset()),this.data.dnd.w=(b.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",a.proxy(function(b){if(a.vakata.dnd.is_drag&&
a.vakata.dnd.user_data.jstree){if(b.relatedTarget&&b.relatedTarget.id&&"jstree-marker-line"===b.relatedTarget.id)return!1;d&&d.hide();j&&j.hide();this.data.dnd.mto=setTimeout(function(a){return function(){a.dnd_leave(b)}}(this),0)}},this)).delegate("a","mouseup.jstree",a.proxy(function(b){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_finish(b)},this));a(document).bind("drag_stop.vakata",a.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;d&&d.css({top:"-2000px"});j&&j.css({top:"-2000px"})},this)).bind("drag_start.vakata",a.proxy(function(b,e){if(e.data.jstree){var f=a(e.event.target);
f.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(f)}},this));var e=this._get_settings().dnd;e.drag_target&&a(document).delegate(e.drag_target,"mousedown.jstree-"+this.get_index(),a.proxy(function(e){b=e.target;a.vakata.dnd.drag_start(e,{jstree:!0,obj:e.target},"<ins class='jstree-icon'></ins>"+a(e.target).text());this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),j&&j.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;e.preventDefault()},this));e.drop_target&&a(document).delegate(e.drop_target,"mouseenter.jstree-"+this.get_index(),a.proxy(function(e){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:b,r:a(e.target),e:e})&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(e.drop_target,"mouseleave.jstree-"+this.get_index(),a.proxy(function(){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(e.drop_target,"mouseup.jstree-"+this.get_index(),a.proxy(function(e){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:b,r:a(e.target),e:e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:a.noop,drag_target:".jstree-draggable",drag_finish:a.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(f&&f.length){this.data.dnd.off=f.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+f.width());if(this.data.dnd.foreign){var a=this._get_settings().dnd.drag_check.call(this,{o:b,r:f});this.data.dnd.after=a.after;this.data.dnd.before=a.before;this.data.dnd.inside=
a.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(b,f,"before");this.data.dnd.before=this.check_move();this.prepare_move(b,f,"after");this.data.dnd.after=this.check_move();this._is_loaded(f)?(this.prepare_move(b,f,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var b=["before","inside","after"],e=!1,f=this._get_settings().core.rtl,b=this.data.dnd.w<
this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];a.each(b,a.proxy(function(b,f){if(this.data.dnd[f])return a.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),e=f,!1},this));!1===e&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");b=f?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(e){case "before":d.css({left:b+
"px",top:this.data.dnd.off.top-6+"px"}).show();j&&j.css({left:b+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":d.css({left:b+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();j&&j.css({left:b+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":d.css({left:b+(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();j&&j.hide();break;default:d.hide(),j&&j.hide()}return p=e}},dnd_open:function(){this.data.dnd.to2=
!1;this.open_node(f,a.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(a){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:b,r:f,p:p}):(this.dnd_prepare(),this.move_node(b,f,p,a[this._get_settings().dnd.copy_modifier+"Key"]));f=b=!1;d.hide();j&&j.hide()},dnd_enter:function(b){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var e=this._get_settings().dnd;this.data.dnd.prepared=!1;
f=this._get_node(b);e.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(a.proxy(this.dnd_prepare,this),e.check_timeout)):this.dnd_prepare();e.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),f&&(f.length&&f.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(a.proxy(this.dnd_open,this),e.open_timeout))):f&&(f.length&&f.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(b){this.data.dnd.after=!1;this.data.dnd.before=!1;
this.data.dnd.inside=!1;a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d.hide();j&&j.hide();if(f&&f[0]===b.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2))clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1},start_drag:function(e,f){b=this._get_node(e);this.data.ui&&this.is_selected(b)&&(b=this._get_node(null,!0));var l=1<b.length?this._get_string("multiple_selection"):this.get_text(b),m=this.get_container();this._get_settings().core.html_titles||
(l=l.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));a.vakata.dnd.drag_start(f,{jstree:!0,obj:b},"<ins class='jstree-icon'></ins>"+l);this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),j&&j.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=m.offset();this.data.dnd.cw=parseInt(m.width(),10);this.data.dnd.ch=parseInt(m.height(),10);this.data.dnd.active=!0}}});a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});d=a("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){d.hide();j.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");j=a("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(f&&f.length)return f.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(b){var e=a(b.relatedTarget);if((e.is(".jstree")||0===e.closest(".jstree").length)&&
f&&f.length)return f.children("a").trigger(b),d.hide(),j.hide(),b.preventDefault(),b.stopImmediatePropagation(),!1}).appendTo("body");a(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(d.show(),j&&j.show())});a(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(d.hide(),j&&j.hide())})})})(m);(function(a){a.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=a.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",a.proxy(function(a,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",a.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",a.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui){this.save_selected();this.data.cookies&&this.save_cookie("select_node")}else{a.stopImmediatePropagation();return false}},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,c){c.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(b){b=!b||-1==b?this.get_container().find("> ul > li"):this._get_node(b);if(!1!==b){var f,d=this,j,l=this._get_settings().checkbox.two_state,e=this._get_settings().checkbox.real_checkboxes,m=this._get_settings().checkbox.real_checkboxes_names;b.each(function(){j=a(this);f=j.is("li")&&(j.hasClass("jstree-checked")||e&&j.children(":checked").length)?"jstree-checked":"jstree-unchecked";j.find("li").andSelf().each(function(){var b=
a(this),j;b.children("a"+(d.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(l?"jstree-unchecked":f);e&&(b.children(":checkbox").length?b.children(":checkbox").addClass("jstree-real-checkbox"):(j=m.call(d,b),b.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+j[0]+"' name='"+j[0]+"' value='"+j[1]+"' />")),"jstree-checked"===f&&b.children(":checkbox").attr("checked",
"checked"));"jstree-checked"===f&&!l&&b.find("li").addClass("jstree-checked")})});l||(1===b.length&&b.is("li")&&this._repair_state(b),b.is("li")?b.each(function(){d._repair_state(this)}):b.find("> ul > li").each(function(){d._repair_state(this)}),b.find(".jstree-checked").parent().parent().each(function(){d._repair_state(this)}))}},change_state:function(b,f){var b=this._get_node(b),d=!1,j=this._get_settings().checkbox.real_checkboxes;if(!b||-1===b)return!1;f=!1===f||!0===f?f:b.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)f?(b.removeClass("jstree-checked").addClass("jstree-unchecked"),j&&b.children(":checkbox").removeAttr("checked")):(b.removeClass("jstree-unchecked").addClass("jstree-checked"),j&&b.children(":checkbox").attr("checked","checked"));else{if(f){d=b.find("li").andSelf();if(!d.filter(".jstree-checked, .jstree-undetermined").length)return!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");j&&d.children(":checkbox").removeAttr("checked")}else{d=
b.find("li").andSelf();if(!d.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");j&&d.children(":checkbox").attr("checked","checked");this.data.ui&&(this.data.ui.last_selected=b);this.data.checkbox.last_selected=b}b.parentsUntil(".jstree","li").each(function(){var b=a(this);if(f){if(b.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return b.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
j&&b.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked"),!1;b.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");j&&b.children(":checkbox").removeAttr("checked")}else{if(b.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return b.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),j&&b.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked"),
!1;b.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");j&&b.children(":checkbox").attr("checked","checked")}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(b);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var c=this;a.parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,c){a=!a||-1===a?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,c){a=!a||-1===a?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length){var c=this._get_settings().checkbox.real_checkboxes,d=a.find("> ul > .jstree-checked").length,j=a.find("> ul > .jstree-undetermined").length,l=a.find("> ul > li").length;0===l?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===d&&0===
j?this.change_state(a,!0):d===l?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked"))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var b=this,f=this.data.ui.to_select,f=a.map(a.makeArray(f),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:")});this.deselect_all();a.each(f,function(a,c){b.check_node(c)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});a(function(){a.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(m);(function(a){a.vakata.xslt=function(b,f,d){var e="",j;
if(document.recalc)return j=document.createElement("xml"),e=document.createElement("xml"),j.innerHTML=b,e.innerHTML=f,a("body").append(j).append(e),setTimeout(function(b,e,f){return function(){f.call(null,b.transformNode(e.XMLDocument));setTimeout(function(b,e){return function(){a(b).remove();a(e).remove()}}(b,e),200)}}(j,e,d),100),!0;"undefined"!==typeof window.DOMParser&&("undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor)&&(b=(new DOMParser).parseFromString(b,
"text/xml"),f=(new DOMParser).parseFromString(f,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){j=new XSLTProcessor;e=a.isFunction(j.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!e)return!1;b=(new DOMParser).parseFromString(b,"text/xml");f=(new DOMParser).parseFromString(f,"text/xml");a.isFunction(j.transformDocument)?(e=document.implementation.createDocument("","",null),j.transformDocument(b,
f,e,null),d.call(null,(new XMLSerializer).serializeToString(e))):(j.importStylesheet(f),e=j.transformToFragment(b,document),d.call(null,a("<div />").append(e).html()));return!0}return!1};var b={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
f=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};a.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,c){var e=this;this.load_node_xml(a,function(){e.__callback({obj:e._get_node(a)});b.call(this)},c)},_is_loaded:function(b){var f=this._get_settings().xml_data,b=this._get_node(b);return-1==b||
!b||!f.ajax&&!a.isFunction(f.data)||b.is(".jstree-open, .jstree-leaf")||0<b.children("ul").children("li").size()},load_node_xml:function(b,f,d){var e=this.get_settings().xml_data,j=function(){},m=function(){};if((b=this._get_node(b))&&-1!==b){if(b.data("jstree-is-loading"))return;b.data("jstree-is-loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(e.data):e.data.call(this,b,a.proxy(function(d){this.parse_xml(d,a.proxy(function(d){if(d){d=
d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=a(d);if(b===-1||!b)this.get_container().children("ul").empty().append(d.children());else{b.children("a.jstree-loading").removeClass("jstree-loading");b.append(d);b.removeData("jstree-is-loading")}e.clean_node&&this.clean_node(b);f&&f.call(this)}else if(b&&b!==-1){b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");if(e.correct_state){this.correct_state(b);f&&f.call(this)}}else if(e.correct_state){this.get_container().children("ul").empty();
f&&f.call(this)}}},this))},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!b||-1===b):(!b||-1==b)&&this.parse_xml(e.data,a.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=a(d);this.get_container().children("ul").empty().append(d.children());e.clean_node&&this.clean_node(b);f&&f.call(this)}}else if(e.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}},this));break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&b&&-1!==b:j=function(a,c,
f){var j=this.get_settings().xml_data.ajax.error;j&&j.call(this,a,c,f);if(b!==-1&&b.length){b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");c==="success"&&e.correct_state&&this.correct_state(b)}else c==="success"&&e.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},m=function(d,l,m){var d=m.responseText,n=this.get_settings().xml_data.ajax.success;n&&(d=n.call(this,d,l,m)||d);if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,
"")==="")return j.call(this,m,l,"");this.parse_xml(d,a.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=a(d);if(b===-1||!b)this.get_container().children("ul").empty().append(d.children());else{b.children("a.jstree-loading").removeClass("jstree-loading");b.append(d);b.removeData("jstree-is-loading")}e.clean_node&&this.clean_node(b);f&&f.call(this)}else if(b&&b!==-1){b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");if(e.correct_state){this.correct_state(b);
f&&f.call(this)}}else if(e.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}}},this))},e.ajax.context=this,e.ajax.error=j,e.ajax.success=m,e.ajax.dataType||(e.ajax.dataType="xml"),a.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,b)),a.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,b)),a.ajax(e.ajax)}},parse_xml:function(f,d){var j=this._get_settings().xml_data;a.vakata.xslt(f,b[j.xsl],d)},get_xml:function(b,d,j,e,m){var n="",p=this._get_settings(),
o=this,r,s,v,u,t;b||(b="flat");m||(m=0);d=this._get_node(d);if(!d||-1===d)d=this.get_container().find("> ul > li");j=a.isArray(j)?j:["id","class"];!m&&(this.data.types&&-1===a.inArray(p.types.type_attr,j))&&j.push(p.types.type_attr);e=a.isArray(e)?e:[];m||(p.xml_data.get_include_preamble&&(n+='<?xml version="1.0" encoding="UTF-8"?>'),n+="<root>");d.each(function(){n=n+"<item";v=a(this);a.each(j,function(a,b){var c=v.attr(b);if(!p.xml_data.get_skip_empty||typeof c!=="undefined")n=n+(" "+b+'="'+f((" "+
(c||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});v.hasClass("jstree-open")&&(n=n+' state="open"');v.hasClass("jstree-closed")&&(n=n+' state="closed"');b==="flat"&&(n=n+(' parent_id="'+f(m)+'"'));n=n+">";n=n+"<content>";u=v.children("a");u.each(function(){r=a(this);t=false;n=n+"<name";a.inArray("languages",p.plugins)!==-1&&a.each(p.languages,function(a,b){if(r.hasClass(b)){n=n+(' lang="'+f(b)+'"');t=b;return false}});e.length&&a.each(e,function(a,
b){var c=r.attr(b);if(!p.xml_data.get_skip_empty||typeof c!=="undefined")n=n+(" "+b+'="'+f((" "+c||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});r.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(n=n+(' icon="'+f(r.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'));r.children("ins").get(0).style.backgroundImage.length&&(n=n+(' icon="'+
f(r.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"'));n=n+">";n=n+("<![CDATA["+o.get_text(r,t)+"]]\>");n=n+"</name>"});n=n+"</content>";s=v[0].id||true;v=v.find("> ul > li");s=v.length?o.get_xml(b,v,j,e,s):"";b=="nest"&&(n=n+s);n=n+"</item>";b=="flat"&&(n=n+s)});m||(n+="</root>");return n}}})})(m);(function(a){a.expr[":"].jstree_contains=function(a,c,d){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(d[3].toLowerCase())};
a.expr[":"].jstree_title_contains=function(a,c,d){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(d[3].toLowerCase())};a.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=a();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(b,f){a(this).children("ul").find("li").hide().removeClass("jstree-last");f.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){a(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",
function(){a(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(b,f){if(""===a.trim(b))this.clear_search();else{var d=this.get_settings().search,j=this,l=function(){};this.data.search.str=b;if(!f&&!1!==d.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;l=function(a,b,c){var f=this.get_settings().search.ajax.success;
f&&(a=f.call(this,a,b,c)||a);this.data.search.to_open=a;this._search_open()};d.ajax.context=this;d.ajax.error=function(){};d.ajax.success=l;a.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,b));a.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,b));d.ajax.data||(d.ajax.data={search_string:b});if(!d.ajax.dataType||/^json/.exec(d.ajax.dataType))d.ajax.dataType="json";a.ajax(d.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+
(this.data.languages?"."+this.get_lang():"")+":"+d.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){j.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:b})}},clear_search:function(){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=a()},_search_open:function(){var b=this,f=!0,d=[],j=[];this.data.search.to_open.length&&
(a.each(this.data.search.to_open,function(b,e){if("#"==e)return!0;a(e).length&&a(e).is(".jstree-closed")?d.push(e):j.push(e)}),d.length&&(this.data.search.to_open=j,a.each(d,function(a,c){b.open_node(c,function(){b._search_open(!0)})}),f=!1));f&&this.search(this.data.search.str,!0)}}})})(m);(function(a){a.vakata.context={hide_on_mouseleave:!1,cnt:a("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(b,f,d,j,l,e,m){a.vakata.context.rtl=!!m;if(b=a.vakata.context.parse(b)){a.vakata.context.vis=
!0;a.vakata.context.tgt=f;a.vakata.context.par=e||f||null;a.vakata.context.data=l||null;a.vakata.context.cnt.html(b).css({visibility:"hidden",display:"block",left:0,top:0});if(a.vakata.context.hide_on_mouseleave)a.vakata.context.cnt.one("mouseleave",function(){a.vakata.context.hide()});l=a.vakata.context.cnt.height();e=a.vakata.context.cnt.width();d+e>a(document).width()&&(d=a(document).width()-(e+5),a.vakata.context.cnt.find("li > ul").addClass("right"));j+l>a(document).height()&&(j-=l+f[0].offsetHeight,
a.vakata.context.cnt.find("li > ul").addClass("bottom"));a.vakata.context.cnt.css({left:d,top:j}).find("li:has(ul)").bind("mouseenter",function(){var b=a(document).width(),e=a(document).height(),f=a(this).children("ul").show();b!==a(document).width()&&f.toggleClass("right");e!==a(document).height()&&f.toggleClass("bottom")}).bind("mouseleave",function(){a(this).children("ul").hide()}).end().css({visibility:"visible"}).show();a(document).triggerHandler("context_show.vakata")}},hide:function(){a.vakata.context.vis=
!1;a.vakata.context.cnt.attr("class","").css({visibility:"hidden"});a(document).triggerHandler("context_hide.vakata")},parse:function(b,f){if(!b)return!1;var d="",j=!1,l=!0;f||(a.vakata.context.func={});d+="<ul>";a.each(b,function(b,f){if(!f)return true;a.vakata.context.func[b]=f.action;!l&&f.separator_before&&(d=d+"<li class='vakata-separator vakata-separator-before'></li>");l=false;d=d+("<li class='"+(f._class||"")+(f._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ");f.icon&&f.icon.indexOf("/")===
-1&&(d=d+(" class='"+f.icon+"' "));f.icon&&f.icon.indexOf("/")!==-1&&(d=d+(" style='background:url("+f.icon+") center center no-repeat;' "));d=d+(">&#160;</ins><a href='#' rel='"+b+"'>");f.submenu&&(d=d+("<span style='float:"+(a.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"));d=d+(f.label+"</a>");if(f.submenu)(j=a.vakata.context.parse(f.submenu,true))&&(d=d+j);d=d+"</li>";if(f.separator_after){d=d+"<li class='vakata-separator vakata-separator-after'></li>";l=true}});d=d.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,
"");d+="</ul>";a(document).triggerHandler("context_parse.vakata");return 10<d.length?d:!1},exec:function(b){return a.isFunction(a.vakata.context.func[b])?(a.vakata.context.func[b].call(a.vakata.context.data,a.vakata.context.par),!0):!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});a.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(){!a(this).parent().hasClass("jstree-contextmenu-disabled")&&a.vakata.context.exec(a(this).attr("rel"))?a.vakata.context.hide():a(this).blur()}).delegate("a","mouseover",function(){a.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");a(document).bind("mousedown",function(b){a.vakata.context.vis&&!a.contains(a.vakata.context.cnt[0],b.target)&&
a.vakata.context.hide()});"undefined"!==typeof a.hotkeys&&a(document).bind("keydown","up",function(b){if(a.vakata.context.vis){var f=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();f.length||(f=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());f.addClass("vakata-hover");b.stopImmediatePropagation();b.preventDefault()}}).bind("keydown","down",function(b){if(a.vakata.context.vis){var f=
a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();f.length||(f=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());f.addClass("vakata-hover");b.stopImmediatePropagation();b.preventDefault()}}).bind("keydown","right",function(b){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
b.stopImmediatePropagation(),b.preventDefault())}).bind("keydown","left",function(b){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),b.stopImmediatePropagation(),b.preventDefault())}).bind("keydown","esc",function(b){a.vakata.context.hide();b.preventDefault()}).bind("keydown","space",function(b){a.vakata.context.cnt.find(".vakata-hover").last().children("a").click();b.preventDefault()})});a.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",a.proxy(function(b){b.preventDefault();a(b.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(b.currentTarget,b.pageX,b.pageY)},this)).delegate("a","click.jstree",a.proxy(function(){this.data.contextmenu&&a.vakata.context.hide()},this)).bind("destroy.jstree",a.proxy(function(){this.data.contextmenu&&a.vakata.context.hide()},this));a(document).bind("context_hide.vakata",a.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(b,f,d){var b=this._get_node(b),j=this.get_settings().contextmenu,l=b.children("a:visible:eq(0)"),e=!1,e=!1;j.select_node&&(this.data.ui&&!this.is_selected(b))&&(this.deselect_all(),this.select_node(b,
!0));if(j.show_at_node||"undefined"===typeof f||"undefined"===typeof d)e=l.offset(),f=e.left,d=e.top+this.data.core.li_height;e=b.data("jstree")&&b.data("jstree").contextmenu?b.data("jstree").contextmenu:j.items;a.isFunction(e)&&(e=e.call(this,b));this.data.contextmenu=!0;a.vakata.context.show(e,l,f,d,this,b,this._get_settings().core.rtl);this.data.themes&&a.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(m);(function(a){a.jstree.plugin("types",{__init:function(){var b=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",a.proxy(function(){var f=b.type_attr,d="",j=this;a.each(b.types,function(b,e){a.each(e,function(a){/^(max_depth|max_children|icon|valid_children)$/.test(a)||j.data.types.attach_to.push(a)});if(!e.icon)return!0;if(e.icon.image||e.icon.position)d="default"==b?d+(".jstree-"+j.get_index()+" a > .jstree-icon { "):d+(".jstree-"+j.get_index()+" li["+f+'="'+b+'"] > a > .jstree-icon { '),e.icon.image&&(d+=" background-image:url("+
e.icon.image+"); "),d=e.icon.position?d+(" background-position:"+e.icon.position+"; "):d+" background-position:0 0; ",d+="} "});""!==d&&a.vakata.css.add_sheet({str:d,title:"jstree-types"})},this)).bind("before.jstree",a.proxy(function(b,d){var j,l;if((j=(j=this._get_settings().types.use_data?this._get_node(d.args[0]):!1)&&-1!==j&&j.length?j.data("jstree"):!1)&&j.types&&!1===j.types[d.func])return b.stopImmediatePropagation(),!1;if(-1!==a.inArray(d.func,this.data.types.attach_to)&&d.args[0]&&(d.args[0].tagName||
d.args[0].jquery))if(j=this._get_settings().types.types,l=this._get_type(d.args[0]),(j[l]&&"undefined"!==typeof j[l][d.func]||j["default"]&&"undefined"!==typeof j["default"][d.func])&&!1===this._check(d.func,d.args[0]))return b.stopImmediatePropagation(),!1},this));d&&this.get_container().bind("load_node.jstree set_type.jstree",a.proxy(function(b,d){var j=d&&d.rslt&&d.rslt.obj&&-1!==d.rslt.obj?this._get_node(d.rslt.obj).parent():this.get_container_ul(),l=!1,e=this._get_settings().types;a.each(e.types,
function(a,b){if(b.icon&&(b.icon.image||b.icon.position))l="default"===a?j.find("li > a > .jstree-icon"):j.find("li["+e.type_attr+"='"+a+"'] > a > .jstree-icon"),b.icon.image&&l.css("backgroundImage","url("+b.icon.image+")"),l.css("backgroundPosition",b.icon.position||"0 0")})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,c){c.type&&this._get_settings().types.use_data&&
this.set_type(c.type,a)},_get_type:function(a){a=this._get_node(a);return!a||!a.length?!1:a.attr(this._get_settings().types.type_attr)||"default"},set_type:function(a,c){var c=this._get_node(c),d=!c.length||!a?!1:c.attr(this._get_settings().types.type_attr,a);d&&this.__callback({obj:c,type:a});return d},_check:function(b,f,d){var f=this._get_node(f),j=!1,l=this._get_type(f),e=0,m=this,n=this._get_settings().types,p=!1;if(-1===f)if(n[b])j=n[b];else return;else{if(!1===l)return;(p=n.use_data?f.data("jstree"):
!1)&&p.types&&"undefined"!==typeof p.types[b]?j=p.types[b]:n.types[l]&&"undefined"!==typeof n.types[l][b]?j=n.types[l][b]:n.types["default"]&&"undefined"!==typeof n.types["default"][b]&&(j=n.types["default"][b])}a.isFunction(j)&&(j=j.call(this,f));"max_depth"===b&&(-1!==f&&!1!==d&&-2!==n.max_depth&&0!==j)&&f.children("a:eq(0)").parentsUntil(".jstree","li").each(function(a){if(-1!==n.max_depth&&0>=n.max_depth-(a+1))return j=0,!1;e=0===a?j:m._check(b,this,!1);if(-1!==e&&0>=e-(a+1))return j=0,!1;if(0<=
e&&(e-(a+1)<j||0>j))j=e-(a+1);if(0<=n.max_depth&&(n.max_depth-(a+1)<j||0>j))j=n.max_depth-(a+1)});return j},check_move:function(){if(!this.__call_old())return!1;var b=this._get_move(),f=b.rt._get_settings().types,d=b.rt._check("max_children",b.cr),j=b.rt._check("max_depth",b.cr),l=b.rt._check("valid_children",b.cr),e=0,m=1;if("none"===l||a.isArray(l)&&(b.ot&&b.ot._get_type)&&(b.o.each(function(){if(-1===a.inArray(b.ot._get_type(this),l))return m=!1}),!1===m)||-2!==f.max_children&&-1!==d&&(e=-1===
b.cr?this.get_container().find("> ul > li").not(b.o).length:b.cr.find("> ul > li").not(b.o).length,e+b.o.length>d))return!1;if(-2!==f.max_depth&&-1!==j){m=0;if(0===j)return!1;if("undefined"===typeof b.o.d){for(f=b.o;0<f.length;)f=f.find("> ul > li"),m++;b.o.d=m}if(0>j-b.o.d)return!1}return!0},create_node:function(b,f,d,j,l,e){if(!e&&(l||this._is_loaded(b))){var m="string"==typeof f&&f.match(/^before|after$/i)&&-1!==b?this._get_parent(b):this._get_node(b),n=this._get_settings().types,p=this._check("max_children",
m),o=this._check("max_depth",m),r=this._check("valid_children",m);"string"===typeof d&&(d={data:d});d||(d={});if("none"===r)return!1;if(a.isArray(r))if(!d.attr||!d.attr[n.type_attr])d.attr||(d.attr={}),d.attr[n.type_attr]=r[0];else if(-1===a.inArray(d.attr[n.type_attr],r))return!1;if(-2!==n.max_children&&-1!==p&&(m=-1===m?this.get_container().find("> ul > li").length:m.find("> ul > li").length,m+1>p)||-2!==n.max_depth&&-1!==o&&0>o-1)return!1}return this.__call_old(!0,b,f,d,j,l,e)}}})})(m);(function(a){a.jstree.plugin("html_data",
{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,c,d){var j=this;this.load_node_html(a,function(){j.__callback({obj:j._get_node(a)});c.call(this)},d)},_is_loaded:function(b){b=this._get_node(b);return-1==b||!b||!this._get_settings().html_data.ajax&&
!a.isFunction(this._get_settings().html_data.data)||b.is(".jstree-open, .jstree-leaf")||0<b.children("ul").children("li").size()},load_node_html:function(b,f,d){var j,l=this.get_settings().html_data,e=function(){};j=function(){};if((b=this._get_node(b))&&-1!==b){if(b.data("jstree-is-loading"))return;b.data("jstree-is-loading",!0)}switch(!0){case a.isFunction(l.data):l.data.call(this,b,a.proxy(function(e){if(e&&e!==""&&e.toString&&e.toString().replace(/^[\s\n]+$/,"")!==""){e=a(e);e.is("ul")||(e=a("<ul />").append(e));
if(b==-1||!b)this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");else{b.children("a.jstree-loading").removeClass("jstree-loading");b.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");b.removeData("jstree-is-loading")}this.clean_node(b);f&&f.call(this)}else if(b&&b!==-1){b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");if(l.correct_state){this.correct_state(b);f&&f.call(this)}}else if(l.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}},
this));break;case !l.data&&!l.ajax:if(!b||-1==b)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();f&&f.call(this);break;case !!l.data&&!l.ajax||!!l.data&&!!l.ajax&&(!b||-1===b):if(!b||
-1==b)j=a(l.data),j.is("ul")||(j=a("<ul />").append(j)),this.get_container().children("ul").empty().append(j.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();f&&f.call(this);break;case !l.data&&!!l.ajax||!!l.data&&!!l.ajax&&b&&-1!==b:b=this._get_node(b),e=function(a,
c,e){var f=this.get_settings().html_data.ajax.error;f&&f.call(this,a,c,e);if(b!=-1&&b.length){b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");c==="success"&&l.correct_state&&this.correct_state(b)}else c==="success"&&l.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},j=function(d,j,g){var k=this.get_settings().html_data.ajax.success;k&&(d=k.call(this,d,j,g)||d);if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")===
"")return e.call(this,g,j,"");if(d){d=a(d);d.is("ul")||(d=a("<ul />").append(d));if(b==-1||!b)this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");else{b.children("a.jstree-loading").removeClass("jstree-loading");b.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");b.removeData("jstree-is-loading")}this.clean_node(b);f&&f.call(this)}else if(b&&b!==-1){b.children("a.jstree-loading").removeClass("jstree-loading");b.removeData("jstree-is-loading");if(l.correct_state){this.correct_state(b);f&&f.call(this)}}else if(l.correct_state){this.get_container().children("ul").empty();
f&&f.call(this)}},l.ajax.context=this,l.ajax.error=e,l.ajax.success=j,l.ajax.dataType||(l.ajax.dataType="html"),a.isFunction(l.ajax.url)&&(l.ajax.url=l.ajax.url.call(this,b)),a.isFunction(l.ajax.data)&&(l.ajax.data=l.ajax.data.call(this,b)),a.ajax(l.ajax)}}}});a.jstree.defaults.plugins.push("html_data")})(m);(function(a){a.jstree.plugin("themeroller",{__init:function(){var b=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a",
"mouseenter.jstree",function(f){a(f.currentTarget).hasClass("jstree-loading")||a(this).addClass(b.item_h)}).delegate("a","mouseleave.jstree",function(){a(this).removeClass(b.item_h)}).bind("init.jstree",a.proxy(function(a,b){b.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(b.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",
a.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("delete_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.parent)},this)).bind("correct_state.jstree",a.proxy(function(a,c){c.rslt.obj.children("ins.jstree-icon").removeClass(b.opened+" "+b.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,
"").indexOf("ui-icon-")}).removeClass(b.item_open+" "+b.item_clsd).addClass(b.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",a.proxy(function(a,c){c.rslt.obj.children("a").addClass(b.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",a.proxy(function(){this.get_container().find("a."+b.item_a).removeClass(b.item_a).end().find("a.jstree-clicked").addClass(b.item_a)},this)).bind("dehover_node.jstree",a.proxy(function(a,c){c.rslt.obj.children("a").removeClass(b.item_h)},this)).bind("hover_node.jstree",
a.proxy(function(a,c){this.get_container().find("a."+b.item_h).not(c.rslt.obj).removeClass(b.item_h);c.rslt.obj.children("a").addClass(b.item_h)},this)).bind("move_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.o);this._themeroller(b.rslt.op)},this))},__destroy:function(){var b=this._get_settings().themeroller,f=["ui-icon"];a.each(b,function(a,b){b=b.split(" ");b.length&&(f=f.concat(b))});this.get_container().removeClass("ui-widget-content").find("."+f.join(", .")).removeClass(f.join(" "))},
_fn:{_themeroller:function(a){var c=this._get_settings().themeroller,a=!a||-1==a?this.get_container_ul():this._get_node(a).parent();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+
c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+
" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",
item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});a(function(){a.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(m);(function(a){a.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",a.proxy(function(b,f){var d=[],j=!0,l;"move_node"==f.func&&(!0===f.args[4]&&f.args[0].o&&f.args[0].o.length)&&(f.args[0].o.children("a").each(function(){d.push(a(this).text().replace(/^\s+/g,
""))}),j=this._check_unique(d,f.args[0].np.find("> ul > li").not(f.args[0].o),"move_node"));if("create_node"==f.func&&(f.args[4]||this._is_loaded(f.args[0]))){j=this._get_node(f.args[0]);if(f.args[1]&&("before"===f.args[1]||"after"===f.args[1]))if(j=this._get_parent(f.args[0]),!j||-1===j)j=this.get_container();"string"===typeof f.args[2]?d.push(f.args[2]):!f.args[2]||!f.args[2].data?d.push(this._get_string("new_node")):d.push(f.args[2].data);j=this._check_unique(d,j.find("> ul > li"),"create_node")}if("rename_node"==
f.func){d.push(f.args[1]);l=this._get_node(f.args[0]);j=this._get_parent(l);if(!j||-1===j)j=this.get_container();j=this._check_unique(d,j.find("> ul > li").not(l),"rename_node")}if(!j)return b.stopPropagation(),!1},this))},defaults:{error_callback:a.noop},_fn:{_check_unique:function(b,f,d){var j=[];f.children("a").each(function(){j.push(a(this).text().replace(/^\s+/g,""))});if(!j.length||!b.length)return!0;j=j.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,
"").split(",");return j.length+b.length!=j.concat(b).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,b,f,d),!1):!0},check_move:function(){if(!this.__call_old())return!1;var b=this._get_move(),f=[];return b.o&&b.o.length?(b.o.children("a").each(function(){f.push(a(this).text().replace(/^\s+/g,""))}),this._check_unique(f,b.np.find("> ul > li").not(b.o),"check_move")):!0}}})})(m);
(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,c){this._prepare_wholerow_span(c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
c.proxy(function(a,c){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,f){f.rslt.obj.each(function(){f.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c(this).offset().top-f.inst.get_container().offset().top+f.inst.get_container()[0].scrollTop)/f.inst.data.core.li_height,10)+")").children("a").attr("class",f.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var f=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&f.closest("li").is(".jstree-open, .jstree-closed")||(f.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(a||d)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=!a||-1==a?this.get_container().find("> ul > li"):this._get_node(a);!1!==a&&a.each(function(){c(this).find("li").andSelf().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var b=this.get_container().children("ul").eq(0),
c=b.html();b.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==c&&(this.data.wholerow.last_html=c,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(b.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(b.parent()[0].scrollWidth).css("top",-1*(b.height()+(a?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var b=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
j&&(b+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(a||d)b+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:b,title:"jstree"})})})(m);(function(a){var b=
["getChildren","getChildrenCount","getAttr","getName","getProps"],f=function(b,f){var d=!0,b=b||{},f=[].concat(f);a.each(f,function(e,f){if(!a.isFunction(b[f]))return d=!1});return d};a.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(d,j){var l=-1==d?this._get_settings().model.object:d.data("jstree_model");if(!f(l,b))return j.call(null,!1);this._get_settings().model.async?l.getChildren(a.proxy(function(a){this.model_done(a,
j)},this)):this.model_done(l.getChildren(),j)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(b,f){var d=[],e=this._get_settings(),j=this;a.isArray(b)||(b=[b]);a.each(b,function(b,f){var g=f.getProps()||{};g.attr=f.getAttr()||{};f.getChildrenCount()&&(g.state="closed");g.data=f.getName();a.isArray(g.data)||(g.data=[g.data]);j.data.types&&a.isFunction(f.getType)&&(g.attr[e.types.type_attr]=f.getType());g.attr.id&&e.model.id_prefix&&(g.attr.id=e.model.id_prefix+g.attr.id);g.metadata||
(g.metadata={});g.metadata.jstree_model=f;d.push(g)});f.call(null,d)}}})})(m)}})()});define("jqgrid",["jquery","jqgrid-locale-"+(window&&window.__DEPS__&&window.__DEPS__.lang||"en"),"jqueryui"],function(m){(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{htmlDecode:function(a){return a&&("&nbsp;"==a||"&#160;"==a||1==a.length&&160==a.charCodeAt(0))?"":!a?a:(""+a).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')},htmlEncode:function(a){return!a?a:(""+a).replace(/&/g,
"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")},format:function(d){var c=a.makeArray(arguments).slice(1);void 0===d&&(d="");return d.replace(/\{(\d+)\}/g,function(a,f){return c[f]})},getCellIndex:function(d){d=a(d);if(d.is("tr"))return-1;d=(!d.is("td")&&!d.is("th")?d.closest("td,th"):d)[0];return a.browser.msie?a.inArray(d,d.parentNode.cells):d.cellIndex},stripHtml:function(a){var a=a+"",c=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(c,""))&&"&nbsp;"!==a&&"&#160;"!==
a?a.replace(/\"/g,"'"):"":a},stringToDoc:function(a){var c;if("string"!==typeof a)return a;try{c=(new DOMParser).parseFromString(a,"text/xml")}catch(b){c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)}return c&&c.documentElement&&"parsererror"!=c.documentElement.tagName?c:null},parse:function(d){"while(1);"==d.substr(0,9)&&(d=d.substr(9));"/*"==d.substr(0,2)&&(d=d.substr(2,d.length-4));d||(d="{}");return!0===a.jgrid.useJSON&&"object"===typeof ia&&"function"===typeof ia.parse?ia.parse(d):
eval("("+d+")")},parseDate:function(d,c){var b={m:1,d:1,y:1970,h:0,i:0,s:0},f,g,k;f=/[\\\/:_;.,\t\T\s-]/;if(c&&null!==c&&void 0!==c){var c=a.trim(c),c=c.split(f),d=d.split(f),l=a.jgrid.formatter.date.monthNames,e=a.jgrid.formatter.date.AmPm,m=function(a,b){0===a?12==b&&(b=0):12!=b&&(b+=12);return b};f=0;for(g=d.length;f<g;f++)"M"==d[f]&&(k=a.inArray(c[f],l),-1!==k&&12>k&&(c[f]=k+1)),"F"==d[f]&&(k=a.inArray(c[f],l),-1!==k&&11<k&&(c[f]=k+1-12)),"a"==d[f]&&(k=a.inArray(c[f],e),-1!==k&&(2>k&&c[f]==e[k])&&
(c[f]=k,b.h=m(c[f],b.h))),"A"==d[f]&&(k=a.inArray(c[f],e),-1!==k&&(1<k&&c[f]==e[k])&&(c[f]=k-2,b.h=m(c[f],b.h))),void 0!==c[f]&&(b[d[f].toLowerCase()]=parseInt(c[f],10));b.m=parseInt(b.m,10)-1;f=b.y;70<=f&&99>=f?b.y=1900+b.y:0<=f&&69>=f&&(b.y=2E3+b.y)}return new Date(b.y,b.m,b.d,b.h,b.i,b.s,0)},jqID:function(a){return(a+"").replace(/([\.\:\[\]])/g,"\\$1")},guid:1,uidPref:"jqg",randId:function(d){return(d?d:a.jgrid.uidPref)+a.jgrid.guid++},getAccessor:function(a,c){var b,f,d=[],k;if("function"===typeof c)return c(a);
b=a[c];if(void 0===b)try{if("string"===typeof c&&(d=c.split(".")),k=d.length)for(b=a;b&&k--;)f=d.shift(),b=b[f]}catch(l){}return b},ajaxOptions:{},from:function(d){return new function(c,b){"string"==typeof c&&(c=a.data(c));var f=this,d=c,j=!0,l=!1,e=b,m=/[\$,%]/g,n=null,p=null,o=!1,r="",s=[],v=!0;if("object"==typeof c&&c.push)0<c.length&&(v="object"!=typeof c[0]?!1:!0);else throw"data provides is not an array";this._hasData=function(){return null===d?!1:0===d.length?!1:!0};this._getStr=function(a){var b=
[];l&&b.push("jQuery.trim(");b.push("String("+a+")");l&&b.push(")");j||b.push(".toLowerCase()");return b.join("")};this._strComp=function(a){return"string"==typeof a?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(b){l&&(b=a.trim(b));j||(b=b.toLowerCase());return b.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"')};this._funcLoop=function(b){var c=[];a.each(d,function(a,e){c.push(b(e))});return c};this._append=function(a){e=null===
e?"":e+(""===r?" && ":r);o&&(e+="!");e+="("+a+")";o=!1;r=""};this._setCommand=function(a,b){n=a;p=b};this._resetNegate=function(){o=!1};this._repeatCommand=function(a,b){return null===n?f:null!==a&&null!==b?n(a,b):null===p||!v?n(a):n(p,a)};this._equals=function(a,b){return 0===f._compare(a,b,1)};this._compare=function(a,b,c){void 0===c&&(c=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b)return 0;if(null===a&&null!==b)return 1;if(null!==a&&null===b)return-1;!j&&("number"!==typeof a&&
"number"!==typeof b)&&(a=(""+a).toLowerCase(),b=(""+b).toLowerCase());return a<b?-c:a>b?c:0};this._performSort=function(){0!==s.length&&(d=f._doSort(d,0))};this._doSort=function(a,b){var c=s[b].by,e=s[b].dir,d=s[b].type,j=s[b].datefmt;if(b==s.length-1)return f._getOrder(a,c,e,d,j);b++;c=f._getGroup(a,c,e,d,j);e=[];for(d=0;d<c.length;d++)for(var j=f._doSort(c[d].items,b),g=0;g<j.length;g++)e.push(j[g]);return e};this._getOrder=function(b,c,e,d,j){var g=[],k=[],l="a"==e?1:-1,n,o;void 0===d&&(d="text");
o="float"==d||"number"==d||"currency"==d||"numeric"==d?function(a){a=parseFloat((""+a).replace(m,""));return isNaN(a)?0:a}:"int"==d||"integer"==d?function(a){return a?parseFloat((""+a).replace(m,"")):0}:"date"==d||"datetime"==d?function(b){return a.jgrid.parseDate(j,b).getTime()}:a.isFunction(d)?d:function(b){b||(b="");return a.trim((""+b).toUpperCase())};a.each(b,function(b,e){n=""!==c?a.jgrid.getAccessor(e,c):e;void 0===n&&(n="");n=o(n,e);k.push({vSort:n,index:b})});k.sort(function(a,b){a=a.vSort;
b=b.vSort;return f._compare(a,b,l)});for(var d=0,p=b.length;d<p;)e=k[d].index,g.push(b[e]),d++;return g};this._getGroup=function(b,c,e,d,j){var g=[],k=null,l=null,m;a.each(f._getOrder(b,c,e,d,j),function(b,e){m=a.jgrid.getAccessor(e,c);void 0===m&&(m="");f._equals(l,m)||(l=m,null!==k&&g.push(k),k=f._group(c,m));k.items.push(e)});null!==k&&g.push(k);return g};this.ignoreCase=function(){j=!1;return f};this.useCase=function(){j=!0;return f};this.trim=function(){l=!0;return f};this.noTrim=function(){l=
!1;return f};this.execute=function(){var b=e,c=[];if(null===b)return f;a.each(d,function(){eval(b)&&c.push(this)});d=c;return f};this.data=function(){return d};this.select=function(b){f._performSort();if(!f._hasData())return[];f.execute();if(a.isFunction(b)){var c=[];a.each(d,function(a,e){c.push(b(e))});return c}return d};this.hasMatch=function(){if(!f._hasData())return!1;f.execute();return 0<d.length};this.andNot=function(a,b,c){o=!o;return f.and(a,b,c)};this.orNot=function(a,b,c){o=!o;return f.or(a,
b,c)};this.not=function(a,b,c){return f.andNot(a,b,c)};this.and=function(a,b,c){r=" && ";return void 0===a?f:f._repeatCommand(a,b,c)};this.or=function(a,b,c){r=" || ";return void 0===a?f:f._repeatCommand(a,b,c)};this.isNot=function(a){o=!o;return f.is(a)};this.is=function(a){f._append("this."+a);f._resetNegate();return f};this._compareValues=function(b,c,e,d,j){var g;g=v?"jQuery.jgrid.getAccessor(this,'"+c+"')":"this";void 0===e&&(e=null);var k=e,l=void 0===j.stype?"text":j.stype;if(null!==e)switch(l){case "int":case "integer":k=
isNaN(Number(k))||""===k?"0":k;g="parseInt("+g+",10)";k="parseInt("+k+",10)";break;case "float":case "number":case "numeric":k=(""+k).replace(m,"");k=isNaN(Number(k))||""===k?"0":k;g="parseFloat("+g+")";k="parseFloat("+k+")";break;case "date":case "datetime":k=""+a.jgrid.parseDate(j.newfmt||"Y-m-d",k).getTime();g='jQuery.jgrid.parseDate("'+j.srcfmt+'",'+g+").getTime()";break;default:g=f._getStr(g),k=f._getStr('"'+f._toStr(k)+'"')}f._append(g+" "+d+" "+k);f._setCommand(b,c);f._resetNegate();return f};
this.equals=function(a,b,c){return f._compareValues(f.equals,a,b,"==",c)};this.notEquals=function(a,b,c){return f._compareValues(f.equals,a,b,"!==",c)};this.isNull=function(a,b,c){return f._compareValues(f.equals,a,null,"===",c)};this.greater=function(a,b,c){return f._compareValues(f.greater,a,b,">",c)};this.less=function(a,b,c){return f._compareValues(f.less,a,b,"<",c)};this.greaterOrEquals=function(a,b,c){return f._compareValues(f.greaterOrEquals,a,b,">=",c)};this.lessOrEquals=function(a,b,c){return f._compareValues(f.lessOrEquals,
a,b,"<=",c)};this.startsWith=function(b,c){var e=void 0===c||null===c?b:c,e=l?a.trim(e.toString()).length:e.toString().length;v?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".substr(0,"+e+") == "+f._getStr('"'+f._toStr(c)+'"')):(e=l?a.trim(c.toString()).length:c.toString().length,f._append(f._getStr("this")+".substr(0,"+e+") == "+f._getStr('"'+f._toStr(b)+'"')));f._setCommand(f.startsWith,b);f._resetNegate();return f};this.endsWith=function(b,c){var e=void 0===c||null===c?b:c,e=l?
a.trim(e.toString()).length:e.toString().length;v?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".substr("+f._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".length-"+e+","+e+') == "'+f._toStr(c)+'"'):f._append(f._getStr("this")+".substr("+f._getStr("this")+'.length-"'+f._toStr(b)+'".length,"'+f._toStr(b)+'".length) == "'+f._toStr(b)+'"');f._setCommand(f.endsWith,b);f._resetNegate();return f};this.contains=function(a,b){v?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+a+
"')")+'.indexOf("'+f._toStr(b)+'",0) > -1'):f._append(f._getStr("this")+'.indexOf("'+f._toStr(a)+'",0) > -1');f._setCommand(f.contains,a);f._resetNegate();return f};this.groupBy=function(a,b,c,e){return!f._hasData()?null:f._getGroup(d,a,b,c,e)};this.orderBy=function(b,c,e,d){c=void 0===c||null===c?"a":a.trim(c.toString().toLowerCase());if(null===e||void 0===e)e="text";if(null===d||void 0===d)d="Y-m-d";if("desc"==c||"descending"==c)c="d";if("asc"==c||"ascending"==c)c="a";s.push({by:b,dir:c,type:e,
datefmt:d});return f};return f}(d,null)},extend:function(d){a.extend(a.fn.jqGrid,d);this.no_legacy_api||a.fn.extend(d)}});a.fn.jqGrid=function(d){if("string"==typeof d){var c=a.jgrid.getAccessor(a.fn.jqGrid,d);if(!c)throw"jqGrid - No such method: "+d;var b=a.makeArray(arguments).slice(1);return c.apply(this,b)}return this.each(function(){if(!this.grid){var b=a.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],
sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,
editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,
deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],
groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],groupDataSorted:!1,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{}},a.jgrid.defaults,d||{}),c={headers:[],cols:[],footers:[],dragStart:function(c,e,d){this.resizing={idx:c,startX:e.clientX,sOL:d[0]};this.hDiv.style.cursor="col-resize";this.curGbox=a("#rs_m"+a.jgrid.jqID(b.id),"#gbox_"+a.jgrid.jqID(b.id));this.curGbox.css({display:"block",
left:d[0],top:d[1],height:d[2]});a.isFunction(b.resizeStart)&&b.resizeStart.call(this,e,c);document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var c=a.clientX-this.resizing.startX,a=this.headers[this.resizing.idx],e="ltr"===b.direction?a.width+c:a.width-c,d;33<e&&(this.curGbox.css({left:this.resizing.sOL+c}),!0===b.forceFit?(d=this.headers[this.resizing.idx+b.nv],c="ltr"===b.direction?d.width-c:d.width+c,33<c&&(a.newWidth=e,d.newWidth=c)):(this.newWidth="ltr"===b.direction?
b.tblwidth+c:b.tblwidth-c,a.newWidth=e))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var c=this.resizing.idx,e=this.headers[c].newWidth||this.headers[c].width,e=parseInt(e,10);this.resizing=!1;a("#rs_m"+a.jgrid.jqID(b.id)).css("display","none");b.colModel[c].width=e;this.headers[c].width=e;this.headers[c].el.style.width=e+"px";this.cols[c].style.width=e+"px";0<this.footers.length&&(this.footers[c].style.width=e+"px");!0===b.forceFit?(e=this.headers[c+b.nv].newWidth||this.headers[c+
b.nv].width,this.headers[c+b.nv].width=e,this.headers[c+b.nv].el.style.width=e+"px",this.cols[c+b.nv].style.width=e+"px",0<this.footers.length&&(this.footers[c+b.nv].style.width=e+"px"),b.colModel[c+b.nv].width=e):(b.tblwidth=this.newWidth||b.tblwidth,a("table:first",this.bDiv).css("width",b.tblwidth+"px"),a("table:first",this.hDiv).css("width",b.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,b.footerrow&&(a("table:first",this.sDiv).css("width",b.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));
a.isFunction(b.resizeStop)&&b.resizeStop.call(this,e,c)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){c.timer&&clearTimeout(c.timer);c.timer=null;var e=a(c.bDiv).height();if(e){var d=a("table:first",c.bDiv),j,k;if(d[0].rows.length)try{k=(j=d[0].rows[1])?a(j).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(l){k=c.prevRowHeight}if(k){c.prevRowHeight=k;var m=b.rowNum;j=c.scrollTop=c.bDiv.scrollTop;var n=Math.round(d.position().top)-j,q=n+d.height();k*=
m;var o,p,r;if(q<e&&0>=n&&(void 0===b.lastpage||parseInt((q+j+k-1)/k,10)<=b.lastpage))p=parseInt((e-q+k-1)/k,10),0<=q||2>p||!0===b.scroll?(o=Math.round((q+j)/k)+1,n=-1):n=1;0<n&&(o=parseInt(j/k,10)+1,p=parseInt((j+e)/k,10)+2-o,r=!0);if(p&&!(b.lastpage&&o>b.lastpage||1==b.lastpage||o===b.page&&o===b.lastpage))c.hDiv.loading?c.timer=setTimeout(c.populateVisible,b.scrollTimeout):(b.page=o,r&&(c.selectionPreserver(d[0]),c.emptyRows(c.bDiv,!1,!1)),c.populate(p))}}},scrollGrid:function(a){if(b.scroll){var e=
c.bDiv.scrollTop;void 0===c.scrollTop&&(c.scrollTop=0);e!=c.scrollTop&&(c.scrollTop=e,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,b.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft;b.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft);a.stopPropagation()},selectionPreserver:function(b){var c=b.p,e=c.selrow,f=c.selarrrow?a.makeArray(c.selarrrow):null,d=b.grid.bDiv.scrollLeft,j=c.gridComplete;c.gridComplete=function(){c.selrow=null;c.selarrrow=[];if(c.multiselect&&f&&0<f.length)for(var g=
0;g<f.length;g++)f[g]!=e&&a(b).jqGrid("setSelection",f[g],!1);e&&a(b).jqGrid("setSelection",e,!1);b.grid.bDiv.scrollLeft=d;c.gridComplete=j;c.gridComplete&&j()}}};if("TABLE"!=this.tagName)alert("Element is not a table");else{a(this).empty().attr("tabindex","1");this.p=b;var k,l,e;if(0===this.p.colNames.length)for(k=0;k<this.p.colModel.length;k++)this.p.colNames[k]=this.p.colModel[k].label||this.p.colModel[k].name;if(this.p.colNames.length!==this.p.colModel.length)alert(a.jgrid.errors.model);else{var m=
a("<div class='ui-jqgrid-view'></div>"),n,p=a.browser.msie?!0:!1,o=a.browser.webkit||a.browser.safari?!0:!1;e=this;e.p.direction=a.trim(e.p.direction.toLowerCase());-1==a.inArray(e.p.direction,["ltr","rtl"])&&(e.p.direction="ltr");l=e.p.direction;a(m).insertBefore(this);a(this).appendTo(m).removeClass("scroll");var r=a("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");a(r).insertBefore(m).attr({id:"gbox_"+this.id,dir:l});a(m).appendTo(r).attr("id","gview_"+this.id);n=p&&6>=
a.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"";a("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(n).insertBefore(m);a("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(m);a(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+
this.id});var s=function(a,b){a=parseInt(a,10);return isNaN(a)?b?b:0:a},v=function(b,f,d,j,k,l){var m=e.p.colModel[b],n=m.align,q='style="',o=m.classes,p=m.name,r=[];n&&(q=q+("text-align:"+n+";"));m.hidden===true&&(q=q+"display:none;");if(f===0)q=q+("width: "+c.headers[b].width+"px;");else if(m.cellattr&&a.isFunction(m.cellattr)&&(b=m.cellattr.call(e,k,d,j,m,l))&&typeof b==="string"){b=b.replace(/style/i,"style").replace(/title/i,"title");if(b.indexOf("title")>-1)m.title=false;b.indexOf("class")>
-1&&(o=void 0);r=b.split("style");if(r.length===2){r[1]=a.trim(r[1].replace("=",""));if(r[1].indexOf("'")===0||r[1].indexOf('"')===0)r[1]=r[1].substring(1);q=q+r[1].replace(/'/gi,'"')}else q=q+'"'}if(!r.length){r[0]="";q=q+'"'}q=q+((o!==void 0?' class="'+o+'"':"")+(m.title&&d?' title="'+a.jgrid.stripHtml(d)+'"':""));q=q+(' aria-describedby="'+e.p.id+"_"+p+'"');return q+r[0]},u=function(b){return b===void 0||b===null||b===""?"&#160;":e.p.autoencode?a.jgrid.htmlEncode(b):b+""},t=function(b,c,f,d,j){var g=
e.p.colModel[f];if(typeof g.formatter!=="undefined"){b={rowId:b,colModel:g,gid:e.p.id,pos:f};c=a.isFunction(g.formatter)?g.formatter.call(e,c,b,d,j):a.fmatter?a.fn.fmatter(g.formatter,c,b,d,j):u(c)}else c=u(c);return c},x=function(a,b,c,e,f){b=t(a,b,c,f,"add");return'<td role="gridcell" '+v(c,e,b,f,a,true)+">"+b+"</td>"},y=function(a,b,c){var f='<input role="checkbox" type="checkbox" id="jqg_'+e.p.id+"_"+a+'" class="cbox" name="jqg_'+e.p.id+"_"+a+'"/>';return'<td role="gridcell" '+v(b,c,"",null,a,
true)+">"+f+"</td>"},z=function(a,b,c,e){c=(parseInt(c,10)-1)*parseInt(e,10)+1+b;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+v(a,b,c,null,b,true)+">"+c+"</td>"},A=function(a){var b,c=[],f=0,d;for(d=0;d<e.p.colModel.length;d++){b=e.p.colModel[d];if(b.name!=="cb"&&b.name!=="subgrid"&&b.name!=="rn"){c[f]=a=="local"?b.name:a=="xml"?b.xmlmap||b.name:b.jsonmap||b.name;f++}}return c},F=function(b){var c=e.p.remapColumns;if(!c||!c.length)c=a.map(e.p.colModel,function(a,b){return b});
b&&(c=a.map(c,function(a){return a<b?null:a-b}));return c},H=function(b,c,f){if(e.p.deepempty)a("#"+a.jgrid.jqID(e.p.id)+" tbody:first tr:gt(0)").remove();else{var d=a("#"+a.jgrid.jqID(e.p.id)+" tbody:first tr:first")[0];a("#"+a.jgrid.jqID(e.p.id)+" tbody:first").empty().append(d)}if(c&&e.p.scroll){a(">div:first",b).css({height:"auto"}).children("div:first").css({height:0,display:"none"});b.scrollTop=0}if(f===true&&e.p.treeGrid===true){e.p.data=[];e.p._index={}}},D=function(){var b=e.p.data.length,
c,f,d;c=e.p.rownumbers===true?1:0;f=e.p.multiselect===true?1:0;d=e.p.subGrid===true?1:0;c=e.p.keyIndex===false||e.p.loadonce===true?e.p.localReader.id:e.p.colModel[e.p.keyIndex+f+d+c].name;for(f=0;f<b;f++){d=a.jgrid.getAccessor(e.p.data[f],c);e.p._index[d]=f}},Q=function(b,c,f,d,j){var g=new Date,k=e.p.datatype!="local"&&e.p.loadonce||e.p.datatype=="xmlstring",l=e.p.datatype=="local"?"local":"xml";if(k){e.p.data=[];e.p._index={};e.p.localReader.id="_id_"}e.p.reccount=0;if(a.isXMLDoc(b)){if(e.p.treeANode===
-1&&!e.p.scroll){H(c,false,true);f=1}else f=f>1?f:1;var m,n,q=0,o,p=0,r=0,s=0,t,u=[],v,D={},E,C,B=[],Y=e.p.altRows===true?" "+e.p.altclass:"";e.p.xmlReader.repeatitems||(u=A(l));t=e.p.keyIndex===false?e.p.xmlReader.id:e.p.keyIndex;if(u.length>0&&!isNaN(t)){e.p.remapColumns&&e.p.remapColumns.length&&(t=a.inArray(t,e.p.remapColumns));t=u[t]}l=(t+"").indexOf("[")===-1?u.length?function(b,c){return a(t,b).text()||c}:function(b,c){return a(e.p.xmlReader.cell,b).eq(t).text()||c}:function(a,b){return a.getAttribute(t.replace(/[\[\]]/g,
""))||b};e.p.userData={};a(e.p.xmlReader.page,b).each(function(){e.p.page=this.textContent||this.text||0});a(e.p.xmlReader.total,b).each(function(){e.p.lastpage=this.textContent||this.text;if(e.p.lastpage===void 0)e.p.lastpage=1});a(e.p.xmlReader.records,b).each(function(){e.p.records=this.textContent||this.text||0});a(e.p.xmlReader.userdata,b).each(function(){e.p.userData[this.getAttribute("name")]=this.textContent||this.text});(b=a(e.p.xmlReader.root+" "+e.p.xmlReader.row,b))||(b=[]);var J=b.length,
G=0,Q={},I;if(b&&J){I=parseInt(e.p.rowNum,10);var ba=e.p.scroll?a.jgrid.randId():1;j&&(I=I*(j+1));var j=a.isFunction(e.p.afterInsertRow),X="";for(e.p.grouping&&e.p.groupingView.groupCollapse===true&&(X=' style="display:none;"');G<J;){E=b[G];C=l(E,ba+G);m=f===0?0:f+1;m=(m+G)%2==1?Y:"";B.push("<tr"+X+' id="'+C+'" tabindex="-1" role="row" class ="ui-widget-content jqgrow ui-row-'+e.p.direction+""+m+'">');if(e.p.rownumbers===true){B.push(z(0,G,e.p.page,e.p.rowNum));s=1}if(e.p.multiselect===true){B.push(y(C,
s,G));p=1}if(e.p.subGrid===true){B.push(a(e).jqGrid("addSubGridCell",p+s,G+f));r=1}if(e.p.xmlReader.repeatitems){v||(v=F(p+r+s));var L=a(e.p.xmlReader.cell,E);a.each(v,function(a){var b=L[this];if(!b)return false;o=b.textContent||b.text;D[e.p.colModel[a+p+r+s].name]=o;B.push(x(C,o,a+p+r+s,G+f,E))})}else for(m=0;m<u.length;m++){o=a(u[m],E).text();D[e.p.colModel[m+p+r+s].name]=o;B.push(x(C,o,m+p+r+s,G+f,E))}B.push("</tr>");if(e.p.grouping){m=e.p.groupingView.groupField.length;for(var O=[],T=0;T<m;T++)O.push(D[e.p.groupingView.groupField[T]]);
Q=a(e).jqGrid("groupingPrepare",B,O,Q,D);B=[]}if(k||e.p.treeGrid===true){D._id_=C;e.p.data.push(D);e.p._index[C]=e.p.data.length-1}if(e.p.gridview===false){a("tbody:first",c).append(B.join(""));j&&e.p.afterInsertRow.call(e,C,D,E);B=[]}D={};q++;G++;if(q==I)break}}if(e.p.gridview===true){n=e.p.treeANode>-1?e.p.treeANode:0;if(e.p.grouping){a(e).jqGrid("groupingRender",Q,e.p.colModel.length);Q=null}else e.p.treeGrid===true&&n>0?a(e.rows[n]).after(B.join("")):a("tbody:first",c).append(B.join(""))}if(e.p.subGrid===
true)try{a(e).jqGrid("addSubGrid",p+s)}catch(U){}e.p.totaltime=new Date-g;if(q>0&&e.p.records===0)e.p.records=J;B=null;if(e.p.treeGrid===true)try{a(e).jqGrid("setTreeNode",n+1,q+n+1)}catch(P){}if(!e.p.treeGrid&&!e.p.scroll)e.grid.bDiv.scrollTop=0;e.p.reccount=q;e.p.treeANode=-1;e.p.userDataOnFooter&&a(e).jqGrid("footerData","set",e.p.userData,true);if(k){e.p.records=J;e.p.lastpage=Math.ceil(J/I)}d||e.updatepager(false,true);if(k)for(;q<J;){E=b[q];C=l(E,q);if(e.p.xmlReader.repeatitems){v||(v=F(p+r+
s));var N=a(e.p.xmlReader.cell,E);a.each(v,function(a){var b=N[this];if(!b)return false;o=b.textContent||b.text;D[e.p.colModel[a+p+r+s].name]=o})}else for(m=0;m<u.length;m++){o=a(u[m],E).text();D[e.p.colModel[m+p+r+s].name]=o}D._id_=C;e.p.data.push(D);e.p._index[C]=e.p.data.length-1;D={};q++}}},E=function(b,c,f,d,j){var g=new Date;if(b){if(e.p.treeANode===-1&&!e.p.scroll){H(c,false,true);f=1}else f=f>1?f:1;var k,l=e.p.datatype!="local"&&e.p.loadonce||e.p.datatype=="jsonstring";if(l){e.p.data=[];e.p._index=
{};e.p.localReader.id="_id_"}e.p.reccount=0;if(e.p.datatype=="local"){c=e.p.localReader;k="local"}else{c=e.p.jsonReader;k="json"}var m=0,n,q,o=[],p,r=0,s=0,t=0,u,v,D={},E,C,B=[],Y=e.p.altRows===true?" "+e.p.altclass:"";e.p.page=a.jgrid.getAccessor(b,c.page)||0;u=a.jgrid.getAccessor(b,c.total);e.p.lastpage=u===void 0?1:u;e.p.records=a.jgrid.getAccessor(b,c.records)||0;e.p.userData=a.jgrid.getAccessor(b,c.userdata)||{};c.repeatitems||(p=o=A(k));k=e.p.keyIndex===false?c.id:e.p.keyIndex;if(o.length>0&&
!isNaN(k)){e.p.remapColumns&&e.p.remapColumns.length&&(k=a.inArray(k,e.p.remapColumns));k=o[k]}(v=a.jgrid.getAccessor(b,c.root))||(v=[]);u=v.length;var b=0,G=parseInt(e.p.rowNum,10),J=e.p.scroll?a.jgrid.randId():1;j&&(G=G*(j+1));var Q=a.isFunction(e.p.afterInsertRow),I={},ba="";for(e.p.grouping&&e.p.groupingView.groupCollapse===true&&(ba=' style="display:none;"');b<u;){j=v[b];C=a.jgrid.getAccessor(j,k);if(C===void 0){C=J+b;o.length===0&&c.cell&&(C=a.jgrid.getAccessor(j,c.cell)[k]||C)}n=f===1?0:f;
n=(n+b)%2==1?Y:"";B.push("<tr"+ba+' id="'+C+'" tabindex="-1" role="row" class= "ui-widget-content jqgrow ui-row-'+e.p.direction+""+n+'">');if(e.p.rownumbers===true){B.push(z(0,b,e.p.page,e.p.rowNum));t=1}if(e.p.multiselect){B.push(y(C,t,b));r=1}if(e.p.subGrid){B.push(a(e).jqGrid("addSubGridCell",r+t,b+f));s=1}if(c.repeatitems){c.cell&&(j=a.jgrid.getAccessor(j,c.cell));p||(p=F(r+s+t))}for(q=0;q<p.length;q++){n=a.jgrid.getAccessor(j,p[q]);B.push(x(C,n,q+r+s+t,b+f,j));D[e.p.colModel[q+r+s+t].name]=n}B.push("</tr>");
if(e.p.grouping){n=e.p.groupingView.groupField.length;q=[];for(var X=0;X<n;X++)q.push(D[e.p.groupingView.groupField[X]]);I=a(e).jqGrid("groupingPrepare",B,q,I,D);B=[]}if(l||e.p.treeGrid===true){D._id_=C;e.p.data.push(D);e.p._index[C]=e.p.data.length-1}if(e.p.gridview===false){a("#"+a.jgrid.jqID(e.p.id)+" tbody:first").append(B.join(""));Q&&e.p.afterInsertRow.call(e,C,D,j);B=[]}D={};m++;b++;if(m==G)break}if(e.p.gridview===true){E=e.p.treeANode>-1?e.p.treeANode:0;e.p.grouping?a(e).jqGrid("groupingRender",
I,e.p.colModel.length):e.p.treeGrid===true&&E>0?a(e.rows[E]).after(B.join("")):a("#"+a.jgrid.jqID(e.p.id)+" tbody:first").append(B.join(""))}if(e.p.subGrid===true)try{a(e).jqGrid("addSubGrid",r+t)}catch(L){}e.p.totaltime=new Date-g;if(m>0&&e.p.records===0)e.p.records=u;if(e.p.treeGrid===true)try{a(e).jqGrid("setTreeNode",E+1,m+E+1)}catch(O){}if(!e.p.treeGrid&&!e.p.scroll)e.grid.bDiv.scrollTop=0;e.p.reccount=m;e.p.treeANode=-1;e.p.userDataOnFooter&&a(e).jqGrid("footerData","set",e.p.userData,true);
if(l){e.p.records=u;e.p.lastpage=Math.ceil(u/G)}d||e.updatepager(false,true);if(l)for(;m<u&&v[m];){j=v[m];C=a.jgrid.getAccessor(j,k);if(C===void 0){C=J+m;o.length===0&&c.cell&&(C=a.jgrid.getAccessor(j,c.cell)[k]||C)}if(j){if(c.repeatitems){c.cell&&(j=a.jgrid.getAccessor(j,c.cell));p||(p=F(r+s+t))}for(q=0;q<p.length;q++){n=a.jgrid.getAccessor(j,p[q]);D[e.p.colModel[q+r+s+t].name]=n}D._id_=C;e.p.data.push(D);e.p._index[C]=e.p.data.length-1;D={}}m++}}},B=function(){function b(c){var e=0,f,j,g;if(c.groups!==
void 0)for(f=0;f<c.groups.length;f++){try{b(c.groups[f])}catch(k){alert(k)}e++}if(c.rules!==void 0){if(e>0){var l=o.select();o=a.jgrid.from(l)}try{for(f=0;f<c.rules.length;f++){g=c.rules[f];j=c.groupOp.toString().toUpperCase();if(q[g.op]&&g.field){e>0&&(j&&j==="OR")&&(o=o.or());o=q[g.op](o,j)(g.field,g.data,d[g.field])}e++}}catch(m){alert(m)}}}var c,f=false,d={},j=[],g=[],k,l,m;if(a.isArray(e.p.data)){var n=e.p.grouping?e.p.groupingView:false;a.each(e.p.colModel,function(){l=this.sorttype||"text";
if(l=="date"||l=="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"){k=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:a.jgrid.formatter.date.srcformat;m=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:a.jgrid.formatter.date.newformat}else k=m=this.datefmt||"Y-m-d";d[this.name]={stype:l,srcfmt:k,newfmt:m}}else d[this.name]={stype:l,srcfmt:"",newfmt:""};if(e.p.grouping&&this.name==n.groupField[0]){var b=
this.name;if(typeof this.index!="undefined")b=this.index;j[0]=d[b];g.push(b)}if(!f&&(this.index==e.p.sortname||this.name==e.p.sortname)){c=this.name;f=true}});if(e.p.treeGrid)a(e).jqGrid("SortTree",c,e.p.sortorder,d[c].stype,d[c].srcfmt);else{var q={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,
b){return b==="OR"?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return b==="OR"?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return b==="OR"?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return b==="OR"?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return b==="OR"?a.orNot().isNull:a.andNot().isNull}},o=a.jgrid.from(e.p.data);
e.p.ignoreCase&&(o=o.ignoreCase());if(e.p.search===true){var p=e.p.postData.filters;if(p){typeof p=="string"&&(p=a.jgrid.parse(p));b(p)}else try{o=q[e.p.postData.searchOper](o)(e.p.postData.searchField,e.p.postData.searchString,d[e.p.postData.searchField])}catch(r){}}if(e.p.grouping){o.orderBy(g,n.groupOrder[0],j[0].stype,j[0].srcfmt);n.groupDataSorted=true}c&&(e.p.sortorder&&f)&&(e.p.sortorder.toUpperCase()=="DESC"?o.orderBy(e.p.sortname,"d",d[c].stype,d[c].srcfmt):o.orderBy(e.p.sortname,"a",d[c].stype,
d[c].srcfmt));var p=o.select(),s=parseInt(e.p.rowNum,10),t=p.length,u=parseInt(e.p.page,10),v=Math.ceil(t/s),x={},p=p.slice((u-1)*s,u*s),d=o=null;x[e.p.localReader.total]=v;x[e.p.localReader.page]=u;x[e.p.localReader.records]=t;x[e.p.localReader.root]=p;p=null;return x}}},T=function(){e.grid.hDiv.loading=true;if(!e.p.hiddengrid)switch(e.p.loadui){case "enable":a("#load_"+a.jgrid.jqID(e.p.id)).show();break;case "block":a("#lui_"+a.jgrid.jqID(e.p.id)).show();a("#load_"+a.jgrid.jqID(e.p.id)).show()}},
W=function(){e.grid.hDiv.loading=false;switch(e.p.loadui){case "enable":a("#load_"+a.jgrid.jqID(e.p.id)).hide();break;case "block":a("#lui_"+a.jgrid.jqID(e.p.id)).hide();a("#load_"+a.jgrid.jqID(e.p.id)).hide()}},O=function(b){if(!e.grid.hDiv.loading){var c=e.p.scroll&&b===false,f={},d,j=e.p.prmNames;if(e.p.page<=0)e.p.page=1;if(j.search!==null)f[j.search]=e.p.search;j.nd!==null&&(f[j.nd]=(new Date).getTime());if(j.rows!==null)f[j.rows]=e.p.rowNum;if(j.page!==null)f[j.page]=e.p.page;if(j.sort!==null)f[j.sort]=
e.p.sortname;if(j.order!==null)f[j.order]=e.p.sortorder;if(e.p.rowTotal!==null&&j.totalrows!==null)f[j.totalrows]=e.p.rowTotal;var g=e.p.loadComplete,k=a.isFunction(g);k||(g=null);var l=0,b=b||1;if(b>1)if(j.npage!==null){f[j.npage]=b;l=b-1;b=1}else g=function(a){e.p.page++;e.grid.hDiv.loading=false;k&&e.p.loadComplete.call(e,a);O(b-1)};else j.npage!==null&&delete e.p.postData[j.npage];if(e.p.grouping){a(e).jqGrid("groupingSetup");e.p.groupingView.groupDataSorted===true&&(f[j.sort]=e.p.groupingView.groupField[0]+
" "+e.p.groupingView.groupOrder[0]+", "+f[j.sort])}a.extend(e.p.postData,f);var m=!e.p.scroll?1:e.rows.length-1;if(a.isFunction(e.p.datatype))e.p.datatype.call(e,e.p.postData,"load_"+e.p.id);else{a.isFunction(e.p.beforeRequest)&&e.p.beforeRequest.call(e);d=e.p.datatype.toLowerCase();switch(d){case "json":case "jsonp":case "xml":case "script":a.ajax(a.extend({url:e.p.url,type:e.p.mtype,dataType:d,data:a.isFunction(e.p.serializeGridData)?e.p.serializeGridData.call(e,e.p.postData):e.p.postData,success:function(a){d===
"xml"?Q(a,e.grid.bDiv,m,b>1,l):E(a,e.grid.bDiv,m,b>1,l);g&&g.call(e,a);c&&e.grid.populateVisible();if(e.p.loadonce||e.p.treeGrid)e.p.datatype="local";W()},error:function(b,c,f){a.isFunction(e.p.loadError)&&e.p.loadError.call(e,b,c,f);W()},beforeSend:function(b){T();a.isFunction(e.p.loadBeforeSend)&&e.p.loadBeforeSend.call(e,b)}},a.jgrid.ajaxOptions,e.p.ajaxGridOptions));break;case "xmlstring":T();f=a.jgrid.stringToDoc(e.p.datastr);Q(f,e.grid.bDiv);k&&e.p.loadComplete.call(e,f);e.p.datatype="local";
e.p.datastr=null;W();break;case "jsonstring":T();f=typeof e.p.datastr=="string"?a.jgrid.parse(e.p.datastr):e.p.datastr;E(f,e.grid.bDiv);k&&e.p.loadComplete.call(e,f);e.p.datatype="local";e.p.datastr=null;W();break;case "local":case "clientside":T();e.p.datatype="local";f=B();E(f,e.grid.bDiv,m,b>1,l);g&&g.call(e,f);c&&e.grid.populateVisible();W()}}}};n=function(b,c){var f="",d="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",j="",g,k,m,
n,q=function(b){var c;a.isFunction(e.p.onPaging)&&(c=e.p.onPaging.call(e,b));e.p.selrow=null;if(e.p.multiselect){e.p.selarrrow=[];a("#cb_"+a.jgrid.jqID(e.p.id),e.grid.hDiv).attr("checked",false)}e.p.savedRow=[];return c=="stop"?false:true},b=b.substr(1);g="pg_"+b;k=b+"_left";m=b+"_center";n=b+"_right";a("#"+a.jgrid.jqID(b)).append("<div id='"+g+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+
k+"' align='left'></td><td id='"+m+"' align='center' style='white-space:pre;'></td><td id='"+n+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(e.p.rowList.length>0){j="<td dir='"+l+"'>";j=j+"<select class='ui-pg-selbox' role='listbox'>";for(k=0;k<e.p.rowList.length;k++)j=j+('<option role="option" value="'+e.p.rowList[k]+'"'+(e.p.rowNum==e.p.rowList[k]?' selected="selected"':"")+">"+e.p.rowList[k]+"</option>");j=j+"</select></td>"}l=="rtl"&&(d=d+j);e.p.pginput===true&&(f="<td dir='"+
l+"'>"+a.jgrid.format(e.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'></span>")+"</td>");if(e.p.pgbuttons===true){k=["first"+c,"prev"+c,"next"+c,"last"+c];l=="rtl"&&k.reverse();d=d+("<td id='"+k[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>");d=d+("<td id='"+k[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>");d=d+(f!==""?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+
f+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+k[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>");d=d+("<td id='"+k[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>")}else f!==""&&(d=d+f);l=="ltr"&&(d=d+j);d=d+"</tr></tbody></table>";e.p.viewrecords===true&&a("td#"+b+"_"+e.p.recordpos,"#"+g).append("<div dir='"+l+"' style='text-align:"+
e.p.recordpos+"' class='ui-paging-info'></div>");a("td#"+b+"_"+e.p.pagerpos,"#"+g).append(d);j=a(".ui-jqgrid").css("font-size")||"11px";a(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+j+";visibility:hidden;' ></div>");d=a(d).clone().appendTo("#testpg").width();a("#testpg").remove();if(d>0){f!==""&&(d=d+50);a("td#"+b+"_"+e.p.pagerpos,"#"+g).width(d)}e.p._nvtd=[];e.p._nvtd[0]=d?Math.floor((e.p.width-d)/2):Math.floor(e.p.width/3);e.p._nvtd[1]=
0;d=null;a(".ui-pg-selbox","#"+g).bind("change",function(){e.p.page=Math.round(e.p.rowNum*(e.p.page-1)/this.value-0.5)+1;e.p.rowNum=this.value;c?a(".ui-pg-selbox",e.p.pager).val(this.value):e.p.toppager&&a(".ui-pg-selbox",e.p.toppager).val(this.value);if(!q("records"))return false;O();return false});if(e.p.pgbuttons===true){a(".ui-pg-button","#"+g).hover(function(){if(a(this).hasClass("ui-state-disabled"))this.style.cursor="default";else{a(this).addClass("ui-state-hover");this.style.cursor="pointer"}},
function(){if(!a(this).hasClass("ui-state-disabled")){a(this).removeClass("ui-state-hover");this.style.cursor="default"}});a("#first"+c+", #prev"+c+", #next"+c+", #last"+c,"#"+b).click(function(){var a=s(e.p.page,1),b=s(e.p.lastpage,1),f=false,d=true,j=true,g=true,k=true;if(b===0||b===1)k=g=j=d=false;else if(b>1&&a>=1)a===1?j=d=false:a>1&&a<b||a===b&&(k=g=false);else if(b>1&&a===0){k=g=false;a=b-1}if(this.id==="first"+c&&d){e.p.page=1;f=true}if(this.id==="prev"+c&&j){e.p.page=a-1;f=true}if(this.id===
"next"+c&&g){e.p.page=a+1;f=true}if(this.id==="last"+c&&k){e.p.page=b;f=true}if(f){if(!q(this.id))return false;O()}return false})}e.p.pginput===true&&a("input.ui-pg-input","#"+g).keypress(function(b){if((b.charCode?b.charCode:b.keyCode?b.keyCode:0)==13){e.p.page=a(this).val()>0?a(this).val():e.p.page;if(!q("user"))return false;O();return false}return this})};var U=function(b,c,f,d){if(e.p.colModel[c].sortable&&!(e.p.savedRow.length>0)){if(!f){if(e.p.lastsort==c)if(e.p.sortorder=="asc")e.p.sortorder=
"desc";else{if(e.p.sortorder=="desc")e.p.sortorder="asc"}else e.p.sortorder=e.p.colModel[c].firstsortorder||"asc";e.p.page=1}if(d){if(e.p.lastsort==c&&e.p.sortorder==d&&!f)return;e.p.sortorder=d}f=a("thead:first",e.grid.hDiv).get(0);a("tr th:eq("+e.p.lastsort+") span.ui-grid-ico-sort",f).addClass("ui-state-disabled");a("tr th:eq("+e.p.lastsort+")",f).attr("aria-selected","false");a("tr th:eq("+c+") span.ui-icon-"+e.p.sortorder,f).removeClass("ui-state-disabled");a("tr th:eq("+c+")",f).attr("aria-selected",
"true");if(!e.p.viewsortcols[0]&&e.p.lastsort!=c){a("tr th:eq("+e.p.lastsort+") span.s-ico",f).hide();a("tr th:eq("+c+") span.s-ico",f).show()}b=b.substring(5);e.p.sortname=e.p.colModel[c].index||b;f=e.p.sortorder;if(a.isFunction(e.p.onSortCol)&&e.p.onSortCol.call(e,b,c,f)=="stop")e.p.lastsort=c;else{if(e.p.datatype=="local")e.p.deselectAfterSort&&a(e).jqGrid("resetSelection");else{e.p.selrow=null;e.p.multiselect&&a("#cb_"+a.jgrid.jqID(e.p.id),e.grid.hDiv).attr("checked",false);e.p.selarrrow=[];e.p.savedRow=
[]}if(e.p.scroll){f=e.grid.bDiv.scrollLeft;H(e.grid.bDiv,true,false);e.grid.hDiv.scrollLeft=f}e.p.subGrid&&e.p.datatype=="local"&&a("td.sgexpanded","#"+a.jgrid.jqID(e.p.id)).each(function(){a(this).trigger("click")});O();e.p.lastsort=c;if(e.p.sortname!=b&&c)e.p.lastsort=c}}},G=function(b){var c,f={},d=o?0:e.p.cellLayout;for(c=f[0]=f[1]=f[2]=0;c<=b;c++)e.p.colModel[c].hidden===false&&(f[0]=f[0]+(e.p.colModel[c].width+d));e.p.direction=="rtl"&&(f[0]=e.p.width-f[0]);f[0]=f[0]-e.grid.bDiv.scrollLeft;
a(e.grid.cDiv).is(":visible")&&(f[1]=f[1]+(a(e.grid.cDiv).height()+parseInt(a(e.grid.cDiv).css("padding-top"),10)+parseInt(a(e.grid.cDiv).css("padding-bottom"),10)));if(e.p.toolbar[0]===true&&(e.p.toolbar[1]=="top"||e.p.toolbar[1]=="both"))f[1]=f[1]+(a(e.grid.uDiv).height()+parseInt(a(e.grid.uDiv).css("border-top-width"),10)+parseInt(a(e.grid.uDiv).css("border-bottom-width"),10));e.p.toppager&&(f[1]=f[1]+(a(e.grid.topDiv).height()+parseInt(a(e.grid.topDiv).css("border-bottom-width"),10)));f[2]=f[2]+
(a(e.grid.bDiv).height()+a(e.grid.hDiv).height());return f};this.p.id=this.id;-1==a.inArray(e.p.multikey,["shiftKey","altKey","ctrlKey"])&&(e.p.multikey=!1);e.p.keyIndex=!1;for(k=0;k<e.p.colModel.length;k++)e.p.colModel[k]=a.extend(!0,{},e.p.cmTemplate,e.p.colModel[k].template||{},e.p.colModel[k]),!1===e.p.keyIndex&&!0===e.p.colModel[k].key&&(e.p.keyIndex=k);e.p.sortorder=e.p.sortorder.toLowerCase();!0===e.p.grouping&&(e.p.scroll=!1,e.p.rownumbers=!1,e.p.subGrid=!1,e.p.treeGrid=!1,e.p.gridview=!0);
if(!0===this.p.treeGrid){try{a(this).jqGrid("setTreeGrid")}catch(S){}"local"!=e.p.datatype&&(e.p.localReader={id:"_id_"})}if(this.p.subGrid)try{a(e).jqGrid("setSubGrid")}catch(I){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:o?e.p.multiselectWidth+e.p.cellLayout:e.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),
this.p.colModel.unshift({name:"rn",width:e.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));e.p.xmlReader=a.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},e.p.xmlReader);e.p.jsonReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",
subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},e.p.jsonReader);e.p.localReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},e.p.localReader);e.p.scroll&&(e.p.pgbuttons=!1,e.p.pginput=!1,e.p.rowList=[]);e.p.data.length&&D();var P="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",Z,Y,ba,ua,X,L,J,da;Y=da="";if(!0===e.p.shrinkToFit&&!0===e.p.forceFit)for(k=e.p.colModel.length-
1;0<=k;k--)if(!e.p.colModel[k].hidden){e.p.colModel[k].resizable=!1;break}"horizontal"==e.p.viewsortcols[1]&&(da=" ui-i-asc",Y=" ui-i-desc");Z=p?"class='ui-th-div-ie'":"";da="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+da+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+l+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+Y+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+l+"'></span></span>");for(k=0;k<this.p.colNames.length;k++)Y=
e.p.headertitles?' title="'+a.jgrid.stripHtml(e.p.colNames[k])+'"':"",P+="<th id='"+e.p.id+"_"+e.p.colModel[k].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+l+"'"+Y+">",Y=e.p.colModel[k].index||e.p.colModel[k].name,P+="<div id='jqgh_"+e.p.colModel[k].name+"' "+Z+">"+e.p.colNames[k],e.p.colModel[k].width=e.p.colModel[k].width?parseInt(e.p.colModel[k].width,10):150,"boolean"!==typeof e.p.colModel[k].title&&(e.p.colModel[k].title=!0),Y==e.p.sortname&&(e.p.lastsort=k),P+=da+
"</div></th>";da=null;a(this).append(P+"</tr></thead>");a("thead tr:first th",this).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});if(this.p.multiselect){var C=[],Ta;a("#cb_"+a.jgrid.jqID(e.p.id),this).bind("click",function(){e.p.selarrrow=[];if(this.checked){a(e.rows).each(function(b){if(b>0&&!a(this).hasClass("subgrid")&&!a(this).hasClass("jqgroup")&&!a(this).hasClass("ui-state-disabled")){a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(this.id)).attr("checked",
"checked");a(this).addClass("ui-state-highlight").attr("aria-selected","true");e.p.selarrrow.push(this.id);e.p.selrow=this.id}});Ta=true;C=[]}else{a(e.rows).each(function(b){if(b>0&&!a(this).hasClass("subgrid")&&!a(this).hasClass("ui-state-disabled")){a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(this.id)).removeAttr("checked");a(this).removeClass("ui-state-highlight").attr("aria-selected","false");C.push(this.id)}});e.p.selrow=null;Ta=false}a.isFunction(e.p.onSelectAll)&&e.p.onSelectAll.call(e,
Ta?e.p.selarrrow:C,Ta)})}!0===e.p.autowidth&&(P=a(r).innerWidth(),e.p.width=0<P?P:"nw");(function(){var b=0,f=o?0:e.p.cellLayout,d=0,j,k=e.p.scrollOffset,l,m=false,n,q=0,p=0,r;a.each(e.p.colModel,function(){if(typeof this.hidden==="undefined")this.hidden=false;this.widthOrg=l=s(this.width,0);if(this.hidden===false){b=b+(l+f);this.fixed?q=q+(l+f):d++;p++}});isNaN(e.p.width)?e.p.width=c.width=b:c.width=e.p.width;e.p.tblwidth=b;if(e.p.shrinkToFit===false&&e.p.forceFit===true)e.p.forceFit=false;if(e.p.shrinkToFit===
true&&d>0){n=c.width-f*d-q;if(!isNaN(e.p.height)){n=n-k;m=true}b=0;a.each(e.p.colModel,function(a){if(this.hidden===false&&!this.fixed){this.width=l=Math.round(n*this.width/(e.p.tblwidth-f*d-q));b=b+l;j=a}});r=0;m?c.width-q-(b+f*d)!==k&&(r=c.width-q-(b+f*d)-k):!m&&Math.abs(c.width-q-(b+f*d))!==1&&(r=c.width-q-(b+f*d));e.p.colModel[j].width=e.p.colModel[j].width+r;e.p.tblwidth=b+r+f*d+q;if(e.p.tblwidth>e.p.width){e.p.colModel[j].width=e.p.colModel[j].width-(e.p.tblwidth-parseInt(e.p.width,10));e.p.tblwidth=
e.p.width}}})();a(r).css("width",c.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+e.p.id+"'>&#160;</div>");a(m).css("width",c.width+"px");var P=a("thead:first",e).get(0),va="";e.p.footerrow&&(va+="<table role='grid' style='width:"+e.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+l+"'>");var m=a("tr:first",P),fa="<tr class='jqgfirstrow' role='row' style='height:auto'>";e.p.disableClick=
!1;a("th",m).each(function(b){ba=e.p.colModel[b].width;if(typeof e.p.colModel[b].resizable==="undefined")e.p.colModel[b].resizable=true;if(e.p.colModel[b].resizable){ua=document.createElement("span");a(ua).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+l);a.browser.opera||a(ua).css("cursor","col-resize");a(this).addClass(e.p.resizeclass)}else ua="";a(this).css("width",ba+"px").prepend(ua);var f="";if(e.p.colModel[b].hidden){a(this).css("display","none");f="display:none;"}fa=fa+("<td role='gridcell' style='height:0px;width:"+
ba+"px;"+f+"'></td>");c.headers[b]={width:ba,el:this};X=e.p.colModel[b].sortable;if(typeof X!=="boolean")X=e.p.colModel[b].sortable=true;f=e.p.colModel[b].name;f=="cb"||f=="subgrid"||f=="rn"||e.p.viewsortcols[2]&&a("div",this).addClass("ui-jqgrid-sortable");if(X)if(e.p.viewsortcols[0]){a("div span.s-ico",this).show();b==e.p.lastsort&&a("div span.ui-icon-"+e.p.sortorder,this).removeClass("ui-state-disabled")}else if(b==e.p.lastsort){a("div span.s-ico",this).show();a("div span.ui-icon-"+e.p.sortorder,
this).removeClass("ui-state-disabled")}e.p.footerrow&&(va=va+("<td role='gridcell' "+v(b,0,"",null,"",false)+">&#160;</td>"))}).mousedown(function(b){if(a(b.target).closest("th>span.ui-jqgrid-resize").length==1){var f=a.jgrid.getCellIndex(this);if(e.p.forceFit===true){var d=e.p,j=f,k;for(k=f+1;k<e.p.colModel.length;k++)if(e.p.colModel[k].hidden!==true){j=k;break}d.nv=j-f}c.dragStart(f,b,G(f));return false}}).click(function(b){if(e.p.disableClick)return e.p.disableClick=false;var c="th>div.ui-jqgrid-sortable",
f,d;e.p.viewsortcols[2]||(c="th>div>span>span.ui-grid-ico-sort");b=a(b.target).closest(c);if(b.length==1){c=a.jgrid.getCellIndex(this);if(!e.p.viewsortcols[2]){f=true;d=b.attr("sort")}U(a("div",this)[0].id,c,f,d);return false}});if(e.p.sortable&&a.fn.sortable)try{a(e).jqGrid("sortableColumns",m)}catch(Qa){}e.p.footerrow&&(va+="</tr></tbody></table>");fa+="</tr>";this.appendChild(document.createElement("tbody"));a(this).addClass("ui-jqgrid-btable").append(fa);var fa=null,m=a("<table class='ui-jqgrid-htable' style='width:"+
e.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(P),ka=e.p.caption&&!0===e.p.hiddengrid?!0:!1;k=a("<div class='ui-jqgrid-hbox"+("rtl"==l?"-rtl":"")+"'></div>");P=null;c.hDiv=document.createElement("div");a(c.hDiv).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(k);a(k).append(m);m=null;ka&&a(c.hDiv).hide();e.p.pager&&("string"==typeof e.p.pager?"#"!=e.p.pager.substr(0,1)&&(e.p.pager="#"+e.p.pager):
e.p.pager="#"+a(e.p.pager).attr("id"),a(e.p.pager).css({width:c.width+"px"}).appendTo(r).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),ka&&a(e.p.pager).hide(),n(e.p.pager,""));!1===e.p.cellEdit&&!0===e.p.hoverrows&&a(e).bind("mouseover",function(b){J=a(b.target).closest("tr.jqgrow");a(J).attr("class")!=="subgrid"&&a(J).addClass("ui-state-hover");return false}).bind("mouseout",function(b){J=a(b.target).closest("tr.jqgrow");a(J).removeClass("ui-state-hover");return false});var ma,Ea;
a(e).before(c.hDiv).click(function(b){L=b.target;J=a(L,e.rows).closest("tr.jqgrow");if(a(J).length===0||J[0].className.indexOf("ui-state-disabled")>-1)return this;var c=a(L).hasClass("cbox"),f=true;a.isFunction(e.p.beforeSelectRow)&&(f=e.p.beforeSelectRow.call(e,J[0].id,b));if(!(L.tagName=="A"||(L.tagName=="INPUT"||L.tagName=="TEXTAREA"||L.tagName=="OPTION"||L.tagName=="SELECT")&&!c)&&f===true){if(e.p.cellEdit===true)if(e.p.multiselect&&c)a(e).jqGrid("setSelection",J[0].id,true);else{ma=J[0].rowIndex;
Ea=a.jgrid.getCellIndex(L);try{a(e).jqGrid("editCell",ma,Ea,true)}catch(d){}}else if(e.p.multikey)if(b[e.p.multikey])a(e).jqGrid("setSelection",J[0].id,true);else{if(e.p.multiselect&&c){c=a("[id^=jqg_"+a.jgrid.jqID(e.p.id)+"_]").attr("checked");a("[id^=jqg_"+a.jgrid.jqID(e.p.id)+"_]").attr("checked",!c)}}else{if(e.p.multiselect&&e.p.multiboxonly&&!c){a(e.p.selarrrow).each(function(b,c){var f=e.rows.namedItem(c);a(f).removeClass("ui-state-highlight");a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(c)).attr("checked",
false)});e.p.selarrrow=[];a("#cb_"+a.jgrid.jqID(e.p.id),e.grid.hDiv).attr("checked",false)}a(e).jqGrid("setSelection",J[0].id,true)}if(a.isFunction(e.p.onCellSelect)){ma=J[0].id;Ea=a.jgrid.getCellIndex(L);e.p.onCellSelect.call(e,ma,Ea,a(L).html(),b)}b.stopPropagation()}else return this}).bind("reloadGrid",function(b,c){if(e.p.treeGrid===true)e.p.datatype=e.p.treedatatype;c&&c.current&&e.grid.selectionPreserver(e);if(e.p.datatype=="local"){a(e).jqGrid("resetSelection");e.p.data.length&&D()}else if(!e.p.treeGrid){e.p.selrow=
null;if(e.p.multiselect){e.p.selarrrow=[];a("#cb_"+a.jgrid.jqID(e.p.id),e.grid.hDiv).attr("checked",false)}e.p.savedRow=[]}e.p.scroll&&H(e.grid.bDiv,true,false);if(c&&c.page){var f=c.page;if(f>e.p.lastpage)f=e.p.lastpage;f<1&&(f=1);e.p.page=f;e.grid.bDiv.scrollTop=e.grid.prevRowHeight?(f-1)*e.grid.prevRowHeight*e.p.rowNum:0}if(e.grid.prevRowHeight&&e.p.scroll){delete e.p.lastpage;e.grid.populateVisible()}else e.grid.populate();return false});a.isFunction(this.p.ondblClickRow)&&a(this).dblclick(function(b){L=
b.target;J=a(L,e.rows).closest("tr.jqgrow");if(a(J).length===0)return false;ma=J[0].rowIndex;Ea=a.jgrid.getCellIndex(L);e.p.ondblClickRow.call(e,a(J).attr("id"),ma,Ea,b);return false});a.isFunction(this.p.onRightClickRow)&&a(this).bind("contextmenu",function(b){L=b.target;J=a(L,e.rows).closest("tr.jqgrow");if(a(J).length===0)return false;e.p.multiselect||a(e).jqGrid("setSelection",J[0].id,true);ma=J[0].rowIndex;Ea=a.jgrid.getCellIndex(L);e.p.onRightClickRow.call(e,a(J).attr("id"),ma,Ea,b);return false});
c.bDiv=document.createElement("div");p&&"auto"===(""+e.p.height).toLowerCase()&&(e.p.height="100%");a(c.bDiv).append(a('<div style="position:relative;'+(p&&8>a.browser.version?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:e.p.height+(isNaN(e.p.height)?"":"px"),width:c.width+"px"}).scroll(c.scrollGrid);a("table:first",c.bDiv).css({width:e.p.tblwidth+"px"});p?(2==a("tbody",this).size()&&a("tbody:gt(0)",this).remove(),e.p.multikey&&a(c.bDiv).bind("selectstart",
function(){return false})):e.p.multikey&&a(c.bDiv).bind("mousedown",function(){return false});ka&&a(c.bDiv).hide();c.cDiv=document.createElement("div");var ga=!0===e.p.hidegrid?a("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ga.addClass("ui-state-hover")},function(){ga.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==l?"left":"right","0px"):"";a(c.cDiv).append(ga).append("<span class='ui-jqgrid-title"+
("rtl"==l?"-rtl":"")+"'>"+e.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");a(c.cDiv).insertBefore(c.hDiv);e.p.toolbar[0]&&(c.uDiv=document.createElement("div"),"top"==e.p.toolbar[1]?a(c.uDiv).insertBefore(c.hDiv):"bottom"==e.p.toolbar[1]&&a(c.uDiv).insertAfter(c.hDiv),"both"==e.p.toolbar[1]?(c.ubDiv=document.createElement("div"),a(c.uDiv).insertBefore(c.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),a(c.ubDiv).insertAfter(c.hDiv).addClass("ui-userdata ui-state-default").attr("id",
"tb_"+this.id),ka&&a(c.ubDiv).hide()):a(c.uDiv).width(c.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),ka&&a(c.uDiv).hide());e.p.toppager&&(e.p.toppager=a.jgrid.jqID(e.p.id)+"_toppager",c.topDiv=a("<div id='"+e.p.toppager+"'></div>")[0],e.p.toppager="#"+e.p.toppager,a(c.topDiv).insertBefore(c.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(c.width),n(e.p.toppager,"_t"));e.p.footerrow&&(c.sDiv=a("<div class='ui-jqgrid-sdiv'></div>")[0],k=a("<div class='ui-jqgrid-hbox"+
("rtl"==l?"-rtl":"")+"'></div>"),a(c.sDiv).append(k).insertAfter(c.hDiv).width(c.width),a(k).append(va),c.footers=a(".ui-jqgrid-ftable",c.sDiv)[0].rows[0].cells,e.p.rownumbers&&(c.footers[0].className="ui-state-default jqgrid-rownum"),ka&&a(c.sDiv).hide());k=null;if(e.p.caption){var la=e.p.datatype;!0===e.p.hidegrid&&(a(".ui-jqgrid-titlebar-close",c.cDiv).click(function(b){var f=a.isFunction(e.p.onHeaderClick),d=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",j,k=this;if(e.p.toolbar[0]===
true){e.p.toolbar[1]=="both"&&(d=d+(", #"+a(c.ubDiv).attr("id")));d=d+(", #"+a(c.uDiv).attr("id"))}j=a(d,"#gview_"+a.jgrid.jqID(e.p.id)).length;e.p.gridstate=="visible"?a(d,"#gbox_"+a.jgrid.jqID(e.p.id)).slideUp("fast",function(){j--;if(j===0){a("span",k).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");e.p.gridstate="hidden";a("#gbox_"+a.jgrid.jqID(e.p.id)).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(e.p.id)).hide();f&&(ka||e.p.onHeaderClick.call(e,
e.p.gridstate,b))}}):e.p.gridstate=="hidden"&&a(d,"#gbox_"+a.jgrid.jqID(e.p.id)).slideDown("fast",function(){j--;if(j===0){a("span",k).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(ka){e.p.datatype=la;O();ka=false}e.p.gridstate="visible";a("#gbox_"+a.jgrid.jqID(e.p.id)).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(e.p.id)).show();f&&(ka||e.p.onHeaderClick.call(e,e.p.gridstate,b))}});return false}),ka&&(e.p.datatype="local",a(".ui-jqgrid-titlebar-close",
c.cDiv).trigger("click")))}else a(c.cDiv).hide();a(c.hDiv).after(c.bDiv).mousemove(function(a){if(c.resizing){c.dragMove(a);return false}});a(".ui-jqgrid-labels",c.hDiv).bind("selectstart",function(){return false});a(document).mouseup(function(){if(c.resizing){c.dragEnd();return false}return true});e.formatCol=v;e.sortData=U;e.updatepager=function(b,c){var f,d,j,g,k,l,m,n="";j=parseInt(e.p.page,10)-1;j<0&&(j=0);j=j*parseInt(e.p.rowNum,10);k=j+e.p.reccount;if(e.p.scroll){f=a("tbody:first > tr:gt(0)",
e.grid.bDiv);j=k-f.length;e.p.reccount=f.length;if(d=f.outerHeight()||e.grid.prevRowHeight){f=j*d;d=d*parseInt(e.p.records,10);a(">div:first",e.grid.bDiv).css({height:d}).children("div:first").css({height:f,display:f?"":"none"})}e.grid.bDiv.scrollLeft=e.grid.hDiv.scrollLeft}n=e.p.pager?e.p.pager:"";if(n=n+(e.p.toppager?n?","+e.p.toppager:e.p.toppager:"")){m=a.jgrid.formatter.integer||{};f=s(e.p.page);d=s(e.p.lastpage);a(".selbox",n).attr("disabled",false);if(e.p.pginput===true){a(".ui-pg-input",n).val(e.p.page);
a("#sp_1",n).html(a.fmatter?a.fmatter.util.NumberFormat(e.p.lastpage,m):e.p.lastpage)}if(e.p.viewrecords)if(e.p.reccount===0)a(".ui-paging-info",n).html(e.p.emptyrecords);else{g=j+1;l=e.p.records;if(a.fmatter){g=a.fmatter.util.NumberFormat(g,m);k=a.fmatter.util.NumberFormat(k,m);l=a.fmatter.util.NumberFormat(l,m)}a(".ui-paging-info",n).html(a.jgrid.format(e.p.recordtext,g,k,l))}if(e.p.pgbuttons===true){f<=0&&(f=d=0);if(f==1||f===0){a("#first, #prev",e.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover");
e.p.toppager&&a("#first_t, #prev_t",e.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{a("#first, #prev",e.p.pager).removeClass("ui-state-disabled");e.p.toppager&&a("#first_t, #prev_t",e.p.toppager).removeClass("ui-state-disabled")}if(f==d||f===0){a("#next, #last",e.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover");e.p.toppager&&a("#next_t, #last_t",e.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{a("#next, #last",e.p.pager).removeClass("ui-state-disabled");
e.p.toppager&&a("#next_t, #last_t",e.p.toppager).removeClass("ui-state-disabled")}}}b===true&&e.p.rownumbers===true&&a("td.jqgrid-rownum",e.rows).each(function(b){a(this).html(j+1+b)});c&&e.p.jqgdnd&&a(e).jqGrid("gridDnD","updateDnD");a.isFunction(e.p.gridComplete)&&e.p.gridComplete.call(e)};e.refreshIndex=D;e.formatter=function(a,b,c,e,f){return t(a,b,c,e,f)};a.extend(c,{populate:O,emptyRows:H});this.grid=c;e.addXmlData=function(a){Q(a,e.grid.bDiv)};e.addJSONData=function(a){E(a,e.grid.bDiv)};this.grid.cols=
this.rows[0].cells;O();e.p.hiddengrid=!1;a(window).unload(function(){e=null})}}}})};a.jgrid.extend({getGridParam:function(a){var c=this[0];if(c&&c.grid)return a?"undefined"!=typeof c.p[a]?c.p[a]:null:c.p},setGridParam:function(d){return this.each(function(){this.grid&&"object"===typeof d&&a.extend(!0,this.p,d)})},getDataIDs:function(){var d=[],c=0,b,f=0;this.each(function(){if((b=this.rows.length)&&0<b)for(;c<b;)a(this.rows[c]).hasClass("jqgrow")&&(d[f]=this.rows[c].id,f++),c++});return d},setSelection:function(d,
c){return this.each(function(){var b,f,g;if(void 0!==d&&(c=!1===c?!1:!0,(f=this.rows.namedItem(d+""))&&!(-1<f.className.indexOf("ui-state-disabled")))){if(!0===this.p.scrollrows&&(b=this.rows.namedItem(d).rowIndex,0<=b)){g=a(this.grid.bDiv)[0].clientHeight;var k=a(this.grid.bDiv)[0].scrollTop,l=this.rows[b].offsetTop;b=this.rows[b].clientHeight;l+b>=g+k?a(this.grid.bDiv)[0].scrollTop=l-(g+k)+b+k:l<g+k&&l<k&&(a(this.grid.bDiv)[0].scrollTop=l)}this.p.multiselect?(this.p.selrow=f.id,g=a.inArray(this.p.selrow,
this.p.selarrrow),-1===g?("ui-subgrid"!==f.className&&a(f).addClass("ui-state-highlight").attr("aria-selected","true"),b=!0,a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(this.p.selrow)).attr("checked",b),this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==f.className&&a(f).removeClass("ui-state-highlight").attr("aria-selected","false"),b=!1,a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(this.p.selrow)).attr("checked",b),this.p.selarrrow.splice(g,1),g=this.p.selarrrow[0],this.p.selrow=void 0===
g?null:g),this.p.onSelectRow&&c&&this.p.onSelectRow.call(this,f.id,b)):"ui-subgrid"!==f.className&&(this.p.selrow!=f.id?(a(this.rows.namedItem(this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),a(f).addClass("ui-state-highlight").attr({"aria-selected":!0,tabindex:"0"}),b=!0):b=!1,this.p.selrow=f.id,this.p.onSelectRow&&c&&this.p.onSelectRow.call(this,f.id,b))}})},resetSelection:function(d){return this.each(function(){var c=this,b,f;"undefined"!==typeof d?
(f=d===c.p.selrow?c.p.selrow:d,a("#"+a.jgrid.jqID(c.p.id)+" tbody:first tr#"+a.jgrid.jqID(f)).removeClass("ui-state-highlight").attr("aria-selected","false"),c.p.multiselect&&(a("#jqg_"+a.jgrid.jqID(c.p.id)+"_"+a.jgrid.jqID(f)).attr("checked",!1),a("#cb_"+a.jgrid.jqID(c.p.id)).attr("checked",!1)),f=null):c.p.multiselect?(a(c.p.selarrrow).each(function(f,d){b=c.rows.namedItem(d);a(b).removeClass("ui-state-highlight").attr("aria-selected","false");a("#jqg_"+a.jgrid.jqID(c.p.id)+"_"+a.jgrid.jqID(d)).attr("checked",
!1)}),a("#cb_"+a.jgrid.jqID(c.p.id)).attr("checked",!1),c.p.selarrrow=[]):c.p.selrow&&(a("#"+a.jgrid.jqID(c.p.id)+" tbody:first tr#"+a.jgrid.jqID(c.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),c.p.selrow=null);c.p.savedRow=[]})},getRowData:function(d){var c={},b,f=!1,g,k=0;this.each(function(){var l=this,e,m;if("undefined"==typeof d)f=!0,b=[],g=l.rows.length;else{m=l.rows.namedItem(d);if(!m)return c;g=2}for(;k<g;)f&&(m=l.rows[k]),a(m).hasClass("jqgrow")&&(a("td",m).each(function(b){e=
l.p.colModel[b].name;if("cb"!==e&&"subgrid"!==e&&"rn"!==e)if(!0===l.p.treeGrid&&e==l.p.ExpandColumn)c[e]=a.jgrid.htmlDecode(a("span:first",this).html());else try{c[e]=a.unformat(this,{rowId:m.id,colModel:l.p.colModel[b]},b)}catch(f){c[e]=a.jgrid.htmlDecode(a(this).html())}}),f&&(b.push(c),c={})),k++});return b?b:c},delRowData:function(d){var c=!1,b,f;this.each(function(){if(b=this.rows.namedItem(d)){if(a(b).remove(),this.p.records--,this.p.reccount--,this.updatepager(!0,!1),c=!0,this.p.multiselect&&
(f=a.inArray(d,this.p.selarrrow),-1!=f&&this.p.selarrrow.splice(f,1)),d==this.p.selrow)this.p.selrow=null}else return!1;if("local"==this.p.datatype){var g=this.p._index[d];"undefined"!=typeof g&&(this.p.data.splice(g,1),this.refreshIndex())}if(!0===this.p.altRows&&c){var k=this.p.altclass;a(this.rows).each(function(b){1==b%2?a(this).addClass(k):a(this).removeClass(k)})}});return c},setRowData:function(d,c,b){var f,g=!0,k;this.each(function(){if(!this.grid)return!1;var l=this,e,m,n=typeof b,p={};m=
l.rows.namedItem(d);if(!m)return!1;if(c)try{if(a(this.p.colModel).each(function(b){f=this.name;void 0!==c[f]&&(p[f]=this.formatter&&"string"===typeof this.formatter&&"date"==this.formatter?a.unformat.date(c[f],this):c[f],e=l.formatter(d,c[f],b,c,"edit"),k=this.title?{title:a.jgrid.stripHtml(e)}:{},!0===l.p.treeGrid&&f==l.p.ExpandColumn?a("td:eq("+b+") > span:first",m).html(e).attr(k):a("td:eq("+b+")",m).html(e).attr(k))}),"local"==l.p.datatype){var o=l.p._index[d];if(l.p.treeGrid)for(var r in l.p.treeReader)p.hasOwnProperty(l.p.treeReader[r])&&
delete p[l.p.treeReader[r]];"undefined"!=typeof o&&(l.p.data[o]=a.extend(!0,l.p.data[o],p));p=null}}catch(s){g=!1}g&&("string"===n?a(m).addClass(b):"object"===n&&a(m).css(b))});return g},addRowData:function(d,c,b,f){b||(b="last");var g=!1,k,l,e,m,n,p,o,r,s="",v,u,t,x,y;c&&(a.isArray(c)?(v=!0,b="last",u=d):(c=[c],v=!1),this.each(function(){var z=c.length;n=this.p.rownumbers===true?1:0;e=this.p.multiselect===true?1:0;m=this.p.subGrid===true?1:0;if(!v)if(typeof d!="undefined")d=d+"";else{d=a.jgrid.randId();
if(this.p.keyIndex!==false){u=this.p.colModel[this.p.keyIndex+e+m+n].name;typeof c[0][u]!="undefined"&&(d=c[0][u])}}t=this.p.altclass;for(var A=0,F="",H={},D=a.isFunction(this.p.afterInsertRow)?true:false;A<z;){x=c[A];l="";if(v){try{d=x[u]}catch(Q){d=a.jgrid.randId()}F=this.p.altRows===true?(this.rows.length-1)%2===0?t:"":""}if(n){s=this.formatCol(0,1,"",null,d,true);l=l+('<td role="gridcell" aria-describedby="'+this.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+s+">0</td>")}if(e){r='<input role="checkbox" type="checkbox" id="jqg_'+
this.p.id+"_"+d+'" class="cbox"/>';s=this.formatCol(n,1,"",null,d,true);l=l+('<td role="gridcell" aria-describedby="'+this.p.id+'_cb" '+s+">"+r+"</td>")}m&&(l=l+a(this).jqGrid("addSubGridCell",e+n,1));for(o=e+m+n;o<this.p.colModel.length;o++){y=this.p.colModel[o];k=y.name;H[k]=y.formatter&&typeof y.formatter==="string"&&y.formatter=="date"?a.unformat.date(x[k],y):x[k];r=this.formatter(d,a.jgrid.getAccessor(x,k),o,x,"edit");s=this.formatCol(o,1,r,d,x,true);l=l+('<td role="gridcell" aria-describedby="'+
this.p.id+"_"+k+'" '+s+">"+r+"</td>")}l='<tr id="'+d+'" role="row" tabindex="-1" class="ui-widget-content jqgrow ui-row-'+this.p.direction+" "+F+'">'+l+"</tr>";if(this.p.subGrid===true){l=a(l)[0];a(this).jqGrid("addSubGrid",l,e+n)}if(this.rows.length===0)a("table:first",this.grid.bDiv).append(l);else switch(b){case "last":a(this.rows[this.rows.length-1]).after(l);break;case "first":a(this.rows[0]).after(l);break;case "after":if(p=this.rows.namedItem(f))a(this.rows[p.rowIndex+1]).hasClass("ui-subgrid")?
a(this.rows[p.rowIndex+1]).after(l):a(p).after(l);break;case "before":if(p=this.rows.namedItem(f)){a(p).before(l);p=p.rowIndex}}this.p.records++;this.p.reccount++;D&&this.p.afterInsertRow.call(this,d,x,x);A++;if(this.p.datatype=="local"){H[this.p.localReader.id]=d;this.p._index[d]=this.p.data.length;this.p.data.push(H);H={}}}this.p.altRows===true&&!v&&(b=="last"?(this.rows.length-1)%2==1&&a(this.rows[this.rows.length-1]).addClass(t):a(this.rows).each(function(b){b%2==1?a(this).addClass(t):a(this).removeClass(t)}));
this.updatepager(true,true);g=true}));return g},footerData:function(d,c,b){function f(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var g,k=!1,l={},e;"undefined"==typeof d&&(d="get");"boolean"!=typeof b&&(b=!0);d=d.toLowerCase();this.each(function(){var m=this,n;if(!m.grid||!m.p.footerrow||"set"==d&&f(c))return!1;k=!0;a(this.p.colModel).each(function(f){g=this.name;"set"==d?void 0!==c[g]&&(n=b?m.formatter("",c[g],f,c,"edit"):c[g],e=this.title?{title:a.jgrid.stripHtml(n)}:{},a("tr.footrow td:eq("+
f+")",m.grid.sDiv).html(n).attr(e),k=!0):"get"==d&&(l[g]=a("tr.footrow td:eq("+f+")",m.grid.sDiv).html())})});return"get"==d?l:k},showHideCol:function(d,c){return this.each(function(){var b=this,f=!1,g=a.browser.webkit||a.browser.safari?0:b.p.cellLayout,k;if(b.grid){"string"===typeof d&&(d=[d]);c="none"!=c?"":"none";var l=""===c?!0:!1;a(this.p.colModel).each(function(e){-1!==a.inArray(this.name,d)&&this.hidden===l&&(a("tr",b.grid.hDiv).each(function(){a(this).children("th:eq("+e+")").css("display",
c)}),a(b.rows).each(function(){a(this).children("td:eq("+e+")").css("display",c)}),b.p.footerrow&&a(b.grid.sDiv).children("td:eq("+e+")").css("display",c),k=this.widthOrg?this.widthOrg:parseInt(this.width,10),b.p.tblwidth="none"===c?b.p.tblwidth-(k+g):b.p.tblwidth+(k+g),this.hidden=!l,f=!0)});!0===f&&b.grid.width!==b.p.tblwidth&&a(b).jqGrid("setGridWidth",!0===b.p.shrinkToFit?b.grid.width:b.p.tblwidth,!0)}})},hideCol:function(d){return this.each(function(){a(this).jqGrid("showHideCol",d,"none")})},
showCol:function(d){return this.each(function(){a(this).jqGrid("showHideCol",d,"")})},remapColumns:function(d,c,b){function f(b){var c;c=b.length?a.makeArray(b):a.extend({},b);a.each(d,function(a){b[a]=c[this]})}function g(b,c){a(">tr"+(c||""),b).each(function(){var b=this,c=a.makeArray(b.cells);a.each(d,function(){var a=c[this];a&&b.appendChild(a)})})}var k=this.get(0);f(k.p.colModel);f(k.p.colNames);f(k.grid.headers);g(a("thead:first",k.grid.hDiv),b&&":not(.ui-jqgrid-labels)");c&&g(a("#"+a.jgrid.jqID(k.p.id)+
" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");k.p.footerrow&&g(a("tbody:first",k.grid.sDiv));k.p.remapColumns&&(k.p.remapColumns.length?f(k.p.remapColumns):k.p.remapColumns=a.makeArray(d));k.p.lastsort=a.inArray(k.p.lastsort,d);k.p.treeGrid&&(k.p.expColInd=a.inArray(k.p.expColInd,d))},setGridWidth:function(d,c){return this.each(function(){if(this.grid){var b=this,f,g=0,k=a.browser.webkit||a.browser.safari?0:b.p.cellLayout,l,e=0,m=!1,n=b.p.scrollOffset,p,o=0,r=0,s;"boolean"!=typeof c&&(c=b.p.shrinkToFit);
if(!isNaN(d)&&(d=parseInt(d,10),b.grid.width=b.p.width=d,a("#gbox_"+a.jgrid.jqID(b.p.id)).css("width",d+"px"),a("#gview_"+a.jgrid.jqID(b.p.id)).css("width",d+"px"),a(b.grid.bDiv).css("width",d+"px"),a(b.grid.hDiv).css("width",d+"px"),b.p.pager&&a(b.p.pager).css("width",d+"px"),b.p.toppager&&a(b.p.toppager).css("width",d+"px"),!0===b.p.toolbar[0]&&(a(b.grid.uDiv).css("width",d+"px"),"both"==b.p.toolbar[1]&&a(b.grid.ubDiv).css("width",d+"px")),b.p.footerrow&&a(b.grid.sDiv).css("width",d+"px"),!1===
c&&!0===b.p.forceFit&&(b.p.forceFit=!1),!0===c))if(a.each(b.p.colModel,function(){if(this.hidden===false){f=this.widthOrg?this.widthOrg:parseInt(this.width,10);g=g+(f+k);this.fixed?o=o+(f+k):e++;r++}}),0!==e){b.p.tblwidth=g;p=d-k*e-o;if(!isNaN(b.p.height)&&(a(b.grid.bDiv)[0].clientHeight<a(b.grid.bDiv)[0].scrollHeight||1===b.rows.length))m=!0,p-=n;var g=0,v=0<b.grid.cols.length;a.each(b.p.colModel,function(a){if(this.hidden===false&&!this.fixed){f=this.widthOrg?this.widthOrg:parseInt(this.width,10);
f=Math.round(p*f/(b.p.tblwidth-k*e-o));if(!(f<0)){this.width=f;g=g+f;b.grid.headers[a].width=f;b.grid.headers[a].el.style.width=f+"px";if(b.p.footerrow)b.grid.footers[a].style.width=f+"px";if(v)b.grid.cols[a].style.width=f+"px";l=a}}});s=0;m?d-o-(g+k*e)!==n&&(s=d-o-(g+k*e)-n):1!==Math.abs(d-o-(g+k*e))&&(s=d-o-(g+k*e));b.p.colModel[l].width+=s;b.p.tblwidth=g+s+k*e+o;b.p.tblwidth>d?(m=b.p.tblwidth-parseInt(d,10),b.p.tblwidth=d,f=b.p.colModel[l].width-=m):f=b.p.colModel[l].width;b.grid.headers[l].width=
f;b.grid.headers[l].el.style.width=f+"px";v&&(b.grid.cols[l].style.width=f+"px");a("table:first",b.grid.bDiv).css("width",b.p.tblwidth+"px");a("table:first",b.grid.hDiv).css("width",b.p.tblwidth+"px");b.grid.hDiv.scrollLeft=b.grid.bDiv.scrollLeft;b.p.footerrow&&(b.grid.footers[l].style.width=f+"px",a("table:first",b.grid.sDiv).css("width",b.p.tblwidth+"px"))}}})},setGridHeight:function(d){return this.each(function(){this.grid&&(a(this.grid.bDiv).css({height:d+(isNaN(d)?"":"px")}),this.p.height=d,
this.p.scroll&&this.grid.populateVisible())})},setCaption:function(d){return this.each(function(){this.p.caption=d;a("span.ui-jqgrid-title",this.grid.cDiv).html(d);a(this.grid.cDiv).show()})},setLabel:function(d,c,b,f){return this.each(function(){var g=-1;if(this.grid&&(isNaN(d)?a(this.p.colModel).each(function(a){if(this.name==d)return g=a,!1}):g=parseInt(d,10),0<=g)){var k=a("tr.ui-jqgrid-labels th:eq("+g+")",this.grid.hDiv);if(c){var l=a(".s-ico",k);a("[id^=jqgh_]",k).empty().html(c).append(l);
this.p.colNames[g]=c}b&&("string"===typeof b?a(k).addClass(b):a(k).css(b));"object"===typeof f&&a(k).attr(f)}})},setCell:function(d,c,b,f,g,k){return this.each(function(){var l=-1,e,m;if(this.grid&&(isNaN(c)?a(this.p.colModel).each(function(a){if(this.name==c)return l=a,!1}):l=parseInt(c,10),0<=l&&(e=this.rows.namedItem(d)))){var n=a("td:eq("+l+")",e);if(""!==b||!0===k)e=this.formatter(d,b,l,e,"edit"),m=this.p.colModel[l].title?{title:a.jgrid.stripHtml(e)}:{},this.p.treeGrid&&0<a(".tree-wrap",a(n)).length?
a("span",a(n)).html(e).attr(m):a(n).html(e).attr(m),"local"==this.p.datatype&&(e=this.p.colModel[l],b=e.formatter&&"string"===typeof e.formatter&&"date"==e.formatter?a.unformat.date(b,e):b,m=this.p._index[d],"undefined"!=typeof m&&(this.p.data[m][e.name]=b));"string"===typeof f?a(n).addClass(f):f&&a(n).css(f);"object"===typeof g&&a(n).attr(g)}})},getCell:function(d,c){var b=!1;this.each(function(){var f=-1;if(this.grid&&(isNaN(c)?a(this.p.colModel).each(function(a){if(this.name===c)return f=a,!1}):
f=parseInt(c,10),0<=f)){var g=this.rows.namedItem(d);if(g)try{b=a.unformat(a("td:eq("+f+")",g),{rowId:g.id,colModel:this.p.colModel[f]},f)}catch(k){b=a.jgrid.htmlDecode(a("td:eq("+f+")",g).html())}}});return b},getCol:function(d,c,b){var f=[],g,k=0,l=0,e=0,m,c="boolean"!=typeof c?!1:c;"undefined"==typeof b&&(b=!1);this.each(function(){var n=-1;if(this.grid&&(isNaN(d)?a(this.p.colModel).each(function(a){if(this.name===d)return n=a,!1}):n=parseInt(d,10),0<=n)){var p=this.rows.length,o=0;if(p&&0<p){for(;o<
p;){if(a(this.rows[o]).hasClass("jqgrow")){try{g=a.unformat(a(this.rows[o].cells[n]),{rowId:this.rows[o].id,colModel:this.p.colModel[n]},n)}catch(r){g=a.jgrid.htmlDecode(this.rows[o].cells[n].innerHTML)}b?(m=parseFloat(g),k+=m,l=Math.min(l,m),e=Math.max(l,m)):c?f.push({id:this.rows[o].id,value:g}):f.push(g)}o++}if(b)switch(b.toLowerCase()){case "sum":f=k;break;case "avg":f=k/p;break;case "count":f=p;break;case "min":f=l;break;case "max":f=e}}}});return f},clearGridData:function(d){return this.each(function(){if(this.grid){"boolean"!=
typeof d&&(d=!1);if(this.p.deepempty)a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove();else{var c=a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];a("#"+a.jgrid.jqID(this.p.id)+" tbody:first").empty().append(c)}this.p.footerrow&&d&&a(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p_index={};this.updatepager(!0,!1)}})},getInd:function(a,
c){var b=!1,f;this.each(function(){if(f=this.rows.namedItem(a))b=!0===c?f:f.rowIndex});return b},bindKeys:function(d){var c=a.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},d||{});return this.each(function(){var b=this;a("body").is("[role]")||a("body").attr("role","application");b.p.scrollrows=c.scrollingRows;a(b).keydown(function(f){var d=a(b).find("tr[tabindex=0]")[0],j,l,e,m=b.p.treeReader.expanded_field;if(d){e=b.p._index[d.id];if(37===f.keyCode||38===f.keyCode||
39===f.keyCode||40===f.keyCode){if(38===f.keyCode){l=d.previousSibling;j="";if(l)if(a(l).is(":hidden"))for(;l;){if(l=l.previousSibling,!a(l).is(":hidden")&&a(l).hasClass("jqgrow")){j=l.id;break}}else j=l.id;a(b).jqGrid("setSelection",j)}if(40===f.keyCode){l=d.nextSibling;j="";if(l)if(a(l).is(":hidden"))for(;l;){if(l=l.nextSibling,!a(l).is(":hidden")&&a(l).hasClass("jqgrow")){j=l.id;break}}else j=l.id;a(b).jqGrid("setSelection",j)}37===f.keyCode&&(b.p.treeGrid&&b.p.data[e][m]&&a(d).find("div.treeclick").trigger("click"),
a.isFunction(c.onLeftKey)&&c.onLeftKey.call(b,b.p.selrow));39===f.keyCode&&(b.p.treeGrid&&!b.p.data[e][m]&&a(d).find("div.treeclick").trigger("click"),a.isFunction(c.onRightKey)&&c.onRightKey.call(b,b.p.selrow));return!1}if(13===f.keyCode)return a.isFunction(c.onEnter)&&c.onEnter.call(b,b.p.selrow),!1;if(32===f.keyCode)return a.isFunction(c.onSpace)&&c.onSpace.call(b,b.p.selrow),!1}})})},unbindKeys:function(){return this.each(function(){a(this).unbind("keydown")})},getLocalRow:function(a){var c=!1,
b;this.each(function(){"undefined"!==typeof a&&(b=this.p._index[a],0<=b&&(c=this.p.data[b]))});return c}})})(m);(function(a){a.fmatter={};a.extend(a.fmatter,{isBoolean:function(a){return"boolean"===typeof a},isObject:function(d){return d&&("object"===typeof d||a.isFunction(d))||!1},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"===typeof a},isValue:function(a){return this.isObject(a)||
this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(d){if(!this.isString(d)&&this.isValue(d))return!1;if(!this.isValue(d))return!0;d=a.trim(d).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===d}});a.fn.fmatter=function(d,c,b,f,g){var k=c,b=a.extend({},a.jgrid.formatter,b);a.fn.fmatter[d]&&(k=a.fn.fmatter[d](c,b,f,g));return k};a.fmatter.util={NumberFormat:function(d,c){a.fmatter.isNumber(d)||(d*=1);if(a.fmatter.isNumber(d)){var b=0>d,f=d+"",g=c.decimalSeparator?c.decimalSeparator:
".",k;if(a.fmatter.isNumber(c.decimalPlaces)){var l=c.decimalPlaces,f=Math.pow(10,l),f=Math.round(d*f)/f+"";k=f.lastIndexOf(".");if(0<l){0>k?(f+=g,k=f.length-1):"."!==g&&(f=f.replace(".",g));for(;f.length-1-k<l;)f+="0"}}if(c.thousandsSeparator){l=c.thousandsSeparator;k=f.lastIndexOf(g);k=-1<k?k:f.length;for(var g=f.substring(k),e=-1,m=k;0<m;m--){e++;if(0===e%3&&m!==k&&(!b||1<m))g=l+g;g=f.charAt(m-1)+g}f=g}f=c.prefix?c.prefix+f:f;return c.suffix?f+c.suffix:f}return d},DateFormat:function(d,c,b,f){var g=
/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,k="string"===typeof c?c.match(g):null,g=function(a,b){a=""+a;for(b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},l={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,m,n=["i18n"];n.i18n={dayNames:f.dayNames,monthNames:f.monthNames};d in f.masks&&(d=f.masks[d]);if(c.constructor===Number)"u"==(""+d).toLowerCase()&&(c*=1E3),e=new Date(c);else if(c.constructor===Date)e=c;else if(null!==k)e=new Date(parseInt(k[1],10)),k[3]&&(d=60*Number(k[5])+Number(k[6]),
d*="-"==k[4]?1:-1,d-=e.getTimezoneOffset(),e.setTime(Number(Number(e)+6E4*d)));else{c=(""+c).split(/[\\\/:_;.,\t\T\s-]/);d=d.split(/[\\\/:_;.,\t\T\s-]/);k=0;for(m=d.length;k<m;k++)"M"==d[k]&&(e=a.inArray(c[k],n.i18n.monthNames),-1!==e&&12>e&&(c[k]=e+1)),"F"==d[k]&&(e=a.inArray(c[k],n.i18n.monthNames),-1!==e&&11<e&&(c[k]=e+1-12)),c[k]&&(l[d[k].toLowerCase()]=parseInt(c[k],10));l.f&&(l.m=l.f);if(0===l.m&&0===l.y&&0===l.d)return"&#160;";l.m=parseInt(l.m,10)-1;e=l.y;70<=e&&99>=e?l.y=1900+l.y:0<=e&&69>=
e&&(l.y=2E3+l.y);e=new Date(l.y,l.m,l.d,l.h,l.i,l.s,l.u)}b in f.masks?b=f.masks[b]:b||(b="Y-m-d");d=e.getHours();c=e.getMinutes();l=e.getDate();k=e.getMonth()+1;m=e.getTimezoneOffset();var p=e.getSeconds(),o=e.getMilliseconds(),r=e.getDay(),s=e.getFullYear(),v=(r+6)%7+1,u=(new Date(s,k-1,l)-new Date(s,0,1))/864E5,t={d:g(l),D:n.i18n.dayNames[r],j:l,l:n.i18n.dayNames[r+7],N:v,S:f.S(l),w:r,z:u,W:5>v?Math.floor((u+v-1)/7)+1:Math.floor((u+v-1)/7)||(4>((new Date(s-1,0,1)).getDay()+6)%7?53:52),F:n.i18n.monthNames[k-
1+12],m:g(k),M:n.i18n.monthNames[k-1],n:k,t:"?",L:"?",o:"?",Y:s,y:(""+s).substring(2),a:12>d?f.AmPm[0]:f.AmPm[1],A:12>d?f.AmPm[2]:f.AmPm[3],B:"?",g:d%12||12,G:d,h:g(d%12||12),H:g(d),i:g(c),s:g(p),u:o,e:"?",I:"?",O:(0<m?"-":"+")+g(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),P:"?",T:((""+e).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(e/
1E3)};return b.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return a in t?t[a]:a.substring(1)})}};a.fn.fmatter.defaultFormat=function(d,c){return a.fmatter.isValue(d)&&""!==d?d:c.defaultValue?c.defaultValue:"&#160;"};a.fn.fmatter.email=function(d,c){return a.fmatter.isEmpty(d)?a.fn.fmatter.defaultFormat(d,c):'<a href="mailto:'+d+'">'+d+"</a>"};a.fn.fmatter.checkbox=function(d,c){var b=a.extend({},c.checkbox),f;a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend({},b,
c.colModel.formatoptions));f=!0===b.disabled?'disabled="disabled"':"";if(a.fmatter.isEmpty(d)||a.fmatter.isUndefined(d))d=a.fn.fmatter.defaultFormat(d,b);d=(d+"").toLowerCase();return'<input type="checkbox" '+(0>d.search(/(false|0|no|off)/i)?" checked='checked' ":"")+' value="'+d+'" offval="no" '+f+"/>"};a.fn.fmatter.link=function(d,c){var b={target:c.target},f="";a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend({},b,c.colModel.formatoptions));b.target&&(f="target="+b.target);return a.fmatter.isEmpty(d)?
a.fn.fmatter.defaultFormat(d,c):"<a "+f+' href="'+d+'">'+d+"</a>"};a.fn.fmatter.showlink=function(d,c){var b={baseLinkUrl:c.baseLinkUrl,showAction:c.showAction,addParam:c.addParam||"",target:c.target,idName:c.idName},f="";a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend({},b,c.colModel.formatoptions));b.target&&(f="target="+b.target);b=b.baseLinkUrl+b.showAction+"?"+b.idName+"="+c.rowId+b.addParam;return a.fmatter.isString(d)||a.fmatter.isNumber(d)?"<a "+f+' href="'+b+'">'+d+"</a>":a.fn.fmatter.defaultFormat(d,
c)};a.fn.fmatter.integer=function(d,c){var b=a.extend({},c.integer);a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend({},b,c.colModel.formatoptions));return a.fmatter.isEmpty(d)?b.defaultValue:a.fmatter.util.NumberFormat(d,b)};a.fn.fmatter.number=function(d,c){var b=a.extend({},c.number);a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend({},b,c.colModel.formatoptions));return a.fmatter.isEmpty(d)?b.defaultValue:a.fmatter.util.NumberFormat(d,b)};a.fn.fmatter.currency=function(d,
c){var b=a.extend({},c.currency);a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend({},b,c.colModel.formatoptions));return a.fmatter.isEmpty(d)?b.defaultValue:a.fmatter.util.NumberFormat(d,b)};a.fn.fmatter.date=function(d,c,b,f){b=a.extend({},c.date);a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend({},b,c.colModel.formatoptions));return!b.reformatAfterEdit&&"edit"==f?a.fn.fmatter.defaultFormat(d,c):a.fmatter.isEmpty(d)?a.fn.fmatter.defaultFormat(d,c):a.fmatter.util.DateFormat(b.srcformat,
d,b.newformat,b)};a.fn.fmatter.select=function(d,c){var d=d+"",b=!1,f=[];a.fmatter.isUndefined(c.colModel.formatoptions)?a.fmatter.isUndefined(c.colModel.editoptions)||(b=c.colModel.editoptions.value):b=c.colModel.formatoptions.value;if(b){var g=!0===c.colModel.editoptions.multiple?!0:!1,k=[],l;g&&(k=d.split(","),k=a.map(k,function(b){return a.trim(b)}));if(a.fmatter.isString(b))for(var e=b.split(";"),q=0,n=0;n<e.length;n++)if(l=e[n].split(":"),2<l.length&&(l[1]=m.map(l,function(a,b){if(b>0)return a}).join(":")),
g)-1<m.inArray(l[0],k)&&(f[q]=l[1],q++);else{if(a.trim(l[0])==a.trim(d)){f[0]=l[1];break}}else a.fmatter.isObject(b)&&(g?f=m.map(k,function(a){return b[a]}):f[0]=b[d]||"")}d=f.join(", ");return""===d?a.fn.fmatter.defaultFormat(d,c):d};a.fn.fmatter.rowactions=function(d,c,b,f){var g={keys:!1,editbutton:!0,delbutton:!0,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{oper:"edit"},url:null,delOptions:{}},f=a("#"+c)[0].p.colModel[f];a.fmatter.isUndefined(f.formatoptions)||
(g=a.extend(g,f.formatoptions));var f=function(b){g.afterSave&&g.afterSave(b);a("tr#"+d+" div.ui-inline-edit, tr#"+d+" div.ui-inline-del","#"+c).show();a("tr#"+d+" div.ui-inline-save, tr#"+d+" div.ui-inline-cancel","#"+c).hide()},k=function(b){g.afterRestore&&g.afterRestore(b);a("tr#"+d+" div.ui-inline-edit, tr#"+d+" div.ui-inline-del","#"+c).show();a("tr#"+d+" div.ui-inline-save, tr#"+d+" div.ui-inline-cancel","#"+c).hide()};switch(b){case "edit":a("#"+c).jqGrid("editRow",d,g.keys,g.onEdit,g.onSuccess,
g.url,g.extraparam,f,g.onError,k);a("tr#"+d+" div.ui-inline-edit, tr#"+d+" div.ui-inline-del","#"+c).hide();a("tr#"+d+" div.ui-inline-save, tr#"+d+" div.ui-inline-cancel","#"+c).show();break;case "save":a("#"+c).jqGrid("saveRow",d,g.onSuccess,g.url,g.extraparam,f,g.onError,k)&&(a("tr#"+d+" div.ui-inline-edit, tr#"+d+" div.ui-inline-del","#"+c).show(),a("tr#"+d+" div.ui-inline-save, tr#"+d+" div.ui-inline-cancel","#"+c).hide());break;case "cancel":a("#"+c).jqGrid("restoreRow",d,k);a("tr#"+d+" div.ui-inline-edit, tr#"+
d+" div.ui-inline-del","#"+c).show();a("tr#"+d+" div.ui-inline-save, tr#"+d+" div.ui-inline-cancel","#"+c).hide();break;case "del":a("#"+c).jqGrid("delGridRow",d,g.delOptions)}};a.fn.fmatter.actions=function(d,c){var b={keys:!1,editbutton:!0,delbutton:!0};a.fmatter.isUndefined(c.colModel.formatoptions)||(b=a.extend(b,c.colModel.formatoptions));var f=c.rowId,g="",k;if("undefined"==typeof f||a.fmatter.isEmpty(f))return"";b.editbutton&&(k="onclick=$.fn.fmatter.rowactions('"+f+"','"+c.gid+"','edit',"+
c.pos+");",g=g+"<div style='margin-left:8px;'><div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+k+"><span class='ui-icon ui-icon-pencil'></span></div>");b.delbutton&&(k="onclick=$.fn.fmatter.rowactions('"+f+"','"+c.gid+"','del',"+c.pos+");",g=g+"<div title='"+a.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+k+"><span class='ui-icon ui-icon-trash'></span></div>");k="onclick=$.fn.fmatter.rowactions('"+
f+"','"+c.gid+"','save',"+c.pos+");";g=g+"<div title='"+a.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save'><span class='ui-icon ui-icon-disk' "+k+"></span></div>";k="onclick=$.fn.fmatter.rowactions('"+f+"','"+c.gid+"','cancel',"+c.pos+");";return g+"<div title='"+a.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel'><span class='ui-icon ui-icon-cancel' "+k+"></span></div></div>"};a.unformat=function(d,c,b,
f){var g,k=c.colModel.formatter,l=c.colModel.formatoptions||{},e=/([\.\*\_\'\(\)\{\}\+\?\\])/g,m=c.colModel.unformat||a.fn.fmatter[k]&&a.fn.fmatter[k].unformat;if("undefined"!==typeof m&&a.isFunction(m))g=m(a(d).text(),c,d);else if(!a.fmatter.isUndefined(k)&&a.fmatter.isString(k))switch(g=a.jgrid.formatter||{},k){case "integer":l=a.extend({},g.integer,l);c=l.thousandsSeparator.replace(e,"\\$1");g=a(d).text().replace(RegExp(c,"g"),"");break;case "number":l=a.extend({},g.number,l);c=l.thousandsSeparator.replace(e,
"\\$1");g=a(d).text().replace(RegExp(c,"g"),"").replace(l.decimalSeparator,".");break;case "currency":l=a.extend({},g.currency,l);c=l.thousandsSeparator.replace(e,"\\$1");g=a(d).text().replace(RegExp(c,"g"),"").replace(l.decimalSeparator,".").replace(l.prefix,"").replace(l.suffix,"");break;case "checkbox":l=c.colModel.editoptions?c.colModel.editoptions.value.split(":"):["Yes","No"];g=a("input",d).attr("checked")?l[0]:l[1];break;case "select":g=a.unformat.select(d,c,b,f);break;case "actions":return"";
default:g=a(d).text()}return g?g:!0===f?a(d).text():a.jgrid.htmlDecode(a(d).html())};a.unformat.select=function(d,c,b,f){b=[];d=a(d).text();if(!0===f)return d;c=a.extend({},c.colModel.editoptions);if(c.value){var g=c.value,c=!0===c.multiple?!0:!1,f=[],k;c&&(f=d.split(","),f=a.map(f,function(b){return a.trim(b)}));if(a.fmatter.isString(g))for(var l=g.split(";"),e=0,q=0;q<l.length;q++)if(k=l[q].split(":"),2<k.length&&(k[1]=m.map(k,function(a,b){if(b>0)return a}).join(":")),c)-1<m.inArray(k[1],f)&&(b[e]=
k[0],e++);else{if(a.trim(k[1])==a.trim(d)){b[0]=k[0];break}}else if(a.fmatter.isObject(g)||a.isArray(g))c||(f[0]=d),b=m.map(f,function(b){var c;a.each(g,function(a,e){if(e==b){c=a;return false}});if(typeof c!="undefined")return c});return b.join(", ")}return d||""};a.unformat.date=function(d,c){var b=a.jgrid.formatter.date||{};a.fmatter.isUndefined(c.formatoptions)||(b=a.extend({},b,c.formatoptions));return a.fmatter.isEmpty(d)?a.fn.fmatter.defaultFormat(d,c):a.fmatter.util.DateFormat(b.newformat,
d,b.srcformat,b)}})(m);(function(a){a.jgrid.extend({getColProp:function(a){var c={},b=this[0];if(!b.grid)return!1;for(var b=b.p.colModel,f=0;f<b.length;f++)if(b[f].name==a){c=b[f];break}return c},setColProp:function(d,c){return this.each(function(){if(this.grid&&c)for(var b=this.p.colModel,f=0;f<b.length;f++)if(b[f].name==d){a.extend(this.p.colModel[f],c);break}})},sortGrid:function(a,c,b){return this.each(function(){var f=-1;if(this.grid){a||(a=this.p.sortname);for(var d=0;d<this.p.colModel.length;d++)if(this.p.colModel[d].index==
a||this.p.colModel[d].name==a){f=d;break}-1!=f&&(d=this.p.colModel[f].sortable,"boolean"!==typeof d&&(d=!0),"boolean"!==typeof c&&(c=!1),d&&this.sortData("jqgh_"+a,f,c,b))}})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&a(this.p.pager).remove();var d=this.id;try{a("#gbox_"+d).remove()}catch(c){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var d={id:a(this).attr("id"),cl:a(this).attr("class")};this.p.pager&&a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");
var c=document.createElement("table");a(c).attr({id:d.id});c.className=d.cl;d=this.id;a(c).removeClass("ui-jqgrid-btable");1===a(this.p.pager).parents("#gbox_"+d).length?(a(c).insertBefore("#gbox_"+d).show(),a(this.p.pager).insertBefore("#gbox_"+d)):a(c).insertBefore("#gbox_"+d).show();a("#gbox_"+d).remove()}})},setGridState:function(d){return this.each(function(){this.grid&&("hidden"==d?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+this.p.id).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),
this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+this.p.id).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"==d&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+this.p.id).slideDown("fast"),this.p.pager&&
a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+this.p.id).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(d){d=a.extend({autosearch:!0,
searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},d||{});return this.each(function(){function c(b,c){var d=a(b);d[0]&&m.each(c,function(){void 0!==this.data?d.bind(this.type,this.data,this.fn):d.bind(this.type,this.fn)})}var b=this;if(!this.ftoolbar){var f=function(){var c={},e=0,f,g,k={},m;a.each(b.p.colModel,function(){g=this.index||this.name;switch(this.stype){case "select":m=this.searchoptions&&this.searchoptions.sopt?
this.searchoptions.sopt[0]:"eq";if(f=a("#gs_"+a.jgrid.jqID(g),b.grid.hDiv).val())c[g]=f,k[g]=m,e++;else try{delete b.p.postData[g]}catch(r){}break;case "text":if(m=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:d.defaultSearch,f=a("#gs_"+a.jgrid.jqID(g),b.grid.hDiv).val())c[g]=f,k[g]=m,e++;else try{delete b.p.postData[g]}catch(s){}}});var r=0<e?!0:!1;if(!0===d.stringResult||"local"==b.p.datatype){var s='{"groupOp":"'+d.groupOp+'","rules":[',v=0;a.each(c,function(a,b){0<v&&
(s+=",");s+='{"field":"'+a+'",';s+='"op":"'+k[a]+'",';s+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';v++});s+="]}";a.extend(b.p.postData,{filters:s});a.each(["searchField","searchString","searchOper"],function(a,c){b.p.postData.hasOwnProperty(c)&&delete b.p.postData[c]})}else a.extend(b.p.postData,c);var u;b.p.searchurl&&(u=b.p.url,a(b).jqGrid("setGridParam",{url:b.p.searchurl}));var t=!1;a.isFunction(d.beforeSearch)&&(t=d.beforeSearch.call(b));t||a(b).jqGrid("setGridParam",
{search:r}).trigger("reloadGrid",[{page:1}]);u&&a(b).jqGrid("setGridParam",{url:u});a.isFunction(d.afterSearch)&&d.afterSearch()},g=a("<tr class='ui-search-toolbar' role='rowheader'></tr>"),k;a.each(b.p.colModel,function(){var l=this,e,m,n,p;m=a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+b.p.direction+"'></th>");e=a("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>");!0===this.hidden&&a(m).css("display","none");this.search=!1===this.search?
!1:!0;"undefined"==typeof this.stype&&(this.stype="text");n=a.extend({},this.searchoptions||{});if(this.search)switch(this.stype){case "select":if(p=this.surl||n.dataUrl)a.ajax(a.extend({url:p,dataType:"html",complete:function(b){n.buildSelect!==void 0?(b=n.buildSelect(b))&&a(e).append(b):a(e).append(b.responseText);n.defaultValue&&a("select",e).val(n.defaultValue);a("select",e).attr({name:l.index||l.name,id:"gs_"+l.name});n.attr&&a("select",e).attr(n.attr);a("select",e).css({width:"100%"});n.dataInit!==
void 0&&n.dataInit(a("select",e)[0]);n.dataEvents!==void 0&&c(a("select",e)[0],n.dataEvents);d.autosearch===true&&a("select",e).change(function(){f();return false});b=null}},a.jgrid.ajaxOptions,b.p.ajaxSelectOptions||{}));else{var o;l.searchoptions&&l.searchoptions.value?o=l.searchoptions.value:l.editoptions&&l.editoptions.value&&(o=l.editoptions.value);if(o){p=document.createElement("select");p.style.width="100%";a(p).attr({name:l.index||l.name,id:"gs_"+l.name});var r,s;if("string"===typeof o){o=
o.split(";");for(var v=0;v<o.length;v++)r=o[v].split(":"),s=document.createElement("option"),s.value=r[0],s.innerHTML=r[1],p.appendChild(s)}else if("object"===typeof o)for(r in o)o.hasOwnProperty(r)&&(s=document.createElement("option"),s.value=r,s.innerHTML=o[r],p.appendChild(s));n.defaultValue&&a(p).val(n.defaultValue);n.attr&&a(p).attr(n.attr);void 0!==n.dataInit&&n.dataInit(p);void 0!==n.dataEvents&&c(p,n.dataEvents);a(e).append(p);!0===d.autosearch&&a(p).change(function(){f();return false})}}break;
case "text":p=n.defaultValue?n.defaultValue:"",a(e).append("<input type='text' style='width:95%;padding:0px;' name='"+(l.index||l.name)+"' id='gs_"+l.name+"' value='"+p+"'/>"),n.attr&&a("input",e).attr(n.attr),void 0!==n.dataInit&&n.dataInit(a("input",e)[0]),void 0!==n.dataEvents&&c(a("input",e)[0],n.dataEvents),!0===d.autosearch&&(d.searchOnEnter?a("input",e).keypress(function(a){if((a.charCode?a.charCode:a.keyCode?a.keyCode:0)==13){f();return false}return this}):a("input",e).keydown(function(a){switch(a.which){case 13:return false;
case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:k&&clearTimeout(k);k=setTimeout(function(){f()},500)}}))}a(m).append(e);a(g).append(m)});a("table thead",b.grid.hDiv).append(g);this.ftoolbar=!0;this.triggerToolbar=f;this.clearToolbar=function(c){var e={},f,g=0,k,c="boolean"!=typeof c?!0:c;a.each(b.p.colModel,function(){f=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"";k=this.index||this.name;switch(this.stype){case "select":var c;a("#gs_"+
a.jgrid.jqID(k)+" option",b.grid.hDiv).each(function(b){0===b&&(this.selected=!0);if(a(this).text()==f)return this.selected=!0,c=a(this).val(),!1});if(c)e[k]=c,g++;else try{delete b.p.postData[k]}catch(d){}break;case "text":if(a("#gs_"+a.jgrid.jqID(k),b.grid.hDiv).val(f),f)e[k]=f,g++;else try{delete b.p.postData[k]}catch(j){}}});var m=0<g?!0:!1;if(!0===d.stringResult||"local"==b.p.datatype){var r='{"groupOp":"'+d.groupOp+'","rules":[',s=0;a.each(e,function(a,b){0<s&&(r+=",");r+='{"field":"'+a+'",';
r+='"op":"eq",';r+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';s++});r+="]}";a.extend(b.p.postData,{filters:r});a.each(["searchField","searchString","searchOper"],function(a,c){b.p.postData.hasOwnProperty(c)&&delete b.p.postData[c]})}else a.extend(b.p.postData,e);var v;b.p.searchurl&&(v=b.p.url,a(b).jqGrid("setGridParam",{url:b.p.searchurl}));var u=!1;a.isFunction(d.beforeClear)&&(u=d.beforeClear.call(b));u||c&&a(b).jqGrid("setGridParam",{search:m}).trigger("reloadGrid",[{page:1}]);
v&&a(b).jqGrid("setGridParam",{url:v});a.isFunction(d.afterClear)&&d.afterClear()};this.toggleToolbar=function(){var c=a("tr.ui-search-toolbar",b.grid.hDiv);"none"==c.css("display")?c.show():c.hide()}}})}})})(m);(function(a){a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(d,c){c=a.extend({jqm:!0,gb:""},c||{});if(c.onClose){var b=c.onClose(d);if("boolean"==typeof b&&!b)return}if(a.fn.jqm&&!0===c.jqm)a(d).attr("aria-hidden",
"true").jqmHide();else{if(""!==c.gb)try{a(".jqgrid-overlay:first",c.gb).hide()}catch(f){}a(d).hide().attr("aria-hidden","true")}},findPos:function(a){var c=0,b=0;if(a.offsetParent){do c+=a.offsetLeft,b+=a.offsetTop;while(a=a.offsetParent)}return[c,b]},createModal:function(d,c,b,f,g,k,l){var e=document.createElement("div"),m,n=this,l=a.extend({},l||{});m="rtl"==a(b.gbox).attr("dir")?!0:!1;e.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";e.id=d.themodal;var p=document.createElement("div");
p.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";p.id=d.modalhead;a(p).append("<span class='ui-jqdialog-title'>"+b.caption+"</span>");var o=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(p).append(o);m?(e.dir="rtl",a(".ui-jqdialog-title",p).css("float","right"),a(".ui-jqdialog-titlebar-close",
p).css("left","0.3em")):(e.dir="ltr",a(".ui-jqdialog-title",p).css("float","left"),a(".ui-jqdialog-titlebar-close",p).css("right","0.3em"));var r=document.createElement("div");a(r).addClass("ui-jqdialog-content ui-widget-content").attr("id",d.modalcontent);a(r).append(c);e.appendChild(r);a(e).prepend(p);!0===k?a("body").append(e):"string"==typeof k?a(k).append(e):a(e).insertBefore(f);a(e).css(l);"undefined"===typeof b.jqModal&&(b.jqModal=!0);c={};if(a.fn.jqm&&!0===b.jqModal)0===b.left&&(0===b.top&&
b.overlay)&&(l=[],l=this.findPos(g),b.left=l[0]+4,b.top=l[1]+4),c.top=b.top+"px",c.left=b.left;else if(0!==b.left||0!==b.top)c.left=b.left,c.top=b.top+"px";a("a.ui-jqdialog-titlebar-close",p).click(function(){var c=a("#"+d.themodal).data("onClose")||b.onClose,e=a("#"+d.themodal).data("gbox")||b.gbox;n.hideModal("#"+d.themodal,{gb:e,jqm:b.jqModal,onClose:c});return false});if(0===b.width||!b.width)b.width=300;if(0===b.height||!b.height)b.height=200;b.zIndex||(f=a(f).parents("*[role=dialog]").filter(":first").css("z-index"),
b.zIndex=f?parseInt(f,10)+1:950);f=0;m&&(c.left&&!k)&&(f=a(b.gbox).width()-(!isNaN(b.width)?parseInt(b.width,10):0)-8,c.left=parseInt(c.left,10)+parseInt(f,10));c.left&&(c.left+="px");a(e).css(a.extend({width:isNaN(b.width)?"auto":b.width+"px",height:isNaN(b.height)?"auto":b.height+"px",zIndex:b.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":d.modalhead,"aria-hidden":"true"});"undefined"==typeof b.drag&&(b.drag=!0);"undefined"==typeof b.resize&&(b.resize=!0);if(b.drag)if(a(p).css("cursor",
"move"),a.fn.jqDrag)a(e).jqDrag(p);else try{a(e).draggable({handle:a("#"+p.id)})}catch(s){}if(b.resize)if(a.fn.jqResize)a(e).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),a("#"+d.themodal).jqResize(".jqResize",d.scrollelm?"#"+d.scrollelm:!1);else try{a(e).resizable({handles:"se, sw",alsoResize:d.scrollelm?"#"+d.scrollelm:!1})}catch(v){}!0===b.closeOnEscape&&a(e).keydown(function(c){if(c.which==27){c=a("#"+
d.themodal).data("onClose")||b.onClose;n.hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:c})}})},viewModal:function(d,c){c=a.extend({toTop:!0,overlay:10,modal:!1,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:!0,jqM:!0},c||{});if(a.fn.jqm&&!0===c.jqm)c.jqM?a(d).attr("aria-hidden","false").jqm(c).jqmShow():a(d).attr("aria-hidden","false").jqmShow();else{""!==c.gbox&&(a(".jqgrid-overlay:first",c.gbox).show(),a(d).data("gbox",c.gbox));a(d).show().attr("aria-hidden","false");try{a(":input:visible",
d)[0].focus()}catch(b){}}},info_dialog:function(d,c,b,f){var g={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+d+"</b>",left:250,top:170,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(g,f||{});var k=g.jqModal,l=this;a.fn.jqm&&!k&&(k=!1);d="";if(0<g.buttons.length)for(f=0;f<g.buttons.length;f++)"undefined"==typeof g.buttons[f].id&&(g.buttons[f].id="info_button_"+f),d+="<a href='javascript:void(0)' id='"+g.buttons[f].id+
"' class='fm-button ui-state-default ui-corner-all'>"+g.buttons[f].text+"</a>";f=isNaN(g.dataheight)?g.dataheight:g.dataheight+"px";c="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+f+";"+("text-align:"+g.align+";")+"'>"+c+"</div>");c+=b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
b+"</a>"+d+"</div>":""!==d?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+d+"</div>":"";c+="</div>";try{"false"==a("#info_dialog").attr("aria-hidden")&&this.hideModal("#info_dialog",{jqm:k}),a("#info_dialog").remove()}catch(e){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},c,g,"","",!0);d&&a.each(g.buttons,
function(b){a("#"+this.id,"#info_id").bind("click",function(){g.buttons[b].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").click(function(){l.hideModal("#info_dialog",{jqm:k});return!1});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(g.beforeOpen)&&g.beforeOpen();this.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:g.modal,jqm:k});
a.isFunction(g.afterOpen)&&g.afterOpen();try{a("#info_dialog").focus()}catch(m){}},createEl:function(d,c,b,f,g){function k(b,c){a.isFunction(c.dataInit)&&c.dataInit(b);c.dataEvents&&a.each(c.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)});return c}function l(b,c){var e="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr".split(" ");a.each(c,function(c,d){-1===a.inArray(c,e)&&a(b).attr(c,d)});c.hasOwnProperty("id")||
a(b).attr("id",a.jgrid.randId())}var e="";switch(d){case "textarea":e=document.createElement("textarea");f?c.cols||a(e).css({width:"98%"}):c.cols||(c.cols=20);c.rows||(c.rows=2);if("&nbsp;"==b||"&#160;"==b||1==b.length&&160==b.charCodeAt(0))b="";e.value=b;l(e,c);c=k(e,c);a(e).attr({role:"textbox",multiline:"true"});break;case "checkbox":e=document.createElement("input");e.type="checkbox";c.value?(d=c.value.split(":"),b===d[0]&&(e.checked=!0,e.defaultChecked=!0),e.value=d[0],a(e).attr("offval",d[1])):
(d=b.toLowerCase(),0>d.search(/(false|0|no|off|undefined)/i)&&""!==d?(e.checked=!0,e.defaultChecked=!0,e.value=b):e.value="on",a(e).attr("offval","off"));l(e,c);c=k(e,c);a(e).attr("role","checkbox");break;case "select":e=document.createElement("select");e.setAttribute("role","select");f=[];!0===c.multiple?(d=!0,e.multiple="multiple",a(e).attr("aria-multiselectable","true")):d=!1;if("undefined"!=typeof c.dataUrl)a.ajax(a.extend({url:c.dataUrl,type:"GET",dataType:"html",context:{elem:e,options:c,vl:b},
success:function(b){var c=[],e=this.elem,d=this.vl,f=a.extend({},this.options),j=f.multiple===true;typeof f.buildSelect!="undefined"&&(b=f.buildSelect(b));if(b=a(b).html()){a(e).append(b);l(e,f);f=k(e,f);if(typeof f.size==="undefined")f.size=j?3:1;if(j){c=d.split(",");c=a.map(c,function(b){return a.trim(b)})}else c[0]=a.trim(d);setTimeout(function(){a("option",e).each(function(){a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),c)>-1||a.inArray(a.trim(a(this).val()),c)>-1)this.selected=
"selected"})},0)}}},g||{}));else if(c.value){var m;d?(f=b.split(","),f=a.map(f,function(b){return a.trim(b)}),"undefined"===typeof c.size&&(c.size=3)):c.size=1;"function"===typeof c.value&&(c.value=c.value());var n,p;if("string"===typeof c.value){n=c.value.split(";");for(m=0;m<n.length;m++){p=n[m].split(":");2<p.length&&(p[1]=a.map(p,function(a,b){if(b>0)return a}).join(":"));g=document.createElement("option");g.setAttribute("role","option");g.value=p[0];g.innerHTML=p[1];if(!d&&(a.trim(p[0])==a.trim(b)||
a.trim(p[1])==a.trim(b)))g.selected="selected";if(d&&(-1<a.inArray(a.trim(p[1]),f)||-1<a.inArray(a.trim(p[0]),f)))g.selected="selected";e.appendChild(g)}}else if("object"===typeof c.value)for(m in n=c.value,n)if(n.hasOwnProperty(m)){g=document.createElement("option");g.setAttribute("role","option");g.value=m;g.innerHTML=n[m];if(!d&&(a.trim(m)==a.trim(b)||a.trim(n[m])==a.trim(b)))g.selected="selected";if(d&&(-1<a.inArray(a.trim(n[m]),f)||-1<a.inArray(a.trim(m),f)))g.selected="selected";e.appendChild(g)}l(e,
c);c=k(e,c)}break;case "text":case "password":case "button":m="button"==d?"button":"textbox";e=document.createElement("input");e.type=d;e.value=b;l(e,c);c=k(e,c);"button"!=d&&(f?c.size||a(e).css({width:"98%"}):c.size||(c.size=20));a(e).attr("role",m);break;case "image":case "file":e=document.createElement("input");e.type=d;l(e,c);c=k(e,c);break;case "custom":e=document.createElement("span");try{if(a.isFunction(c.custom_element))if(n=c.custom_element.call(this,b,c))n=a(n).addClass("customelement").attr({id:c.id,
name:c.name}),a(e).empty().append(n);else throw"e2";else throw"e1";}catch(o){"e1"==o&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"==o?this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):this.info_dialog(a.jgrid.errors.errcap,"string"===typeof o?o:o.message,a.jgrid.edit.bClose)}}return e},checkDate:function(a,c){var b={},d,a=a.toLowerCase();d=-1!=a.indexOf("/")?
"/":-1!=a.indexOf("-")?"-":-1!=a.indexOf(".")?".":"/";a=a.split(d);c=c.split(d);if(3!=c.length)return!1;d=-1;for(var g,k=-1,l=-1,e=0;e<a.length;e++)g=isNaN(c[e])?0:parseInt(c[e],10),b[a[e]]=g,g=a[e],-1!=g.indexOf("y")&&(d=e),-1!=g.indexOf("m")&&(l=e),-1!=g.indexOf("d")&&(k=e);g="y"==a[d]||"yyyy"==a[d]?4:"yy"==a[d]?2:-1;var e=function(a){for(var b=1;b<=a;b++){this[b]=31;if(4==b||6==b||9==b||11==b)this[b]=30;2==b&&(this[b]=29)}return this}(12),m;if(-1===d)return!1;m=b[a[d]].toString();2==g&&1==m.length&&
(g=1);if(m.length!=g||0===b[a[d]]&&"00"!=c[d]||-1===l)return!1;m=b[a[l]].toString();if(1>m.length||(1>b[a[l]]||12<b[a[l]])||-1===k)return!1;m=b[a[k]].toString();return 1>m.length||1>b[a[k]]||31<b[a[k]]||2==b[a[l]]&&b[a[k]]>(0===b[a[d]]%4&&(0!==b[a[d]]%100||0===b[a[d]]%400)?29:28)||b[a[k]]>e[b[a[l]]]?!1:!0},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(a){var c=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(a))if(a=a.match(c)){if(a[3]){if(1>a[1]||12<a[1])return!1}else if(23<
a[1])return!1;if(59<a[2])return!1}else return!1;return!0},checkValues:function(d,c,b,f,g){var k,l;if("undefined"===typeof f)if("string"==typeof c){f=0;for(g=b.p.colModel.length;f<g;f++)if(b.p.colModel[f].name==c){k=b.p.colModel[f].editrules;c=f;try{l=b.p.colModel[f].formoptions.label}catch(e){}break}}else 0<=c&&(k=b.p.colModel[c].editrules);else k=f,l=void 0===g?"_":g;if(k){l||(l=b.p.colNames[c]);if(!0===k.required&&this.isEmpty(d))return[!1,l+": "+a.jgrid.edit.msg.required,""];f=!1===k.required?
!1:!0;if(!0===k.number&&!(!1===f&&this.isEmpty(d))&&isNaN(d))return[!1,l+": "+a.jgrid.edit.msg.number,""];if("undefined"!=typeof k.minValue&&!isNaN(k.minValue)&&parseFloat(d)<parseFloat(k.minValue))return[!1,l+": "+a.jgrid.edit.msg.minValue+" "+k.minValue,""];if("undefined"!=typeof k.maxValue&&!isNaN(k.maxValue)&&parseFloat(d)>parseFloat(k.maxValue))return[!1,l+": "+a.jgrid.edit.msg.maxValue+" "+k.maxValue,""];if(!0===k.email&&!(!1===f&&this.isEmpty(d))&&(g=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
!g.test(d)))return[!1,l+": "+a.jgrid.edit.msg.email,""];if(!0===k.integer&&!(!1===f&&this.isEmpty(d))&&(isNaN(d)||0!==d%1||-1!=d.indexOf(".")))return[!1,l+": "+a.jgrid.edit.msg.integer,""];if(!0===k.date&&!(!1===f&&this.isEmpty(d))&&(c=b.p.colModel[c].formatoptions&&b.p.colModel[c].formatoptions.newformat?b.p.colModel[c].formatoptions.newformat:b.p.colModel[c].datefmt||"Y-m-d",!this.checkDate(c,d)))return[!1,l+": "+a.jgrid.edit.msg.date+" - "+c,""];if(!0===k.time&&!(!1===f&&this.isEmpty(d))&&!this.checkTime(d))return[!1,
l+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!0===k.url&&!(!1===f&&this.isEmpty(d))&&(g=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!g.test(d)))return[!1,l+": "+a.jgrid.edit.msg.url,""];if(!0===k.custom&&!(!1===f&&this.isEmpty(d)))return a.isFunction(k.custom_func)?(d=k.custom_func.call(b,d,l),a.isArray(d)?d:[!1,a.jgrid.edit.msg.customarray,""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})})(m);(function(a){var j=
null;a.jgrid.extend({searchGrid:function(c){c=a.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!1,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,
onReset:null,toTop:!0,overlay:10,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null},a.jgrid.search,c||{});return this.each(function(){function b(){a.isFunction(c.beforeShowSearch)&&(k=c.beforeShowSearch(a("#"+j)),"undefined"===typeof k&&(k=!0));k&&(a.jgrid.viewModal("#"+l.themodal,{gbox:"#gbox_"+j,jqm:c.jqModal,modal:c.modal,overlay:c.overlay,toTop:c.toTop}),a.isFunction(c.afterShowSearch)&&c.afterShowSearch(a("#"+j)))}var f=this;if(f.grid){var j="fbox_"+
f.p.id,k=!0,l={themodal:"searchmod"+j,modalhead:"searchhd"+j,modalcontent:"searchcnt"+j,scrollelm:j},e=f.p.postData[c.sFilter];"string"===typeof e&&(e=a.jgrid.parse(e));!0===c.recreateFilter&&a("#"+l.themodal).remove();if(null!==a("#"+l.themodal).html())b();else{var m=a("<span><div id='"+j+"' class='searchFilter' style='overflow:auto'></div></span>").insertBefore("#gview_"+f.p.id);if(a.isFunction(c.onInitializeSearch))c.onInitializeSearch(a("#"+j));var n=a.extend([],f.p.colModel),p="<a href='javascript:void(0)' id='"+
j+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+c.Find+"</a>",o="<a href='javascript:void(0)' id='"+j+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+c.Reset+"</a>",r="",s="",v,u=!1;c.showQuery&&(r="<a href='javascript:void(0)' id='"+j+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>");
c.columns.length?n=c.columns:a.each(n,function(a,b){b.label||(b.label=f.p.colNames[a]);if(!u){var c="undefined"===typeof b.search?!0:b.search,e=!0===b.hidden;if(b.searchoptions&&!0===b.searchoptions.searchhidden&&c||c&&!e)u=!0,v=b.index||b.name}});if(!e&&v||!1===c.multipleSearch)e={groupOp:"AND",rules:[{field:v,op:"eq",data:""}]};u=!1;c.tmplNames&&c.tmplNames.length&&(u=!0,s=c.tmplLabel,s+="<select class='ui-template'>",s+="<option value='default'>Default</option>",a.each(c.tmplNames,function(a,b){s+=
"<option value='"+a+"'>"+b+"</option>"}),s+="</select>");p="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+j+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:left'>"+o+s+"</td><td class='EditButton'>"+r+p+"</td></tr></tbody></table>";a("#"+j).jqFilter({columns:n,filter:c.loadDefaults?e:null,showQuery:c.showQuery,errorcheck:c.errorcheck,sopt:c.sopt,groupButton:c.multipleGroup,_gridsopt:a.jgrid.search.odata,
onChange:function(){this.p.showQuery&&a(".query",this).html(this.toUserFriendlyString())}});m.append(p);u&&c.tmplFilters&&c.tmplFilters.length&&a(".ui-template",m).bind("change",function(){var b=a(this).val();b=="default"?a("#"+j).jqFilter("addFilter",e):a("#"+j).jqFilter("addFilter",c.tmplFilters[parseInt(b,10)]);return false});!1===c.multipleSearch&&(a(".add-rule","#"+j).hide(),a(".delete-rule","#"+j).hide());if(a.isFunction(c.onInitializeSearch))c.onInitializeSearch(a("#"+j));c.layer?a.jgrid.createModal(l,
m,c,"#gview_"+f.p.id,a("#gbox_"+f.p.id)[0],"#"+c.layer,{position:"relative"}):a.jgrid.createModal(l,m,c,"#gview_"+f.p.id,a("#gbox_"+f.p.id)[0]);r&&a("#"+j+"_query").bind("click",function(){a(".queryresult",m).toggle();return false});void 0===c.stringResult&&(c.stringResult=c.multipleSearch);a("#"+j+"_search").bind("click",function(){var b=a("#"+j),e={},k,m=b.jqFilter("filterData");if(c.errorcheck){b[0].hideError();c.showQuery||b.jqFilter("toSQLString");if(b[0].p.error){b[0].showError();return false}}if(c.stringResult){try{k=
d.toJson(m,"","",false)}catch(n){try{k=ia.stringify(m)}catch(o){}}if(typeof k==="string"){e[c.sFilter]=k;a.each([c.sField,c.sValue,c.sOper],function(){e[this]=""})}}else if(c.multipleSearch){e[c.sFilter]=m;a.each([c.sField,c.sValue,c.sOper],function(){e[this]=""})}else{e[c.sField]=m.rules[0].field;e[c.sValue]=m.rules[0].data;e[c.sOper]=m.rules[0].op;e[c.sFilter]=""}f.p.search=true;a.extend(f.p.postData,e);if(a.isFunction(c.onSearch))c.onSearch();a(f).trigger("reloadGrid",[{page:1}]);c.closeAfterSearch&&
a.jgrid.hideModal("#"+l.themodal,{gb:"#gbox_"+f.p.id,jqm:c.jqModal,onClose:c.onClose});return false});a("#"+j+"_reset").bind("click",function(){var b={},e=a("#"+j);f.p.search=false;c.multipleSearch===false?b[c.sField]=b[c.sValue]=b[c.sOper]="":b[c.sFilter]="";e[0].resetFilter();u&&a(".ui-template",m).val("default");a.extend(f.p.postData,b);if(a.isFunction(c.onReset))c.onReset();a(f).trigger("reloadGrid",[{page:1}]);return false});b();a(".fm-button:not(.ui-state-disabled)",m).hover(function(){a(this).addClass("ui-state-hover")},
function(){a(this).removeClass("ui-state-hover")})}}})},editGridRow:function(c,b){j=b=a.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:10,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,
closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},a.jgrid.edit,b||{});return this.each(function(){function d(){a(".FormElement","#"+t).each(function(){var b=a(".customelement",this);if(b.length){var c=a(b[0]).attr("name");a.each(s.p.colModel,function(){if(this.name===c&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{if(E[c]=
this.editoptions.custom_value(a("#"+a.jgrid.jqID(c),"#"+t),"get"),void 0===E[c])throw"e1";}catch(b){"e1"===b?a.jgrid.info_dialog(m.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,m.jgrid.edit.bClose):a.jgrid.info_dialog(m.jgrid.errors.errcap,b.message,m.jgrid.edit.bClose)}return!0}})}else{switch(a(this).get(0).type){case "checkbox":a(this).attr("checked")?E[this.name]=a(this).val():(b=a(this).attr("offval"),E[this.name]=b);break;case "select-one":E[this.name]=a("option:selected",
this).val();B[this.name]=a("option:selected",this).text();break;case "select-multiple":E[this.name]=a(this).val();E[this.name]=E[this.name]?E[this.name].join(","):"";var e=[];a("option:selected",this).each(function(b,c){e[b]=a(c).text()});B[this.name]=e.join(",");break;case "password":case "text":case "textarea":case "button":E[this.name]=a(this).val()}s.p.autoencode&&(E[this.name]=a.jgrid.htmlEncode(E[this.name]))}});return!0}function g(b,c,e,d){var f,g,k=0,l,m,n,o=[],p=!1,q="",r;for(r=1;r<=d;r++)q+=
"<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!=b&&(p=a(c).jqGrid("getInd",b));a(c.p.colModel).each(function(r){f=this.name;m=(this.editrules&&!0===this.editrules.edithidden?0:!0===this.hidden)?"style='display:none'":"";if("cb"!==f&&"subgrid"!==f&&!0===this.editable&&"rn"!==f){if(!1===p)l="";else if(f==c.p.ExpandColumn&&!0===c.p.treeGrid)l=a("td:eq("+r+")",c.rows[p]).text();else try{l=a.unformat(a("td:eq("+r+")",c.rows[p]),{rowId:b,colModel:this},r)}catch(t){l=a("td:eq("+
r+")",c.rows[p]).text()}var v=a.extend({},this.editoptions||{},{id:f,name:f}),u=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),x=parseInt(u.rowpos,10)||k+1,y=parseInt(2*(parseInt(u.colpos,10)||1),10);"_empty"==b&&v.defaultValue&&(l=a.isFunction(v.defaultValue)?v.defaultValue():v.defaultValue);this.edittype||(this.edittype="text");s.p.autoencode&&(l=a.jgrid.htmlDecode(l));n=a.jgrid.createEl(this.edittype,v,l,!1,a.extend({},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||
{}));""===l&&"checkbox"==this.edittype&&(l=a(n).attr("offval"));""===l&&"select"==this.edittype&&(l=a("option:eq(0)",n).text());if(j.checkOnSubmit||j.checkOnUpdate)j._savedData[f]=l;a(n).addClass("FormElement");("text"==this.edittype||"textarea"==this.edittype)&&a(n).addClass("ui-widget-content ui-corner-all");g=a(e).find("tr[rowpos="+x+"]");u.rowabove&&(v=a("<tr><td class='contentinfo' colspan='"+2*d+"'>"+u.rowcontent+"</td></tr>"),a(e).append(v),v[0].rp=x);0===g.length&&(g=a("<tr "+m+" rowpos='"+
x+"'></tr>").addClass("FormData").attr("id","tr_"+f),a(g).append(q),a(e).append(g),g[0].rp=x);a("td:eq("+(y-2)+")",g[0]).html("undefined"===typeof u.label?c.p.colNames[r]:u.label);a("td:eq("+(y-1)+")",g[0]).append(u.elmprefix).append(n).append(u.elmsuffix);o[k]=r;k++}});if(0<k&&(r=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*d-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+c.p.id+"_id' value='"+b+"'/></td></tr>"),r[0].rp=
k+999,a(e).append(r),j.checkOnSubmit||j.checkOnUpdate))j._savedData[c.p.id+"_id"]=b;return o}function k(b,c,e){var d,f=0,g,k,l,n,o;if(j.checkOnSubmit||j.checkOnUpdate)j._savedData={},j._savedData[c.p.id+"_id"]=b;var p=c.p.colModel;if("_empty"==b)a(p).each(function(){d=this.name;l=a.extend({},this.editoptions||{});if((k=a("#"+a.jgrid.jqID(d),"#"+e))&&null!==k[0])if(n="",l.defaultValue?(n=a.isFunction(l.defaultValue)?l.defaultValue():l.defaultValue,"checkbox"==k[0].type?(o=n.toLowerCase(),0>o.search(/(false|0|no|off|undefined)/i)&&
""!==o?(k[0].checked=!0,k[0].defaultChecked=!0,k[0].value=n):k.attr({checked:"",defaultChecked:""})):k.val(n)):"checkbox"==k[0].type?(k[0].checked=!1,k[0].defaultChecked=!1,n=a(k).attr("offval")):k[0].type&&"select"==k[0].type.substr(0,6)?k[0].selectedIndex=0:k.val(n),!0===j.checkOnSubmit||j.checkOnUpdate)j._savedData[d]=n}),a("#id_g","#"+e).val(b);else{var q=a(c).jqGrid("getInd",b,!0);q&&(a("td",q).each(function(k){d=p[k].name;if("cb"!==d&&"subgrid"!==d&&"rn"!==d&&!0===p[k].editable){if(d==c.p.ExpandColumn&&
!0===c.p.treeGrid)g=a(this).text();else try{g=a.unformat(a(this),{rowId:b,colModel:p[k]},k)}catch(l){g=a(this).text()}s.p.autoencode&&(g=a.jgrid.htmlDecode(g));if(!0===j.checkOnSubmit||j.checkOnUpdate)j._savedData[d]=g;d=a.jgrid.jqID(d);switch(p[k].edittype){case "password":case "text":case "button":case "image":a("#"+d,"#"+e).val(g);break;case "textarea":if("&nbsp;"==g||"&#160;"==g||1==g.length&&160==g.charCodeAt(0))g="";a("#"+d,"#"+e).val(g);break;case "select":var n=g.split(","),n=a.map(n,function(b){return a.trim(b)});
a("#"+d+" option","#"+e).each(function(){this.selected=!p[k].editoptions.multiple&&(n[0]==a.trim(a(this).text())||n[0]==a.trim(a(this).val()))?!0:p[k].editoptions.multiple?-1<a.inArray(a.trim(a(this).text()),n)||-1<a.inArray(a.trim(a(this).val()),n)?!0:!1:!1});break;case "checkbox":g+="";p[k].editoptions&&p[k].editoptions.value?p[k].editoptions.value.split(":")[0]==g?(a("#"+d,"#"+e).attr("checked",!0),a("#"+d,"#"+e).attr("defaultChecked",!0)):(a("#"+d,"#"+e).attr("checked",!1),a("#"+d,"#"+e).attr("defaultChecked",
"")):(g=g.toLowerCase(),0>g.search(/(false|0|no|off|undefined)/i)&&""!==g?(a("#"+d,"#"+e).attr("checked",!0),a("#"+d,"#"+e).attr("defaultChecked",!0)):(a("#"+d,"#"+e).attr("checked",!1),a("#"+d,"#"+e).attr("defaultChecked","")));break;case "custom":try{if(p[k].editoptions&&a.isFunction(p[k].editoptions.custom_value))p[k].editoptions.custom_value(a("#"+d,"#"+e),"set",g);else throw"e1";}catch(o){"e1"==o?a.jgrid.info_dialog(m.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,
m.jgrid.edit.bClose):a.jgrid.info_dialog(m.jgrid.errors.errcap,o.message,m.jgrid.edit.bClose)}}f++}}),0<f&&a("#id_g","#"+t).val(b))}}function l(){var c,e=[!0,"",""],d={},f=s.p.prmNames,g,l,m,n;if(a.isFunction(j.beforeCheckValues)){var o=j.beforeCheckValues(E,a("#"+u),"_empty"==E[s.p.id+"_id"]?f.addoper:f.editoper);o&&"object"===typeof o&&(E=o)}for(m in E)if(E.hasOwnProperty(m)&&(e=a.jgrid.checkValues(E[m],m,s),!1===e[0]))break;e[0]&&(a.isFunction(j.onclickSubmit)&&(d=j.onclickSubmit(j,E)||{}),a.isFunction(j.beforeSubmit)&&
(e=j.beforeSubmit(E,a("#"+u))));if(e[0]&&!j.processing){j.processing=!0;a("#sData","#"+t+"_2").addClass("ui-state-active");l=f.oper;g=f.id;E[l]="_empty"==a.trim(E[s.p.id+"_id"])?f.addoper:f.editoper;E[l]!=f.addoper?E[g]=E[s.p.id+"_id"]:void 0===E[g]&&(E[g]=E[s.p.id+"_id"]);delete E[s.p.id+"_id"];E=a.extend(E,j.editData,d);if(!0===s.p.treeGrid)for(i in E[l]==f.addoper&&(n=a(s).jqGrid("getGridParam","selrow"),E["adjacency"==s.p.treeGridModel?s.p.treeReader.parent_id_field:"parent_id"]=n),s.p.treeReader)d=
s.p.treeReader[i],E.hasOwnProperty(d)&&(E[l]==f.addoper&&"parent_id_field"===i||delete E[d]);d=a.extend({url:j.url?j.url:a(s).jqGrid("getGridParam","editurl"),type:j.mtype,data:a.isFunction(j.serializeEditData)?j.serializeEditData(E):E,complete:function(d,m){if(m!="success"){e[0]=false;e[1]=a.isFunction(j.errorTextFormat)?j.errorTextFormat(d):m+" Status: '"+d.statusText+"'. Error code: "+d.status}else a.isFunction(j.afterSubmit)&&(e=j.afterSubmit(d,E));if(e[0]===false){a("#FormError>td","#"+t).html(e[1]);
a("#FormError","#"+t).show()}else{a.each(s.p.colModel,function(){if(B[this.name]&&this.formatter&&this.formatter=="select")try{delete B[this.name]}catch(a){}});E=a.extend(E,B);s.p.autoencode&&a.each(E,function(b,c){E[b]=a.jgrid.htmlDecode(c)});j.reloadAfterSubmit=j.reloadAfterSubmit&&s.p.datatype!="local";if(E[l]==f.addoper){e[2]||(e[2]=a.jgrid.randId());E[g]=e[2];if(j.closeAfterAdd){if(j.reloadAfterSubmit)a(s).trigger("reloadGrid");else if(s.p.treeGrid===true)a(s).jqGrid("addChildNode",e[2],n,E);
else{a(s).jqGrid("addRowData",e[2],E,b.addedrow);a(s).jqGrid("setSelection",e[2])}a.jgrid.hideModal("#"+x.themodal,{gb:"#gbox_"+v,jqm:b.jqModal,onClose:j.onClose})}else if(j.clearAfterAdd){j.reloadAfterSubmit?a(s).trigger("reloadGrid"):s.p.treeGrid===true?a(s).jqGrid("addChildNode",e[2],n,E):a(s).jqGrid("addRowData",e[2],E,b.addedrow);k("_empty",s,u)}else j.reloadAfterSubmit?a(s).trigger("reloadGrid"):s.p.treeGrid===true?a(s).jqGrid("addChildNode",e[2],n,E):a(s).jqGrid("addRowData",e[2],E,b.addedrow)}else{if(j.reloadAfterSubmit){a(s).trigger("reloadGrid");
j.closeAfterEdit||setTimeout(function(){a(s).jqGrid("setSelection",E[g])},1E3)}else s.p.treeGrid===true?a(s).jqGrid("setTreeRow",E[g],E):a(s).jqGrid("setRowData",E[g],E);j.closeAfterEdit&&a.jgrid.hideModal("#"+x.themodal,{gb:"#gbox_"+v,jqm:b.jqModal,onClose:j.onClose})}if(a.isFunction(j.afterComplete)){c=d;setTimeout(function(){j.afterComplete(c,E,a("#"+u));c=null},500)}if(j.checkOnSubmit||j.checkOnUpdate){a("#"+u).data("disabled",false);if(j._savedData[s.p.id+"_id"]!="_empty")for(var o in j._savedData)E[o]&&
(j._savedData[o]=E[o])}}j.processing=false;a("#sData","#"+t+"_2").removeClass("ui-state-active");try{a(":input:visible","#"+u)[0].focus()}catch(p){}}},a.jgrid.ajaxOptions,j.ajaxEditOptions);!d.url&&!j.useDataProxy&&(a.isFunction(s.p.dataProxy)?j.useDataProxy=!0:(e[0]=!1,e[1]+=" "+a.jgrid.errors.nourl));e[0]&&(j.useDataProxy?s.p.dataProxy.call(s,d,"set_"+s.p.id):a.ajax(d))}!1===e[0]&&(a("#FormError>td","#"+t).html(e[1]),a("#FormError","#"+t).show())}function e(a,b){var c=!1,e;for(e in a)if(a[e]!=b[e]){c=
!0;break}return c}function q(){a.each(s.p.colModel,function(a,b){b.editoptions&&!0===b.editoptions.NullIfEmpty&&E.hasOwnProperty(b.name)&&""==E[b.name]&&(E[b.name]="null")})}function n(){var b=!0;a("#FormError","#"+t).hide();j.checkOnUpdate&&(E={},B={},d(),T=a.extend({},E,B),e(T,j._savedData)?(a("#"+u).data("disabled",!0),a(".confirm","#"+x.themodal).show(),b=!1):q());return b}function p(){if("_empty"!==c&&"undefined"!==typeof s.p.savedRow&&0<s.p.savedRow.length&&a.isFunction(a.fn.jqGrid.restoreRow))for(var b=
0;b<s.p.savedRow.length;b++)if(s.p.savedRow[b].id==c){a(s).jqGrid("restoreRow",c);break}}function o(b,c){0===b?a("#pData","#"+t+"_2").addClass("ui-state-disabled"):a("#pData","#"+t+"_2").removeClass("ui-state-disabled");b==c?a("#nData","#"+t+"_2").addClass("ui-state-disabled"):a("#nData","#"+t+"_2").removeClass("ui-state-disabled")}function r(){var b=a(s).jqGrid("getDataIDs"),c=a("#id_g","#"+t).val();return[a.inArray(c,b),b]}var s=this;if(s.grid&&c){var v=s.p.id,u="FrmGrid_"+v,t="TblGrid_"+v,x={themodal:"editmod"+
v,modalhead:"edithd"+v,modalcontent:"editcnt"+v,scrollelm:u},y=a.isFunction(j.beforeShowForm)?j.beforeShowForm:!1,z=a.isFunction(j.afterShowForm)?j.afterShowForm:!1,A=a.isFunction(j.beforeInitData)?j.beforeInitData:!1,F=a.isFunction(j.onInitializeForm)?j.onInitializeForm:!1,H=!0,D=1,Q=0,E,B,T;"new"===c?(c="_empty",b.caption=j.addCaption):b.caption=j.editCaption;!0===b.recreateForm&&null!==a("#"+x.themodal).html()&&a("#"+x.themodal).remove();var W=!0;b.checkOnUpdate&&(b.jqModal&&!b.modal)&&(W=!1);
if(null!==a("#"+x.themodal).html()){A&&(H=A(a("#"+u)),"undefined"==typeof H&&(H=!0));if(!1===H)return;p();a(".ui-jqdialog-title","#"+x.modalhead).html(b.caption);a("#FormError","#"+t).hide();j.topinfo?(a(".topinfo","#"+t+"_2").html(j.topinfo),a(".tinfo","#"+t+"_2").show()):a(".tinfo","#"+t+"_2").hide();j.bottominfo?(a(".bottominfo","#"+t+"_2").html(j.bottominfo),a(".binfo","#"+t+"_2").show()):a(".binfo","#"+t+"_2").hide();k(c,s,u);"_empty"==c||!j.viewPagerButtons?a("#pData, #nData","#"+t+"_2").hide():
a("#pData, #nData","#"+t+"_2").show();!0===j.processing&&(j.processing=!1,a("#sData","#"+t+"_2").removeClass("ui-state-active"));!0===a("#"+u).data("disabled")&&(a(".confirm","#"+x.themodal).hide(),a("#"+u).data("disabled",!1));y&&y(a("#"+u));a("#"+x.themodal).data("onClose",j.onClose);a.jgrid.viewModal("#"+x.themodal,{gbox:"#gbox_"+v,jqm:b.jqModal,jqM:!1,overlay:b.overlay,modal:b.modal});W||a(".jqmOverlay").click(function(){if(!n())return false;a.jgrid.hideModal("#"+x.themodal,{gb:"#gbox_"+v,jqm:b.jqModal,
onClose:j.onClose});return false});z&&z(a("#"+u))}else{var O=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",O=a("<form name='FormPost' id='"+u+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+O+";'></form>").data("disabled",!1),U=a("<table id='"+t+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");A&&(H=A(a("#"+u)),"undefined"==typeof H&&(H=!0));if(!1===H)return;p();a(s.p.colModel).each(function(){var a=
this.formoptions;D=Math.max(D,a?a.colpos||0:0);Q=Math.max(Q,a?a.rowpos||0:0)});a(O).append(U);A=a("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*D+"'></td></tr>");A[0].rp=0;a(U).append(A);A=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*D+"'>"+j.topinfo+"</td></tr>");A[0].rp=0;a(U).append(A);var H=(A="rtl"==s.p.direction?!0:!1)?"nData":"pData",G=A?"pData":"nData";g(c,s,U,D);var H="<a href='javascript:void(0)' id='"+H+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>",
G="<a href='javascript:void(0)' id='"+G+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>",S="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>",I="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>",H="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+
(A?G+H:H+G)+"</td><td class='EditButton'>"+S+I+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+j.bottominfo+"</td></tr>"),H=H+"</tbody></table>";if(0<Q){var P=[];a.each(a(U)[0].rows,function(a,b){P[a]=b});P.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(P,function(b,c){a("tbody",U).append(c)})}b.gbox="#gbox_"+v;var Z=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,Z=!0);O=a("<span></span>").append(O).append(H);a.jgrid.createModal(x,O,b,"#gview_"+
s.p.id,a("#gbox_"+s.p.id)[0]);A&&(a("#pData, #nData","#"+t+"_2").css("float","right"),a(".EditButton","#"+t+"_2").css("text-align","left"));j.topinfo&&a(".tinfo","#"+t+"_2").show();j.bottominfo&&a(".binfo","#"+t+"_2").show();H=O=null;a("#"+x.themodal).keydown(function(c){var e=c.target;if(a("#"+u).data("disabled")===true)return false;if(j.savekey[0]===true&&c.which==j.savekey[1]&&e.tagName!="TEXTAREA"){a("#sData","#"+t+"_2").trigger("click");return false}if(c.which===27){if(!n())return false;Z&&a.jgrid.hideModal(this,
{gb:b.gbox,jqm:b.jqModal,onClose:j.onClose});return false}if(j.navkeys[0]===true){if(a("#id_g","#"+t).val()=="_empty")return true;if(c.which==j.navkeys[1]){a("#pData","#"+t+"_2").trigger("click");return false}if(c.which==j.navkeys[2]){a("#nData","#"+t+"_2").trigger("click");return false}}});b.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span","#"+x.themodal).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close","#"+x.themodal).unbind("click").click(function(){if(!n())return false;a.jgrid.hideModal("#"+
x.themodal,{gb:"#gbox_"+v,jqm:b.jqModal,onClose:j.onClose});return false}));b.saveicon=a.extend([!0,"left","ui-icon-disk"],b.saveicon);b.closeicon=a.extend([!0,"left","ui-icon-close"],b.closeicon);!0===b.saveicon[0]&&a("#sData","#"+t+"_2").addClass("right"==b.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.saveicon[2]+"'></span>");!0===b.closeicon[0]&&a("#cData","#"+t+"_2").addClass("right"==b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+
b.closeicon[2]+"'></span>");if(j.checkOnSubmit||j.checkOnUpdate)S="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bYes+"</a>",G="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bNo+"</a>",I="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bExit+"</a>",O=b.zIndex||999,O++,a("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+
O+";display:none;'>&#160;"+(a.browser.msie&&6==a.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"")+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(O+1)+"'>"+b.saveData+"<br/><br/>"+S+G+I+"</div>").insertAfter("#"+u),a("#sNew","#"+x.themodal).click(function(){l();a("#"+u).data("disabled",false);a(".confirm","#"+x.themodal).hide();return false}),a("#nNew","#"+x.themodal).click(function(){a(".confirm",
"#"+x.themodal).hide();a("#"+u).data("disabled",false);setTimeout(function(){a(":input","#"+u)[0].focus()},0);return false}),a("#cNew","#"+x.themodal).click(function(){a(".confirm","#"+x.themodal).hide();a("#"+u).data("disabled",false);a.jgrid.hideModal("#"+x.themodal,{gb:"#gbox_"+v,jqm:b.jqModal,onClose:j.onClose});return false});F&&F(a("#"+u));"_empty"==c||!j.viewPagerButtons?a("#pData,#nData","#"+t+"_2").hide():a("#pData,#nData","#"+t+"_2").show();y&&y(a("#"+u));a("#"+x.themodal).data("onClose",
j.onClose);a.jgrid.viewModal("#"+x.themodal,{gbox:"#gbox_"+v,jqm:b.jqModal,overlay:b.overlay,modal:b.modal});W||a(".jqmOverlay").click(function(){if(!n())return false;a.jgrid.hideModal("#"+x.themodal,{gb:"#gbox_"+v,jqm:b.jqModal,onClose:j.onClose});return false});z&&z(a("#"+u));a(".fm-button","#"+x.themodal).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a("#sData","#"+t+"_2").click(function(){E={};B={};a("#FormError","#"+t).hide();d();q();
if(E[s.p.id+"_id"]=="_empty")l();else if(b.checkOnSubmit===true){T=a.extend({},E,B);if(e(T,j._savedData)){a("#"+u).data("disabled",true);a(".confirm","#"+x.themodal).show()}else l()}else l();return false});a("#cData","#"+t+"_2").click(function(){if(!n())return false;a.jgrid.hideModal("#"+x.themodal,{gb:"#gbox_"+v,jqm:b.jqModal,onClose:j.onClose});return false});a("#nData","#"+t+"_2").click(function(){if(!n())return false;a("#FormError","#"+t).hide();var c=r();c[0]=parseInt(c[0],10);if(c[0]!=-1&&c[1][c[0]+
1]){if(a.isFunction(b.onclickPgButtons))b.onclickPgButtons("next",a("#"+u),c[1][c[0]]);k(c[1][c[0]+1],s,u);a(s).jqGrid("setSelection",c[1][c[0]+1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("next",a("#"+u),c[1][c[0]+1]);o(c[0]+1,c[1].length-1)}return false});a("#pData","#"+t+"_2").click(function(){if(!n())return false;a("#FormError","#"+t).hide();var c=r();if(c[0]!=-1&&c[1][c[0]-1]){if(a.isFunction(b.onclickPgButtons))b.onclickPgButtons("prev",a("#"+u),c[1][c[0]]);k(c[1][c[0]-1],
s,u);a(s).jqGrid("setSelection",c[1][c[0]-1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("prev",a("#"+u),c[1][c[0]-1]);o(c[0]-1,c[1].length-1)}return false})}y=r();o(y[0],y[1].length-1)}})},viewGridRow:function(c,b){b=a.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:!1,overlay:10,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0},a.jgrid.view,b||
{});return this.each(function(){function d(){(!0===b.closeOnEscape||!0===b.navkeys[0])&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+r.modalhead).focus()},0)}function j(c,e,d,f){for(var g,k,l,m=0,n,o,p=[],q=!1,r="<td class='CaptionTD form-view-label ui-widget-content' width='"+b.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",s="",t=["integer","number","currency"],v=0,u=0,x,y,A,z=1;z<=f;z++)s+=1==z?r:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>";
a(e.p.colModel).each(function(){k=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1;!k&&"right"===this.align&&(this.formatter&&-1!==a.inArray(this.formatter,t)?v=Math.max(v,parseInt(this.width,10)):u=Math.max(u,parseInt(this.width,10)))});x=0!==v?v:0!==u?u:0;q=a(e).jqGrid("getInd",c);a(e.p.colModel).each(function(b){g=this.name;y=!1;o=(k=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";A="boolean"!=typeof this.viewable?!0:this.viewable;
if("cb"!==g&&"subgrid"!==g&&"rn"!==g&&A){n=!1===q?"":g==e.p.ExpandColumn&&!0===e.p.treeGrid?a("td:eq("+b+")",e.rows[q]).text():a("td:eq("+b+")",e.rows[q]).html();y="right"===this.align&&0!==x?!0:!1;a.extend({},this.editoptions||{},{id:g,name:g});var c=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),j=parseInt(c.rowpos,10)||m+1,r=parseInt(2*(parseInt(c.colpos,10)||1),10);if(c.rowabove){var t=a("<tr><td class='contentinfo' colspan='"+2*f+"'>"+c.rowcontent+"</td></tr>");a(d).append(t);
t[0].rp=j}l=a(d).find("tr[rowpos="+j+"]");0===l.length&&(l=a("<tr "+o+" rowpos='"+j+"'></tr>").addClass("FormData").attr("id","trv_"+g),a(l).append(s),a(d).append(l),l[0].rp=j);a("td:eq("+(r-2)+")",l[0]).html("<b>"+("undefined"===typeof c.label?e.p.colNames[b]:c.label)+"</b>");a("td:eq("+(r-1)+")",l[0]).append("<span>"+n+"</span>").attr("id","v_"+g);y&&a("td:eq("+(r-1)+") span",l[0]).css({"text-align":"right",width:x+"px"});p[m]=b;m++}});0<m&&(c=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+
(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+c+"'/></td></tr>"),c[0].rp=m+99,a(d).append(c));return p}function k(b,c){var e,d,f=0,j,g;if(g=a(c).jqGrid("getInd",b,!0))a("td",g).each(function(b){e=c.p.colModel[b].name;d=c.p.colModel[b].editrules&&!0===c.p.colModel[b].editrules.edithidden?!1:!0===c.p.colModel[b].hidden?!0:!1;"cb"!==e&&("subgrid"!==e&&"rn"!==e)&&(j=e==c.p.ExpandColumn&&!0===c.p.treeGrid?a(this).text():a(this).html(),a.extend({},c.p.colModel[b].editoptions||
{}),e=a.jgrid.jqID("v_"+e),a("#"+e+" span","#"+o).html(j),d&&a("#"+e,"#"+o).parents("tr:first").hide(),f++)}),0<f&&a("#id_g","#"+o).val(b)}function l(b,c){0===b?a("#pData","#"+o+"_2").addClass("ui-state-disabled"):a("#pData","#"+o+"_2").removeClass("ui-state-disabled");b==c?a("#nData","#"+o+"_2").addClass("ui-state-disabled"):a("#nData","#"+o+"_2").removeClass("ui-state-disabled")}function e(){var b=a(m).jqGrid("getDataIDs"),c=a("#id_g","#"+o).val();return[a.inArray(c,b),b]}var m=this;if(m.grid&&
c){b.imgpath||(b.imgpath=m.p.imgpath);var n=m.p.id,p="ViewGrid_"+n,o="ViewTbl_"+n,r={themodal:"viewmod"+n,modalhead:"viewhd"+n,modalcontent:"viewcnt"+n,scrollelm:p},s=a.isFunction(b.beforeInitData)?b.beforeInitData:!1,v=!0,u=1,t=0;if(null!==a("#"+r.themodal).html()){s&&(v=s(a("#"+p)),"undefined"==typeof v&&(v=!0));if(!1===v)return;a(".ui-jqdialog-title","#"+r.modalhead).html(b.caption);a("#FormError","#"+o).hide();k(c,m);a.isFunction(b.beforeShowForm)&&b.beforeShowForm(a("#"+p));a.jgrid.viewModal("#"+
r.themodal,{gbox:"#gbox_"+n,jqm:b.jqModal,jqM:!1,overlay:b.overlay,modal:b.modal});d()}else{var x=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",x=a("<form name='FormPost' id='"+p+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+x+";'></form>"),y=a("<table id='"+o+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");s&&(v=s(a("#"+p)),"undefined"==typeof v&&(v=!0));if(!1===v)return;a(m.p.colModel).each(function(){var a=
this.formoptions;u=Math.max(u,a?a.colpos||0:0);t=Math.max(t,a?a.rowpos||0:0)});a(x).append(y);j(c,m,y,u);var s="rtl"==m.p.direction?!0:!1,v="<a href='javascript:void(0)' id='"+(s?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",z="<a href='javascript:void(0)' id='"+(s?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",A="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+
b.bClose+"</a>";if(0<t){var F=[];a.each(a(y)[0].rows,function(a,b){F[a]=b});F.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(F,function(b,c){a("tbody",y).append(c)})}b.gbox="#gbox_"+n;var H=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,H=!0);x=a("<span></span>").append(x).append("<table border='0' class='EditTable' id='"+o+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+b.labelswidth+"'>"+(s?z+v:v+z)+"</td><td class='EditButton'>"+A+"</td></tr></tbody></table>");a.jgrid.createModal(r,
x,b,"#gview_"+m.p.id,a("#gview_"+m.p.id)[0]);s&&(a("#pData, #nData","#"+o+"_2").css("float","right"),a(".EditButton","#"+o+"_2").css("text-align","left"));b.viewPagerButtons||a("#pData, #nData","#"+o+"_2").hide();x=null;a("#"+r.themodal).keydown(function(c){if(c.which===27){H&&a.jgrid.hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose});return false}if(b.navkeys[0]===true){if(c.which===b.navkeys[1]){a("#pData","#"+o+"_2").trigger("click");return false}if(c.which===b.navkeys[2]){a("#nData",
"#"+o+"_2").trigger("click");return false}}});b.closeicon=a.extend([!0,"left","ui-icon-close"],b.closeicon);!0===b.closeicon[0]&&a("#cData","#"+o+"_2").addClass("right"==b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");a.isFunction(b.beforeShowForm)&&b.beforeShowForm(a("#"+p));a.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+n,jqm:b.jqModal,modal:b.modal});a(".fm-button:not(.ui-state-disabled)","#"+o+"_2").hover(function(){a(this).addClass("ui-state-hover")},
function(){a(this).removeClass("ui-state-hover")});d();a("#cData","#"+o+"_2").click(function(){a.jgrid.hideModal("#"+r.themodal,{gb:"#gbox_"+n,jqm:b.jqModal,onClose:b.onClose});return false});a("#nData","#"+o+"_2").click(function(){a("#FormError","#"+o).hide();var c=e();c[0]=parseInt(c[0],10);if(c[0]!=-1&&c[1][c[0]+1]){if(a.isFunction(b.onclickPgButtons))b.onclickPgButtons("next",a("#"+p),c[1][c[0]]);k(c[1][c[0]+1],m);a(m).jqGrid("setSelection",c[1][c[0]+1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("next",
a("#"+p),c[1][c[0]+1]);l(c[0]+1,c[1].length-1)}d();return false});a("#pData","#"+o+"_2").click(function(){a("#FormError","#"+o).hide();var c=e();if(c[0]!=-1&&c[1][c[0]-1]){if(a.isFunction(b.onclickPgButtons))b.onclickPgButtons("prev",a("#"+p),c[1][c[0]]);k(c[1][c[0]-1],m);a(m).jqGrid("setSelection",c[1][c[0]-1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("prev",a("#"+p),c[1][c[0]-1]);l(c[0]-1,c[1].length-1)}d();return false})}x=e();l(x[0],x[1].length-1)}})},delGridRow:function(c,b){j=
b=a.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:10,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},a.jgrid.del,b||{});return this.each(function(){var d=this;if(d.grid&&c){var g="function"===typeof b.beforeShowForm?
!0:!1,k="function"===typeof b.afterShowForm?!0:!1,l=a.isFunction(b.beforeInitData)?b.beforeInitData:!1,e=d.p.id,q={},n=!0,p="DelTbl_"+e,o,r,s,v,u={themodal:"delmod"+e,modalhead:"delhd"+e,modalcontent:"delcnt"+e,scrollelm:p};m.isArray(c)&&(c=c.join());if(null!==a("#"+u.themodal).html()){l&&(n=l(a("#"+p)),"undefined"==typeof n&&(n=!0));if(!1===n)return;a("#DelData>td","#"+p).text(c);a("#DelError","#"+p).hide();!0===j.processing&&(j.processing=!1,a("#dData","#"+p).removeClass("ui-state-active"));g&&
b.beforeShowForm(a("#"+p));a.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+e,jqm:b.jqModal,jqM:!1,overlay:b.overlay,modal:b.modal})}else{var t=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",t="<div id='"+p+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+t+";'><table class='DelTable'><tbody><tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>"+("<tr id='DelData' style='display:none'><td >"+c+"</td></tr>"),t=t+('<tr><td class="delmsg" style="white-space:pre;">'+
b.msg+"</td></tr><tr><td >&#160;</td></tr>"),t=t+"</tbody></table></div>"+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+p+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>")+
"</td></tr></tbody></table>");b.gbox="#gbox_"+e;a.jgrid.createModal(u,t,b,"#gview_"+d.p.id,a("#gview_"+d.p.id)[0]);l&&(n=l(a("#"+p)),"undefined"==typeof n&&(n=!0));if(!1===n)return;a(".fm-button","#"+p+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});b.delicon=a.extend([!0,"left","ui-icon-scissors"],b.delicon);b.cancelicon=a.extend([!0,"left","ui-icon-cancel"],b.cancelicon);!0===b.delicon[0]&&a("#dData","#"+p+"_2").addClass("right"==b.delicon[1]?
"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.delicon[2]+"'></span>");!0===b.cancelicon[0]&&a("#eData","#"+p+"_2").addClass("right"==b.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.cancelicon[2]+"'></span>");a("#dData","#"+p+"_2").click(function(){var c=[true,""];q={};var g=a("#DelData>td","#"+p).text();typeof b.onclickSubmit==="function"&&(q=b.onclickSubmit(j,g)||{});typeof b.beforeSubmit==="function"&&(c=b.beforeSubmit(g));
if(c[0]&&!j.processing){j.processing=true;a(this).addClass("ui-state-active");s=d.p.prmNames;o=a.extend({},j.delData,q);v=s.oper;o[v]=s.deloper;r=s.id;o[r]=g;var k=a.extend({url:j.url?j.url:a(d).jqGrid("getGridParam","editurl"),type:b.mtype,data:a.isFunction(b.serializeDelData)?b.serializeDelData(o):o,complete:function(k,l){if(l!="success"){c[0]=false;c[1]=a.isFunction(j.errorTextFormat)?j.errorTextFormat(k):l+" Status: '"+k.statusText+"'. Error code: "+k.status}else typeof j.afterSubmit==="function"&&
(c=j.afterSubmit(k,o));if(c[0]===false){a("#DelError>td","#"+p).html(c[1]);a("#DelError","#"+p).show()}else{if(j.reloadAfterSubmit&&d.p.datatype!="local")a(d).trigger("reloadGrid");else{var m=[],m=g.split(",");if(d.p.treeGrid===true)try{a(d).jqGrid("delTreeNode",m[0])}catch(n){}else for(var q=0;q<m.length;q++)a(d).jqGrid("delRowData",m[q]);d.p.selrow=null;d.p.selarrrow=[]}a.isFunction(j.afterComplete)&&setTimeout(function(){j.afterComplete(k,g)},500)}j.processing=false;a("#dData","#"+p+"_2").removeClass("ui-state-active");
c[0]&&a.jgrid.hideModal("#"+u.themodal,{gb:"#gbox_"+e,jqm:b.jqModal,onClose:j.onClose})}},a.jgrid.ajaxOptions,b.ajaxDelOptions);if(!k.url&&!j.useDataProxy)if(a.isFunction(d.p.dataProxy))j.useDataProxy=true;else{c[0]=false;c[1]=c[1]+(" "+a.jgrid.errors.nourl)}c[0]&&(j.useDataProxy?d.p.dataProxy.call(d,k,"del_"+d.p.id):a.ajax(k))}if(c[0]===false){a("#DelError>td","#"+p).html(c[1]);a("#DelError","#"+p).show()}return false});a("#eData","#"+p+"_2").click(function(){a.jgrid.hideModal("#"+u.themodal,{gb:"#gbox_"+
e,jqm:b.jqModal,onClose:j.onClose});return false});g&&b.beforeShowForm(a("#"+p));a.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+e,jqm:b.jqModal,overlay:b.overlay,modal:b.modal})}k&&b.afterShowForm(a("#"+p));!0===b.closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+u.modalhead).focus()},0)}})},navGrid:function(c,b,d,j,k,l,e){b=a.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,
refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1},a.jgrid.nav,b||{});return this.each(function(){if(!this.nav){var m={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},n=this,p,o,r;if(n.grid&&"string"==typeof c){null===a("#"+m.themodal).html()&&("undefined"!=typeof window.innerWidth?(p=window.innerWidth,o=window.innerHeight):"undefined"!=typeof document.documentElement&&
"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(p=document.documentElement.clientWidth,o=document.documentElement.clientHeight):(p=1024,o=768),a.jgrid.createModal(m,"<div>"+b.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+n.p.id,jqModal:!0,drag:!0,resize:!0,caption:b.alertcap,top:o/2-25,left:p/2-100,width:200,height:"auto",closeOnEscape:b.closeOnEscape},"","",!0));p=1;b.cloneToTop&&n.p.toppager&&
(p=2);for(o=0;o<p;o++){var s=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),v,u;0===o?(v=c,u=n.p.id,v==n.p.toppager&&(u+="_top",p=1)):(v=n.p.toppager,u=n.p.id+"_top");"rtl"==n.p.direction&&a(s).attr("dir","rtl").css("float","right");b.add&&(j=j||{},r=a("<td class='ui-pg-button ui-corner-all'></td>"),a(r).append("<div class='ui-pg-div'><span class='ui-icon "+b.addicon+"'></span>"+b.addtext+"</div>"),
a("tr",s).append(r),a(r,s).attr({title:b.addtitle||"",id:j.id||"add_"+u}).click(function(){a(this).hasClass("ui-state-disabled")||(typeof b.addfunc=="function"?b.addfunc():a(n).jqGrid("editGridRow","new",j));return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),r=null);b.edit&&(r=a("<td class='ui-pg-button ui-corner-all'></td>"),d=d||{},a(r).append("<div class='ui-pg-div'><span class='ui-icon "+
b.editicon+"'></span>"+b.edittext+"</div>"),a("tr",s).append(r),a(r,s).attr({title:b.edittitle||"",id:d.id||"edit_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var c=n.p.selrow;if(c)typeof b.editfunc=="function"?b.editfunc(c):a(n).jqGrid("editGridRow",c,d);else{a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+n.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),
r=null);b.view&&(r=a("<td class='ui-pg-button ui-corner-all'></td>"),e=e||{},a(r).append("<div class='ui-pg-div'><span class='ui-icon "+b.viewicon+"'></span>"+b.viewtext+"</div>"),a("tr",s).append(r),a(r,s).attr({title:b.viewtitle||"",id:e.id||"view_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=n.p.selrow;if(b)a(n).jqGrid("viewGridRow",b,e);else{a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+n.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||
a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),r=null);b.del&&(r=a("<td class='ui-pg-button ui-corner-all'></td>"),k=k||{},a(r).append("<div class='ui-pg-div'><span class='ui-icon "+b.delicon+"'></span>"+b.deltext+"</div>"),a("tr",s).append(r),a(r,s).attr({title:b.deltitle||"",id:k.id||"del_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var c;if(n.p.multiselect){c=n.p.selarrrow;c.length===0&&(c=null)}else c=n.p.selrow;if(c)"function"==typeof b.delfunc?
b.delfunc(c):a(n).jqGrid("delGridRow",c,k);else{a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+n.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),r=null);(b.add||b.edit||b.del||b.view)&&a("tr",s).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");b.search&&(r=a("<td class='ui-pg-button ui-corner-all'></td>"),
l=l||{},a(r).append("<div class='ui-pg-div'><span class='ui-icon "+b.searchicon+"'></span>"+b.searchtext+"</div>"),a("tr",s).append(r),a(r,s).attr({title:b.searchtitle||"",id:l.id||"search_"+u}).click(function(){a(this).hasClass("ui-state-disabled")||a(n).jqGrid("searchGrid",l);return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),l.showOnLoad&&!0===l.showOnLoad&&a(r,s).click(),r=null);b.refresh&&
(r=a("<td class='ui-pg-button ui-corner-all'></td>"),a(r).append("<div class='ui-pg-div'><span class='ui-icon "+b.refreshicon+"'></span>"+b.refreshtext+"</div>"),a("tr",s).append(r),a(r,s).attr({title:b.refreshtitle||"",id:"refresh_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(b.beforeRefresh)&&b.beforeRefresh();n.p.search=false;try{var c=n.p.id;n.p.postData.filters="";a("#fbox_"+c).jqFilter("resetFilter");a.isFunction(n.clearToolbar)&&n.clearToolbar(false)}catch(e){}switch(b.refreshstate){case "firstpage":a(n).trigger("reloadGrid",
[{page:1}]);break;case "current":a(n).trigger("reloadGrid",[{current:true}])}a.isFunction(b.afterRefresh)&&b.afterRefresh()}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),r=null);r=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+r+";visibility:hidden;' ></div>");r=a(s).clone().appendTo("#testpg2").width();
a("#testpg2").remove();a(v+"_"+b.position,v).append(s);n.p._nvtd&&(r>n.p._nvtd[0]&&(a(v+"_"+b.position,v).width(r),n.p._nvtd[0]=r),n.p._nvtd[1]=r);s=r=r=null;this.nav=!0}}}})},navButtonAdd:function(c,b){b=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},b||{});return this.each(function(){if(this.grid){0!==c.indexOf("#")&&(c="#"+c);var d=a(".navtable",c)[0],j=this;if(d&&!(b.id&&null!==a("#"+b.id,d).html())){var k=a("<td></td>");
"NONE"==b.buttonicon.toString().toUpperCase()?a(k).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+b.caption+"</div>"):a(k).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+b.buttonicon+"'></span>"+b.caption+"</div>");b.id&&a(k).attr("id",b.id);"first"==b.position?0===d.rows[0].cells.length?a("tr",d).append(k):a("tr td:eq(0)",d).before(k):a("tr",d).append(k);a(k,d).attr("title",b.title||"").click(function(c){a(this).hasClass("ui-state-disabled")||
a.isFunction(b.onClickButton)&&b.onClickButton.call(j,c);return!1}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(c,b){b=a.extend({sepclass:"ui-separator",sepcontent:""},b||{});return this.each(function(){if(this.grid){0!==c.indexOf("#")&&(c="#"+c);var d=a(".navtable",c)[0];if(d){var j="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+b.sepclass+
"'></span>"+b.sepcontent+"</td>";a("tr",d).append(j)}}})},GridToForm:function(c,b){return this.each(function(){if(this.grid){var d=a(this).jqGrid("getRowData",c);if(d)for(var j in d)a("[name="+a.jgrid.jqID(j)+"]",b).is("input:radio")||a("[name="+a.jgrid.jqID(j)+"]",b).is("input:checkbox")?a("[name="+a.jgrid.jqID(j)+"]",b).each(function(){a(this).val()==d[j]?a(this).attr("checked","checked"):a(this).attr("checked","")}):a("[name="+a.jgrid.jqID(j)+"]",b).val(d[j])}})},FormToGrid:function(c,b,d,j){return this.each(function(){if(this.grid){d||
(d="set");j||(j="first");var k=a(b).serializeArray(),l={};a.each(k,function(a,b){l[b.name]=b.value});"add"==d?a(this).jqGrid("addRowData",c,l,j):"set"==d&&a(this).jqGrid("setRowData",c,l)}})}})})(m);(function(a){a.fn.jqFilter=function(d){if("string"===typeof d){var c=a.fn.jqFilter[d];if(!c)throw"jqFilter - No such method: "+d;var b=a.makeArray(arguments).slice(1);return c.apply(this,b)}var f=a.extend(!0,{filter:null,columns:[],onChange:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,
sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",
operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),_gridsopt:[],groupOps:["AND",
"OR"],groupButton:!0},d||{});return this.each(function(){if(!this.filter){this.p=f;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0],rules:[],groups:[]};var b,c=this.p.columns.length,d,e=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(b=0;b<this.p._gridsopt.length;b++)this.p.ops[b].description=this.p._gridsopt[b];this.p.initFilter=a.extend(!0,{},this.p.filter);if(c){for(b=0;b<c;b++)if(d=this.p.columns[b],d.stype?d.inputtype=d.stype:
d.inputtype||(d.inputtype="text"),d.sorttype?d.searchtype=d.sorttype:d.searchtype||(d.searchtype="string"),void 0===d.hidden&&(d.hidden=!1),d.label||(d.label=d.name),d.index&&(d.name=d.index),d.hasOwnProperty("searchoptions")||(d.searchoptions={}),!d.hasOwnProperty("searchrules"))d.searchrules={};this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'></td></tr></tbody></table>");var j=
function(b,c){var e=[!0,""];if(a.isFunction(c.searchrules))e=c.searchrules(b,c);else if(a.jgrid&&a.jgrid.checkValues)try{e=a.jgrid.checkValues(b,-1,null,c.searchrules,c.label)}catch(d){}e&&(e.length&&!1===e[0])&&(f.error=!e[0],f.errmsg=e[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(f.filter,null);a(this).append(b)};
this.createTableForGroup=function(b,c){var e=this,d,j=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>");null===c&&a(j).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'></th></tr>");var g=a("<tr></tr>");a(j).append(g);var k=a("<th colspan='5' align='left'></th>");g.append(k);var l=a("<select class='opsel'></select>");k.append(l);var g="",m;for(d=0;d<f.groupOps.length;d++)m=b.groupOp===e.p.groupOps[d]?
" selected='selected'":"",g+="<option value='"+e.p.groupOps[d]+"'"+m+">"+e.p.groupOps[d]+"</option>";l.append(g).bind("change",function(){b.groupOp=a(l).val();e.onchange()});g="<span></span>";this.p.groupButton&&(g=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),g.bind("click",function(){void 0===b.groups&&(b.groups=[]);b.groups.push({groupOp:f.groupOps[0],rules:[],groups:[]});e.reDraw();e.onchange();return!1}));k.append(g);var g=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),
q;g.bind("click",function(){if(b.rules===void 0)b.rules=[];for(d=0;d<e.p.columns.length;d++){var a=typeof e.p.columns[d].search==="undefined"?true:e.p.columns[d].search,c=e.p.columns[d].hidden===true;if(e.p.columns[d].searchoptions.searchhidden===true&&a||a&&!c){q=e.p.columns[d];break}}b.rules.push({field:q.name,op:(q.searchoptions.sopt?q.searchoptions.sopt:e.p.sopt?e.p.sopt:q.searchtype==="string"?e.p.stropts:e.p.numopts)[0],data:""});e.reDraw();return false});k.append(g);null!==c&&(g=a("<input type='button' value='-' title='Delete group' class='delete-group'/>"),
k.append(g),g.bind("click",function(){for(d=0;d<c.groups.length;d++)if(c.groups[d]===b){c.groups.splice(d,1);break}e.reDraw();e.onchange();return false}));if(void 0!==b.groups)for(d=0;d<b.groups.length;d++)k=a("<tr></tr>"),j.append(k),g=a("<td class='first'></td>"),k.append(g),g=a("<td colspan='4'></td>"),g.append(this.createTableForGroup(b.groups[d],b)),k.append(g);void 0===b.groupOp&&(b.groupOp=e.p.groupOps[0]);if(void 0!==b.rules)for(d=0;d<b.rules.length;d++)j.append(this.createTableRowForRule(b.rules[d],
b));return j};this.createTableRowForRule=function(b,c){var d=this,j=a("<tr></tr>"),g,k,l,m,q="",y;j.append("<td class='first'></td>");var z=a("<td class='columns'></td>");j.append(z);var A=a("<select></select>");z.append(A);A.bind("change",function(){b.field=a(A).val();l=a(this).parents("tr:first");for(g=0;g<d.p.columns.length;g++)if(d.p.columns[g].name===b.field){m=d.p.columns[g];break}if(m){m.searchoptions.id=a.jgrid.randId();e&&"text"===m.inputtype&&!m.searchoptions.size&&(m.searchoptions.size=
10);var c=a.jgrid.createEl(m.inputtype,m.searchoptions,"",!0,d.p.ajaxSelectOptions,!0);a(c).addClass("input-elm");k=m.searchoptions.sopt?m.searchoptions.sopt:d.p.sopt?d.p.sopt:"string"===m.searchtype?d.p.stropts:d.p.numopts;var f="",j="";for(g=0;g<d.p.ops.length;g++)-1!==a.inArray(d.p.ops[g].name,k)&&(j=b.op===d.p.ops[g].name?" selected=selected":"",f+="<option value='"+d.p.ops[g].name+"'"+j+">"+d.p.ops[g].description+"</option>");a(".selectopts",l).empty().append(f);a(".data",l).empty().append(c);
a(".input-elm",l).bind("change",function(){b.data=a(this).val();if(a.isArray(b.data))b.data=b.data.join(",");d.onchange()});setTimeout(function(){b.data=a(c).val();d.onchange()},0)}});for(g=z=0;g<d.p.columns.length;g++){y="undefined"===typeof d.p.columns[g].search?!0:d.p.columns[g].search;var F=!0===d.p.columns[g].hidden;if(!0===d.p.columns[g].searchoptions.searchhidden&&y||y&&!F)y="",b.field===d.p.columns[g].name&&(y=" selected='selected'",z=g),q+="<option value='"+d.p.columns[g].name+"'"+y+">"+
d.p.columns[g].label+"</option>"}A.append(q);q=a("<td class='operators'></td>");j.append(q);m=f.columns[z];m.searchoptions.id=a.jgrid.randId();e&&"text"===m.inputtype&&!m.searchoptions.size&&(m.searchoptions.size=10);var z=a.jgrid.createEl(m.inputtype,m.searchoptions,b.data,!0,d.p.ajaxSelectOptions,!0),H=a("<select class='selectopts'></select>");q.append(H);H.bind("change",function(){b.op=a(H).val();l=a(this).parents("tr:first");var c=a(".input-elm",l)[0];if(b.op==="nu"||b.op==="nn"){b.data="";c.value=
"";c.setAttribute("readonly","true");c.setAttribute("disabled","true")}else{c.removeAttribute("readonly");c.removeAttribute("disabled")}d.onchange()});k=m.searchoptions.sopt?m.searchoptions.sopt:d.p.sopt?d.p.sopt:"string"===m.searchtype?f.stropts:d.p.numopts;q="";for(g=0;g<d.p.ops.length;g++)-1!==a.inArray(d.p.ops[g].name,k)&&(y=b.op===d.p.ops[g].name?" selected='selected'":"",q+="<option value='"+d.p.ops[g].name+"'"+y+">"+d.p.ops[g].description+"</option>");H.append(q);q=a("<td class='data'></td>");
j.append(q);q.append(z);a(z).addClass("input-elm").bind("change",function(){b.data=a(this).val();if(a.isArray(b.data))b.data=b.data.join(",");d.onchange()});q=a("<td></td>");j.append(q);z=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");q.append(z);z.bind("click",function(){for(g=0;g<c.rules.length;g++)if(c.rules[g]===b){c.rules.splice(g,1);break}d.reDraw();d.onchange();return false});return j};this.getStringForGroup=function(a){var b="(",c;if(void 0!==a.groups)for(c=
0;c<a.groups.length;c++){1<b.length&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(e){alert(e)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)1<b.length&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(d){alert(d)}b+=")";return"()"===b?"":b};this.getStringForRule=function(b){var c="",e="",d,g;for(d=0;d<this.p.ops.length;d++)if(this.p.ops[d].name===b.op){c=this.p.ops[d].operator;e=this.p.ops[d].name;break}for(d=0;d<this.p.columns.length;d++)if(this.p.columns[d].name===
b.field){g=this.p.columns[d];break}d=b.data;if("bw"===e||"bn"===e)d+="%";if("ew"===e||"en"===e)d="%"+d;if("cn"===e||"nc"===e)d="%"+d+"%";if("in"===e||"ni"===e)d=" ("+d+")";f.errorcheck&&j(b.data,g);return-1!==a.inArray(g.searchtype,["int","integer","float","number","currency"])||"nn"===e||"nu"===e?b.field+" "+c+" "+d:b.field+" "+c+' "'+d+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");
a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function a(c){var e="(",d;if(void 0!==c.groups)for(d=0;d<c.groups.length;d++)1<e.length&&(e+="OR"===c.groupOp?" || ":" && "),e+=a(c.groups[d]);if(void 0!==c.rules)for(d=0;d<c.rules.length;d++){1<e.length&&(e+="OR"===c.groupOp?" || ":" && ");var f=c.rules[d];if(b.p.errorcheck){for(var g=
void 0,k=void 0,g=0;g<b.p.columns.length;g++)if(b.p.columns[g].name===f.field){k=b.p.columns[g];break}k&&j(f.data,k)}e+=f.op+"(item."+f.field+",'"+f.data+"')"}e+=")";return"()"===e?"":e}var b=this;return a(this.p.filter)};this.reDraw();if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var a="";this.each(function(){a=this.toUserFriendlyString()});return a},filterData:function(){var a;this.each(function(){a=this.p.filter});return a},getParameter:function(a){return void 0!==
a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"===typeof a&&(a=m.jgrid.parse(a));this.each(function(){this.p.filter=a;this.reDraw();this.onchange()})}})})(m);(function(a){a.jgrid.extend({editRow:function(d,c,b,f,g,k,l,e,m){var n={keys:c||!1,oneditfunc:b||null,successfunc:f||null,url:g||null,extraparam:k||{},aftersavefunc:l||null,errorfunc:e||null,afterrestorefunc:m||null,restoreAfterErorr:!0},p=a.makeArray(arguments).slice(1),
o;o=p[0]&&"object"==typeof p[0]&&!a.isFunction(p[0])?a.extend(n,p[0]):n;return this.each(function(){var b=this,c,e,f=0,g=null,k={},l,n;if(b.grid&&(l=a(b).jqGrid("getInd",d,!0),!1!==l&&"0"==(a(l).attr("editable")||"0")&&!a(l).hasClass("not-editable-row")))n=b.p.colModel,a("td",l).each(function(l){c=n[l].name;var m=!0===b.p.treeGrid&&c==b.p.ExpandColumn;if(m)e=a("span:first",this).html();else try{e=a.unformat(this,{rowId:d,colModel:n[l]},l)}catch(p){e=a(this).html()}if("cb"!=c&&("subgrid"!=c&&"rn"!=
c)&&(b.p.autoencode&&(e=a.jgrid.htmlDecode(e)),k[c]=e,!0===n[l].editable)){null===g&&(g=l);m?a("span:first",this).html(""):a(this).html("");var q=a.extend({},n[l].editoptions||{},{id:d+"_"+c,name:c});n[l].edittype||(n[l].edittype="text");q=a.jgrid.createEl(n[l].edittype,q,e,!0,a.extend({},a.jgrid.ajaxOptions,b.p.ajaxSelectOptions||{}));a(q).addClass("editable");m?a("span:first",this).append(q):a(this).append(q);"select"==n[l].edittype&&!0===n[l].editoptions.multiple&&a.browser.msie&&a(q).width(a(q).width());
f++}}),0<f&&(k.id=d,b.p.savedRow.push(k),a(l).attr("editable","1"),a("td:eq("+g+") input",l).focus(),!0===o.keys&&a(l).bind("keydown",function(c){27===c.keyCode&&a(b).jqGrid("restoreRow",d,m);if(13===c.keyCode){if("TEXTAREA"==c.target.tagName)return!0;a(b).jqGrid("saveRow",d,o);return!1}c.stopPropagation()}),a.isFunction(o.oneditfunc)&&o.oneditfunc.call(b,d))})},saveRow:function(d,c,b,f,g,k,l){var e={successfunc:c||null,url:b||null,extraparam:f||{},aftersavefunc:g||null,errorfunc:k||null,afterrestorefunc:l||
null,restoreAfterErorr:!0},q=a.makeArray(arguments).slice(1),n;n=q[0]&&"object"==typeof q[0]&&!a.isFunction(q[0])?a.extend(e,q[0]):e;var p=!1,o=this[0],r,s={},v={},u={},t,x,y;if(!o.grid)return p;y=a(o).jqGrid("getInd",d,!0);if(!1===y)return p;e=a(y).attr("editable");n.url=n.url?n.url:o.p.editurl;if("1"===e){var z;a("td",y).each(function(b){z=o.p.colModel[b];r=z.name;if("cb"!=r&&"subgrid"!=r&&!0===z.editable&&"rn"!=r&&!a(this).hasClass("not-editable-cell")){switch(z.edittype){case "checkbox":var c=
["Yes","No"];z.editoptions&&(c=z.editoptions.value.split(":"));s[r]=a("input",this).attr("checked")?c[0]:c[1];break;case "text":case "password":case "textarea":case "button":s[r]=a("input, textarea",this).val();break;case "select":if(z.editoptions.multiple){var c=a("select",this),e=[];s[r]=a(c).val();s[r]=s[r]?s[r].join(","):"";a("select > option:selected",this).each(function(b,c){e[b]=a(c).text()});v[r]=e.join(",")}else s[r]=a("select>option:selected",this).val(),v[r]=a("select>option:selected",
this).text();z.formatter&&"select"==z.formatter&&(v={});break;case "custom":try{if(z.editoptions&&a.isFunction(z.editoptions.custom_value)){if(s[r]=z.editoptions.custom_value.call(o,a(".customelement",this),"get"),void 0===s[r])throw"e2";}else throw"e1";}catch(d){"e1"==d&&a.jgrid.info_dialog(m.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,m.jgrid.edit.bClose),"e2"==d?a.jgrid.info_dialog(m.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,m.jgrid.edit.bClose):
a.jgrid.info_dialog(m.jgrid.errors.errcap,d.message,m.jgrid.edit.bClose)}}x=a.jgrid.checkValues(s[r],b,o);if(!1===x[0])return x[1]=s[r]+" "+x[1],!1;o.p.autoencode&&(s[r]=a.jgrid.htmlEncode(s[r]));"clientArray"!==n.url&&z.editoptions&&!0===z.editoptions.NullIfEmpty&&""==s[r]&&(u[r]="null")}});if(!1===x[0]){try{var A=a.jgrid.findPos(a("#"+a.jgrid.jqID(d),o.grid.bDiv)[0]);a.jgrid.info_dialog(a.jgrid.errors.errcap,x[1],a.jgrid.edit.bClose,{left:A[0],top:A[1]})}catch(F){alert(x[1])}return p}s&&(e=o.p.prmNames,
q=e.oper,A=e.id,s[q]=e.editoper,s[A]=d,"undefined"==typeof o.p.inlineData&&(o.p.inlineData={}),s=a.extend({},s,o.p.inlineData,n.extraparam));if("clientArray"==n.url){s=a.extend({},s,v);o.p.autoencode&&a.each(s,function(b,c){s[b]=a.jgrid.htmlDecode(c)});A=a(o).jqGrid("setRowData",d,s);a(y).attr("editable","0");for(e=0;e<o.p.savedRow.length;e++)if(o.p.savedRow[e].id==d){t=e;break}0<=t&&o.p.savedRow.splice(t,1);a.isFunction(n.aftersavefunc)&&n.aftersavefunc.call(o,d,A);p=!0}else a("#lui_"+o.p.id).show(),
u=a.extend({},s,u),a.ajax(a.extend({url:n.url,data:a.isFunction(o.p.serializeRowData)?o.p.serializeRowData.call(o,u):u,type:"POST",async:!1,complete:function(b,c){a("#lui_"+o.p.id).hide();if(c==="success")if((a.isFunction(n.succesfunc)?n.succesfunc.call(o,b):true)===true){o.p.autoencode&&a.each(s,function(b,c){s[b]=a.jgrid.htmlDecode(c)});s=a.extend({},s,v);a(o).jqGrid("setRowData",d,s);a(y).attr("editable","0");for(var e=0;e<o.p.savedRow.length;e++)if(o.p.savedRow[e].id==d){t=e;break}t>=0&&o.p.savedRow.splice(t,
1);a.isFunction(n.aftersavefunc)&&n.aftersavefunc.call(o,d,b);p=true}else{a.isFunction(n.errorfunc)&&n.errorfunc.call(o,d,b,c);n.restoreAfterError===true&&a(o).jqGrid("restoreRow",d,n.afterrestorefunc)}},error:function(b,c){a("#lui_"+o.p.id).hide();if(a.isFunction(n.errorfunc))n.errorfunc.call(o,d,b,c);else try{m.jgrid.info_dialog(m.jgrid.errors.errcap,'<div class="ui-state-error">'+b.responseText+"</div>",m.jgrid.edit.bClose,{buttonalign:"right"})}catch(e){alert(b.responseText)}n.restoreAfterError===
true&&a(o).jqGrid("restoreRow",d,n.afterrestorefunc)}},a.jgrid.ajaxOptions,o.p.ajaxRowOptions||{}));a(y).unbind("keydown")}return p},restoreRow:function(d,c){return this.each(function(){var b=this,f,g,k={};if(b.grid&&(g=a(b).jqGrid("getInd",d,!0),!1!==g)){for(var l=0;l<b.p.savedRow.length;l++)if(b.p.savedRow[l].id==d){f=l;break}if(0<=f){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+a.jgrid.jqID(g.id)).datepicker("hide")}catch(e){}a.each(b.p.colModel,function(){!0===this.editable&&
(this.name in b.p.savedRow[f]&&!a(this).hasClass("not-editable-cell"))&&(k[this.name]=b.p.savedRow[f][this.name])});a(b).jqGrid("setRowData",d,k);a(g).attr("editable","0").unbind("keydown");b.p.savedRow.splice(f,1)}a.isFunction(c)&&c.call(b,d)}})}})})(m);(function(a){a.jgrid.extend({editCell:function(d,c,b){return this.each(function(){var f=this,g,k,l;if(f.grid&&!0===f.p.cellEdit){c=parseInt(c,10);f.p.selrow=f.rows[d].id;f.p.knv||a(f).jqGrid("GridNav");if(0<f.p.savedRow.length){if(!0===b&&d==f.p.iRow&&
c==f.p.iCol)return;a(f).jqGrid("saveCell",f.p.savedRow[0].id,f.p.savedRow[0].ic)}else window.setTimeout(function(){a("#"+f.p.knv).attr("tabindex","-1").focus()},0);g=f.p.colModel[c].name;if(!("subgrid"==g||"cb"==g||"rn"==g)){l=a("td:eq("+c+")",f.rows[d]);if(!0===f.p.colModel[c].editable&&!0===b&&!l.hasClass("not-editable-cell")){0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&(a("td:eq("+f.p.iCol+")",f.rows[f.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(f.rows[f.p.iRow]).removeClass("selected-row ui-state-hover"));
a(l).addClass("edit-cell ui-state-highlight");a(f.rows[d]).addClass("selected-row ui-state-hover");try{k=a.unformat(l,{rowId:f.rows[d].id,colModel:f.p.colModel[c]},c)}catch(e){k=a(l).html()}f.p.autoencode&&(k=a.jgrid.htmlDecode(k));f.p.colModel[c].edittype||(f.p.colModel[c].edittype="text");f.p.savedRow.push({id:d,ic:c,name:g,v:k});if(a.isFunction(f.p.formatCell)){var m=f.p.formatCell.call(f,f.rows[d].id,g,k,d,c);void 0!==m&&(k=m)}var m=a.extend({},f.p.colModel[c].editoptions||{},{id:d+"_"+g,name:g}),
n=a.jgrid.createEl(f.p.colModel[c].edittype,m,k,!0,a.extend({},a.jgrid.ajaxOptions,f.p.ajaxSelectOptions||{}));a.isFunction(f.p.beforeEditCell)&&f.p.beforeEditCell.call(f,f.rows[d].id,g,k,d,c);a(l).html("").append(n).attr("tabindex","0");window.setTimeout(function(){a(n).focus()},0);a("input, select, textarea",l).bind("keydown",function(b){b.keyCode===27&&(a("input.hasDatepicker",l).length>0?a(".ui-datepicker").is(":hidden")?a(f).jqGrid("restoreCell",d,c):a("input.hasDatepicker",l).datepicker("hide"):
a(f).jqGrid("restoreCell",d,c));b.keyCode===13&&a(f).jqGrid("saveCell",d,c);if(b.keyCode==9){if(f.grid.hDiv.loading)return false;b.shiftKey?a(f).jqGrid("prevCell",d,c):a(f).jqGrid("nextCell",d,c)}b.stopPropagation()});a.isFunction(f.p.afterEditCell)&&f.p.afterEditCell.call(f,f.rows[d].id,g,k,d,c)}else if(0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&(a("td:eq("+f.p.iCol+")",f.rows[f.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(f.rows[f.p.iRow]).removeClass("selected-row ui-state-hover")),
l.addClass("edit-cell ui-state-highlight"),a(f.rows[d]).addClass("selected-row ui-state-hover"),a.isFunction(f.p.onSelectCell))k=l.html().replace(/\&#160\;/ig,""),f.p.onSelectCell.call(f,f.rows[d].id,g,k,d,c);f.p.iCol=c;f.p.iRow=d}}})},saveCell:function(d,c){return this.each(function(){var b=this,f;if(b.grid&&!0===b.p.cellEdit){f=1<=b.p.savedRow.length?0:null;if(null!==f){var g=a("td:eq("+c+")",b.rows[d]),k,l,e=b.p.colModel[c],q=e.name,n=a.jgrid.jqID(q);switch(e.edittype){case "select":if(e.editoptions.multiple){var n=
a("#"+d+"_"+n,b.rows[d]),p=[];(k=a(n).val())?k.join(","):k="";a("option:selected",n).each(function(b,c){p[b]=a(c).text()});l=p.join(",")}else k=a("#"+d+"_"+n+">option:selected",b.rows[d]).val(),l=a("#"+d+"_"+n+">option:selected",b.rows[d]).text();e.formatter&&(l=k);break;case "checkbox":var o=["Yes","No"];e.editoptions&&(o=e.editoptions.value.split(":"));l=k=a("#"+d+"_"+n,b.rows[d]).attr("checked")?o[0]:o[1];break;case "password":case "text":case "textarea":case "button":l=k=a("#"+d+"_"+n,b.rows[d]).val();
break;case "custom":try{if(e.editoptions&&a.isFunction(e.editoptions.custom_value)){k=e.editoptions.custom_value.call(b,a(".customelement",g),"get");if(void 0===k)throw"e2";l=k}else throw"e1";}catch(r){"e1"==r&&a.jgrid.info_dialog(m.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,m.jgrid.edit.bClose),"e2"==r?a.jgrid.info_dialog(m.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,m.jgrid.edit.bClose):a.jgrid.info_dialog(m.jgrid.errors.errcap,r.message,
m.jgrid.edit.bClose)}}if(l!=b.p.savedRow[f].v){if(a.isFunction(b.p.beforeSaveCell)&&(f=b.p.beforeSaveCell.call(b,b.rows[d].id,q,k,d,c)))l=k=f;var s=a.jgrid.checkValues(k,c,b);if(!0===s[0]){f={};a.isFunction(b.p.beforeSubmitCell)&&((f=b.p.beforeSubmitCell.call(b,b.rows[d].id,q,k,d,c))||(f={}));0<a("input.hasDatepicker",g).length&&a("input.hasDatepicker",g).datepicker("hide");if("remote"==b.p.cellsubmit)if(b.p.cellurl){var v={};b.p.autoencode&&(k=a.jgrid.htmlEncode(k));v[q]=k;o=b.p.prmNames;e=o.id;
n=o.oper;v[e]=b.rows[d].id;v[n]=o.editoper;v=a.extend(f,v);a("#lui_"+b.p.id).show();b.grid.hDiv.loading=!0;a.ajax(a.extend({url:b.p.cellurl,data:a.isFunction(b.p.serializeCellData)?b.p.serializeCellData.call(b,v):v,type:"POST",complete:function(e,f){a("#lui_"+b.p.id).hide();b.grid.hDiv.loading=!1;if("success"==f)if(a.isFunction(b.p.afterSubmitCell)){var m=b.p.afterSubmitCell.call(b,e,v.id,q,k,d,c);!0===m[0]?(a(g).empty(),a(b).jqGrid("setCell",b.rows[d].id,c,l,!1,!1,!0),a(g).addClass("dirty-cell"),
a(b.rows[d]).addClass("edited"),a.isFunction(b.p.afterSaveCell)&&b.p.afterSaveCell.call(b,b.rows[d].id,q,k,d,c),b.p.savedRow.splice(0,1)):(a.jgrid.info_dialog(a.jgrid.errors.errcap,m[1],a.jgrid.edit.bClose),a(b).jqGrid("restoreCell",d,c))}else a(g).empty(),a(b).jqGrid("setCell",b.rows[d].id,c,l,!1,!1,!0),a(g).addClass("dirty-cell"),a(b.rows[d]).addClass("edited"),a.isFunction(b.p.afterSaveCell)&&b.p.afterSaveCell.call(b,b.rows[d].id,q,k,d,c),b.p.savedRow.splice(0,1)},error:function(e,f){a("#lui_"+
b.p.id).hide();b.grid.hDiv.loading=!1;a.isFunction(b.p.errorCell)?b.p.errorCell.call(b,e,f):a.jgrid.info_dialog(a.jgrid.errors.errcap,e.status+" : "+e.statusText+"<br/>"+f,a.jgrid.edit.bClose);a(b).jqGrid("restoreCell",d,c)}},a.jgrid.ajaxOptions,b.p.ajaxCellOptions||{}))}else try{a.jgrid.info_dialog(a.jgrid.errors.errcap,a.jgrid.errors.nourl,a.jgrid.edit.bClose),a(b).jqGrid("restoreCell",d,c)}catch(u){}"clientArray"==b.p.cellsubmit&&(a(g).empty(),a(b).jqGrid("setCell",b.rows[d].id,c,l,!1,!1,!0),a(g).addClass("dirty-cell"),
a(b.rows[d]).addClass("edited"),a.isFunction(b.p.afterSaveCell)&&b.p.afterSaveCell.call(b,b.rows[d].id,q,k,d,c),b.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){a.jgrid.info_dialog(a.jgrid.errors.errcap,k+" "+s[1],a.jgrid.edit.bClose)},100),a(b).jqGrid("restoreCell",d,c)}catch(t){}}else a(b).jqGrid("restoreCell",d,c)}a.browser.opera?a("#"+b.p.knv).attr("tabindex","-1").focus():window.setTimeout(function(){a("#"+b.p.knv).attr("tabindex","-1").focus()},0)}})},restoreCell:function(d,c){return this.each(function(){var b=
this,f;if(b.grid&&!0===b.p.cellEdit){f=1<=b.p.savedRow.length?0:null;if(null!==f){var g=a("td:eq("+c+")",b.rows[d]);if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker",g).datepicker("hide")}catch(k){}a(g).empty().attr("tabindex","-1");a(b).jqGrid("setCell",b.rows[d].id,c,b.p.savedRow[f].v,!1,!1,!0);a.isFunction(b.p.afterRestoreCell)&&b.p.afterRestoreCell.call(b,b.rows[d].id,b.p.savedRow[f].v,d,c);b.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+b.p.knv).attr("tabindex","-1").focus()},
0)}})},nextCell:function(d,c){return this.each(function(){var b=!1;if(this.grid&&!0===this.p.cellEdit){for(var f=c+1;f<this.p.colModel.length;f++)if(!0===this.p.colModel[f].editable){b=f;break}!1!==b?a(this).jqGrid("editCell",d,b,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",d,c)}})},prevCell:function(d,c){return this.each(function(){var b=!1;if(this.grid&&!0===this.p.cellEdit){for(var f=c-1;0<=f;f--)if(!0===this.p.colModel[f].editable){b=f;break}!1!==b?a(this).jqGrid("editCell",d,b,!0):
0<this.p.savedRow.length&&a(this).jqGrid("saveCell",d,c)}})},GridNav:function(){return this.each(function(){function d(c,e,f){if("v"==f.substr(0,1)){var j=a(b.grid.bDiv)[0].clientHeight,g=a(b.grid.bDiv)[0].scrollTop,k=b.rows[c].offsetTop+b.rows[c].clientHeight,m=b.rows[c].offsetTop;"vd"==f&&k>=j&&(a(b.grid.bDiv)[0].scrollTop=a(b.grid.bDiv)[0].scrollTop+b.rows[c].clientHeight);"vu"==f&&m<g&&(a(b.grid.bDiv)[0].scrollTop=a(b.grid.bDiv)[0].scrollTop-b.rows[c].clientHeight)}"h"==f&&(f=a(b.grid.bDiv)[0].clientWidth,
j=a(b.grid.bDiv)[0].scrollLeft,g=b.rows[c].cells[e].offsetLeft,b.rows[c].cells[e].offsetLeft+b.rows[c].cells[e].clientWidth>=f+parseInt(j,10)?a(b.grid.bDiv)[0].scrollLeft=a(b.grid.bDiv)[0].scrollLeft+b.rows[c].cells[e].clientWidth:g<j&&(a(b.grid.bDiv)[0].scrollLeft=a(b.grid.bDiv)[0].scrollLeft-b.rows[c].cells[e].clientWidth))}function c(a,c){var d,f;if("lft"==c){d=a+1;for(f=a;0<=f;f--)if(!0!==b.p.colModel[f].hidden){d=f;break}}if("rgt"==c){d=a-1;for(f=a;f<b.p.colModel.length;f++)if(!0!==b.p.colModel[f].hidden){d=
f;break}}return d}var b=this;if(b.grid&&!0===b.p.cellEdit){b.p.knv=b.p.id+"_kn";var f=a("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+b.p.knv+"'></span></span>"),g,k;a(f).insertBefore(b.grid.cDiv);a("#"+b.p.knv).focus().keydown(function(f){k=f.keyCode;"rtl"==b.p.direction&&(37==k?k=39:39==k&&(k=37));switch(k){case 38:0<b.p.iRow-1&&(d(b.p.iRow-1,b.p.iCol,"vu"),a(b).jqGrid("editCell",b.p.iRow-1,b.p.iCol,
!1));break;case 40:b.p.iRow+1<=b.rows.length-1&&(d(b.p.iRow+1,b.p.iCol,"vd"),a(b).jqGrid("editCell",b.p.iRow+1,b.p.iCol,!1));break;case 37:0<=b.p.iCol-1&&(g=c(b.p.iCol-1,"lft"),d(b.p.iRow,g,"h"),a(b).jqGrid("editCell",b.p.iRow,g,!1));break;case 39:b.p.iCol+1<=b.p.colModel.length-1&&(g=c(b.p.iCol+1,"rgt"),d(b.p.iRow,g,"h"),a(b).jqGrid("editCell",b.p.iRow,g,!1));break;case 13:0<=parseInt(b.p.iCol,10)&&0<=parseInt(b.p.iRow,10)&&a(b).jqGrid("editCell",b.p.iRow,b.p.iCol,!0)}return!1})}})},getChangedCells:function(d){var c=
[];d||(d="all");this.each(function(){var b=this,f;!b.grid||!0!==b.p.cellEdit||a(b.rows).each(function(g){var k={};a(this).hasClass("edited")&&(a("td",this).each(function(c){f=b.p.colModel[c].name;if("cb"!==f&&"subgrid"!==f)if("dirty"==d){if(a(this).hasClass("dirty-cell"))try{k[f]=a.unformat(this,{rowId:b.rows[g].id,colModel:b.p.colModel[c]},c)}catch(e){k[f]=a.jgrid.htmlDecode(a(this).html())}}else try{k[f]=a.unformat(this,{rowId:b.rows[g].id,colModel:b.p.colModel[c]},c)}catch(m){k[f]=a.jgrid.htmlDecode(a(this).html())}}),
k.id=this.id,c.push(k))})});return c}})})(m);(function(a){a.fn.jqm=function(b){var e={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:g,ajaxText:"",target:g,modal:g,toTop:g,onShow:g,onHide:g,onLoad:g};return this.each(function(){if(this._jqm)return c[this._jqm].c=a.extend({},c[this._jqm].c,b);d++;this._jqm=d;c[d]={c:a.extend(e,a.jqm.params,b),a:g,w:a(this).addClass("jqmID"+d),s:d};e.trigger&&a(this).jqmAddTrigger(e.trigger)})};a.fn.jqmAddClose=function(a){return n(this,
a,"jqmHide")};a.fn.jqmAddTrigger=function(a){return n(this,a,"jqmShow")};a.fn.jqmShow=function(b){return this.each(function(){a.jqm.open(this._jqm,b)})};a.fn.jqmHide=function(b){return this.each(function(){a.jqm.close(this._jqm,b)})};a.jqm={hash:{},open:function(d,j){var l=c[d],m=l.c,n="."+m.closeClass,q=parseInt(l.w.css("z-index")),q=0<q?q:3E3,t=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":q-1,opacity:m.overlay/100});if(l.a)return g;l.t=j;l.a=!0;l.w.css("z-index",
q);m.modal?(b[0]||setTimeout(function(){e("bind")},1),b.push(d)):0<m.overlay?m.closeoverlay&&l.w.jqmAddClose(t):t=g;l.o=t?t.addClass(m.overlayClass).prependTo("body"):g;if(f&&(a("html,body").css({height:"100%",width:"100%"}),t)){var t=t.css({position:"absolute"})[0],x;for(x in{Top:1,Left:1})t.style.setExpression(x.toLowerCase(),"(_=(document.documentElement.scroll"+x+" || document.body.scroll"+x+"))+'px'")}m.ajax?(q=m.target||l.w,t=m.ajax,q="string"==typeof q?a(q,l.w):a(q),t="@"==t.substr(0,1)?a(j).attr(t.substring(1)):
t,q.html(m.ajaxText).load(t,function(){m.onLoad&&m.onLoad.call(this,l);n&&l.w.jqmAddClose(a(n,l.w));k(l)})):n&&l.w.jqmAddClose(a(n,l.w));m.toTop&&l.o&&l.w.before('<span id="jqmP'+l.w[0]._jqm+'"></span>').insertAfter(l.o);m.onShow?m.onShow(l):l.w.show();k(l);return g},close:function(d){d=c[d];if(!d.a)return g;d.a=g;b[0]&&(b.pop(),b[0]||e("unbind"));d.c.toTop&&d.o&&a("#jqmP"+d.w[0]._jqm).after(d.w).remove();if(d.c.onHide)d.c.onHide(d);else d.w.hide(),d.o&&d.o.remove();return g},params:{}};var d=0,c=
a.jqm.hash,b=[],f=a.browser.msie&&"6.0"==a.browser.version,g=!1,k=function(b){var c=a('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});f&&(b.o?b.o.html('<p style="width:100%;height:100%"/>').prepend(c):a("iframe.jqm",b.w)[0]||b.w.prepend(c));l(b)},l=function(b){try{a(":input:visible",b.w)[0].focus()}catch(c){}},e=function(b){a(document)[b]("keypress",m)[b]("keydown",m)[b]("mousedown",m)},m=function(d){var e=c[b[b.length-1]];(d=!a(d.target).parents(".jqmID"+
e.s)[0])&&l(e);return!d},n=function(b,d,e){return b.each(function(){var b=this._jqm;a(d).each(function(){this[e]||(this[e]=[],a(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var b in this[a])if(c[this[a][b]])c[this[a][b]].w[a](this);return g}));this[e].push(b)})})}})(m);(function(a){a.fn.jqDrag=function(a){return g(this,a,"d")};a.fn.jqResize=function(a,b){return g(this,a,"r",b)};a.jqDnR={dnr:{},e:0,drag:function(a){"d"==c.k?b.css({left:c.X+a.pageX-c.pX,top:c.Y+a.pageY-c.pY}):(b.css({width:Math.max(a.pageX-
c.pX+c.W,0),height:Math.max(a.pageY-c.pY+c.H,0)}),M1&&f.css({width:Math.max(a.pageX-M1.pX+M1.W,0),height:Math.max(a.pageY-M1.pY+M1.H,0)}));return!1},stop:function(){a(document).unbind("mousemove",d.drag).unbind("mouseup",d.stop)}};var d=a.jqDnR,c=d.dnr,b=d.e,f,g=function(d,e,j,g){return d.each(function(){e=e?a(e,d):d;e.bind("mousedown",{e:d,k:j},function(d){var e=d.data,j={};b=e.e;f=g?a(g):!1;if("relative"!=b.css("position"))try{b.position(j)}catch(l){}c={X:j.left||k("left")||0,Y:j.top||k("top")||
0,W:k("width")||b[0].scrollWidth||0,H:k("height")||b[0].scrollHeight||0,pX:d.pageX,pY:d.pageY,k:e.k};M1=f&&"d"!=e.k?{X:j.left||f1("left")||0,Y:j.top||f1("top")||0,W:f[0].offsetWidth||f1("width")||0,H:f[0].offsetHeight||f1("height")||0,pX:d.pageX,pY:d.pageY,k:e.k}:!1;if(a("input.hasDatepicker",b[0])[0])try{a("input.hasDatepicker",b[0]).datepicker("hide")}catch(m){}a(document).mousemove(a.jqDnR.drag).mouseup(a.jqDnR.stop);return!1})})},k=function(a){return parseInt(b.css(a))||!1};f1=function(a){return parseInt(f.css(a))||
!1}})(m);(function(a){a.jgrid.extend({setSubGrid:function(){return this.each(function(){var d;this.p.subGridOptions=a.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:a.browser.safari?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});
d=this.p.subGridModel;if(d[0]){d[0].align=a.extend([],d[0].align||[]);for(var c=0;c<d[0].name.length;c++)d[0].align[c]=d[0].align[c]||"left"}})},addSubGridCell:function(a,c){var b="",d,g;this.each(function(){b=this.formatCol(a,c);g=this.p.id;d=this.p.subGridOptions.plusicon});return'<td role="grid" aria-describedby="'+g+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+b+"><a href='javascript:void(0);'><span class='ui-icon "+d+"'></span></a></td>"},addSubGrid:function(d){return this.each(function(){var c=
this;if(c.grid){var b=function(b,d,e){d=a("<td align='"+c.p.subGridModel[0].align[e]+"'></td>").html(d);a(b).append(d)},f=function(d,e){var f,j,g,k=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=a("<tr></tr>");for(j=0;j<c.p.subGridModel[0].name.length;j++)f=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),a(f).html(c.p.subGridModel[0].name[j]),a(f).width(c.p.subGridModel[0].width[j]),a(l).append(f);a(k).append(l);d&&(g=c.p.xmlReader.subgrid,
a(g.root+" "+g.row,d).each(function(){l=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===g.repeatitems)a(g.cell,this).each(function(c){b(l,a(this).text()||"&#160;",c)});else{var d=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name;if(d)for(j=0;j<d.length;j++)b(l,a(d[j],this).text()||"&#160;",j)}a(k).append(l)}));f=a("table:first",c.grid.bDiv).attr("id")+"_";a("#"+f+e).append(k);c.grid.hDiv.loading=!1;a("#load_"+c.p.id).hide();return!1},g=function(d,e){var f,j,g,k,l,m=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),
n=a("<tr></tr>");for(j=0;j<c.p.subGridModel[0].name.length;j++)f=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),a(f).html(c.p.subGridModel[0].name[j]),a(f).width(c.p.subGridModel[0].width[j]),a(n).append(f);a(m).append(n);if(d&&(k=c.p.jsonReader.subgrid,f=d[k.root],"undefined"!==typeof f))for(j=0;j<f.length;j++){g=f[j];n=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===k.repeatitems){k.cell&&(g=g[k.cell]);for(l=0;l<g.length;l++)b(n,g[l]||"&#160;",
l)}else{var q=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name;if(q.length)for(l=0;l<q.length;l++)b(n,g[q[l]]||"&#160;",l)}a(m).append(n)}j=a("table:first",c.grid.bDiv).attr("id")+"_";a("#"+j+e).append(m);c.grid.hDiv.loading=!1;a("#load_"+c.p.id).hide();return!1},k=function(b){var d,e,j,k;d=a(b).attr("id");e={nd_:(new Date).getTime()};e[c.p.prmNames.subgridid]=d;if(!c.p.subGridModel[0])return!1;if(c.p.subGridModel[0].params)for(k=0;k<c.p.subGridModel[0].params.length;k++)for(j=0;j<c.p.colModel.length;j++)c.p.colModel[j].name==
c.p.subGridModel[0].params[k]&&(e[c.p.colModel[j].name]=a("td:eq("+j+")",b).text().replace(/\&#160\;/ig,""));if(!c.grid.hDiv.loading)switch(c.grid.hDiv.loading=!0,a("#load_"+c.p.id).show(),c.p.subgridtype||(c.p.subgridtype=c.p.datatype),a.isFunction(c.p.subgridtype)?c.p.subgridtype.call(c,e):c.p.subgridtype=c.p.subgridtype.toLowerCase(),c.p.subgridtype){case "xml":case "json":a.ajax(a.extend({type:c.p.mtype,url:c.p.subGridUrl,dataType:c.p.subgridtype,data:a.isFunction(c.p.serializeSubGridData)?c.p.serializeSubGridData.call(c,
e):e,complete:function(b){c.p.subgridtype=="xml"?f(b.responseXML,d):g(a.jgrid.parse(b.responseText),d)}},a.jgrid.ajaxOptions,c.p.ajaxSubgridOptions||{}))}return!1},l,e,m,n=0,p,o;a.each(c.p.colModel,function(){(!0===this.hidden||"rn"==this.name||"cb"==this.name)&&n++});a(c.rows).each(function(b){var f=this;a(f).hasClass("jqgrow")&&(a(this.cells[d]).bind("click",function(){o=f.nextSibling;if(a(this).hasClass("sgcollapsed")){e=c.p.id;l=f.id;if(!0===c.p.subGridOptions.reloadOnExpand||!1===c.p.subGridOptions.reloadOnExpand&&
!a(o).hasClass("ui-subgrid")){m=1<=d?"<td colspan='"+d+"'>&#160;</td>":"";p=!0;a.isFunction(c.p.subGridBeforeExpand)&&(p=c.p.subGridBeforeExpand.call(c,e+"_"+l,l));if(!1===p)return!1;a(f).after("<tr role='row' class='ui-subgrid'>"+m+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+c.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(c.p.colNames.length-1-n,10)+"' class='ui-widget-content subgrid-data'><div id="+e+"_"+l+" class='tablediv'></div></td></tr>");a.isFunction(c.p.subGridRowExpanded)?
c.p.subGridRowExpanded.call(c,e+"_"+l,l):k(f)}else a(o).show();a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+c.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");c.p.subGridOptions.selectOnExpand&&a(c).jqGrid("setSelection",l)}else if(a(this).hasClass("sgexpanded")){p=!0;a.isFunction(c.p.subGridRowColapsed)&&(l=f.id,p=c.p.subGridRowColapsed.call(c,e+"_"+l,l));if(!1===p)return!1;!0===c.p.subGridOptions.reloadOnExpand?a(o).remove(".ui-subgrid"):
a(o).hasClass("ui-subgrid")&&a(o).hide();a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+c.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}),!0===c.p.subGridOptions.expandOnLoad&&setTimeout(function(){a(f.cells[d]).trigger("click")},b*c.p.subGridOptions.delayOnLoad))});c.subGridXml=function(a,b){f(a,b)};c.subGridJson=function(a,b){g(a,b)}}})},expandSubGridRow:function(d){return this.each(function(){if((this.grid||d)&&!0===this.p.subGrid){var c=
a(this).jqGrid("getInd",d,!0);c&&(c=a("td.sgcollapsed",c)[0])&&a(c).trigger("click")}})},collapseSubGridRow:function(d){return this.each(function(){if((this.grid||d)&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",d,!0);c&&(c=a("td.sgexpanded",c)[0])&&a(c).trigger("click")}})},toggleSubGridRow:function(d){return this.each(function(){if((this.grid||d)&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",d,!0);if(c){var b=a("td.sgcollapsed",c)[0];b?a(b).trigger("click"):(b=a("td.sgexpanded",c)[0])&&
a(b).trigger("click")}}})}})})(m);(function(a){a.jgrid.extend({groupingSetup:function(){return this.each(function(){var d=this.p.groupingView;if(null!==d&&("object"===typeof d||a.isFunction(d)))if(d.groupField.length){"undefined"==typeof d.visibiltyOnNextGrouping&&(d.visibiltyOnNextGrouping=[]);for(var c=0;c<d.groupField.length;c++)if(d.groupOrder[c]||(d.groupOrder[c]="asc"),d.groupText[c]||(d.groupText[c]="{0}"),"boolean"!=typeof d.groupColumnShow[c]&&(d.groupColumnShow[c]=!0),"boolean"!=typeof d.groupSummary[c]&&
(d.groupSummary[c]=!1),!0===d.groupColumnShow[c]?(d.visibiltyOnNextGrouping[c]=!0,a(this).jqGrid("showCol",d.groupField[c])):(d.visibiltyOnNextGrouping[c]=a("#"+this.p.id+"_"+d.groupField[c]).is(":visible"),a(this).jqGrid("hideCol",d.groupField[c])),d.sortitems[c]=[],d.sortnames[c]=[],d.summaryval[c]=[],d.groupSummary[c]){d.summary[c]=[];for(var b=this.p.colModel,f=0,g=b.length;f<g;f++)b[f].summaryType&&d.summary[c].push({nm:b[f].name,st:b[f].summaryType,v:""})}this.p.scroll=!1;this.p.rownumbers=
!1;this.p.subGrid=!1;this.p.treeGrid=!1;this.p.gridview=!0}else this.p.grouping=!1;else this.p.grouping=!1})},groupingPrepare:function(d,c,b,f){this.each(function(){c[0]+="";var g=c[0].toString().split(" ").join(""),k=this.p.groupingView,l=this;b.hasOwnProperty(g)?b[g].push(d):(b[g]=[],b[g].push(d),k.sortitems[0].push(g),k.sortnames[0].push(a.trim(c[0].toString())),k.summaryval[0][g]=a.extend(!0,[],k.summary[0]));k.groupSummary[0]&&a.each(k.summaryval[0][g],function(){this.v=a.isFunction(this.st)?
this.st.call(l,this.v,this.nm,f):a(l).jqGrid("groupingCalculations."+this.st,this.v,this.nm,f)})});return b},groupingToggle:function(d){this.each(function(){var c=this.p.groupingView,b=d.lastIndexOf("_"),f=d.substring(0,b+1),b=parseInt(d.substring(b+1),10)+1,g=c.minusicon,k=c.plusicon,l=a("#"+d)[0].nextSibling,e=a("#"+d+" span.tree-wrap-"+this.p.direction),m=!1;if(e.hasClass(g)){if(c.showSummaryOnHide&&c.groupSummary[0]){if(l)for(;l&&!a(l).hasClass("jqfoot");)a(l).hide(),l=l.nextSibling}else if(l)for(;l&&
a(l).attr("id")!=f+(""+b);)a(l).hide(),l=l.nextSibling;e.removeClass(g).addClass(k);m=!0}else{if(l)for(;l&&a(l).attr("id")!=f+(""+b);)a(l).show(),l=l.nextSibling;e.removeClass(k).addClass(g);m=!1}a.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,d,m)});return!1},groupingRender:function(d,c){return this.each(function(){var b=this,f=b.p.groupingView,g="",k="",l,e="",m,n,p;f.groupDataSorted||(f.sortitems[0].sort(),f.sortnames[0].sort(),"desc"==f.groupOrder[0].toLowerCase()&&(f.sortitems[0].reverse(),
f.sortnames[0].reverse()));e=f.groupCollapse?f.plusicon:f.minusicon;e+=" tree-wrap-"+b.p.direction;for(p=0;p<c;){if(b.p.colModel[p].name==f.groupField[0]){n=p;break}p++}a.each(f.sortitems[0],function(o,p){l=b.p.id+"ghead_"+o;k="<span style='cursor:pointer;' class='ui-icon "+e+"' onclick=\"jQuery('#"+b.p.id+"').jqGrid('groupingToggle','"+l+"');return false;\"></span>";try{m=b.formatter(l,f.sortnames[0][o],n,f.sortitems[0])}catch(s){m=f.sortnames[0][o]}g=g+('<tr id="'+l+'" role="row" class= "ui-widget-content jqgroup ui-row-'+
b.p.direction+'"><td colspan="'+c+'">'+k+a.jgrid.format(f.groupText[0],m,d[p].length)+"</td></tr>");for(var v=0;v<d[p].length;v++)g=g+d[p][v].join("");if(f.groupSummary[0]){v="";f.groupCollapse&&!f.showSummaryOnHide&&(v=' style="display:none;"');g=g+("<tr"+v+' role="row" class="ui-widget-content jqfoot ui-row-'+b.p.direction+'">');for(var v=f.summaryval[0][p],u=b.p.colModel,t,x=d[p].length,y=0;y<c;y++){var z="<td "+b.formatCol(y,1,"")+">&#160;</td>",A="{0}";a.each(v,function(){if(this.nm==u[y].name){if(u[y].summaryTpl)A=
u[y].summaryTpl;if(this.st=="avg"&&this.v&&x>0)this.v=this.v/x;try{t=b.formatter("",this.v,y,this)}catch(c){t=this.v}z="<td "+b.formatCol(y,1,"")+">"+a.jgrid.format(A,t)+"</td>";return false}});g=g+z}g=g+"</tr>"}});a("#"+b.p.id+" tbody:first").append(g);g=null})},groupingGroupBy:function(d,c){return this.each(function(){"string"==typeof d&&(d=[d]);var b=this.p.groupingView;this.p.grouping=!0;for(var f=0;f<b.groupField.length;f++)!b.groupColumnShow[f]&&b.visibiltyOnNextGrouping[f]&&a(this).jqGrid("showCol",
b.groupField[f]);for(f=0;f<d.length;f++)b.visibiltyOnNextGrouping[f]=a("#"+this.p.id+"_"+d[f]).is(":visible");this.p.groupingView=a.extend(this.p.groupingView,c||{});b.groupField=d;a(this).trigger("reloadGrid")})},groupingRemove:function(d){return this.each(function(){"undefined"==typeof d&&(d=!0);this.p.grouping=!1;if(!0===d){for(var c=this.p.groupingView,b=0;b<c.groupField.length;b++)!c.groupColumnShow[b]&&c.visibiltyOnNextGrouping[b]&&a(this).jqGrid("showCol",c.groupField);a("tr.jqgroup, tr.jqfoot",
"#"+this.p.id+" tbody:first").remove();a("tr.jqgrow:hidden","#"+this.p.id+" tbody:first").show()}else a(this).trigger("reloadGrid")})},groupingCalculations:{sum:function(a,c,b){return parseFloat(a||0)+parseFloat(b[c]||0)},min:function(a,c,b){return""===a?parseFloat(b[c]||0):Math.min(parseFloat(a),parseFloat(b[c]||0))},max:function(a,c,b){return""===a?parseFloat(b[c]||0):Math.max(parseFloat(a),parseFloat(b[c]||0))},count:function(a,c,b){""===a&&(a=0);return b.hasOwnProperty(c)?a+1:0},avg:function(a,
c,b){return parseFloat(a||0)+parseFloat(b[c]||0)}}})})(m);(function(a){a.jgrid.extend({setTreeNode:function(d,c){return this.each(function(){var b=this;if(b.grid&&b.p.treeGrid)for(var f=b.p.expColInd,g=b.p.treeReader.expanded_field,k=b.p.treeReader.leaf_field,l=b.p.treeReader.level_field,e=b.p.treeReader.icon_field,m=b.p.treeReader.loaded,n,p,o,r;d<c;)r=b.p.data[b.p._index[b.rows[d].id]],"nested"==b.p.treeGridModel&&!r[k]&&(n=parseInt(r[b.p.treeReader.left_field],10),p=parseInt(r[b.p.treeReader.right_field],
10),r[k]=p===n+1?"true":"false",b.rows[d].cells[b.p._treeleafpos].innerHTML=r[k]),n=parseInt(r[l],10),0===b.p.tree_root_level?(o=n+1,p=n):(o=n,p=n-1),o="<div class='tree-wrap tree-wrap-"+b.p.direction+"' style='width:"+18*o+"px;'>",o+="<div style='"+("rtl"==b.p.direction?"right:":"left:")+18*p+"px;' class='ui-icon ",void 0!==r[m]&&(r[m]="true"==r[m]||!0===r[m]?!0:!1),"true"==r[k]||!0===r[k]?(o+=(void 0!==r[e]&&""!==r[e]?r[e]:b.p.treeIcons.leaf)+" tree-leaf treeclick'",r[k]=!0,p="leaf"):(r[k]=!1,p=
""),r[g]=("true"==r[g]||!0===r[g]?!0:!1)&&r[m],o+=!0===r[g]?b.p.treeIcons.minus+" tree-minus treeclick'":b.p.treeIcons.plus+" tree-plus treeclick'",o+="</div></div>",a(b.rows[d].cells[f]).wrapInner("<span class='cell-wrapper"+p+"'></span>").prepend(o),n!==parseInt(b.p.tree_root_level,10)&&((r=(r=a(b).jqGrid("getNodeParent",r))&&r.hasOwnProperty(g)?r[g]:!0)||a(b.rows[d]).css("display","none")),a(b.rows[d].cells[f]).find("div.treeclick").bind("click",function(c){c=a(c.target||c.srcElement,b.rows).closest("tr.jqgrow")[0].id;
c=b.p._index[c];if(!b.p.data[c][k])if(b.p.data[c][g]){a(b).jqGrid("collapseRow",b.p.data[c]);a(b).jqGrid("collapseNode",b.p.data[c])}else{a(b).jqGrid("expandRow",b.p.data[c]);a(b).jqGrid("expandNode",b.p.data[c])}return false}),!0===b.p.ExpandColClick&&a(b.rows[d].cells[f]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(c){var c=a(c.target||c.srcElement,b.rows).closest("tr.jqgrow")[0].id,d=b.p._index[c];if(!b.p.data[d][k])if(b.p.data[d][g]){a(b).jqGrid("collapseRow",b.p.data[d]);
a(b).jqGrid("collapseNode",b.p.data[d])}else{a(b).jqGrid("expandRow",b.p.data[d]);a(b).jqGrid("expandNode",b.p.data[d])}a(b).jqGrid("setSelection",c);return false}),d++})},setTreeGrid:function(){return this.each(function(){var d=this,c=0,b=!1,f,g,k=[];if(d.p.treeGrid){d.p.treedatatype||a.extend(d.p,{treedatatype:d.p.datatype});d.p.subGrid=!1;d.p.altRows=!1;d.p.pgbuttons=!1;d.p.pginput=!1;d.p.gridview=!0;d.p.multiselect=!1;d.p.rowList=[];d.p.expColInd=0;d.p.treeIcons=a.extend({plus:"ui-icon-triangle-1-"+
("rtl"==d.p.direction?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},d.p.treeIcons||{});"nested"==d.p.treeGridModel?d.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},d.p.treeReader):"adjacency"==d.p.treeGridModel&&(d.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},d.p.treeReader));
for(g in d.p.colModel)if(d.p.colModel.hasOwnProperty(g)){f=d.p.colModel[g].name;f==d.p.ExpandColumn&&!b&&(b=!0,d.p.expColInd=c);c++;for(var l in d.p.treeReader)d.p.treeReader[l]==f&&k.push(f)}a.each(d.p.treeReader,function(b,f){if(f&&a.inArray(f,k)===-1){if(b==="leaf_field")d.p._treeleafpos=c;c++;d.p.colNames.push(f);d.p.colModel.push({name:f,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})}})},expandRow:function(d){this.each(function(){var c=this;if(c.grid&&
c.p.treeGrid){var b=a(c).jqGrid("getNodeChildren",d),f=c.p.treeReader.expanded_field;a(b).each(function(){var b=a.jgrid.getAccessor(this,c.p.localReader.id);a("#"+b,c.grid.bDiv).css("display","");this[f]&&a(c).jqGrid("expandRow",this)})}})},collapseRow:function(d){this.each(function(){var c=this;if(c.grid&&c.p.treeGrid){var b=a(c).jqGrid("getNodeChildren",d),f=c.p.treeReader.expanded_field;a(b).each(function(){var b=a.jgrid.getAccessor(this,c.p.localReader.id);a("#"+b,c.grid.bDiv).css("display","none");
this[f]&&a(c).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var d=[];this.each(function(){var c=this;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case "nested":var b=c.p.treeReader.level_field;a(c.p.data).each(function(){parseInt(this[b],10)===parseInt(c.p.tree_root_level,10)&&d.push(this)});break;case "adjacency":var f=c.p.treeReader.parent_id_field;a(c.p.data).each(function(){(null===this[f]||"null"==(""+this[f]).toLowerCase())&&d.push(this)})}});return d},getNodeDepth:function(d){var c=
null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":c=parseInt(d[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case "adjacency":c=a(this).jqGrid("getNodeAncestors",d).length}});return c},getNodeParent:function(d){var c=null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":var b=this.p.treeReader.left_field,f=this.p.treeReader.right_field,g=this.p.treeReader.level_field,k=parseInt(d[b],
10),l=parseInt(d[f],10),e=parseInt(d[g],10);a(this.p.data).each(function(){if(parseInt(this[g],10)===e-1&&parseInt(this[b],10)<k&&parseInt(this[f],10)>l)return c=this,!1});break;case "adjacency":var m=this.p.treeReader.parent_id_field,n=this.p.localReader.id;a(this.p.data).each(function(){if(this[n]==d[m])return c=this,!1})}});return c},getNodeChildren:function(d){var c=[];this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":var b=this.p.treeReader.left_field,
f=this.p.treeReader.right_field,g=this.p.treeReader.level_field,k=parseInt(d[b],10),l=parseInt(d[f],10),e=parseInt(d[g],10);a(this.p.data).each(function(){parseInt(this[g],10)===e+1&&parseInt(this[b],10)>k&&parseInt(this[f],10)<l&&c.push(this)});break;case "adjacency":var m=this.p.treeReader.parent_id_field,n=this.p.localReader.id;a(this.p.data).each(function(){this[m]==d[n]&&c.push(this)})}});return c},getFullTreeNode:function(d){var c=[];this.each(function(){var b;if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":var f=
this.p.treeReader.left_field,g=this.p.treeReader.right_field,k=this.p.treeReader.level_field,l=parseInt(d[f],10),e=parseInt(d[g],10),m=parseInt(d[k],10);a(this.p.data).each(function(){parseInt(this[k],10)>=m&&parseInt(this[f],10)>=l&&parseInt(this[f],10)<=e&&c.push(this)});break;case "adjacency":if(d){c.push(d);var n=this.p.treeReader.parent_id_field,p=this.p.localReader.id;a(this.p.data).each(function(a){b=c.length;for(a=0;a<b;a++)if(c[a][p]==this[n]){c.push(this);break}})}}});return c},getNodeAncestors:function(d){var c=
[];this.each(function(){if(this.grid&&this.p.treeGrid)for(var b=a(this).jqGrid("getNodeParent",d);b;)c.push(b),b=a(this).jqGrid("getNodeParent",b)});return c},isVisibleNode:function(d){var c=!0;this.each(function(){if(this.grid&&this.p.treeGrid){var b=a(this).jqGrid("getNodeAncestors",d),f=this.p.treeReader.expanded_field;a(b).each(function(){c=c&&this[f];if(!c)return!1})}});return c},isNodeLoaded:function(d){var c;this.each(function(){if(this.grid&&this.p.treeGrid){var b=this.p.treeReader.leaf_field;
c=void 0!==d?void 0!==d.loaded?d.loaded:d[b]||0<a(this).jqGrid("getNodeChildren",d).length?!0:!1:!1}});return c},expandNode:function(d){return this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.treeReader.expanded_field,b=this.p.treeReader.parent_id_field,f=this.p.treeReader.loaded,g=this.p.treeReader.level_field,k=this.p.treeReader.left_field,l=this.p.treeReader.right_field;if(!d[c]){var e=a.jgrid.getAccessor(d,this.p.localReader.id),m=a("#"+e,this.grid.bDiv)[0],n=this.p._index[e];
a(this).jqGrid("isNodeLoaded",this.p.data[n])?(d[c]=!0,a("div.treeclick",m).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):(d[c]=!0,a("div.treeclick",m).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=m.rowIndex,this.p.datatype=this.p.treedatatype,"nested"==this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:e,n_left:d[k],n_right:d[l],n_level:d[g]}}):a(this).jqGrid("setGridParam",
{postData:{nodeid:e,parentid:d[b],n_level:d[g]}}),a(this).trigger("reloadGrid"),d[f]=!0,"nested"==this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(d){return this.each(function(){if(this.grid&&this.p.treeGrid&&d.expanded){d.expanded=!1;var c=a.jgrid.getAccessor(d,this.p.localReader.id),c=a("#"+c,this.grid.bDiv)[0];a("div.treeclick",c).removeClass(this.p.treeIcons.minus+
" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}})},SortTree:function(d,c,b,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var g,k,l,e=[],m=this,n;g=a(this).jqGrid("getRootNodes");g=a.jgrid.from(g);g.orderBy(d,c,b,f);n=g.select();g=0;for(k=n.length;g<k;g++)l=n[g],e.push(l),a(this).jqGrid("collectChildrenSortTree",e,l,d,c,b,f);a.each(e,function(b){var c=a.jgrid.getAccessor(this,m.p.localReader.id);a("#"+m.p.id+" tbody tr:eq("+b+")").after(a("tr#"+c,m.grid.bDiv))});e=n=g=
null}})},collectChildrenSortTree:function(d,c,b,f,g,k){return this.each(function(){if(this.grid&&this.p.treeGrid){var l,e,m,n;l=a(this).jqGrid("getNodeChildren",c);l=a.jgrid.from(l);l.orderBy(b,f,g,k);n=l.select();l=0;for(e=n.length;l<e;l++)m=n[l],d.push(m),a(this).jqGrid("collectChildrenSortTree",d,m,b,f,g,k)}})},setTreeRow:function(d,c){var b=!1;this.each(function(){this.grid&&this.p.treeGrid&&(b=a(this).jqGrid("setRowData",d,c))});return b},delTreeNode:function(d){return this.each(function(){var c=
this.p.localReader.id,b=this.p.treeReader.left_field,f=this.p.treeReader.right_field,g,k,l;if(this.grid&&this.p.treeGrid){var e=this.p._index[d];if(void 0!==e){g=parseInt(this.p.data[e][f],10);k=g-parseInt(this.p.data[e][b],10)+1;e=a(this).jqGrid("getFullTreeNode",this.p.data[e]);if(0<e.length)for(var m=0;m<e.length;m++)a(this).jqGrid("delRowData",e[m][c]);if("nested"===this.p.treeGridModel){c=a.jgrid.from(this.p.data).greater(b,g,{stype:"integer"}).select();if(c.length)for(l in c)c[l][b]=parseInt(c[l][b],
10)-k;c=a.jgrid.from(this.p.data).greater(f,g,{stype:"integer"}).select();if(c.length)for(l in c)c[l][f]=parseInt(c[l][f],10)-k}}}})},addChildNode:function(d,c,b){var f=this[0];if(b){var g=f.p.treeReader.expanded_field,k=f.p.treeReader.leaf_field,l=f.p.treeReader.level_field,e=f.p.treeReader.parent_id_field,m=f.p.treeReader.left_field,n=f.p.treeReader.right_field,p=f.p.treeReader.loaded,o,r,s,v,u;o=0;var t=c,x;if(!d){u=f.p.data.length-1;if(0<=u)for(;0<=u;)o=Math.max(o,parseInt(f.p.data[u][f.p.localReader.id],
10)),u--;d=o+1}var y=a(f).jqGrid("getInd",c);x=!1;if(void 0===c||null===c||""===c)t=c=null,o="last",v=f.p.tree_root_level,u=f.p.data.length+1;else if(o="after",r=f.p._index[c],s=f.p.data[r],c=s[f.p.localReader.id],v=parseInt(s[l],10)+1,u=a(f).jqGrid("getFullTreeNode",s),u.length?(t=u[u.length-1][f.p.localReader.id],u=a(f).jqGrid("getInd",t)+1):u=a(f).jqGrid("getInd",c)+1,s[k])x=!0,s[g]=!0,a(f.rows[y]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(f.p.treeIcons.leaf+
" tree-leaf").addClass(f.p.treeIcons.minus+" tree-minus"),f.p.data[r][k]=!1,s[p]=!0;r=u+1;b[g]=!1;b[p]=!0;b[l]=v;b[k]=!0;"adjacency"===f.p.treeGridModel&&(b[e]=c);if("nested"===f.p.treeGridModel){var z;if(null!==c){k=parseInt(s[n],10);l=a.jgrid.from(f.p.data);l=l.greaterOrEquals(n,k,{stype:"integer"});l=l.select();if(l.length)for(z in l)l[z][m]=l[z][m]>k?parseInt(l[z][m],10)+2:l[z][m],l[z][n]=l[z][n]>=k?parseInt(l[z][n],10)+2:l[z][n];b[m]=k;b[n]=k+1}else{k=parseInt(a(f).jqGrid("getCol",n,!1,"max"),
10);l=a.jgrid.from(f.p.data).greater(m,k,{stype:"integer"}).select();if(l.length)for(z in l)l[z][m]=parseInt(l[z][m],10)+2;l=a.jgrid.from(f.p.data).greater(n,k,{stype:"integer"}).select();if(l.length)for(z in l)l[z][n]=parseInt(l[z][n],10)+2;b[m]=k+1;b[n]=k+2}}if(null===c||a(f).jqGrid("isNodeLoaded",s)||x)a(f).jqGrid("addRowData",d,b,o,t),a(f).jqGrid("setTreeNode",u,r);s&&!s[g]&&a(f.rows[y]).find("div.treeclick").click()}}})})(m);(function(a){a.jgrid.extend({jqGridImport:function(j){j=a.extend({imptype:"xml",
impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},j||{});return this.each(function(){var c=this,b=function(b,f){var e=a(f.xmlGrid.config,b)[0],g=a(f.xmlGrid.data,b)[0],j;if(d.xml2json&&a.jgrid.parse){var e=d.xml2json(e," "),e=a.jgrid.parse(e),m;for(m in e)e.hasOwnProperty(m)&&(j=e[m]);g?(g=e.grid.datatype,e.grid.datatype="xmlstring",e.grid.datastr=b,a(c).jqGrid(j).jqGrid("setGridParam",{datatype:g})):
a(c).jqGrid(j)}else alert("xml2json or parse are not present")},f=function(b,d){if(b&&"string"==typeof b){var e=a.jgrid.parse(b),f=e[d.jsonGrid.config];if(e=e[d.jsonGrid.data]){var g=f.datatype;f.datatype="jsonstring";f.datastr=e;a(c).jqGrid(f).jqGrid("setGridParam",{datatype:g})}else a(c).jqGrid(f)}};switch(j.imptype){case "xml":a.ajax(a.extend({url:j.impurl,type:j.mtype,data:j.impData,dataType:"xml",complete:function(c,d){"success"==d&&(b(c.responseXML,j),a.isFunction(j.importComplete)&&j.importComplete(c))}},
j.ajaxOptions));break;case "xmlstring":if(j.impstring&&"string"==typeof j.impstring){var g=a.jgrid.stringToDoc(j.impstring);g&&(b(g,j),a.isFunction(j.importComplete)&&j.importComplete(g),j.impstring=null);g=null}break;case "json":a.ajax(a.extend({url:j.impurl,type:j.mtype,data:j.impData,dataType:"json",complete:function(b,c){"success"==c&&(f(b.responseText,j),a.isFunction(j.importComplete)&&j.importComplete(b))}},j.ajaxOptions));break;case "jsonstring":j.impstring&&"string"==typeof j.impstring&&(f(j.impstring,
j),a.isFunction(j.importComplete)&&j.importComplete(j.impstring),j.impstring=null)}})},jqGridExport:function(j){var j=a.extend({exptype:"xmlstring",root:"grid",ident:"\t"},j||{}),c=null;this.each(function(){if(this.grid){var b=a.extend({},a(this).jqGrid("getGridParam"));b.rownumbers&&(b.colNames.splice(0,1),b.colModel.splice(0,1));b.multiselect&&(b.colNames.splice(0,1),b.colModel.splice(0,1));b.subGrid&&(b.colNames.splice(0,1),b.colModel.splice(0,1));b.knv=null;if(b.treeGrid)for(var f in b.treeReader)b.treeReader.hasOwnProperty(f)&&
(b.colNames.splice(b.colNames.length-1),b.colModel.splice(b.colModel.length-1));switch(j.exptype){case "xmlstring":c="<"+j.root+">"+d.json2xml(b,j.ident)+"</"+j.root+">";break;case "jsonstring":c="{"+d.toJson(b,j.root,j.ident)+"}",void 0!==b.postData.filters&&(c=c.replace(/filters":"/,'filters":'),c=c.replace(/}]}"/,"}]}"))}}});return c},excelExport:function(d){d=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},d||{});return this.each(function(){if(this.grid){var c;"remote"==
d.exptype&&(c=a.extend({},this.p.postData),c[d.oper]=d.tag,c=m.param(c),c=-1!=d.url.indexOf("?")?d.url+"&"+c:d.url+"?"+c,window.location=c)}})}})})(m);var d={xml2json:function(a,d){9===a.nodeType&&(a=a.documentElement);var c=this.toJson(this.toObj(this.removeWhite(a)),a.nodeName,"\t");return"{\n"+d+(d?c.replace(/\t/g,d):c.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,d){var c=function(a,b,d){var e="",f,j;if(a instanceof Array)if(0===a.length)e+=d+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else{f=0;for(j=
a.length;f<j;f+=1)var m=d+c(a[f],b,d+"\t")+"\n",e=e+m}else if("object"===typeof a){f=!1;e+=d+"<"+b;for(j in a)a.hasOwnProperty(j)&&("@"===j.charAt(0)?e+=" "+j.substr(1)+'="'+a[j].toString()+'"':f=!0);e+=f?">":"/>";if(f){for(j in a)a.hasOwnProperty(j)&&("#text"===j?e+=a[j]:"#cdata"===j?e+="<![CDATA["+a[j]+"]]\>":"@"!==j.charAt(0)&&(e+=c(a[j],j,d+"\t")));e+=("\n"===e.charAt(e.length-1)?d:"")+"</"+b+">"}}else e+="function"===typeof a?d+"<"+b+"><![CDATA["+a+"]]\></"+b+">":'""'===a.toString()||0===a.toString().length?
d+"<"+b+">__EMPTY_STRING_</"+b+">":d+"<"+b+">"+a.toString()+"</"+b+">";return e},b="",f;for(f in a)a.hasOwnProperty(f)&&(b+=c(a[f],f,""));return d?b.replace(/\t/g,d):b.replace(/\t|\n/g,"")},toObj:function(a){var d={},c=/function/i;if(1===a.nodeType){if(a.attributes.length){var b;for(b=0;b<a.attributes.length;b+=1)d["@"+a.attributes[b].nodeName]=(a.attributes[b].nodeValue||"").toString()}if(a.firstChild){var f=b=0,g=!1,k;for(k=a.firstChild;k;k=k.nextSibling)1===k.nodeType?g=!0:3===k.nodeType&&k.nodeValue.match(/[^ \f\n\r\t\v]/)?
b+=1:4===k.nodeType&&(f+=1);if(g)if(2>b&&2>f){this.removeWhite(a);for(k=a.firstChild;k;k=k.nextSibling)3===k.nodeType?d["#text"]=this.escape(k.nodeValue):4===k.nodeType?c.test(k.nodeValue)?d[k.nodeName]=[d[k.nodeName],k.nodeValue]:d["#cdata"]=this.escape(k.nodeValue):d[k.nodeName]?d[k.nodeName]instanceof Array?d[k.nodeName][d[k.nodeName].length]=this.toObj(k):d[k.nodeName]=[d[k.nodeName],this.toObj(k)]:d[k.nodeName]=this.toObj(k)}else a.attributes.length?d["#text"]=this.escape(this.innerXml(a)):d=
this.escape(this.innerXml(a));else if(b)a.attributes.length?d["#text"]=this.escape(this.innerXml(a)):(d=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===d?d="[]":"__EMPTY_STRING_"===d&&(d=""));else if(f)if(1<f)d=this.escape(this.innerXml(a));else for(k=a.firstChild;k;k=k.nextSibling)if(c.test(a.firstChild.nodeValue)){d=a.firstChild.nodeValue;break}else d["#cdata"]=this.escape(k.nodeValue)}!a.attributes.length&&!a.firstChild&&(d=null)}else 9===a.nodeType?d=this.toObj(a.documentElement):alert("unhandled node type: "+
a.nodeType);return d},toJson:function(a,d,c,b){void 0===b&&(b=!0);var f=d?'"'+d+'"':"",g="\t",k="\n";b||(k=g="");if("[]"===a)f+=d?":[]":"[]";else if(a instanceof Array){var l,e,m=[];e=0;for(l=a.length;e<l;e+=1)m[e]=this.toJson(a[e],"",c+g,b);f+=(d?":[":"[")+(1<m.length?k+c+g+m.join(","+k+c+g)+k+c:m.join(""))+"]"}else if(null===a)f+=(d&&":")+"null";else if("object"===typeof a){l=[];for(e in a)a.hasOwnProperty(e)&&(l[l.length]=this.toJson(a[e],e,c+g,b));f+=(d?":{":"{")+(1<l.length?k+c+g+l.join(","+
k+c+g)+k+c:l.join(""))+"}"}else f+="string"===typeof a?(d&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(d&&":")+'"'+a.toString()+'"';return f},innerXml:function(a){var d="";if("innerHTML"in a)d=a.innerHTML;else for(var c=function(a){var d="",g;if(1===a.nodeType){d+="<"+a.nodeName;for(g=0;g<a.attributes.length;g+=1)d+=" "+a.attributes[g].nodeName+'="'+(a.attributes[g].nodeValue||"").toString()+'"';if(a.firstChild){d+=">";for(g=a.firstChild;g;g=g.nextSibling)d+=c(g);d+="</"+a.nodeName+
">"}else d+="/>"}else 3===a.nodeType?d+=a.nodeValue:4===a.nodeType&&(d+="<![CDATA["+a.nodeValue+"]]\>");return d},a=a.firstChild;a;a=a.nextSibling)d+=c(a);return d},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var d;for(d=a.firstChild;d;)if(3===d.nodeType)if(d.nodeValue.match(/[^ \f\n\r\t\v]/))d=d.nextSibling;else{var c=d.nextSibling;a.removeChild(d);d=c}else 1===d.nodeType&&this.removeWhite(d),
d=d.nextSibling;return a}};(function(a){a.browser.msie&&8==a.browser.version&&(a.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"==a.style.display});a.jgrid._multiselect=!1;if(a.ui&&a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var d=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(c,b){var f=d.call(this,c,b);if(b&&this.selectedList){var g=this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&
a(this).data("optionLink").remove().appendTo(g)})}return f}}a.ui.multiselect.prototype.destroy&&(a.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();a.Widget===void 0?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)});a.jgrid._multiselect=!0}a.jgrid.extend({sortableColumns:function(c){return this.each(function(){function b(){d.p.disableClick=true}var d=this,g={tolerance:"pointer",axis:"x",scrollSensitivity:"1",
items:">th:not(:has(#jqgh_cb,#jqgh_rn,#jqgh_subgrid),:hidden)",placeholder:{element:function(b){return a(document.createElement(b[0].nodeName)).addClass(b[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10));b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||
0,10))}},update:function(b,c){var g=a(c.item).parent(),g=a(">th",g),j={};a.each(d.p.colModel,function(a){j[this.name]=a});var k=[];g.each(function(){var b=a(">div",this).get(0).id.replace(/^jqgh_/,"");b in j&&k.push(j[b])});a(d).jqGrid("remapColumns",k,true,true);a.isFunction(d.p.sortable.update)&&d.p.sortable.update(k);setTimeout(function(){d.p.disableClick=false},50)}};if(d.p.sortable.options)a.extend(g,d.p.sortable.options);else if(a.isFunction(d.p.sortable))d.p.sortable={update:d.p.sortable};
if(g.start){var j=g.start;g.start=function(a,c){b();j.call(this,a,c)}}else g.start=b;if(d.p.sortable.exclude)g.items=g.items+(":not("+d.p.sortable.exclude+")");c.sortable(g).data("sortable").floating=true})},columnChooser:function(c){function b(b,c){b&&(typeof b=="string"?a.fn[b]&&a.fn[b].apply(c,a.makeArray(arguments).slice(2)):a.isFunction(b)&&b.apply(c,a.makeArray(arguments).slice(2)))}var d=this;if(!a("#colchooser_"+d[0].p.id).length){var g=a('<div id="colchooser_'+d[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),
j=a("select",g),c=a.extend({width:420,height:240,classname:null,done:function(a){a&&d.jqGrid("remapColumns",a,true)},msel:"multiselect",dlog:"dialog",dlog_opts:function(a){var b={};b[a.bSubmit]=function(){a.apply_perm();a.cleanup(false)};b[a.bCancel]=function(){a.cleanup(true)};return{buttons:b,close:function(){a.cleanup(true)},modal:a.modal?a.modal:false,resizable:a.resizable?a.resizable:true,width:a.width+20}},apply_perm:function(){a("option",j).each(function(){this.selected?d.jqGrid("showCol",
l[this.value].name):d.jqGrid("hideCol",l[this.value].name)});var b=[];a("option[selected]",j).each(function(){b.push(parseInt(this.value,10))});a.each(b,function(){delete m[l[parseInt(this,10)].name]});a.each(m,function(){var a=parseInt(this,10),c=b,d=a;if(d>=0){var e=c.slice(),f=e.splice(d,Math.max(c.length-d,d));if(d>c.length)d=c.length;e[d]=a;b=e.concat(f)}else b=void 0});c.done&&c.done.call(d,b)},cleanup:function(a){b(c.dlog,g,"destroy");b(c.msel,j,"destroy");g.remove();a&&c.done&&c.done.call(d)},
msel_opts:{}},a.jgrid.col,c||{});if(a.ui&&a.ui.multiselect&&c.msel=="multiselect"){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}c.msel_opts=a.extend(a.ui.multiselect.defaults,c.msel_opts)}c.caption&&g.attr("title",c.caption);if(c.classname){g.addClass(c.classname);j.addClass(c.classname)}if(c.width){a(">div",g).css({width:c.width,margin:"0 auto"});j.css("width",c.width)}if(c.height){a(">div",g).css("height",c.height);j.css("height",
c.height-10)}var l=d.jqGrid("getGridParam","colModel"),e=d.jqGrid("getGridParam","colNames"),m={},n=[];j.empty();a.each(l,function(a){m[this.name]=a;this.hidedlg?this.hidden||n.push(a):j.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+e[a]+"</option>")});var p=a.isFunction(c.dlog_opts)?c.dlog_opts.call(d,c):c.dlog_opts;b(c.dlog,g,p);p=a.isFunction(c.msel_opts)?c.msel_opts.call(d,c):c.msel_opts;b(c.msel,j,p)}},sortableRows:function(c){return this.each(function(){var b=this;
if(b.grid&&!b.p.treeGrid&&a.fn.sortable){c=a.extend({cursor:"move",axis:"y",items:".jqgrow"},c||{});if(c.start&&a.isFunction(c.start)){c._start_=c.start;delete c.start}else c._start_=false;if(c.update&&a.isFunction(c.update)){c._update_=c.update;delete c.update}else c._update_=false;c.start=function(d,g){a(g.item).css("border-width","0px");a("td",g.item).each(function(a){this.style.width=b.grid.cols[a].style.width});if(b.p.subGrid){var j=a(g.item).attr("id");try{a(b).jqGrid("collapseSubGridRow",j)}catch(l){}}c._start_&&
c._start_.apply(this,[d,g])};c.update=function(d,g){a(g.item).css("border-width","");b.p.rownumbers===true&&a("td.jqgrid-rownum",b.rows).each(function(b){a(this).html(b+1)});c._update_&&c._update_.apply(this,[d,g])};a("tbody:first",b).sortable(c);a("tbody:first",b).disableSelection()}})},gridDnD:function(c){return this.each(function(){function b(){var b=a.data(d,"dnd");a("tr.jqgrow:not(.ui-draggable)",d).draggable(a.isFunction(b.drag)?b.drag.call(a(d),b):b.drag)}var d=this;if(d.grid&&!d.p.treeGrid&&
a.fn.draggable&&a.fn.droppable){a("#jqgrid_dnd").html()===null&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>");if(typeof c=="string"&&c=="updateDnD"&&d.p.jqgdnd===true)b();else{c=a.extend({drag:function(b){return a.extend({start:function(c,e){if(d.p.subGrid){var g=a(e.helper).attr("id");try{a(d).jqGrid("collapseSubGridRow",g)}catch(j){}}for(g=0;g<a.data(d,"dnd").connectWith.length;g++)a(a.data(d,"dnd").connectWith[g]).jqGrid("getGridParam","reccount")=="0"&&a(a.data(d,"dnd").connectWith[g]).jqGrid("addRowData",
"jqg_empty_row",{});e.helper.addClass("ui-state-highlight");a("td",e.helper).each(function(a){this.style.width=d.grid.headers[a].width+"px"});b.onstart&&a.isFunction(b.onstart)&&b.onstart.call(a(d),c,e)},stop:function(c,e){if(e.helper.dropped){var g=a(e.helper).attr("id");a(d).jqGrid("delRowData",g)}for(g=0;g<a.data(d,"dnd").connectWith.length;g++)a(a.data(d,"dnd").connectWith[g]).jqGrid("delRowData","jqg_empty_row");b.onstop&&a.isFunction(b.onstop)&&b.onstop.call(a(d),c,e)}},b.drag_opts||{})},drop:function(b){return a.extend({accept:function(b){if(!a(b).hasClass("jqgrow"))return b;
var c=a(b).closest("table.ui-jqgrid-btable");if(c.length>0&&a.data(c[0],"dnd")!==void 0){b=a.data(c[0],"dnd").connectWith;return a.inArray("#"+this.id,b)!=-1?true:false}return b},drop:function(c,e){if(a(e.draggable).hasClass("jqgrow")){var g=a(e.draggable).attr("id"),g=e.draggable.parent().parent().jqGrid("getRowData",g);if(!b.dropbyname){var j=0,m={},o,r=a("#"+this.id).jqGrid("getGridParam","colModel");try{for(var s in g){if(g.hasOwnProperty(s)&&r[j]){o=r[j].name;m[o]=g[s]}j++}g=m}catch(v){}}e.helper.dropped=
true;if(b.beforedrop&&a.isFunction(b.beforedrop)){o=b.beforedrop.call(this,c,e,g,a("#"+d.id),a(this));typeof o!="undefined"&&(o!==null&&typeof o=="object")&&(g=o)}if(e.helper.dropped){var u;if(b.autoid)if(a.isFunction(b.autoid))u=b.autoid.call(this,g);else{u=Math.ceil(Math.random()*1E3);u=b.autoidprefix+u}a("#"+this.id).jqGrid("addRowData",u,g,b.droppos)}b.ondrop&&a.isFunction(b.ondrop)&&b.ondrop.call(this,c,e,g)}}},b.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",
hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5E3},dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},c||{});if(c.connectWith){c.connectWith=c.connectWith.split(",");c.connectWith=a.map(c.connectWith,function(b){return a.trim(b)});a.data(d,"dnd",c);d.p.reccount!="0"&&!d.p.jqgdnd&&b();d.p.jqgdnd=true;for(var g=0;g<c.connectWith.length;g++)a(c.connectWith[g]).droppable(a.isFunction(c.drop)?c.drop.call(a(d),c):c.drop)}}}})},
gridResize:function(c){return this.each(function(){var b=this;if(b.grid&&a.fn.resizable){c=a.extend({},c||{});if(c.alsoResize){c._alsoResize_=c.alsoResize;delete c.alsoResize}else c._alsoResize_=false;if(c.stop&&a.isFunction(c.stop)){c._stop_=c.stop;delete c.stop}else c._stop_=false;c.stop=function(d,g){a(b).jqGrid("setGridParam",{height:a("#gview_"+b.p.id+" .ui-jqgrid-bdiv").height()});a(b).jqGrid("setGridWidth",g.size.width,c.shrinkToFit);c._stop_&&c._stop_.call(b,d,g)};c.alsoResize=c._alsoResize_?
eval("("+("{'#gview_"+b.p.id+" .ui-jqgrid-bdiv':true,'"+c._alsoResize_+"':true}")+")"):a(".ui-jqgrid-bdiv","#gview_"+b.p.id);delete c._alsoResize_;a("#gbox_"+b.p.id).resizable(c)}})}})})(m)});define("jquery-layout",["jquery"],function(m){(function(d){var a=Math.min,j=Math.max,c=Math.floor,b=function(a){return"string"===d.type(a)},f=function(a,c){if(d.isArray(c))for(var f=0,e=c.length;f<e;f++){var j=c[f];try{b(j)&&(j=eval(j)),d.isFunction(j)&&j(a)}catch(m){}}};d.layout={version:"1.3.rc30.7",revision:0.033007,
browser:{mozilla:!!d.browser.mozilla,webkit:!!d.browser.webkit||!!d.browser.safari,msie:!!d.browser.msie,isIE6:d.browser.msie&&6==d.browser.version,boxModel:!1!==d.support.boxModel||!d.browser.msie,version:d.browser.version},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},
blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,
margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",
overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",
right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(a){a=d(a);if(a=a.data("layout")||a.data("parentLayout")){a=a.container;if(a.data("layoutPane"))return a;a=a.closest("."+d.layout.defaults.panes.paneClass);if(a.data("layoutPane"))return a}return null},getParentPaneInstance:function(a){return(a=d.layout.getParentPaneElem(a))?a.data("layoutPane"):null},getParentLayoutInstance:function(a){return(a=d.layout.getParentPaneElem(a))?a.data("parentLayout"):
null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(a){var b=d.layout.getEventObject(a);return b?(b.stopPropagation(),d(this).data("layoutEdge")):a},plugins:{draggable:!!d.fn.draggable,effects:{core:!!d.effects,slide:d.effects&&(d.effects.slide||d.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||d.layout.getScrollbarSize("width")},
scrollbarHeight:function(){return window.scrollbarHeight||d.layout.getScrollbarSize("height")},getScrollbarSize:function(a){var b=d('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),c={width:b.css("width")-b[0].clientWidth,height:b.height()-b[0].clientHeight};b.remove();window.scrollbarWidth=c.width;window.scrollbarHeight=c.height;return a.match(/^(width|height)$/)?c[a]:c},showInvisibly:function(a,b){if(a&&a.length&&
(b||"none"===a.css("display"))){var c=a[0].style,c={display:c.display||"",visibility:c.visibility||""};a.css({display:"block",visibility:"hidden"});return c}return{}},getElementDimensions:function(a,b){var c={css:{},inset:{}},e=c.css,f={bottom:0},m=d.layout.cssNum,p=a.offset(),o,r,s;c.offsetLeft=p.left;c.offsetTop=p.top;b||(b={});d.each(["Left","Right","Top","Bottom"],function(j,m){o=e["border"+m]=d.layout.borderWidth(a,m);r=e["padding"+m]=d.layout.cssNum(a,"padding"+m);s=m.toLowerCase();c.inset[s]=
0<=b[s]?b[s]:r;f[s]=c.inset[s]+o});e.width=a.css("width");e.height=a.height();e.top=m(a,"top",!0);e.bottom=m(a,"bottom",!0);e.left=m(a,"left",!0);e.right=m(a,"right",!0);c.outerWidth=a.outerWidth();c.outerHeight=a.outerHeight();c.innerWidth=j(0,c.outerWidth-f.left-f.right);c.innerHeight=j(0,c.outerHeight-f.top-f.bottom);c.layoutWidth=a.innerWidth();c.layoutHeight=a.innerHeight();return c},getElementStyles:function(a,b){var c={},d=a[0].style,f=b.split(","),j=["Top","Bottom","Left","Right"],m=["Color",
"Style","Width"],o,r,s,v,u,t;for(v=0;v<f.length;v++)if(o=f[v],o.match(/(border|padding|margin)$/))for(u=0;4>u;u++)if(r=j[u],"border"===o)for(t=0;3>t;t++)s=m[t],c[o+r+s]=d[o+r+s];else c[o+r]=d[o+r];else c[o]=d[o];return c},cssWidth:function(a,b){if(0>=b)return 0;if(!d.layout.browser.boxModel)return b;var c=d.layout.borderWidth,e=d.layout.cssNum,c=b-c(a,"Left")-c(a,"Right")-e(a,"paddingLeft")-e(a,"paddingRight");return j(0,c)},cssHeight:function(a,b){if(0>=b)return 0;if(!d.layout.browser.boxModel)return b;
var c=d.layout.borderWidth,e=d.layout.cssNum,c=b-c(a,"Top")-c(a,"Bottom")-e(a,"paddingTop")-e(a,"paddingBottom");return j(0,c)},cssNum:function(a,b,c){a.jquery||(a=d(a));var e=d.layout.showInvisibly(a),b=d.css(a[0],b,!0),c=c&&"auto"==b?b:Math.round(parseFloat(b)||0);a.css(e);return c},borderWidth:function(a,b){a.jquery&&(a=a[0]);var c="border"+b.substr(0,1).toUpperCase()+b.substr(1);return"none"===d.css(a,c+"Style",!0)?0:Math.round(parseFloat(d.css(a,c+"Width",!0))||0)},isMouseOverElem:function(a,
b){var c=d(b||this),e=c.offset(),f=e.top,e=e.left,j=e+c.outerWidth(),c=f+c.outerHeight(),m=a.pageX,o=a.pageY;return d.layout.browser.msie&&0>m&&0>o||m>=e&&m<=j&&o>=f&&o<=c},msg:function(a,b,c,e){d.isPlainObject(a)&&window.debugData?("string"===typeof b?(e=c,c=b):"object"===typeof c&&(e=c,c=null),c=c||"log( <object> )",e=d.extend({sort:!1,returnHTML:!1,display:!1},e),!0===b||e.display?debugData(a,c,e):window.console&&console.log(debugData(a,c,e))):b?alert(a):window.console?console.log(a):(b=d("#layoutLogger"),
b.length||(b=d('<div id="layoutLogger" style="position: '+(d.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
b.css("left",d(window).width()-b.outerWidth()-5),d.ui.draggable&&b.draggable({handle:":first-child"})),b.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};d.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,
onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button \n\nInvalid ",containerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",
noContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\n\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",
togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",
slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:d.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",
fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},
north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};d.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onunload".split(" "),
center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]};d.layout.transformData=function(a,b){var c=b?{panes:{},center:{}}:{},e,f,j,m,o,r,s;if("object"!==
typeof a)return c;for(f in a){e=c;o=a[f];j=f.split("__");s=j.length-1;for(r=0;r<=s;r++)m=j[r],r===s?e[m]=d.isPlainObject(o)?d.layout.transformData(o):o:(e[m]||(e[m]={}),e=e[m])}return c};d.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",
triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",
noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(a){function b(c,d){for(var e=c.split("."),f=e.length-1,j={branch:a,key:e[f]},k=0,l;k<f;k++)l=e[k],j.branch=void 0==j.branch[l]?d?j.branch[l]={}:{}:j.branch[l];return j}var c=d.layout.backwardCompatibility.map,e,f,j,m;for(m in c)e=b(m),j=e.branch[e.key],void 0!==j&&(f=b(c[m],!0),f.branch[f.key]=j,delete e.branch[e.key])},renameAllOptions:function(a){var b=
d.layout.backwardCompatibility.renameOptions;b(a);a.defaults&&("object"!==typeof a.panes&&(a.panes={}),d.extend(!0,a.panes,a.defaults),delete a.defaults);a.panes&&b(a.panes);d.each(d.layout.config.allPanes,function(c,d){a[d]&&b(a[d])});return a}};d.fn.layout=function(g){function k(a){if(!a)return!0;var b=a.keyCode;if(33>b)return!0;var c={38:"north",40:"south",37:"west",39:"east"},e=a.shiftKey,f=a.ctrlKey,g,j,k,l;f&&(37<=b&&40>=b)&&t[c[b]].enableCursorHotkey?l=c[b]:(f||e)&&d.each(n.borderPanes,function(a,
c){g=t[c];j=g.customHotkey;k=g.customHotkeyModifier;if(e&&"SHIFT"==k||f&&"CTRL"==k||f&&e)if(j&&b===(isNaN(j)||9>=j?j.toUpperCase().charCodeAt(0):j))return l=c,!1});if(!l||!R[l]||!t[l].closable||x[l].isHidden)return!0;Ca(l);a.stopPropagation();return a.returnValue=!1}function l(a){if(I()){this&&this.tagName&&(a=this);var c;b(a)?c=R[a]:d(a).data("layoutRole")?c=d(a):d(a).parents().each(function(){if(d(this).data("layoutRole"))return c=d(this),!1});if(c&&c.length){var f=c.data("layoutEdge"),a=x[f];a.cssSaved&&
e(f);if(a.isSliding||a.isResizing||a.isClosed)a.cssSaved=!1;else{var g={zIndex:t.zIndexes.resizer_normal+1},j={},k=c.css("overflow"),l=c.css("overflowX"),m=c.css("overflowY");"visible"!=k&&(j.overflow=k,g.overflow="visible");l&&!l.match(/(visible|auto)/)&&(j.overflowX=l,g.overflowX="visible");m&&!m.match(/(visible|auto)/)&&(j.overflowY=l,g.overflowY="visible");a.cssSaved=j;c.css(g);d.each(n.allPanes,function(a,b){b!=f&&e(b)})}}}}function e(a){if(I()){this&&this.tagName&&(a=this);var c;b(a)?c=R[a]:
d(a).data("layoutRole")?c=d(a):d(a).parents().each(function(){if(d(this).data("layoutRole"))return c=d(this),!1});if(c&&c.length){var a=c.data("layoutEdge"),a=x[a],e=a.cssSaved||{};!a.isSliding&&!a.isResizing&&c.css("zIndex",t.zIndexes.pane_normal);c.css(e);a.cssSaved=!1}}}var m=d.layout.browser,n=d.layout.config,p=d.layout.cssWidth,o=d.layout.cssHeight,r=d.layout.getElementDimensions,s=d.layout.getElementStyles,v=d.layout.getEventObject,u=d.layout.parsePaneName,t=d.extend(!0,{},d.layout.defaults);
t.effects=d.extend(!0,{},d.layout.effects);var x={id:"layout"+d.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},y={north:null,south:null,east:null,west:null,center:null},z={data:{},set:function(a,b,c){z.clear(a);z.data[a]=setTimeout(b,c)},clear:function(a){var b=z.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},
A=function(a,b,c){var e=t;(e.showErrorMessages&&!c||c&&e.showDebugMessages)&&d.layout.msg(e.name+" / "+a,!1!==b);return!1},F=function(a,c,e){var f=c&&b(c),g=f?x[c]:x,j=f?t[c]:t,k=t.name,l=a+(a.match(/_/)?"":"_end"),m=l.match(/_end$/)?l.substr(0,l.length-4):"",n=j[l]||j[m],o="NC",p=[];!f&&"boolean"===d.type(c)&&(e=c,c="");if(n)try{b(n)&&(n.match(/,/)?(p=n.split(","),n=eval(p[0])):n=eval(n)),d.isFunction(n)&&(o=p.length?n(p[1]):f?n(c,R[c],g,j,k):n(ca,g,j,k))}catch(q){A(t.errors.callbackError.replace(/EVENT/,
d.trim((c||"")+" "+l)),!1)}!e&&!1!==o&&(f?(e=R[c],j=t[c],g=x[c],e.triggerHandler("layoutpane"+l,[c,e,g,j,k]),m&&e.triggerHandler("layoutpane"+m,[c,e,g,j,k])):(V.triggerHandler("layout"+l,[ca,g,j,k]),m&&V.triggerHandler("layout"+m,[ca,g,j,k])));(f&&"onresize_end"===a||"onsizecontent_end"===a)&&bb(c+"",!0);return o},H=function(a){if(!m.mozilla){var b=R[a];"IFRAME"===x[a].tagName?b.css(n.hidden).css(n.visible):b.find("IFRAME").css(n.hidden).css(n.visible)}},D=function(a){var b=R[a],a=n[a].dir,b={minWidth:1001-
p(b,1E3),minHeight:1001-o(b,1E3)};"horz"===a&&(b.minSize=b.minHeight);"vert"===a&&(b.minSize=b.minWidth);return b},Q=function(a,c,e){var f=a;b(a)?f=R[a]:a.jquery||(f=d(a));a=o(f,c);f.css({height:a,visibility:"visible"});0<a&&0<f.innerWidth()?e&&f.data("autoHidden")&&(f.show().data("autoHidden",!1),m.mozilla||f.css(n.hidden).css(n.visible)):e&&!f.data("autoHidden")&&f.hide().data("autoHidden",!0)},E=function(a,e,f){f||(f=n[a].dir);b(e)&&e.match(/%/)&&(e="100%"===e?-1:parseInt(e,10)/100);if(0===e)return 0;
if(1<=e)return parseInt(e,10);var g=t,j=0;"horz"==f?j=N.innerHeight-(R.north?g.north.spacing_open:0)-(R.south?g.south.spacing_open:0):"vert"==f&&(j=N.innerWidth-(R.west?g.west.spacing_open:0)-(R.east?g.east.spacing_open:0));if(-1===e)return j;if(0<e)return c(j*e);if("center"==a)return 0;var f="horz"===f?"height":"width",g=R[a],a="height"===f?za[a]:!1,j=d.layout.showInvisibly(g),k=g.css(f),l=a?a.css(f):0;g.css(f,"auto");a&&a.css(f,"auto");e="height"===f?g.outerHeight():g.outerWidth();g.css(f,k).css(j);
a&&a.css(f,l);return e},B=function(a,b){var c=R[a],d=t[a],e=x[a],f=b?d.spacing_open:0,d=b?d.spacing_closed:0;return!c||e.isHidden?0:e.isClosed||e.isSliding&&b?d:"horz"===n[a].dir?c.outerHeight()+f:c.outerWidth()+f},T=function(b,c){if(I()){var d=t[b],e=x[b],f=n[b],g=f.dir;f.sizeType.toLowerCase();var f=void 0!=c?c:e.isSliding,k=d.spacing_open,l=n.oppositeEdge[b],m=x[l],o=R[l],p=!o||!1===m.isVisible||m.isSliding?0:"horz"==g?o.outerHeight():o.outerWidth(),l=(!o||m.isHidden?0:t[l][!1!==m.isClosed?"spacing_closed":
"spacing_open"])||0,m="horz"==g?N.innerHeight:N.innerWidth,o=D("center"),o="horz"==g?j(t.center.minHeight,o.minHeight):j(t.center.minWidth,o.minWidth),f=m-k-(f?0:E("center",o,g)+p+l),g=e.minSize=j(E(b,d.minSize),D(b).minSize),f=e.maxSize=a(d.maxSize?E(b,d.maxSize):1E5,f),e=e.resizerPosition={},k=N.inset.top,p=N.inset.left,l=N.innerWidth,m=N.innerHeight,d=d.spacing_open;switch(b){case "north":e.min=k+g;e.max=k+f;break;case "west":e.min=p+g;e.max=p+f;break;case "south":e.min=k+m-f-d;e.max=k+m-g-d;break;
case "east":e.min=p+l-f-d,e.max=p+l-g-d}}},W=function(a,b){var c=d(a),e=c.data("layoutRole"),f=c.data("layoutEdge"),g=t[f][e+"Class"],f="-"+f,j=c.hasClass(g+"-closed")?"-closed":"-open",k="-closed"===j?"-open":"-closed",j=g+"-hover "+(g+f+"-hover ")+(g+j+"-hover ")+(g+f+j+"-hover ");b&&(j+=g+k+"-hover "+(g+f+k+"-hover "));"resizer"==e&&c.hasClass(g+"-sliding")&&(j+=g+"-sliding-hover "+(g+f+"-sliding-hover "));return d.trim(j)},O=function(a,b){var c=d(b||this);a&&"toggler"===c.data("layoutRole")&&
a.stopPropagation();c.addClass(W(c))},U=function(a,b){var c=d(b||this);c.removeClass(W(c,!0))},G=function(){var a=d(this).data("layoutEdge"),b=x[a];!b.isClosed&&(!b.isResizing&&!x.paneResizing)&&(d.fn.disableSelection&&d("body").disableSelection(),t.maskPanesEarly&&la(a))},S=function(a,b){var c=b||this,e=d(c).data("layoutEdge"),f=e+"ResizerLeave";z.clear(e+"_openSlider");z.clear(f);b?x.paneResizing||(d.fn.enableSelection&&d("body").enableSelection(),t.maskPanesEarly&&Fa()):z.set(f,function(){S(a,
c)},200)},I=function(){return x.initialized||x.creatingLayout?!0:P()},P=function(a){var b=t;if(!V.is(":visible"))return!a&&(m.webkit&&"BODY"===V[0].tagName)&&setTimeout(function(){P(!0)},50),!1;if(!C("center").length)return A(b.errors.centerPaneMissing);x.creatingLayout=!0;d.extend(N,r(V,b.inset));Ha();b.scrollToBookmarkOnLoad&&(a=self.location,a.hash&&a.replace(a.hash));ca.hasParentLayout?b.resizeWithWindow=!1:b.resizeWithWindow&&d(window).bind("resize."+pa,ia);delete x.creatingLayout;x.initialized=
!0;f(ca,d.layout.onReady);F("onload_end");return!0},Z=function(a,b){var c=u.call(this,a),e=R[c];if(e){var f=za[c],g=x[c],j=t[c],k=t.stateManagement||{},j=b?j.children=b:j.children;if(d.isPlainObject(j))j=[j];else if(!j||!d.isArray(j))return;d.each(j,function(a,b){d.isPlainObject(b)&&(b.containerSelector?e.find(b.containerSelector):f||e).each(function(){var a=d(this),e=a.data("layout");if(!e){Y({container:a,options:b},g);if(k.includeChildren&&x.stateData[c]){var e=(x.stateData[c].children||{})[b.instanceKey],
f=b.stateManagement||(b.stateManagement={autoLoad:!0});!0===f.autoLoad&&e&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=d.extend(!0,{},e))}(e=a.layout(b))&&ba(c,e)}})})}},Y=function(a,b){var c=a.container,d=a.options,e=d.stateManagement,f=d.instanceKey||c.data("layoutInstanceKey");f||(f=(e&&e.cookie?e.cookie.name:"")||d.name);f=f?f.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;d.instanceKey=f;c.data("layoutInstanceKey",f);return f},ba=function(a,b){var c=R[a],e=y[a],f=x[a];
d.isPlainObject(e)&&(d.each(e,function(a,b){b.destroyed&&delete e[a]}),d.isEmptyObject(e)&&(e=y[a]=null));!b&&!e&&(b=c.data("layout"));b&&(b.hasParentLayout=!0,c=b.options,Y(b,f),e||(e=y[a]={}),e[c.instanceKey]=b.container.data("layout"));ca[a].children=y[a];b||Z(a)},ia=function(){var a=t,b=Number(a.resizeWithWindowDelay);10>b&&(b=100);z.clear("winResize");z.set("winResize",function(){z.clear("winResize");z.clear("winResizeRepeater");var b=r(V,a.inset);(b.innerWidth!==N.innerWidth||b.innerHeight!==
N.innerHeight)&&xa()},b);z.data.winResizeRepeater||X()},X=function(){var a=Number(t.resizeWithWindowMaxDelay);0<a&&z.set("winResizeRepeater",function(){X();xa()},a)},L=function(){F("onunload_start");f(ca,d.layout.onUnload);F("onunload_end")},J=function(a){a=a?a.split(","):n.borderPanes;d.each(a,function(a,b){var c=t[b];if(c.enableCursorHotkey||c.customHotkey)return d(document).bind("keydown."+pa,k),!1})},da=function(){function a(b){var c=t[b],e=t.panes;c.fxSettings||(c.fxSettings={});e.fxSettings||
(e.fxSettings={});d.each(["_open","_close","_size"],function(a,f){var g="fxName"+f,j="fxSpeed"+f,k="fxSettings"+f,l=c[g]=c[g]||e[g]||c.fxName||e.fxName||"none";if(l==="none"||!t.effects[l]||!d.effects||!d.effects[l]&&!d.effects.effect[l])l=c[g]="none";l=t.effects[l]||{};g=l.all||null;l=l[b]||null;c[j]=c[j]||e[j]||c.fxSpeed||e.fxSpeed||null;c[k]=d.extend(true,{},g,l,e.fxSettings,c.fxSettings,e[k],c[k])});delete c.fxName;delete c.fxSpeed;delete c.fxSettings}var b,c,e,f,k,l;g=d.layout.transformData(g,
!0);g=d.layout.backwardCompatibility.renameAllOptions(g);if(!d.isEmptyObject(g.panes)){b=d.layout.optionsMap.noDefault;f=0;for(k=b.length;f<k;f++)e=b[f],delete g.panes[e];b=d.layout.optionsMap.layout;f=0;for(k=b.length;f<k;f++)e=b[f],delete g.panes[e]}b=d.layout.optionsMap.layout;var m=d.layout.config.optionRootKeys;for(e in g)f=g[e],0>d.inArray(e,m)&&0>d.inArray(e,b)&&(g.panes[e]||(g.panes[e]=d.isPlainObject(f)?d.extend(!0,{},f):f),delete g[e]);d.extend(!0,t,g);d.each(n.allPanes,function(f,j){n[j]=
d.extend(!0,{},n.panes,n[j]);c=t.panes;l=t[j];if("center"===j){b=d.layout.optionsMap.center;f=0;for(k=b.length;f<k;f++)if(e=b[f],!g.center[e]&&(g.panes[e]||!l[e]))l[e]=c[e]}else if(l=t[j]=d.extend(!0,{},c,l),a(j),l.resizerClass||(l.resizerClass="ui-layout-resizer"),!l.togglerClass)l.togglerClass="ui-layout-toggler";l.paneClass||(l.paneClass="ui-layout-pane")});f=g.zIndex;m=t.zIndexes;0<f&&(m.pane_normal=f,m.content_mask=j(f+1,m.content_mask),m.resizer_normal=j(f+2,m.resizer_normal));delete t.panes},
C=function(a){a=t[a].paneSelector;if("#"===a.substr(0,1))return V.find(a).eq(0);var b=V.children(a).eq(0);return b.length?b:V.children("form:first").children(a).eq(0)},Ha=function(a){u(a);d.each(n.allPanes,function(a,b){va(b,!0)});ka();d.each(n.borderPanes,function(a,b){R[b]&&x[b].isVisible&&(T(b),wa(b))});Pa("center");d.each(n.allPanes,function(a,b){fa(b)})},va=function(b,c){if(c||I()){var d=t[b],f=x[b],g=n[b],k=g.dir,m="center"===b,q={},r=R[b],u,v;r?Za(b,!1,!0,!1):za[b]=!1;r=R[b]=C(b);if(r.length){r.data("layoutCSS")||
r.data("layoutCSS",s(r,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));ca[b]={name:b,pane:R[b],content:za[b],options:t[b],state:x[b],children:y[b]};r.data({parentLayout:ca,layoutPane:ca[b],layoutEdge:b,layoutRole:"pane"}).css(g.cssReq).css("zIndex",t.zIndexes.pane_normal).css(d.applyDemoStyles?g.cssDemo:{}).addClass(d.paneClass+" "+d.paneClass+"-"+b).bind("mouseenter."+pa,O).bind("mouseleave."+pa,U);g={hide:"",show:"",toggle:"",close:"",
open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(v in g)r.bind("layoutpane"+v.toLowerCase()+"."+pa,ca[g[v]||v]);ma(b,!1);m||(u=f.size=
E(b,d.size),m=E(b,d.minSize)||1,v=E(b,d.maxSize)||1E5,0<u&&(u=j(a(u,v),m)),f.autoResize=d.autoResize,f.isClosed=!1,f.isSliding=!1,f.isResizing=!1,f.isHidden=!1,f.pins||(f.pins=[]));f.tagName=r[0].tagName;f.edge=b;f.noRoom=!1;f.isVisible=!0;Qa(b);"horz"===k?q.height=o(r,u):"vert"===k&&(q.width=p(r,u));r.css(q);"horz"!=k&&Pa(b,!0);d.initClosed&&d.closable&&!d.initHidden?Ja(b,!0,!0):d.initHidden||d.initClosed?ra(b):f.noRoom||r.css("display","block");r.css("visibility","visible");d.showOverflowOnHover&&
r.hover(l,e);x.initialized&&(ka(b),J(b),fa(b))}else R[b]=!1}},fa=function(a){var b=R[a],c=x[a],d=t[a];b&&(b.data("layout")&&ba(a,b.data("layout")),c.isVisible&&(x.initialized?xa():Na(a),d.triggerEventsOnLoad?F("onresize_end",a):bb(a,!0)),d.initChildren&&d.children&&Z(a))},Qa=function(a){a=a?a.split(","):n.borderPanes;d.each(a,function(a,b){var c=R[b],d=ha[b],e=x[b],f=n[b].side,g={};if(c){switch(b){case "north":g.top=N.inset.top;g.left=N.inset.left;g.right=N.inset.right;break;case "south":g.bottom=
N.inset.bottom;g.left=N.inset.left;g.right=N.inset.right;break;case "west":g.left=N.inset.left;break;case "east":g.right=N.inset.right}c.css(g);d&&e.isClosed?d.css(f,N.inset[f]):d&&!e.isHidden&&d.css(f,N.inset[f]+B(b))}})},ka=function(a){a=a?a.split(","):n.borderPanes;d.each(a,function(a,b){var c=R[b];ha[b]=!1;ta[b]=!1;if(c){var c=t[b],e=x[b],f="#"===c.paneSelector.substr(0,1)?c.paneSelector.substr(1):"",g=c.resizerClass,j=c.togglerClass,k="-"+b,l=ca[b],m=l.resizer=ha[b]=d("<div></div>"),l=l.toggler=
c.closable?ta[b]=d("<div></div>"):!1;!e.isVisible&&c.slidable&&m.attr("title",c.tips.Slide).css("cursor",c.sliderCursor);m.attr("id",f?f+"-resizer":"").data({parentLayout:ca,layoutPane:ca[b],layoutEdge:b,layoutRole:"resizer"}).css(n.resizers.cssReq).css("zIndex",t.zIndexes.resizer_normal).css(c.applyDemoStyles?n.resizers.cssDemo:{}).addClass(g+" "+g+k).hover(O,U).hover(G,S).appendTo(V);c.resizerDblClickToggle&&m.bind("dblclick."+pa,Ca);l&&(l.attr("id",f?f+"-toggler":"").data({parentLayout:ca,layoutPane:ca[b],
layoutEdge:b,layoutRole:"toggler"}).css(n.togglers.cssReq).css(c.applyDemoStyles?n.togglers.cssDemo:{}).addClass(j+" "+j+k).hover(O,U).bind("mouseenter",G).appendTo(m),c.togglerContent_open&&d("<span>"+c.togglerContent_open+"</span>").data({layoutEdge:b,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",b).addClass("content content-open").css("display","none").appendTo(l),c.togglerContent_closed&&d("<span>"+c.togglerContent_closed+"</span>").data({layoutEdge:b,layoutRole:"togglerContent"}).addClass("content content-closed").css("display",
"none").appendTo(l),Ia(b));Ea(b);e.isVisible?na(b):(ib(b),Ka(b,!0))}});cb()},ma=function(a,b){if(I()){var c=t[a],d=c.contentSelector,e=ca[a],f=R[a],g;d&&(g=e.content=za[a]=c.findNestedContent?f.find(d).eq(0):f.children(d).eq(0));g&&g.length?(g.data("layoutRole","content"),g.data("layoutCSS")||g.data("layoutCSS",s(g,"height")),g.css(n.content.cssReq),c.applyDemoStyles&&(g.css(n.content.cssDemo),f.css(n.content.cssDemoPane)),f.css("overflowX").match(/(scroll|auto)/)&&f.css("overflow","hidden"),x[a].content=
{},!1!==b&&Na(a)):e.content=za[a]=!1}},Ea=function(a){var b=d.layout.plugins.draggable,a=a?a.split(","):n.borderPanes;d.each(a,function(a,e){var f=t[e];if(!b||!R[e]||!f.resizable)return f.resizable=!1,!0;var g=x[e],j=t.zIndexes,k=n[e],l="horz"==k.dir?"top":"left",m=ha[e],o=f.resizerClass,p=0,q,r,s=o+"-drag",u=o+"-"+e+"-drag",v=o+"-dragging",y=o+"-"+e+"-dragging",A=o+"-dragging-limit",Ra=o+"-"+e+"-dragging-limit",B=!1;g.isClosed||m.attr("title",f.tips.Resize).css("cursor",f.resizerCursor);m.draggable({containment:V[0],
axis:"horz"==k.dir?"y":"x",delay:0,distance:1,grid:f.resizingGrid,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:j.resizer_drag,start:function(a,b){f=t[e];g=x[e];r=f.livePaneResizing;if(!1===F("ondrag_start",e))return!1;g.isResizing=!0;x.paneResizing=e;z.clear(e+"_closeSlider");T(e);q=g.resizerPosition;p=b.position[l];m.addClass(s+" "+u);B=!1;d("body").disableSelection();la(e)},drag:function(a,b){B||(b.helper.addClass(v+" "+y).css({right:"auto",bottom:"auto"}).children().css("visibility",
"hidden"),B=!0,g.isSliding&&R[e].css("zIndex",j.pane_sliding));var d=0;b.position[l]<q.min?(b.position[l]=q.min,d=-1):b.position[l]>q.max&&(b.position[l]=q.max,d=1);d?(b.helper.addClass(A+" "+Ra),window.defaultStatus=0<d&&e.match(/(north|west)/)||0>d&&e.match(/(south|east)/)?f.tips.maxSizeWarning:f.tips.minSizeWarning):(b.helper.removeClass(A+" "+Ra),window.defaultStatus="");r&&Math.abs(b.position[l]-p)>=f.liveResizingTolerance&&(p=b.position[l],c(a,b,e))},stop:function(a,b){d("body").enableSelection();
window.defaultStatus="";m.removeClass(s+" "+u);g.isResizing=!1;x.paneResizing=!1;c(a,b,e,!0)}})});var c=function(a,b,c,d){var e=b.position,f=n[c],a=t[c],b=x[c],g;switch(c){case "north":g=e.top;break;case "west":g=e.left;break;case "south":g=N.layoutHeight-e.top-a.spacing_open;break;case "east":g=N.layoutWidth-e.left-a.spacing_open}g-=N.inset[f.side];d?(!1!==F("ondrag_end",c)&&ea(c,g,!1,!0),Fa(!0),b.isSliding&&la(c)):Math.abs(g-b.size)<a.liveResizingTolerance||(ea(c,g,!1,!0),Ga.each(ga))}},ga=function(){var a=
d(this),b=a.data("layoutMask"),b=x[b];"IFRAME"==b.tagName&&b.isVisible&&a.css({top:b.offsetTop,left:b.offsetLeft,width:b.outerWidth,height:b.outerHeight})},la=function(a,b){var c=n[a],e=["center"],f=t.zIndexes,g=d.extend({objectsOnly:!1,forSliding:x[a].isSliding},b),j,k;g.forSliding&&e.push(n.oppositeEdge[a]);"horz"===c.dir&&(e.push("west"),e.push("east"));d.each(e,function(a,b){k=x[b];j=t[b];k.isVisible&&(j.maskObjects||!g.objectsOnly&&j.maskContents)&&rb(b).each(function(){ga.call(this);this.style.zIndex=
k.isSliding?f.pane_sliding+1:f.pane_normal+1;this.style.display="block"})})},Fa=function(a){if(a||!x.paneResizing)Ga.hide();else if(!a&&!d.isEmptyObject(x.panesSliding))for(var a=Ga.length-1,b,c;0<=a;a--)c=Ga.eq(a),b=c.data("layoutMask"),t[b].maskObjects||c.hide()},rb=function(a){for(var b=d([]),c,e=0,f=Ga.length;e<f;e++)c=Ga.eq(e),c.data("layoutMask")===a&&(b=b.add(c));if(b.length)return b;b=R[a];c=x[a];var e=t[a],f=t.zIndexes,g=d([]),j,k,l,m,n;if(e.maskContents||e.maskObjects)for(n=0;n<(e.maskObjects?
2:1);n++)j=e.maskObjects&&0==n,k=document.createElement(j?"iframe":"div"),l=d(k).data("layoutMask",a),k.className="ui-layout-mask ui-layout-mask-"+a,m=k.style,m.display="block",m.position="absolute",m.background="#FFF",j&&(k.frameborder=0,k.src="about:blank",m.opacity=0,m.filter="Alpha(Opacity='0')",m.border=0),"IFRAME"==c.tagName?(m.zIndex=f.pane_normal+1,V.append(k)):(l.addClass("ui-layout-mask-inside-pane"),m.zIndex=e.maskZindex||f.content_mask,m.top=0,m.left=0,m.width="100%",m.height="100%",b.append(k)),
g=g.add(k),Ga=Ga.add(k);return g},Za=function(a,b,c,e){if(I()){var a=u.call(this,a),f=R[a],g=za[a],j=ha[a],k=ta[a];f&&d.isEmptyObject(f.data())&&(f=!1);g&&d.isEmptyObject(g.data())&&(g=!1);j&&d.isEmptyObject(j.data())&&(j=!1);k&&d.isEmptyObject(k.data())&&(k=!1);f&&f.stop(!0,!0);var l=t[a],m=y[a],n=d.isPlainObject(m)&&!d.isEmptyObject(m),e=void 0!==e?e:l.destroyChildren;n&&e&&(d.each(m,function(a,b){b.destroyed||b.destroy(!0);b.destroyed&&delete m[a]}),d.isEmptyObject(m)&&(m=y[a]=null,n=!1));f&&b&&
!n?f.remove():f&&f[0]&&(b=l.paneClass,e=b+"-"+a,b=[b,b+"-open",b+"-closed",b+"-sliding",e,e+"-open",e+"-closed",e+"-sliding"],d.merge(b,W(f,!0)),f.removeClass(b.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+pa),n&&g?(g.width(g.width()),d.each(m,function(a,b){b.resizeAll()})):g&&g.css(g.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),f.data("layout")||f.css(f.data("layoutCSS")).removeData("layoutCSS"));
k&&k.remove();j&&j.remove();ca[a]=R[a]=za[a]=ha[a]=ta[a]=!1;c||xa()}},Xa=function(a){var b=R[a],c=b[0].style;t[a].useOffscreenClose?(b.data(n.offscreenReset)||b.data(n.offscreenReset,{left:c.left,right:c.right}),b.css(n.offscreenCSS)):b.hide().removeData(n.offscreenReset)},K=function(a){var b=R[a],a=t[a],c=n.offscreenCSS,d=b.data(n.offscreenReset),e=b[0].style;b.show().removeData(n.offscreenReset);if(a.useOffscreenClose&&d&&(e.left==c.left&&(e.left=d.left),e.right==c.right))e.right=d.right},ra=function(a,
b){if(I()){var c=u.call(this,a),d=t[c],e=x[c],f=ha[c];R[c]&&!e.isHidden&&!(x.initialized&&!1===F("onhide_start",c))&&(e.isSliding=!1,delete x.panesSliding[c],f&&f.hide(),!x.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,x.initialized||Xa(c),Pa("horz"===n[c].dir?"":"center"),(x.initialized||d.triggerEventsOnLoad)&&F("onhide_end",c)):(e.isHiding=!0,Ja(c,!1,b)))}},Sa=function(a,b,c,d){if(I()){var a=u.call(this,a),e=x[a];R[a]&&e.isHidden&&!1!==F("onshow_start",a)&&(e.isShowing=!0,
e.isSliding=!1,delete x.panesSliding[a],!1===b?Ja(a,!0):ya(a,!1,c,d))}},Ca=function(a,b){if(I()){var c=v(a),d=u.call(this,a),e=x[d];c&&c.stopImmediatePropagation();e.isHidden?Sa(d):e.isClosed?ya(d,!!b):Ja(d)}},hb=function(a){var b=x[a];Xa(a);b.isClosed=!0;b.isVisible=!1},Ja=function(a,b,c,d){function e(){k.isMoving=!1;Ka(f,!0);var a=n.oppositeEdge[f];x[a].noRoom&&(T(a),wa(a));if(!d&&(x.initialized||j.triggerEventsOnLoad))m||F("onclose_end",f),m&&F("onshow_end",f),o&&F("onhide_end",f)}var f=u.call(this,
a);if(!x.initialized&&R[f])hb(f);else if(I()){var g=R[f],j=t[f],k=x[f],l,m,o;V.queue(function(a){if(!g||!j.closable&&!k.isShowing&&!k.isHiding||!b&&k.isClosed&&!k.isShowing)return a();var d=!k.isShowing&&!1===F("onclose_start",f);m=k.isShowing;o=k.isHiding;delete k.isShowing;delete k.isHiding;if(d)return a();l=!c&&!k.isClosed&&"none"!=j.fxName_close;k.isMoving=!0;k.isClosed=!0;k.isVisible=!1;o?k.isHidden=!0:m&&(k.isHidden=!1);k.isSliding?Da(f,!1):Pa("horz"===n[f].dir?"":"center",!1);ib(f);l?(Ya(f,
!0),g.hide(j.fxName_close,j.fxSettings_close,j.fxSpeed_close,function(){Ya(f,false);k.isClosed&&e();a()})):(Xa(f),e(),a())})}},ib=function(a){var b=ha[a],c=ta[a],e=t[a],f=n[a].side,g=e.resizerClass,j=e.togglerClass,k="-"+a;b.css(f,N.inset[f]).removeClass(g+"-open "+g+k+"-open").removeClass(g+"-sliding "+g+k+"-sliding").addClass(g+"-closed "+g+k+"-closed");e.resizable&&d.layout.plugins.draggable&&b.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");c&&(c.removeClass(j+
"-open "+j+k+"-open").addClass(j+"-closed "+j+k+"-closed").attr("title",e.tips.Open),c.children(".content-open").hide(),c.children(".content-closed").css("display","block"));oa(a,!1);x.initialized&&cb()},ya=function(a,b,c,d){function e(){k.isMoving=!1;H(f);k.isSliding||Pa("vert"==n[f].dir?"center":"",!1);na(f)}if(I()){var f=u.call(this,a),g=R[f],j=t[f],k=x[f],l,m;V.queue(function(a){if(!g||!j.resizable&&!j.closable&&!k.isShowing||k.isVisible&&!k.isSliding)return a();if(k.isHidden&&!k.isShowing)a(),
Sa(f,!0);else{k.autoResize&&k.size!=j.size?ja(f,j.size,!0,!0,!0):T(f,b);var n=F("onopen_start",f);if("abort"===n)return a();"NC"!==n&&T(f,b);if(k.minSize>k.maxSize)return oa(f,!1),!d&&j.tips.noRoomToOpen&&alert(j.tips.noRoomToOpen),a();b?Da(f,!0):k.isSliding?Da(f,!1):j.slidable&&Ka(f,!1);k.noRoom=!1;wa(f);m=k.isShowing;delete k.isShowing;l=!c&&k.isClosed&&"none"!=j.fxName_open;k.isMoving=!0;k.isVisible=!0;k.isClosed=!1;m&&(k.isHidden=!1);l?(Ya(f,!0),g.show(j.fxName_open,j.fxSettings_open,j.fxSpeed_open,
function(){Ya(f,false);k.isVisible&&e();a()})):(K(f),e(),a())}})}},na=function(a,b){var c=R[a],e=ha[a],f=ta[a],g=t[a],j=x[a],k=n[a].side,l=g.resizerClass,m=g.togglerClass,o="-"+a;e.css(k,N.inset[k]+B(a)).removeClass(l+"-closed "+l+o+"-closed").addClass(l+"-open "+l+o+"-open");j.isSliding?e.addClass(l+"-sliding "+l+o+"-sliding"):e.removeClass(l+"-sliding "+l+o+"-sliding");U(0,e);g.resizable&&d.layout.plugins.draggable?e.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.tips.Resize):
j.isSliding||e.css("cursor","default");f&&(f.removeClass(m+"-closed "+m+o+"-closed").addClass(m+"-open "+m+o+"-open").attr("title",g.tips.Close),U(0,f),f.children(".content-closed").hide(),f.children(".content-open").css("display","block"));oa(a,!j.isSliding);d.extend(j,r(c));x.initialized&&(cb(),Na(a,!0));if(!b&&(x.initialized||g.triggerEventsOnLoad)&&c.is(":visible"))F("onopen_end",a),j.isShowing&&F("onshow_end",a),x.initialized&&F("onresize_end",a)},$a=function(a){function b(){e.isClosed?e.isMoving||
ya(d,!0):Da(d,!0)}if(I()){var c=v(a),d=u.call(this,a),e=x[d],a=t[d].slideDelay_open;c&&c.stopImmediatePropagation();e.isClosed&&c&&"mouseenter"===c.type&&0<a?z.set(d+"_openSlider",b,a):b()}},sa=function(a){function b(){f.isClosed?Da(e,!1):f.isMoving||Ja(e)}if(I()){var c=v(a),e=u.call(this,a),a=t[e],f=x[e],g=f.isMoving?1E3:300;!f.isClosed&&!f.isResizing&&("click"===a.slideTrigger_close?b():a.preventQuickSlideClose&&f.isMoving||a.preventPrematureSlideClose&&c&&d.layout.isMouseOverElem(c,R[e])||(c?z.set(e+
"_closeSlider",b,j(a.slideDelay_close,g)):b()))}},Ya=function(a,b){var c=R[a],d=x[a],e=t[a],f=t.zIndexes;b?(la(a,{objectsOnly:!0}),c.css({zIndex:f.pane_animate}),"south"==a?c.css({top:N.inset.top+N.innerHeight-c.outerHeight()}):"east"==a&&c.css({left:N.inset.left+N.innerWidth-c.outerWidth()})):(Fa(),c.css({zIndex:d.isSliding?f.pane_sliding:f.pane_normal}),"south"==a?c.css({top:"auto"}):"east"==a&&!c.css("left").match(/\-99999/)&&c.css({left:"auto"}),m.msie&&(e.fxOpacityFix&&"slide"!=e.fxName_open&&
c.css("filter")&&1==c.css("opacity"))&&c[0].style.removeAttribute("filter"))},Ka=function(a,b){var c=t[a],d=ha[a],e=c.slideTrigger_open.toLowerCase();if(d&&(!b||c.slidable)){e.match(/mouseover/)?e=c.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||(e=c.slideTrigger_open="click");if(c.resizerDblClickToggle&&e.match(/click/))d[b?"unbind":"bind"]("dblclick."+pa,Ca);d[b?"bind":"unbind"](e+"."+pa,$a).css("cursor",b?c.sliderCursor:"default").attr("title",b?c.tips.Slide:"")}},Da=function(a,
b){function c(b){z.clear(a+"_closeSlider");b.stopPropagation()}var d=t[a],e=x[a],f=t.zIndexes,g=d.slideTrigger_close.toLowerCase(),j=b?"bind":"unbind",k=R[a],l=ha[a];z.clear(a+"_closeSlider");b?(e.isSliding=!0,x.panesSliding[a]=!0,Ka(a,!1)):(e.isSliding=!1,delete x.panesSliding[a]);k.css("zIndex",b?f.pane_sliding:f.pane_normal);l.css("zIndex",b?f.pane_sliding+2:f.resizer_normal);g.match(/(click|mouseleave)/)||(g=d.slideTrigger_close="mouseleave");l[j](g,sa);"mouseleave"===g&&(k[j]("mouseleave."+pa,
sa),l[j]("mouseenter."+pa,c),k[j]("mouseenter."+pa,c));b?"click"===g&&!d.resizable&&(l.css("cursor",b?d.sliderCursor:"default"),l.attr("title",b?d.tips.Close:"")):z.clear(a+"_closeSlider")},wa=function(a,b,c,e){var b=t[a],f=x[a],g=n[a],j=R[a],k=ha[a],l="vert"===g.dir,m=!1;if("center"===a||l&&f.noVerticalRoom)(m=0<=f.maxHeight)&&f.noRoom?(K(a),k&&k.show(),f.isVisible=!0,f.noRoom=!1,l&&(f.noVerticalRoom=!1),H(a)):!m&&!f.noRoom&&(Xa(a),k&&k.hide(),f.isVisible=!1,f.noRoom=!0);if("center"!==a)if(f.minSize<=
f.maxSize){if(f.size>f.maxSize?ja(a,f.maxSize,c,!0,e):f.size<f.minSize?ja(a,f.minSize,c,!0,e):k&&(f.isVisible&&j.is(":visible"))&&(c=f.size+N.inset[g.side],d.layout.cssNum(k,g.side)!=c&&k.css(g.side,c)),f.noRoom)f.wasOpen&&b.closable?b.autoReopen?ya(a,!1,!0,!0):f.noRoom=!1:Sa(a,f.wasOpen,!0,!0)}else f.noRoom||(f.noRoom=!0,f.wasOpen=!f.isClosed&&!f.isSliding,f.isClosed||(b.closable?Ja(a,!0,!0):ra(a,!0)))},ea=function(a,b,c,d,e){if(I()){var a=u.call(this,a),f=t[a],g=x[a],e=e||f.livePaneResizing&&!g.isResizing;
g.autoResize=!1;ja(a,b,c,d,e)}},ja=function(b,c,e,f,g){function k(){for(var a="width"===z?s.outerWidth():s.outerHeight(),a=[{pane:l,count:1,target:c,actual:a,correct:c===a,attempt:c,cssSize:C}],b=a[0],f={},m="Inaccurate size after resizing the "+l+"-pane.";!b.correct;){f={pane:l,count:b.count+1,target:c};f.attempt=b.actual>c?j(0,b.attempt-(b.actual-c)):j(0,b.attempt+(c-b.actual));f.cssSize=("horz"==n[l].dir?o:p)(R[l],f.attempt);s.css(z,f.cssSize);f.actual="width"==z?s.outerWidth():s.outerHeight();
f.correct=c===f.actual;1===a.length&&(A(m,!1,!0),A(b,!1,!0));A(f,!1,!0);if(3<a.length)break;a.push(f);b=a[a.length-1]}q.size=c;d.extend(q,r(s));q.isVisible&&s.is(":visible")&&(v&&v.css(y,c+N.inset[y]),Na(l));!e&&(!B&&x.initialized&&q.isVisible)&&F("onresize_end",l);e||(q.isSliding||Pa("horz"==n[l].dir?"":"center",B,g),cb());b=n.oppositeEdge[l];c<D&&x[b].noRoom&&(T(b),wa(b,!1,e));1<a.length&&A(m+"\nSee the Error Console for details.",!0,!0)}if(I()){var l=u.call(this,b),m=t[l],q=x[l],s=R[l],v=ha[l],
y=n[l].side,z=n[l].sizeType.toLowerCase(),B=q.isResizing&&!m.triggerEventsDuringLiveResize,H=!0!==f&&m.animatePaneSizing,D,C;V.queue(function(b){T(l);D=q.size;c=E(l,c);c=j(c,E(l,m.minSize));c=a(c,q.maxSize);if(c<q.minSize)b(),wa(l,!1,e);else{if(!g&&c===D)return b();!e&&(x.initialized&&q.isVisible)&&F("onresize_start",l);C=("horz"==n[l].dir?o:p)(R[l],c);if(H&&s.is(":visible")){var f=d.layout.effects.size[l]||d.layout.effects.size.all,f=m.fxSettings_size.easing||f.easing,u=t.zIndexes,v={};v[z]=C+"px";
q.isMoving=!0;s.css({zIndex:u.pane_animate}).show().animate(v,m.fxSpeed_size,f,function(){s.css({zIndex:q.isSliding?u.pane_sliding:u.pane_normal});q.isMoving=!1;k();b()})}else s.css(z,C),s.is(":visible")?k():(q.size=c,d.extend(q,r(s))),b()}})}},Pa=function(a,b,c){a=(a?a:"east,west,center").split(",");d.each(a,function(a,e){if(R[e]){var f=t[e],g=x[e],k=R[e],l=!0,n={},s=d.layout.showInvisibly(k),u={top:B("north",!0),bottom:B("south",!0),left:B("west",!0),right:B("east",!0),width:0,height:0};u.width=
N.innerWidth-u.left-u.right;u.height=N.innerHeight-u.bottom-u.top;u.top+=N.inset.top;u.bottom+=N.inset.bottom;u.left+=N.inset.left;u.right+=N.inset.right;d.extend(g,r(k));if("center"===e){if(!c&&g.isVisible&&u.width===g.outerWidth&&u.height===g.outerHeight)return k.css(s),!0;d.extend(g,D(e),{maxWidth:u.width,maxHeight:u.height});n=u;n.width=p(k,n.width);n.height=o(k,n.height);l=0<=n.width&&0<=n.height;if(!x.initialized&&f.minWidth>u.width){var f=f.minWidth-g.outerWidth,u=t.east.minSize||0,v=t.west.minSize||
0,y=x.east.size,z=x.west.size,A=y,H=z;0<f&&(x.east.isVisible&&y>u)&&(A=j(y-u,y-f),f-=y-A);0<f&&(x.west.isVisible&&z>v)&&(H=j(z-v,z-f),f-=z-H);if(0===f){y&&y!=u&&ja("east",A,!0,!0,c);z&&z!=v&&ja("west",H,!0,!0,c);Pa("center",b,c);k.css(s);return}}}else{g.isVisible&&!g.noVerticalRoom&&d.extend(g,r(k),D(e));if(!c&&!g.noVerticalRoom&&u.height===g.outerHeight)return k.css(s),!0;n.top=u.top;n.bottom=u.bottom;n.height=o(k,u.height);g.maxHeight=n.height;l=0<=g.maxHeight;l||(g.noVerticalRoom=!0)}l?(!b&&x.initialized&&
F("onresize_start",e),k.css(n),"center"!==e&&cb(e),g.noRoom&&(!g.isClosed&&!g.isHidden)&&wa(e),g.isVisible&&(d.extend(g,r(k)),x.initialized&&Na(e))):!g.noRoom&&g.isVisible&&wa(e);k.css(s);if(!g.isVisible)return!0;"center"===e&&(g=m.isIE6||!m.boxModel,R.north&&(g||"IFRAME"==x.north.tagName)&&R.north.css("width",p(R.north,N.innerWidth)),R.south&&(g||"IFRAME"==x.south.tagName)&&R.south.css("width",p(R.south,N.innerWidth)));!b&&x.initialized&&F("onresize_end",e)}})},xa=function(a){u(a);if(V.is(":visible"))if(x.initialized){if(d.extend(N,
r(V,t.inset)),N.outerHeight){!0===a&&Qa();if(!1===F("onresizeall_start"))return!1;var b,c,e;d.each(["south","north","east","west"],function(a,b){R[b]&&(c=t[b],e=x[b],e.autoResize&&e.size!=c.size?ja(b,c.size,!0,!0,!0):(T(b),wa(b,!1,!0,!0)))});Pa("",!0,!0);cb();d.each(n.allPanes,function(a,c){(b=R[c])&&x[c].isVisible&&F("onresize_end",c)});F("onresizeall_end")}}else P()},bb=function(a,b){var c=u.call(this,a);t[c].resizeChildren&&(b||ba(c),c=y[c],d.isPlainObject(c)&&d.each(c,function(a,b){b.resizeAll()}))},
Na=function(a,b){if(I()){var c=u.call(this,a),c=c?c.split(","):n.allPanes;d.each(c,function(a,c){function d(a){return j(l.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function e(){var a=t[c].contentIgnoreSelector,a=g.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),b=a.filter(":visible"),f=b.filter(":last");m={top:g[0].offsetTop,height:g.outerHeight(),numFooters:a.length,hiddenFooters:a.length-b.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;m.spaceBelow=f.length?f[0].offsetTop+
f.outerHeight()-m.bottom+d(f):d(g)}var f=R[c],g=za[c],k=t[c],l=x[c],m=l.content;if(!f||!g||!f.is(":visible"))return!0;if(!g.length&&(ma(c,!1),!g))return;if(!1!==F("onsizecontent_start",c)){if(!l.isMoving&&!l.isResizing||k.liveContentResizing||b||void 0==m.top)e(),0<m.hiddenFooters&&"hidden"===f.css("overflow")&&(f.css("overflow","visible"),e(),f.css("overflow","hidden"));f=l.innerHeight-(m.spaceAbove-l.css.paddingTop)-(m.spaceBelow-l.css.paddingBottom);if(!g.is(":visible")||m.height!=f)Q(g,f,!0),
m.height=f;x.initialized&&F("onsizecontent_end",c)}})}},cb=function(a){a=(a=u.call(this,a))?a.split(","):n.borderPanes;d.each(a,function(a,e){var f=t[e],g=x[e],j=R[e],k=ha[e],l=ta[e],m;if(j&&k){var q=n[e].dir,r=g.isClosed?"_closed":"_open",s=f["spacing"+r],u=f["togglerAlign"+r],r=f["togglerLength"+r],v;if(0===s)k.hide();else{!g.noRoom&&!g.isHidden&&k.show();"horz"===q?(v=N.innerWidth,g.resizerLength=v,j=d.layout.cssNum(j,"left"),k.css({width:p(k,v),height:o(k,s),left:-9999<j?j:N.inset.left})):(v=
j.outerHeight(),g.resizerLength=v,k.css({height:o(k,v),width:p(k,s),top:N.inset.top+B("north",!0)}));U(f,k);if(l){if(0===r||g.isSliding&&f.hideTogglerOnSlide){l.hide();return}l.show();if(!(0<r)||"100%"===r||r>v)r=v,u=0;else if(b(u))switch(u){case "top":case "left":u=0;break;case "bottom":case "right":u=v-r;break;default:u=c((v-r)/2)}else j=parseInt(u,10),u=0<=u?j:v-r+j;if("horz"===q){var y=p(l,r);l.css({width:y,height:o(l,s),left:u,top:0});l.children(".content").each(function(){m=d(this);m.css("marginLeft",
c((y-m.outerWidth())/2))})}else{var z=o(l,r);l.css({height:z,width:p(l,s),top:u,left:0});l.children(".content").each(function(){m=d(this);m.css("marginTop",c((z-m.outerHeight())/2))})}U(0,l)}if(!x.initialized&&(f.initHidden||g.noRoom))k.hide(),l&&l.hide()}}})},Ia=function(a){if(I()){var b=u.call(this,a),a=ta[b],c=t[b];a&&(c.closable=!0,a.bind("click."+pa,function(a){a.stopPropagation();Ca(b)}).css("visibility","visible").css("cursor","pointer").attr("title",x[b].isClosed?c.tips.Open:c.tips.Close).show())}},
oa=function(a,b){d.layout.plugins.buttons&&d.each(x[a].pins,function(c,e){d.layout.buttons.setPinState(ca,d(e),a,b)})},V=d(this).eq(0);if(!V.length)return A(t.errors.containerMissing);if(V.data("layoutContainer")&&V.data("layout"))return V.data("layout");var R={},za={},ha={},ta={},Ga=d([]),N=x.container,pa=x.id,ca={options:t,state:x,container:V,panes:R,contents:za,resizers:ha,togglers:ta,hide:ra,show:Sa,toggle:Ca,open:ya,close:Ja,slideOpen:$a,slideClose:sa,slideToggle:function(a){a=u.call(this,a);
Ca(a,!0)},setSizeLimits:T,_sizePane:ja,sizePane:ea,sizeContent:Na,swapPanes:function(a,b){function c(a){var b=R[a],e=za[a];return!b?!1:{pane:a,P:b?b[0]:!1,C:e?e[0]:!1,state:d.extend(!0,{},x[a]),options:d.extend(!0,{},t[a])}}function e(a,b){if(a){var c=a.P,f=a.C,g=a.pane,k=n[b],m=d.extend(!0,{},x[b]),o=t[b],p={resizerCursor:o.resizerCursor};d.each(["fxName","fxSpeed","fxSettings"],function(a,b){p[b+"_open"]=o[b+"_open"];p[b+"_close"]=o[b+"_close"];p[b+"_size"]=o[b+"_size"]});R[b]=d(c).data({layoutPane:ca[b],
layoutEdge:b}).css(n.hidden).css(k.cssReq);za[b]=f?d(f):!1;t[b]=d.extend(!0,{},a.options,p);x[b]=d.extend(!0,{},a.state);c.className=c.className.replace(RegExp(o.paneClass+"-"+g,"g"),o.paneClass+"-"+b);ka(b);k.dir!=n[g].dir?(c=l[b]||0,T(b),c=j(c,x[b].minSize),ea(b,c,!0,!0)):ha[b].css(k.side,N.inset[k.side]+(x[b].isVisible?B(b):0));a.state.isVisible&&!m.isVisible?na(b,!0):(ib(b),Ka(b,!0));a=null}}if(I()){var f=u.call(this,a);x[f].edge=b;x[b].edge=f;if(!1===F("onswap_start",f)||!1===F("onswap_start",
b))x[f].edge=f,x[b].edge=b;else{var g=c(f),k=c(b),l={};l[f]=g?g.state.size:0;l[b]=k?k.state.size:0;R[f]=!1;R[b]=!1;x[f]={};x[b]={};ta[f]&&ta[f].remove();ta[b]&&ta[b].remove();ha[f]&&ha[f].remove();ha[b]&&ha[b].remove();ha[f]=ha[b]=ta[f]=ta[b]=!1;e(g,b);e(k,f);g=k=l=null;R[f]&&R[f].css(n.visible);R[b]&&R[b].css(n.visible);xa();F("onswap_end",f);F("onswap_end",b)}}},showMasks:la,hideMasks:Fa,initContent:ma,addPane:va,removePane:Za,createChildren:Z,refreshChildren:ba,enableClosable:Ia,disableClosable:function(a,
b){if(I()){var c=u.call(this,a),d=ta[c];d&&(t[c].closable=!1,x[c].isClosed&&ya(c,!1,!0),d.unbind("."+pa).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(I()){var a=u.call(this,a),b=ha[a];b&&b.data("draggable")&&(t[a].slidable=!0,x[a].isClosed&&Ka(a,!0))}},disableSlidable:function(a){if(I()){var a=u.call(this,a),b=ha[a];b&&(t[a].slidable=!1,x[a].isSliding?Ja(a,!1,!0):(Ka(a,!1),b.css("cursor","default").attr("title",""),U(null,b[0])))}},
enableResizable:function(a){if(I()){var a=u.call(this,a),b=ha[a],c=t[a];b&&b.data("draggable")&&(c.resizable=!0,b.draggable("enable"),x[a].isClosed||b.css("cursor",c.resizerCursor).attr("title",c.tips.Resize))}},disableResizable:function(a){if(I()){var a=u.call(this,a),b=ha[a];b&&b.data("draggable")&&(t[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),U(null,b[0]))}},allowOverflow:l,resetOverflow:e,destroy:function(a,b){d(window).unbind("."+pa);d(document).unbind("."+
pa);"object"===typeof a?u(a):b=a;V.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(t.containerClass).unbind("."+pa);Ga.remove();d.each(n.allPanes,function(a,c){Za(c,!1,!0,b)});V.data("layoutCSS")&&!V.data("layoutRole")&&V.css(V.data("layoutCSS")).removeData("layoutCSS");"BODY"===N.tagName&&(V=d("html")).data("layoutCSS")&&V.css(V.data("layoutCSS")).removeData("layoutCSS");f(ca,d.layout.onDestroy);L();for(var c in ca)c.match(/^(container|options)$/)||delete ca[c];ca.destroyed=
!0;return ca},initPanes:I,resizeAll:xa,runCallbacks:F,hasParentLayout:!1,children:y,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){da();var a=t,b=x;b.creatingLayout=!0;f(ca,d.layout.onCreate);if(!1===F("onload_start"))return"cancel";var c=V[0],e=d("html"),g=N.tagName=c.tagName,j=N.id=c.id,k=N.className=c.className,c=t,l=c.name,n={},o=V.data("parentLayout"),p=V.data("layoutEdge"),u=o&&p,v=d.layout.cssNum,y;N.selector=V.selector.split(".slice")[0];N.ref=(c.name?c.name+" layout / ":
"")+g+(j?"#"+j:k?".["+k+"]":"");N.isBody="BODY"===g;!u&&!N.isBody&&(g=V.closest("."+d.layout.defaults.panes.paneClass),o=g.data("parentLayout"),p=g.data("layoutEdge"),u=o&&p);V.data({layout:ca,layoutContainer:pa}).addClass(c.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(l in g)V.bind("layout"+l.toLowerCase()+"."+pa,ca[g[l]||l]);u&&(ca.hasParentLayout=!0,o.refreshChildren(p,ca));V.data("layoutCSS")||(N.isBody?(V.data("layoutCSS",d.extend(s(V,"position,margin,padding,border"),
{height:V.css("height"),overflow:V.css("overflow"),overflowX:V.css("overflowX"),overflowY:V.css("overflowY")})),e.data("layoutCSS",d.extend(s(e,"padding"),{height:"auto",overflow:e.css("overflow"),overflowX:e.css("overflowX"),overflowY:e.css("overflowY")}))):V.data("layoutCSS",s(V,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{n={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};V.css(n);c.inset&&!d.isPlainObject(c.inset)&&(y=parseInt(c.inset,
10)||0,c.inset={top:y,bottom:y,left:y,right:y});if(N.isBody)c.outset?d.isPlainObject(c.outset)||(y=parseInt(c.outset,10)||0,c.outset={top:y,bottom:y,left:y,right:y}):c.outset={top:v(e,"paddingTop"),bottom:v(e,"paddingBottom"),left:v(e,"paddingLeft"),right:v(e,"paddingRight")},e.css(n).css({height:"100%",border:"none",padding:0,margin:0}),m.isIE6?(V.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),c.inset||(c.inset=r(V).inset)):(V.css({width:"auto",height:"auto",
margin:0,position:"absolute"}),V.css(c.outset)),d.extend(N,r(V,c.inset));else{var z=V.css("position");(!z||!z.match(/(fixed|absolute|relative)/))&&V.css("position","relative");V.is(":visible")&&(d.extend(N,r(V,c.inset)),1>N.innerHeight&&A(c.errors.noContainerHeight.replace(/CONTAINER/,N.ref)))}v(V,"minWidth")&&V.parent().css("overflowX","auto");v(V,"minHeight")&&V.parent().css("overflowY","auto")}catch(B){}J();d(window).bind("unload."+pa,L);f(ca,d.layout.onLoad);a.initPanes&&P();delete b.creatingLayout;
return x.initialized}()?null:ca};d(function(){var a=d.layout.browser;a.msie&&(a.boxModel=d.support.boxModel)})})(m);(function(d){d.ui||(d.ui={});d.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(a){for(var j=document.cookie,j=j?j.split(";"):[],c,b=0,f=j.length;b<f;b++){c=d.trim(j[b]).split("=");if(c[0]==a)return decodeURIComponent(c[1])}return null},write:function(a,d,c){var b="",f="",g=false,c=c||{},k=c.expires;if(k&&k.toUTCString)f=k;else if(k===null||typeof k==="number"){f=new Date;
if(k>0)f.setDate(f.getDate()+k);else{f.setFullYear(1970);g=true}}f&&(b=b+(";expires="+f.toUTCString()));c.path&&(b=b+(";path="+c.path));c.domain&&(b=b+(";domain="+c.domain));c.secure&&(b=b+";secure");document.cookie=a+"="+(g?"":encodeURIComponent(d))+b},clear:function(a){d.ui.cookie.write(a,"",{expires:-1})}};d.cookie||(d.cookie=function(a,j,c){var b=d.ui.cookie;if(j===null)b.clear(a);else{if(j===void 0)return b.read(a);b.write(a,j,c)}});d.layout.plugins.stateManagement=!0;d.layout.config.optionRootKeys.push("stateManagement");
d.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}};d.layout.optionsMap.layout.push("stateManagement");d.layout.state={saveCookie:function(a,j,c){var b=a.options,f=b.stateManagement,c=d.extend(true,{},f.cookie,c||null),a=a.state.stateData=
a.readState(j||f.stateKeys);d.ui.cookie.write(c.name||b.name||"Layout",d.layout.state.encodeJSON(a),c);return d.extend(true,{},a)},deleteCookie:function(a){a=a.options;d.ui.cookie.clear(a.stateManagement.cookie.name||a.name||"Layout")},readCookie:function(a){a=a.options;return(a=d.ui.cookie.read(a.stateManagement.cookie.name||a.name||"Layout"))?d.layout.state.decodeJSON(a):{}},loadCookie:function(a){var j=d.layout.state.readCookie(a);if(j){a.state.stateData=d.extend(true,{},j);a.loadState(j)}return j},
loadState:function(a,j){j=d.layout.transformData(j);if(d.isPlainObject(j)&&!d.isEmptyObject(j)){a.state.stateData=j;var c=d.extend(true,{},j);d.each(d.layout.config.allPanes,function(a,d){c[d]&&delete c[d].children});d.extend(true,a.options,c)}},readState:function(a,j){d.type(j)==="string"&&(j={keys:j});j||(j={});var c=a.options.stateManagement,b=j.includeChildren,b=b!==void 0?b:c.includeChildren,c=j.stateKeys||c.stateKeys,f={isClosed:"initClosed",isHidden:"initHidden"},g=a.state,k=d.layout.config.allPanes,
l={},e,m,n,p,o,r;d.isArray(c)&&(c=c.join(","));for(var c=c.replace(/__/g,".").split(","),s=0,v=c.length;s<v;s++){e=c[s].split(".");m=e[0];e=e[1];if(!(d.inArray(m,k)<0)){n=g[m][e];if(n!=void 0){e=="isClosed"&&g[m].isSliding&&(n=true);(l[m]||(l[m]={}))[f[e]?f[e]:e]=n}}}b&&d.each(k,function(b,c){o=a.children[c];p=g.stateData[c];if(d.isPlainObject(o)&&!d.isEmptyObject(o)){r=l[c]||(l[c]={});if(!r.children)r.children={};d.each(o,function(a,b){b.state.initialized?r.children[a]=d.layout.state.readState(b):
p&&(p.children&&p.children[a])&&(r.children[a]=d.extend(true,{},p.children[a]))})}});return l},encodeJSON:function(a){function j(a){var b=[],f=0,g,k,l,e=d.isArray(a);for(g in a){k=a[g];l=typeof k;l=="string"?k='"'+k+'"':l=="object"&&(k=j(k));b[f++]=(!e?'"'+g+'":':"")+k}return(e?"[":"{")+b.join(",")+(e?"]":"}")}return j(a)},decodeJSON:function(a){try{return d.parseJSON?d.parseJSON(a):window.eval("("+a+")")||{}}catch(j){return{}}},_create:function(a){var j=d.layout.state,c=a.options.stateManagement;
d.extend(a,{readCookie:function(){return j.readCookie(a)},deleteCookie:function(){j.deleteCookie(a)},saveCookie:function(b,c){return j.saveCookie(a,b,c)},loadCookie:function(){return j.loadCookie(a)},loadState:function(b,c){j.loadState(a,b,c)},readState:function(b){return j.readState(a,b)},encodeJSON:j.encodeJSON,decodeJSON:j.decodeJSON});a.state.stateData={};if(c.autoLoad)if(d.isPlainObject(c.autoLoad))d.isEmptyObject(c.autoLoad)||a.loadState(c.autoLoad);else if(c.enabled)if(d.isFunction(c.autoLoad)){var b=
{};try{b=c.autoLoad(a,a.state,a.options,a.options.name||"")}catch(f){}b&&(d.isPlainObject(b)&&!d.isEmptyObject(b))&&a.loadState(b)}else a.loadCookie()},_unload:function(a){var j=a.options.stateManagement;if(j.enabled&&j.autoSave)if(d.isFunction(j.autoSave))try{j.autoSave(a,a.state,a.options,a.options.name||"")}catch(c){}else a.saveCookie()}};d.layout.onCreate.push(d.layout.state._create);d.layout.onUnload.push(d.layout.state._unload);d.layout.plugins.buttons=!0;d.layout.defaults.autoBindCustomButtons=
!1;d.layout.optionsMap.layout.push("autoBindCustomButtons");d.layout.buttons={init:function(a){var j=a.options.name||"",c;d.each(["toggle","open","close","pin","toggle-slide","open-slide"],function(b,f){d.each(d.layout.config.borderPanes,function(b,k){d(".ui-layout-button-"+f+"-"+k).each(function(){c=d(this).data("layoutName")||d(this).attr("layoutName");(c==void 0||c===j)&&a.bindButton(this,f,k)})})})},get:function(a,j,c,b){var f=d(j),a=a.options,g=a.errors.addButtonError;if(f.length)if(d.inArray(c,
d.layout.config.borderPanes)<0){d.layout.msg(g+" "+a.errors.pane+": "+c,true);f=d("")}else{j=a[c].buttonClass+"-"+b;f.addClass(j+" "+j+"-"+c).data("layoutName",a.name)}else d.layout.msg(g+" "+a.errors.selector+": "+j,true);return f},bind:function(a,j,c,b){var f=d.layout.buttons;switch(c.toLowerCase()){case "toggle":f.addToggle(a,j,b);break;case "open":f.addOpen(a,j,b);break;case "close":f.addClose(a,j,b);break;case "pin":f.addPin(a,j,b);break;case "toggle-slide":f.addToggle(a,j,b,true);break;case "open-slide":f.addOpen(a,
j,b,true)}return a},addToggle:function(a,j,c,b){d.layout.buttons.get(a,j,c,"toggle").click(function(d){a.toggle(c,!!b);d.stopPropagation()});return a},addOpen:function(a,j,c,b){d.layout.buttons.get(a,j,c,"open").attr("title",a.options[c].tips.Open).click(function(d){a.open(c,!!b);d.stopPropagation()});return a},addClose:function(a,j,c){d.layout.buttons.get(a,j,c,"close").attr("title",a.options[c].tips.Close).click(function(b){a.close(c);b.stopPropagation()});return a},addPin:function(a,j,c){var b=
d.layout.buttons,f=b.get(a,j,c,"pin");if(f.length){var g=a.state[c];f.click(function(f){b.setPinState(a,d(this),c,g.isSliding||g.isClosed);g.isSliding||g.isClosed?a.open(c):a.close(c);f.stopPropagation()});b.setPinState(a,f,c,!g.isClosed&&!g.isSliding);g.pins.push(j)}return a},setPinState:function(a,d,c,b){var f=d.attr("pin");if(!(f&&b===(f=="down"))){var a=a.options[c],f=a.buttonClass+"-pin",g=f+"-"+c,c=f+"-up "+g+"-up",f=f+"-down "+g+"-down";d.attr("pin",b?"down":"up").attr("title",b?a.tips.Unpin:
a.tips.Pin).removeClass(b?c:f).addClass(b?f:c)}},syncPinBtns:function(a,j,c){d.each(a.state[j].pins,function(b,f){d.layout.buttons.setPinState(a,d(f),j,c)})},_load:function(a){var j=d.layout.buttons;d.extend(a,{bindButton:function(b,c,d){return j.bind(a,b,c,d)},addToggleBtn:function(b,c,d){return j.addToggle(a,b,c,d)},addOpenBtn:function(b,c,d){return j.addOpen(a,b,c,d)},addCloseBtn:function(b,c){return j.addClose(a,b,c)},addPinBtn:function(b,c){return j.addPin(a,b,c)}});for(var c=0;c<4;c++)a.state[d.layout.config.borderPanes[c]].pins=
[];a.options.autoBindCustomButtons&&j.init(a)},_unload:function(){}};d.layout.onLoad.push(d.layout.buttons._load);d.layout.plugins.browserZoom=!0;d.layout.defaults.browserZoomCheckInterval=1E3;d.layout.optionsMap.layout.push("browserZoomCheckInterval");d.layout.browserZoom={_init:function(a){d.layout.browserZoom.ratio()!==false&&d.layout.browserZoom._setTimer(a)},_setTimer:function(a){if(!a.destroyed){var j=a.options,c=a.state,b=a.hasParentLayout?5E3:Math.max(j.browserZoomCheckInterval,100);setTimeout(function(){if(!a.destroyed&&
j.resizeWithWindow){var b=d.layout.browserZoom.ratio();if(b!==c.browserZoom){c.browserZoom=b;a.resizeAll()}d.layout.browserZoom._setTimer(a)}},b)}},ratio:function(){function a(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var j=window,c=screen,b=document,f=b.documentElement||b.body,g=d.layout.browser,k=g.version,l,e,m;return g.msie&&k>8||!g.msie?false:c.deviceXDPI&&c.systemXDPI?a(c.deviceXDPI,c.systemXDPI):g.webkit&&(l=b.body.getBoundingClientRect)?a(l.left-l.right,b.body.offsetWidth):
g.webkit&&(e=j.outerWidth)?a(e,j.innerWidth):(e=c.width)&&(m=f.clientWidth)?a(e,m):false}};d.layout.onReady.push(d.layout.browserZoom._init)})(m)});define("RepositoryBrowser",["jquery","Class","PubSub","repository-browser-i18n-"+(window&&window.__DEPS__&&window.__DEPS__.lang||"en"),"jstree","jqgrid","jquery-layout"],function(m,d,a,j){function c(a){a.each(function(){g(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=
function(){return!1}})})}function b(a,b){a._cachedRepositoryObjects[b.uid]=b}function f(a,c){var d=++e,g=!1===a.hasMoreItems||"folder"!==a.baseType?null:"closed",j=null;if(a.children){var g="open",j=[],k,l;for(k=0;k<a.children.length;k++)l=f(a.children[k],c),j.push(l),b(c,l.resource)}k=m.extend(a,{uid:d,loaded:!1});l={rel:a.type,"data-repo-obj":d};var q=a.name,x;a:switch(a.baseType){case "folder":x="folder";break a;case "document":x="document";break a;default:x=""}return{state:g,resource:k,children:j,
attr:l,data:{title:q,icon:x,attr:{"data-repo-obj":d}}}}var g=m,k=[],l=0,e=(new Date).getTime(),q={repositoryManager:null,repositoryFilter:[],objectTypeFilter:[],renditionFilter:["cmis:none"],filter:["url"],element:null,isFloating:!1,verticalPadding:100,horizontalPadding:50,maxHeight:1E3,minHeight:400,minWidth:400,maxWidth:1200,treeWidth:300,listWidth:"auto",pageSize:8,adaptPageSize:!1,rowHeight:32,rootPath:"",rootFolderId:"aloha",columns:{icon:{title:"",width:30,sortable:!1,resizable:!1},name:{title:"Name",
width:200,sorttype:"text"},url:{title:"URL",width:220,sorttype:"text"},preview:{title:"Preview",width:150,sorttype:"text"}},i18n:{Browsing:"Browsing",Close:"Close","in":"in","Input search text...":"Input search text...",numerous:"numerous",of:"of","Repository Browser":"Repository Browser",Search:"Search","Searching for":"Searching for",Viewing:"Viewing"}};return d.extend({_cachedRepositoryObjects:{},_searchQuery:null,_orderBy:null,_prefilledValue:null,$_grid:null,$_tree:null,$_list:null,_isOpened:!0,
_constructor:function(){this.init.apply(this,arguments)},init:function(b){b=g.extend({},q,b,{i18n:j});if(!b.element||0===b.element.length)b.isFloating=!0,b.element=this._createOverlay();b.maxWidth<b.minWidth&&(b.maxWidth=b.minWidth);g.extend(this,b);this._prefilledValue=this._i18n("Input search text...");this._cachedRepositoryObjects={};this._pagingCount=this._orderBy=this._searchQuery=null;this._pagingOffset=0;this._pagingBtns={first:null,end:null,next:null,prev:null};this._initializeUI();k.push(this);
a.pub("repository-browser.initialized",{data:this})},_i18n:function(a){return this.i18n[a]||a},_initializeUI:function(){this.element.attr("data-repository-browser",++e);this.element.width(this.maxWidth);this.$_grid=this._createGrid(this.element).resize();this._setInitialHeight();this.$_tree=this._createTree(this.$_grid.find(".ui-layout-west"));this.$_list=this._createList(this.$_grid.find(".ui-layout-center"));var a=this,b=this.treeWidth/5;this.$_grid.layout({enableCursorHotkey:!1,west__size:this.treeWidth-
1,west__minSize:this.treeWidth-b,west__maxSize:this.treeWidth+b,center__size:"auto",paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",onresize:function(b,c){"center"===b&&a.$_list.setGridWidth(c.width())}}).sizePane("west",this.treeWidth);c(this.$_grid);this._preloadImages();g(function(){g(window).resize(function(){a._onWindowResized()})});this.element.mousedown(function(){g.each(k,function(a){this.element.css("z-index",99999+a)});g(this).css("z-index",99999+
k.length+1)});g(".repository-browser-grid").css("width",this.maxWidth);this.close();this._adaptPageSize()},_setInitialHeight:function(){var a=this.maxHeight-g(window).height()+this.verticalPadding;this.$_grid.height(0<a?Math.max(this.minHeight,this.maxHeight-a):this.maxHeight)},_onWindowResized:function(){var a=this.maxWidth-g(window).width()+this.horizontalPadding,a=0<a?Math.max(this.minWidth,this.maxWidth-a):this.maxWidth;this.element.width(a);this.$_grid.width(a);this._setInitialHeight();a=this.$_grid.find(".repository-browser-tree-header");
this.$_tree.height(this.$_grid.height()-a.outerHeight(!0));a=this.$_grid.find(".ui-layout-center");a.find(".ui-jqgrid-bdiv").height(this.$_grid.height()-(a.find(".ui-jqgrid-titlebar").height()+a.find(".ui-jqgrid-hdiv").height()+a.find(".ui-jqgrid-pager").height()));this._adaptPageSize()&&this._currentFolder&&this._fetchItems(this._currentFolder)},_preloadImages:function(){for(var a=this.rootPath+"img/",b="arrow-000-medium.png arrow-180.png arrow-315-medium.png arrow-stop-180.png arrow-stop.png arrow.png control-stop-square-small.png folder-horizontal-open.png folder-open.png magnifier-left.png page.png picture.png sort-alphabet-descending.png sort-alphabet.png".split(" "),
c=b.length;c;)document.createElement("img").src=a+b[--c]},_processRepoResponse:function(a,c,d){"function"===typeof c&&(d=c,c=void 0);var e=this,g=[],j=e._currentFolder&&e._currentFolder.id,k=null,l,m;for(m=0;m<a.length;m++)l=f(a[m],e),g.push(l),b(e,l.resource),j===l.resource.id&&(k=l.resource);d(g,c);k&&window.setTimeout(function(){e.$_tree.jstree("select_node",'li[data-repo-obj="'+k.uid+'"]')},0)},_fetchRepoRoot:function(a){this._currentFolder||(this._currentFolder=this.getSelectedFolder());this.repositoryManager&&
this.getRepoChildren({inFolderId:this.rootFolderId,repositoryFilter:this.repositoryFilter},a)},_getObjectFromCache:function(a){return a&&a.length?this._cachedRepositoryObjects[a.find("a:first").attr("data-repo-obj")]:null},_onTreeNodeSelected:function(a,b){if(!b.args[0].context){var c;if(c=this._cachedRepositoryObjects[b.rslt.obj.find("a:first").attr("data-repo-obj")])this._pagingOffset=0,this._currentFolder=c,this._clearSearch(),this._fetchItems(c),this.folderSelected(c)}},_createTree:function(a){var b=
g('<div class="repository-browser-tree">'),c=g('<div class="repository-browser-tree-header repository-browser-grab-handle">'+this._i18n("Repository Browser")+"</div>");a.append(c,b);b.height(this.$_grid.height()-c.outerHeight(!0));b.bind("loaded.jstree",function(){m(this).find(">ul>li:first").css("padding-top",5);m(this).find('li[rel="repository"]:first').each(function(a,c){b.jstree("open_node",c)})});var d=this;b.bind("select_node.jstree",function(a,b){d._onTreeNodeSelected(a,b)});b.bind("open_node.jstree",
function(a,b){d.folderOpened(b.rslt.obj)});b.bind("close_node.jstree",function(a,b){d.folderClosed(b.rslt.obj)});b.jstree({types:this.types,rootFolderId:this.rootFolderId,plugins:["themes","json_data","ui","types"],core:{animation:250},themes:{url:this.rootPath+"css/jstree.css",dots:!0,icons:!0,theme:"browser"},json_data:{data:function(a,b){d.repositoryManager?(d.jstree_callback=b,d._fetchSubnodes(a,b)):b()},correct_state:!0},ui:{select_limit:1}});return b},_createGrid:function(a){var b=g('<div class="repository-browser-grid\t\t\t\t             repository-browser-shadow\t\t\t\t\t\t\t repository-browser-rounded-top">\t\t\t\t\t<div class="ui-layout-west"></div>\t\t\t\t\t<div class="ui-layout-center"></div>\t\t\t\t</div>');
a.append(b);return b},_createList:function(a){var b=g('<table id="repository-browser-list-'+ ++e+'" class="repository-browser-list"></table>'),c=[{name:"id",sorttype:"int",firstsortorder:"asc",hidden:!0}],d=[""];g.each(this.columns,function(a,b){d.push(b.title||"&nbsp;");c.push({name:a,width:b.width,sortable:b.sortable,sorttype:b.sorttype,resizable:b.resizable,fixed:b.fixed})});var f="repository-browser-list-page-"+ ++e;a.append(b,g('<div id="'+f+'">'));b.jqGrid({datatype:"local",width:a.width(),
shrinkToFit:!0,colNames:d,colModel:c,caption:"&nbsp;",altRows:!0,altclass:"repository-browser-list-altrow",resizeclass:"repository-browser-list-resizable",pager:"#"+f,viewrecords:!0,onPaging:function(){},loadError:function(){},ondblClickRow:function(){},gridComplete:function(){},loadComplete:function(){}});a.find(".ui-jqgrid-bdiv").height(this.$_grid.height()-(a.find(".ui-jqgrid-titlebar").height()+a.find(".ui-jqgrid-hdiv").height()+a.find(".ui-jqgrid-pager").height()));var j=this;b.click(function(){j.rowClicked.apply(j,
arguments)});a.find(".ui-pg-button").unbind().find(">span.ui-icon").each(function(){var a=this.className.match(/ui\-icon\-seek\-([a-z]+)/)[1];j._pagingBtns[a]=g(this).parent().addClass("ui-state-disabled").click(function(){g(this).hasClass("ui-state-disabled")||j._doPaging(a)})});a.find(".ui-pg-input").parent().hide();a.find(".ui-separator").parent().css("opacity",0).first().hide();this._createTitlebar(a);var k=b[0].p;a.find(".ui-jqgrid-view tr:first th div").each(function(a){!1!==k.colModel[a].sortable&&
(g(this).css("cursor","pointer"),g(this).unbind().click(function(b){b.stopPropagation();j._sortList(k.colModel[a],this)}))});return b},_clearSearch:function(){this.$_grid.find(".repository-browser-search-field").val(this._prefilledValue).addClass("repository-browser-search-field-empty");this._searchQuery=null},_createTitlebar:function(a){var a=a.find(".ui-jqgrid-titlebar"),b=g('<div class="repository-browser-btns">\t\t\t\t\t<input type="text" class="repository-browser-search-field" />\t\t\t\t\t<span class="repository-browser-btn repository-browser-search-btn">\t\t\t\t\t\t<span class="repository-browser-search-icon"></span>\t\t\t\t\t</span>\t\t\t\t\t<span class="repository-browser-btn repository-browser-close-btn">'+
this._i18n("Close")+'</span>\t\t\t\t\t<div class="repository-browser-clear"></div>\t\t\t\t</div>'),c=this;a.addClass("repository-browser-grab-handle").append(b);a.find(".repository-browser-search-btn").html(this._i18n("Search")).click(function(){c._triggerSearch()});b=a.find(".repository-browser-search-field");this._clearSearch();b.keypress(function(a){13===a.keyCode&&c._triggerSearch()});b.focus(function(){g(this).val()===c._prefilledValue&&g(this).val("").removeClass("repository-browser-search-field-empty")});
b.blur(function(){""===g(this).val()&&c._clearSearch()});a.find(".repository-browser-close-btn").click(function(){c.close()});a.find(".repository-browser-btn").mousedown(function(){g(this).addClass("repository-browser-pressed")}).mouseup(function(){g(this).removeClass("repository-browser-pressed")})},_triggerSearch:function(){var a=this.$_grid.find("input.repository-browser-search-field"),b=a.val();if(g(a).hasClass("aloha-browser-search-field-empty")||""===b)b=null;this._pagingOffset=0;this._searchQuery=
b;this._fetchItems(this._currentFolder)},_sortList:function(a,b){this.$_grid.find("span.ui-grid-ico-sort").addClass("ui-state-disabled");a.sortorder="asc"===a.sortorder?"desc":"asc";g(b).find("span.s-ico").show().find(".ui-icon-"+a.sortorder).removeClass("ui-state-disabled");this._setSortOrder(a.name,a.sortorder);this._fetchItems(this._currentFolder)},_doPaging:function(a){switch(a){case "first":this._pagingOffset=0;break;case "end":this._pagingOffset=0===this._pagingCount%this.pageSize?this._pagingCount-
this.pageSize:this._pagingCount-this._pagingCount%this.pageSize;break;case "next":this._pagingOffset+=this.pageSize;break;case "prev":this._pagingOffset-=this.pageSize,0>this._pagingOffset&&(this._pagingOffset=0)}this._fetchItems(this._currentFolder)},_setSortOrder:function(a,b){var c={},d=!1,e=this._orderBy||[],f,g,j;c[a]=b||"asc";for(j=0;j<e.length;++j){f=e[j];for(g in f)if(f.hasOwnProperty(g)&&g===a){e.splice(j,1);e.unshift(c);d=!0;break}if(d)break}d&&e.unshift(c);this._orderBy=e},_listItems:function(a){var b=
this.$_list.clearGridData(),c,d;for(c=0;c<a.length;c++)d=a[c].resource,b.addRowData(d.uid,g.extend({id:d.id},this.renderRowCols(d)))},handleTimeout:function(){},_processItems:function(a,b){this._pagingCount=b&&g.isNumeric(b.numItems)?b.numItems:null;this.$_grid.find(".loading").hide();this.$_list.show();this._listItems(a);var c=this._pagingBtns;0>=this._pagingOffset?c.first.add(c.prev).addClass("ui-state-disabled"):c.first.add(c.prev).removeClass("ui-state-disabled");g.isNumeric(this._pagingCount)?
this._pagingOffset+this.pageSize>=this._pagingCount?c.end.add(c.next).addClass("ui-state-disabled"):c.end.add(c.next).removeClass("ui-state-disabled"):(c.end.addClass("ui-state-disabled"),a.length<=this.pageSize?c.next.addClass("ui-state-disabled"):c.next.removeClass("ui-state-disabled"));var d;0===a.length&&0===this._pagingOffset?d=c=0:(c=this._pagingOffset+1,d=c+a.length-1);this.$_grid.find(".ui-paging-info").html(this._i18n("Viewing")+" "+c+" - "+d+" "+this._i18n("of")+" "+(g.isNumeric(this._pagingCount)?
this._pagingCount:this._i18n("numerous")));b&&b.timeout&&this.handleTimeout()},_createOverlay:function(){0===g(".repository-browser-modal-overlay").length&&g("body").append('<div class="repository-browser-modal-overlay" style="top: -99999px; z-index: 99999;"></div>');var a=this;g(".repository-browser-modal-overlay").click(function(){a.close()});var b=g('<div class="repository-browser-modal-window" style="top: -99999px; z-index: 99999;">');g("body").append(b);return b},_fetchSubnodes:function(a,b){if(-1===
a)this._fetchRepoRoot(b);else{var c;for(c=0;c<a.length;c++){var d=this._getObjectFromCache(a.eq(c));d&&this.fetchChildren(d,b)}}},getRepoChildren:function(a,b){if(this.repositoryManager){var c=this;this.repositoryManager.getChildren(a,function(a){c._processRepoResponse(a,b)})}},queryRepository:function(a,b){if(this.repositoryManager){var c=this;this.repositoryManager.query(a,function(a){c._processRepoResponse(0<a.results?a.items:[],{numItems:a.numItems,hasMoreItems:a.hasMoreItems,timeout:a.timeout},
b)})}},renderRowCols:function(a){var b={};g.each(this.columns,function(c){switch(c){case "icon":b.icon='<div class="repository-browser-icon repository-browser-icon-'+a.type+'"></div>';break;default:b[c]=a[c]||"--"}});return b},onSelect:function(){},fetchChildren:function(a,b){if((!0===a.hasMoreItems||"folder"===a.baseType)&&!1===a.loaded){var c=this;this.getRepoChildren({inFolderId:a.id,repositoryId:a.repositoryId},function(d){c._cachedRepositoryObjects[a.uid].loaded=!0;"function"===typeof b&&b(d)})}},
rowClicked:function(a){a=g(a.target).parent("tr");return a.length?(a=this._cachedRepositoryObjects[a.attr("id")],this.onSelect(a),a):null},getFieldOfHeader:function(a){return a.find("div.ui-jqgrid-sortable").attr("id").replace("jqgh_","")},_fetchItems:function(a){if(a){var b="string"===typeof this._searchQuery;this.$_list.setCaption("string"===typeof this._searchQuery?this._i18n("Searching for")+' "'+this._searchQuery+'" '+this._i18n("in")+" "+a.name:this._i18n("Browsing")+": "+a.name);this.$_list.hide();
this.$_grid.find(".loading").show();var c=this;this.queryRepository({repositoryId:a.repositoryId,inFolderId:a.id,queryString:this._searchQuery,orderBy:this._orderBy,skipCount:this._pagingOffset,maxItems:this.pageSize,objectTypeFilter:this.objectTypeFilter,renditionFilter:this.renditionFilter,filter:this.filter,recursive:b},function(a,b){c._processItems(a,b)})}},setObjectTypeFilter:function(a){this.objectTypeFilter="string"===typeof a?[a]:a},getObjectTypeFilter:function(){return this.objectTypeFilter},
show:function(){this.open()},open:function(){if(!this._isOpened){this._isOpened=!0;var a=this.element;this.isFloating?(g(".repository-browser-modal-overlay").stop().css({top:0,left:0}).show(),a.stop().show(),this._onWindowResized(),this.$_grid.resize(),g(window),a.css({left:this.horizontalPadding/2,top:this.verticalPadding/2}).draggable({handle:a.find(".repository-browser-grab-handle")}),this.$_grid.css({marginTop:0,opacity:0}).animate({marginTop:0,opacity:1},1500,"easeOutExpo",function(){g.browser.msie&&
g(this).add(a).css("filter","progid:DXImageTransform.Microsoft.gradient(enabled=false)")})):(a.stop().show().css({opacity:1,filter:"progid:DXImageTransform.Microsoft.gradient(enabled=false)"}),this._onWindowResized(),this.$_grid.resize());++l}},close:function(){this._isOpened&&(this._isOpened=!1,this.element.fadeOut(250,function(){g(this).css("top",0).hide();(0===l||0===--l)&&g(".repository-browser-modal-overlay").hide()}))},refresh:function(){this._currentFolder&&this._fetchItems(this._currentFolder)},
folderOpened:function(a){(a=this._cachedRepositoryObjects[a.find("a:first").attr("data-repo-obj")])&&this.repositoryManager.folderOpened(a)},folderClosed:function(a){(a=this._getObjectFromCache(a))&&this.repositoryManager&&this.repositoryManager.folderClosed(a)},folderSelected:function(a){this.repositoryManager&&this.repositoryManager.folderSelected(a)},getSelectedFolder:function(){if(this.repositoryManager&&"function"===typeof this.repositoryManager.getSelectedFolder)return this.repositoryManager.getSelectedFolder()},
_adaptPageSize:function(){var a;if(!this.adaptPageSize||!this.$_list||!this.rowHeight)return!1;if(a=this.$_grid.find(".ui-jqgrid-bdiv").innerHeight()-20)if(a=Math.floor(a/this.rowHeight),0>=a&&(a=1),a!==this.pageSize)return this.pageSize=a,!0;return!1}})});define("repository-browser-i18n-de",[],function(){return{Browsing:"Durchsuchen",Close:"Schließen","in":"in","Input search text...":"Suchtext einfügen...",numerous:"zahlreiche",of:"von","Repository Browser":"Repository Browser",Search:"Suchen","Searching for":"Suche nach",
Viewing:"Anzeige","button.switch-metaview.tooltip":"Zwischen Metaansicht und normaler Ansicht umschalten"}});define("repository-browser-i18n-en",[],function(){return{Browsing:"Browsing",Close:"Close","in":"in","Input search text...":"Input search text...",numerous:"numerous",of:"of","Repository Browser":"Repository Browser",Search:"Search","Searching for":"Searching for",Viewing:"Viewing","button.switch-metaview.tooltip":"Switch between meta and normal view"}});define("linkbrowser/nls/i18n",{root:{"button.addlink.tooltip":"Insert Link",
"button.removelink.tooltip":"Remove Link","newlink.defaulttext":"New Link","floatingmenu.tab.link":"Link"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("linkbrowser/linkbrowser-plugin","aloha jquery aloha/plugin aloha/pluginmanager ui/ui ui/button link/link-plugin RepositoryBrowser i18n!linkbrowser/nls/i18n i18n!aloha/nls/i18n".split(" "),function(m,d,a,j,c,b,f,g,k){var l=g.extend({init:function(a){this._super(a);var d=this;this._linkBrowserButton=c.adopt("linkBrowser",b,{tooltip:k.t("button.addlink.tooltip"),
icon:"aloha-icon-tree",scope:"Aloha.continuoustext",click:function(){d.show()}});this._linkBrowserButton.hide();this.url=m.getAlohaUrl()+"/../plugins/extra/linkbrowser/";m.bind("aloha-link-selected",function(){d._linkBrowserButton.show()});m.bind("aloha-link-unselected",function(){d._linkBrowserButton.hide()})},onSelect:function(a){f.hrefField.setItem(a);var b=m.Selection.getRangeObject(),c=b.startContainer=b.endContainer,d=b.startOffset=b.endOffset;b.select();b.startContainer=b.endContainer=c;b.startOffset=
b.endOffset=d;b.select();m.trigger("aloha-link-selected-in-linkbrowser",a);this.close()},renderRowCols:function(a){var b={},c=this.url;a.id.match(/(\d+)\./);d.each(this.columns,function(d){switch(d){case "icon":b.icon='<div class="aloha-browser-icon\t\t\t\t\t\taloha-browser-icon-__page__"></div>';break;case "translations":if(!a.renditions)break;for(var d=a.renditions,f=d.length,g=[],j;f>0;--f){j=d[f];j.kind=="translation"&&g.push('<img src="'+c+"img/flags/"+j.language+'.png"\t\t\t\t\t\t\t\t\t  alt="'+
j.language+'"\t\t\t\t\t\t\t\t\t  title="'+j.filename+'" />')}b.translations=g.join("");break;case "language":b.language=a.language;break;default:b[d]=a[d]||"--"}});return b}});return a.create("linkbrowser",{dependencies:["link"],browser:null,init:function(){this.browser=new l({repositoryManager:m.RepositoryManager,repositoryFilter:[],objectTypeFilter:["website","file","image","language"],renditionFilter:["*"],filter:["language"],columns:{icon:{title:"",width:30,sortable:false,resizable:false},name:{title:"Name",
width:320,sorttype:"text"},language:{title:"",width:30,sorttype:"text"},translations:{title:"",width:350,sorttype:"text"}},rootPath:m.settings.baseUrl+"/vendor/repository-browser/"})}})});define("imagebrowser/nls/i18n",{root:{"button.addimage.tooltip":"Insert Image","button.removeimage.tooltip":"Remove Image","newimage.defaulttext":"New Image","floatingmenu.tab.img":"Image"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("imagebrowser/imagebrowser-plugin","aloha jquery aloha/plugin aloha/pluginmanager ui/ui ui/button image/image-plugin RepositoryBrowser i18n!imagebrowser/nls/i18n i18n!aloha/nls/i18n".split(" "),
function(m,d,a,j,c,b,f,g,k){var l=g.extend({init:function(a){this._super(a);var d=this;this._imageBrowserButton=c.adopt("imageBrowser",b,{tooltip:k.t("button.addimage.tooltip"),icon:"aloha-icon-tree",scope:"Aloha.continuoustext","class":"aloha-imagebrowser-button",click:function(){d.open()}});this._imageBrowserButton.show(false);this.url=m.getAlohaUrl()+"/../plugins/extra/imagebrowser/";m.bind("aloha-image-selected",function(){d._imageBrowserButton.show(true)});m.bind("aloha-image-unselected",function(){d._imageBrowserButton.show(false)})},
onSelect:function(a){if(a.type.match("image")!==null){f.ui.imgSrcField.setItem(a);f.resetSize();this.close()}},listItems:function(a){var b=this,c=this.list.clearGridData();d.each(a,function(){var a=this.resource;a.type.match("image")!==null&&c.addRowData(a.uid,d.extend({id:a.id},b.renderRowCols(a)))})},renderRowCols:function(a){var b={};a.id.match(/(\d+)\./);d.each(this.columns,function(c){switch(c){case "icon":if(!a.renditions)break;if(a.renditions.length===1&&a.renditions[0].kind==="thumbnail")b.icon=
'<img width="'+a.renditions[0].width+'" height="'+a.renditions[0].height+' " src="'+a.renditions[0].url+'"/>';break;default:b[c]=a[c]||"--"}});return b}});return a.create("imagebrowser",{dependencies:["image"],browser:null,init:function(){this.browser=new l({repositoryManager:m.RepositoryManager,repositoryFilter:[],objectTypeFilter:["image"],renditionFilter:["*"],filter:["language"],columns:{icon:{title:"",width:75,sortable:false,resizable:false},name:{title:"Name",width:320,sorttype:"text"}},rootPath:m.settings.baseUrl+
"/vendor/repository-browser/"})}})});define("ui/menuButton",["jquery","ui/component","ui/utils","jqueryui"],function(m,d,a){function j(b,d){var f=[];m.each(d,function(d,k){var n=m("<li>");n.append(m("<a>",{href:"javascript:void 0",html:a.makeButtonLabelWithIcon(k)}));k.click&&n.data("aloha-ui-menubutton-select",function(){b();k.click()});if(k.menu){var p=m("<ul>").appendTo(n);p.append(j(c(p,b),k.menu))}f.push(n[0])});return f}function c(a,b){b=b||m.noop;return function(){a.blur().hide();a.parent().removeClass("aloha-ui-menubutton-pressed");
b()}}function b(a,b){var c=b.item.data("aloha-ui-menubutton-select");c&&c(a,b);a.preventDefault()}var f=d.extend({init:function(){this.element=f.makeMenuButton(this)}});f.makeMenuButton=function(d){function f(a){a.hide().parent().removeClass("aloha-ui-menubutton-pressed")}var l=m("<div>",{"class":"aloha-ui-menubutton-container"}),e=a.makeButtonElement({"class":"aloha-ui-menubutton-expand"}),q=m("<ul>",{"class":"aloha-ui-menubutton-menu"}),n=null,p=null;m.browser.msie&&l.addClass("aloha-ui-menubutton-iehack");
d.click?(n=a.makeButton(a.makeButtonElement({"class":"aloha-ui-menubutton-action"}),d).click(d.click),a.makeButton(e,{},!0),p=m("<div>").buttonset().append(n).append(e)):a.makeButton(e,d,!0).addClass("aloha-ui-menubutton-single");if(!d.menu)return l.append(n);e.click(function(){l.addClass("aloha-ui-menubutton-pressed");d.siblingContainer&&d.siblingContainer.find(".aloha-ui-menubutton-menu").each(function(){this!==q[0]&&f(m(this))});if(q.is(":visible"))f(q);else{q.show().position({my:"left top",at:"left bottom",
of:n||e});m(document).bind("click",function(a){m(this).unbind(a);q.hide();l.removeClass("aloha-ui-menubutton-pressed")});return false}});l.append(p||e).append(q);q.append(j(c(q),d.menu));q.hide().menu({select:b});return l};return f});define("ribbon/ribbon-plugin",["jquery","aloha/plugin","ui/menuButton","ui/utils","jqueryui"],function(m,d,a,j){return d.create("ribbon",{init:function(){if(this.settings.enable||"undefined"===typeof this.settings.enable){var a=this;this._visible=!1;this._toolbar=m("<div>",
{"class":"aloha-ribbon-toolbar ui-menubar ui-widget-header ui-helper-clearfix"});var b=j.makeButtonElement({"class":"aloha-ribbon-in"}).button().hide().click(function(){a._toolbar.animate({left:0});m("body").animate({paddingTop:30});b.hide()}).appendTo(this._toolbar);j.makeButtonElement({"class":"aloha-ribbon-out"}).button().click(function(){a._toolbar.animate({left:-a._toolbar.outerWidth()+b.outerWidth()+10});m("body").animate({paddingTop:0});b.show()}).appendTo(this._toolbar);var d=m("<div>",{"class":"aloha aloha-ribbon"}).appendTo("body");
this._icon=m("<div>").prependTo(this._toolbar);this.setIcon("");this._toolbar.appendTo(d);m("body").css({position:"relative",paddingTop:30})}},setIcon:function(a){this._icon&&this._icon.attr("class","aloha-ribbon-icon "+a)},addButton:function(c){this._toolbar&&(c=m.extend({},c,{siblingContainer:this._toolbar}),this._toolbar.append(a.makeMenuButton(c)))},hide:function(){this._toolbar&&(this._toolbar.hide(),this._visible=!1)},show:function(){this._toolbar&&(this._toolbar.show(),this._visible=!0)},isVisible:function(){return this._visible}})});
define("wai-lang/nls/i18n",{root:{"floatingmenu.tab.wai-lang":"Language annotation","button.add-wai-lang-remove.tooltip":"Remove language annotation","button.add-wai-lang.tooltip":"Add language annotation"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("wai-lang/languages",["aloha","jquery","flag-icons/flag-icons-plugin","aloha/console","wai-lang/wai-lang-plugin"],function(m,d,a,j){var c=d.Deferred();return new (m.AbstractRepository.extend({languageCodes:[],locale:"de",iso:"iso639-1",
flags:!1,_constructor:function(){this._super("wai-languages")},init:function(){var a=this,d=m.require("wai-lang/wai-lang-plugin"),g=d.iso639;"de"!==m.settings.locale&&(this.locale="en");"iso639-1"!==g&&(this.iso="iso639-2");this.flags=d.flags;this.repositoryName="WaiLanguages";m.require(["wai-lang/"+this.iso+"-"+this.locale],function(d){a.storeLanguageCodes(d);c.resolve()})},markObject:function(){},errorHandler:function(a){j.log("error",this,"Error while loading languages. "+a)},storeLanguageCodes:function(b){var c=
this,g=m.getPluginUrl("wai-lang");d.each(b,function(b,d){d.id=b;d.repositoryId=c.repositoryId;d.type="language";c.flags&&(d.url=d.flag?a.path+"/img/flags/"+d.flag+".png":g+"/img/button.png");c.languageCodes.push(new m.RepositoryDocument(d))})},_searchInLanguageCodes:function(a,c){var g=RegExp("^"+a.queryString,"i"),j,l=[],e,m,n;for(j=0;j<this.languageCodes.length;++j)n=this.languageCodes[j],e=!a.queryString||n.name.match(g),m=!a.objectTypeFilter||!a.objectTypeFilter.length||-1<d.inArray(n.type,a.objectTypeFilter),
e&&m&&l.push(n);c.call(this,l)},query:function(a,d){var g=this;c.done(function(){g._searchInLanguageCodes(a,d)})},getObjectById:function(a,c){var d,j;for(d=0;d<this.languageCodes.length;++d)if(j=this.languageCodes[d],j.id===a){c.call(this,[j]);break}}}))});define("wai-lang/wai-lang-plugin","aloha jquery PubSub aloha/plugin aloha/selection util/dom ui/ui ui/scopes ui/button ui/toggleButton ui/port-helper-attribute-field i18n!wai-lang/nls/i18n wai-lang/languages".split(" "),function(m,d,a,j,c,b,f,g,
k,l,e,q){function n(a){if(a){a.foreground();a.focus()}y.show();z.show()}function p(){var a=d(this);return a.hasClass(x)||a.is("[lang]")}function o(a){return m.activeEditable?a.findMarkup(p,m.activeEditable.obj):null}function r(a){a.isCollapsed()&&b.extendToWord(a);b.addMarkup(a,d('<span class="'+x+'"></span>'),false);a.select()}function s(a){var c=o(a);if(c){b.removeFromDOM(c,a,true);a.select()}}function v(){if(m.activeEditable){var a=c.getRangeObject();if(o(a))s(a);else{r(a);n(y)}}}function u(a){y=
e({name:"wailangfield",width:320,valueField:"id",minChars:1,scope:"Aloha.continuoustext"});a._wailangButton=f.adopt("wailang",l,{tooltip:q.t("button.add-wai-lang.tooltip"),icon:"aloha-icon aloha-icon-wai-lang",scope:"Aloha.continuoustext",click:v});z=f.adopt("removewailang",k,{tooltip:q.t("button.add-wai-lang-remove.tooltip"),icon:"aloha-icon aloha-icon-wai-lang-remove",scope:"Aloha.continuoustext",click:function(){s(c.getRangeObject())}});y.setTemplate(a.flags?'<div class="aloha-wai-lang-img-item"><img class="aloha-wai-lang-img" src="{url}" /><div class="aloha-wai-lang-label-item">{name} ({id})</div></div>':
'<div class="aloha-wai-lang-img-item"><div class="aloha-wai-lang-label-item">{name} ({id})</div></div>');y.setObjectTypeFilter(a.objectTypeFilter)}function t(b){a.sub("aloha.editable.activated",function(a){var a=a.data.editable,c=a.getId()+":"+b._instanceId;F[c]||(F[c]=b.getEditableConfig(a.obj));d.inArray("span",F[c])>-1?b._wailangButton.show():b._wailangButton.hide()});m.bind("aloha-selection-changed",function(a,c){var d=o(c);if(d){b._wailangButton.setState(true);y.setTargetObject(d,"lang");y.show();
z.show();g.enterScope(b.name,"wai-lang")}else{b._wailangButton.setState(false);y.setTargetObject(null);y.hide();z.hide();g.leaveScope(b.name,"wai-lang",true)}});y.addListener("blur",function(){this.getValue()||s(c.getRangeObject())});m.bind("aloha-editable-created",function(a,e){e.obj.bind("keydown",b.hotKey.insertAnnotation,function(){var a=c.getRangeObject();o(a)||r(a);n(y);return false});e.obj.find("span[lang]").each(function(){var a=d(this);a.addClass(x).attr("data-gentics-aloha-repository","wai-languages").attr("data-gentics-aloha-object-id",
a.attr("lang"))})})}var x="aloha-wai-lang",y=null,z=null,A=function(a){var b=0;return function(){return a+"-"+ ++b}}(),F={};return j.create("wai-lang",{config:["span"],iso639:"iso639-1",flags:false,objectTypeFilter:["language"],hotKey:{insertAnnotation:q.t("insertAnnotation","ctrl+shift+l")},init:function(){this._instanceId=A("wai-lang");if(this.settings.objectTypeFilter)this.objectTypeFilter=this.settings.objectTypeFilter;this.settings.hotKey&&d.extend(true,this.hotKey,this.settings.hotKey);if(this.settings.iso639)this.iso639=
this.settings.iso639;this.flags=true===this.settings.flags||1===this.settings.flags||"true"===this.settings.flags||"1"===this.settings.flags;u(this);t(this)},formatLanguageSpan:v,makeClean:function(a){a.find("span[lang]").each(function(){var a=d(this);a.removeClass(x).removeAttr("data-gentics-aloha-repository").removeAttr("data-gentics-aloha-object-id").attr("xml:lang",a.attr("lang"))})}})});define("headerids/nls/i18n",{root:{"headerids.label.target":"Target","headerids.button.reset":"Reset","headerids.button.set":"Set",
internal_hyperlink:"Internal Hyperlink"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("headerids/headerids-plugin","aloha jquery PubSub aloha/plugin util/html i18n!headerids/nls/i18n".split(" "),function(m,d,a,j,c,b){function f(){var a=[],b=l;k.each(arguments,function(){a.push("."+(this==""?b:b+"-"+this))});return d.trim(a.join(" "))}function g(){var a=[],b=l;k.each(arguments,function(){a.push(this==""?b:b+"-"+this)});return d.trim(a.join(" "))}var k=d,l="aloha-headerids";return j.create("headerids",
{_constructor:function(){this._super("headerids")},config:["true"],init:function(){var b=this,c=function(a){b.check(a.data.obj||a.data.editable.obj)};a.sub("aloha.editable.created",c);a.sub("aloha.editable.activated",c);a.sub("aloha.editable.deactivated",c);m.bind("aloha-plugins-loaded",function(){b.initSidebar(m.Sidebar.right)})},check:function(a){var b=this;k.inArray("true",b.getEditableConfig(a))>-1&&a.find("h1,h2,h3,h4,h5,h6").not(".aloha-customized,.aloha-editable,.aloha-block").each(function(a,
c){b.processH(c)})},processH:function(a){var b=a.id;if(!b){for(var a=k(a),c=b="heading_"+this.sanitize(a.text()),d=1;k("#"+b).length>0;)b=c+"_"+(++d).toString();a.attr("id",b)}return b},sanitize:function(a){return c.trimWhitespaceCharacters(a).replace(/[^a-z0-9]+/gi,"_")},initSidebar:function(a){var c=this;c.sidebar=a;a.addPanel({id:g("sidebar-panel"),title:b.t("internal_hyperlink"),content:"",expanded:true,activeOn:"h1, h2, h3, h4, h5, h6",onInit:function(){var a=this,e=this.setContent('<label class="'+
g("label")+'" for="'+g("input")+'">'+b.t("headerids.label.target")+'</label><input id="'+g("input")+'" class="'+g("input")+'" type="text" name="value"/> <button class="'+g("reset-button")+'">'+b.t("headerids.button.reset")+'</button><button class="'+g("set-button")+'">'+b.t("headerids.button.set")+"</button>").content;e.find(f("set-button")).click(function(){d(a.effective).attr("id",d(f("input")).val()).addClass("aloha-customized")});e.find(f("reset-button")).click(function(){c.processH(a.effective);
d(a.effective).removeClass("aloha-customized");a.content.find(f("input")).val(a.effective.attr("id"))})},onActivate:function(a){this.effective=a;this.content.find(f("input")).val(c.processH(a[0]))}});a.show()},makeClean:function(a){this.check(a)}})});define("metaview/nls/i18n",{root:{"button.switch-metaview.tooltip":"Switch between meta and normal view"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("metaview/metaview-plugin","jquery aloha/core aloha/plugin ui/ui ui/toggleButton i18n!metaview/nls/i18n i18n!aloha/nls/i18n".split(" "),
function(m,d,a,j,c,b){function f(a,b){a.addClass("aloha-metaview");b.setState(true);k[a[0].id]=true}function g(a,b){a.removeClass("aloha-metaview");b.setState(false);k[a[0].id]=false}var k={},l=j.adopt("toggleMetaView",c,{tooltip:b.t("button.switch-metaview.tooltip"),icon:"aloha-icon aloha-icon-metaview",scope:"Aloha.continuoustext",click:function(){var a=d.activeEditable.obj;k[a[0].id]?g(a,this):f(a,this)}});return a.create("metaview",{config:["metaview"],init:function(){var a=this;d.bind("aloha-editable-activated",
function(){var b=a.getEditableConfig(d.activeEditable.obj);if(m.type(b)==="array"&&m.inArray("enabled",b)!==-1){l.show(true);f(d.activeEditable.obj,l)}else if(m.type(b)==="array"&&m.inArray("metaview",b)!==-1){l.show(true);k[d.activeEditable.obj[0].id]?f(d.activeEditable.obj,l):g(d.activeEditable.obj,l)}else l.show(false)});d.bind("aloha-editable-deactivated",function(){d.activeEditable.obj.removeClass("aloha-metaview")})}})});define("listenforcer/listenforcer-plugin",["aloha","jquery","aloha/plugin",
"aloha/console"],function(m,d,a,j){function c(a,c){if(-1!==d.inArray(a[0],b)){a.find(".aloha-end-br").remove();var j=!1;a.find("li").each(function(){if(""!==d.trim(d(this).text()))return j=!0,!1});j||a.html(c);var l=a.find(">ul,>ol"),e=l.length,m;if(1<e){var n=d(l[0]);for(m=1;m<e;++m)n.append(d(l[m]).find(">li")),d(l[m]).remove()}a.find(">*:not(ul,ol)").remove()}}var b=[];return a.create("listenforcer",{_constructor:function(){this._super("listenforcer")},init:function(){var a=this,b=this.settings.editables||
[],k,l,e=b.length;for(l=0;l<e;l++)k=b[l],"string"===typeof k||k.nodeName||k instanceof d?d(k).each(function(){a.addEditableToEnforcementList(this)}):j.warn("Aloha List Enforcer Plugin",'Object "'+k.toString()+'" can not be used as a jQuery selector with which to register an editable to be list enforced.');m.bind("aloha-editable-activated",function(a,b){c(b.editable.obj,"<ul><li><br /></li></ul>")});m.bind("aloha-editable-deactivated",function(a,b){c(b.editable.obj,"")});m.bind("aloha-smart-content-changed",
function(a,b){m.activeEditable&&!0===m.activeEditable.isActive&&c(b.editable.obj,"<ul><li><br /></li></ul>")})},addEditableToEnforcementList:function(a){a&&b.push(a)}})});Aloha._load&&Aloha._load()})();